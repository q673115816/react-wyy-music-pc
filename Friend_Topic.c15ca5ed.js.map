{"version":3,"file":"Friend_Topic.c15ca5ed.js","mappings":"6OAAA,W,aAGA,WACA,W,aACA,S,aACA,WACA,W,8BAEe,IAAAA,OAAK,YAAY,IAATC,EAAS,EAATA,GACrB,GAA4B,IAAAC,UAAS,IAArC,qBAAOC,EAAP,KAAeC,EAAf,KACA,GAAsB,IAAAF,UAAS,IAA/B,qBAAOG,EAAP,KAAYC,EAAZ,KACA,GAAwB,IAAAJ,UAAS,IAAjC,qBAAOK,EAAP,KAAaC,EAAb,KACMC,GAAQ,IAAAC,QAAOT,GACfU,GAAY,IAAAD,UACZE,GAAc,IAAAF,UAEdG,EAAa,+CAAG,0HAEI,IAAAC,gBAAe,CACnCL,MAAOA,EAAMM,UAHG,uBAEVC,EAFU,EAEVA,IAFU,UAKI,IAAAC,aAAY,CAChCC,MAAO,KANS,gBAKVb,EALU,EAKVA,IAGRD,EAAUY,GACVV,EAAOD,GATW,kDAWlBc,QAAQC,IAAR,MAXkB,0DAAH,qDAcbC,EAAe,+CAAG,sHAEK,IAAAC,wBAAuB,CAC9Cb,MAAOA,EAAMM,UAHK,gBAEZQ,EAFY,EAEZA,OAGRf,EAAQe,GALY,gDAOpBJ,QAAQC,IAAR,MAPoB,yDAAH,qDAgBrB,OANA,aAAYC,EAAiBV,EAAWC,IACxC,IAAAY,YAAU,WACRf,EAAMM,QAAUd,EAChBO,EAAQ,IACRK,EAAcZ,KACb,CAACA,IAEF,+BAAKwB,UAAU,iCAAiCC,IAAKf,GACnD,+BAAKc,UAAU,iBACb,+BAAKA,UAAU,4BACb,+BAAKA,UAAU,aACb,+BAAKA,UAAU,YACb,+BACEA,UAAU,2FACVE,MAAO,CAAEC,OAAQ,IAAKC,gBAAiB,OAAF,OAAS1B,EAAO2B,WAAhB,OAErC,kCACEC,KAAK,SACLN,UAAU,uHAEV,wBAAC,EAAAO,UAAD,CAAWC,KAAM,GAAIC,OAAQ,KAE/B,+BAAKT,UAAU,sDACb,gCAAMA,UAAU,4CAAhB,WACOtB,EAAOgC,MADd,MAGA,gCAAMV,UAAU,gGAAhB,UACMtB,EAAOiC,iBADb,SAIF,kCAAQL,KAAK,SAASN,UAAU,8FAC9B,wBAAC,EAAAY,WAAD,CAAYJ,KAAM,KADpB,SAKF,+BAAKR,UAAU,QAAQtB,EAAOmC,OAEhC,wBAAC,UAAD,CAAYC,KAAMhC,IAClB,+BAAKmB,IAAKd,MAGd,+BAAKa,UAAU,4BAA4BE,MAAO,CAAEa,MAAO,MACzD,+BAAKf,UAAU,6BAAf,QACA,wBAAC,UAAD,CAAcc,KAAMlC","sources":["webpack://wyy/./src/pages/Friend/Topic.tsx"],"sourcesContent":["import React, {\n  memo, useEffect, useRef, useState,\n} from 'react';\nimport { apiTopicDetail, apiTopicDetailEventHot, apiHotTopic } from '@/api';\nimport useInfinite from '@/hooks/useInfinite';\nimport DomDynamic from '@/components/Dynamic';\nimport { IconShare, IconPencil } from '@tabler/icons';\nimport DomTopicList from './components/TopicList';\n\nexport default memo(({ id }) => {\n  const [detail, setDetail] = useState({});\n  const [hot, setHot] = useState([]);\n  const [data, setData] = useState([]);\n  const actid = useRef(id);\n  const DomScroll = useRef();\n  const DomObserver = useRef();\n\n  const handleInitHot = async () => {\n    try {\n      const { act } = await apiTopicDetail({\n        actid: actid.current,\n      });\n      const { hot } = await apiHotTopic({\n        limit: 10,\n      });\n      setDetail(act);\n      setHot(hot);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleInitEvent = async () => {\n    try {\n      const { events } = await apiTopicDetailEventHot({\n        actid: actid.current,\n      });\n      setData(events);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  useInfinite(handleInitEvent, DomScroll, DomObserver);\n  useEffect(() => {\n    actid.current = id;\n    setData([]);\n    handleInitHot(id);\n  }, [id]);\n  return (\n    <div className=\"domFriend h-full overflow-auto\" ref={DomScroll}>\n      <div className=\"flex divide-x\">\n        <div className=\"domFriend_left flex-auto\">\n          <div className=\"px-8 pt-4\">\n            <div className=\"border-b\">\n              <div\n                className=\"rounded overflow-hidden border bg-white flex-center flex-col relative bg-cover bg-center\"\n                style={{ height: 220, backgroundImage: `url(${detail.coverPCUrl})` }}\n              >\n                <button\n                  type=\"button\"\n                  className=\"absolute m-4 w-8 h-8 flex-center top-0 right-0 border text-white border-current rounded-full bg-black bg-opacity-50\"\n                >\n                  <IconShare size={24} stroke={1} />\n                </button>\n                <div className=\"relative border-t border-b py-6 text-white text-xl\">\n                  <span className=\"w-52 text-center whitespace-nowrap w-min\">\n                    {`#${detail.title}#`}\n                  </span>\n                  <span className=\"absolute inset-x-0 text-center text-xs whitespace-nowrap top-full transform -translate-y-1/2\">\n                    {`${detail.participateCount}人参与`}\n                  </span>\n                </div>\n                <button type=\"button\" className=\"bg-white flex-center h-9 mt-4 w-52 rounded text-red-500 bg-opacity-90 hover:bg-opacity-100\">\n                  <IconPencil size={16} />\n                  立即参与\n                </button>\n              </div>\n              <div className=\"pb-8\">{detail.text}</div>\n            </div>\n            <DomDynamic list={data} />\n            <div ref={DomObserver} />\n          </div>\n        </div>\n        <div className=\"domFriend_right flex-none\" style={{ width: 250 }}>\n          <div className=\"p-4 text-sm text-gray-700\">推荐话题</div>\n          <DomTopicList list={hot} />\n        </div>\n      </div>\n    </div>\n  );\n});\n"],"names":["memo","id","useState","detail","setDetail","hot","setHot","data","setData","actid","useRef","DomScroll","DomObserver","handleInitHot","apiTopicDetail","current","act","apiHotTopic","limit","console","log","handleInitEvent","apiTopicDetailEventHot","events","useEffect","className","ref","style","height","backgroundImage","coverPCUrl","type","IconShare","size","stroke","title","participateCount","IconPencil","text","list","width"],"sourceRoot":""}