{"version":3,"file":"Lrc.a6d768a0.js","mappings":"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","sources":["webpack://wyy/./src/pages/Lrc/components/Left.tsx","webpack://wyy/./src/pages/Lrc/components/Center.tsx","webpack://wyy/./src/pages/Lrc/components/Right.tsx","webpack://wyy/./src/pages/Lrc/Lrc.tsx"],"sourcesContent":["import React, {memo} from 'react'\nimport {\n  IconFolderPlus,\n  IconCloudDownload,\n  IconShare,\n} from '@tabler/icons';\nimport DomHeart from '@/components/Table/Heart';\nimport classNames from 'classnames';\nimport { useAppSelector} from '@/reducers/hooks'\n\nexport default memo(() => {\n  const { currentSong } = useAppSelector(({ audio }) => audio);\n  const { running } = useAppSelector(({ audio }) => audio);\n\n  return (\n  <div className=\"left\">\n    <div className=\"relative\">\n      <div\n        id=\"stylus\"\n        className=\"mt-16 mb-10 relative m-auto w-min duration-500 transition-transform z-10\"\n        style={running ? { transform: 'rotate(40deg)' } : {}}\n      >\n        <div className=\"point shadow relative transform -translate-y-1/2 rounded-full bg-gray-300 w-5 h-5 border-8 border-white bg-white\" style={{ zIndex: 2 }} />\n        <div\n          className=\"handle absolute top-0 left-1/2 shadow bg-white h-2 w-20 origin-top-left\"\n          style={{ transform: 'rotate(45deg) translate(0, -50%)', zIndex: 1 }}\n        >\n          <div\n            className=\" absolute left-full bg-white shadow w-12 h-2 origin-top-left\"\n            style={{ transform: 'rotate(-45deg) translate(-10%, 0)' }}\n          >\n            <div className=\"shadow w-4 h-4 absolute left-full -top-1 bg-white\" />\n          </div>\n        </div>\n      </div>\n      <div className=\" rounded-full bg-gray-300 p-2.5 w-64 h-64\">\n        <div className={classNames('flex-center rounded-full p-9', { on: running })} id=\"record\">\n          <img className=\"rounded-full border-8 border-black\" src={currentSong.al.picUrl} alt=\"\" />\n        </div>\n      </div>\n    </div>\n    <div className=\"flex mt-4 justify-between\">\n      <DomHeart\n        stroke=\"2\"\n          id={currentSong.id}\n        size={24}\n        className=\"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200\"\n      />\n      <button type=\"button\" className=\"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200\">\n        <IconFolderPlus size={24} stroke={1} />\n      </button>\n      <button type=\"button\" className=\"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200\">\n        <IconCloudDownload size={24} stroke={1} />\n      </button>\n      <button type=\"button\" className=\"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200\">\n        <IconShare size={24} stroke={1} />\n      </button>\n    </div>\n  </div>\n)})\n","import React, { memo, useEffect, useRef, useState } from 'react'\nimport { Link, useHistory } from 'react-router-dom';\nimport { useAppDispatch, useAppSelector } from '@/reducers/hooks'\nimport classnames from 'classnames'\n\nconst Lrc = memo(() => {\n  const {\n    currentTime,\n  } = useAppSelector(({ audio }) => audio);\n  const { lrcList } = useAppSelector(({ lrc }) => lrc);\n  const RefScroll = useRef(null);\n  const RefCurrentLine = useRef(null);\n  const [currentLineIndex, setCurrentLineIndex] = useState(0);\n\n  useEffect(() => {\n    setCurrentLineIndex(\n      lrcList\n        .findIndex(({ time }) => time > currentTime) - 1,\n    );\n  }, [currentTime]);\n\n  useEffect(() => {\n    RefScroll.current.scrollTop = 0;\n  }, [lrcList]);\n\n  useEffect(() => {\n    if (RefCurrentLine?.current) {\n      RefScroll.current.scrollTop = RefCurrentLine.current.offsetTop - (RefScroll.current.clientHeight / 2);\n    }\n  }, [currentLineIndex]);\n  return (\n    <div\n      style={{ scrollBehavior: 'smooth' }}\n      className=\"whitespace-pre-line select-text text-center text-gray-500 space-y-2 overflow-auto overscroll-contain h-full pt-36\"\n      ref={RefScroll}\n    >\n\n      {lrcList.length ? lrcList\n        .map(({ time, word }, index) => (\n          <div\n            ref={currentLineIndex === index ? RefCurrentLine : null}\n            key={time}\n            className={classnames('leading-5', currentLineIndex === index && 'font-bold text-black')}\n          >\n            {word.trim()}\n            &nbsp;\n          </div>\n        )) : <div>纯音乐，请您欣赏</div>}\n    </div>\n  );\n});\n\nexport default memo(() => {\n  const { currentSong } = useAppSelector(({ audio }) => audio);\n  return (\n    <div className=\"center overflow-auto pt-5\" style={{ width: 300 }}>\n      <div className=\"text-2xl text-center\">\n        {currentSong.name}\n      </div>\n      <div className=\"flex justify-center mt-2 whitespace-nowrap\">\n        <div className=\"truncate\">\n          {currentSong.ar.map((artist) => (\n            <Link key={artist.id} to={`/artist/${artist.id}`} className=\"ui_text_gray_hover\">\n              {artist.name}\n            </Link>\n          ))}\n        </div>\n        &nbsp;\n        -\n        &nbsp;\n        <div className=\"truncate\">\n          <Link to={`/playlist/album/${currentSong.al.id}`} className=\"ui_text_gray_hover\">\n            {currentSong.al.name}\n          </Link>\n        </div>\n      </div>\n      <div className=\"relative\">\n        <div className=\"relative mt-8\" style={{ height: 330 }}>\n          <Lrc />\n        </div>\n        <div className=\"absolute pointer-events-none left-0 right-0 top-0 h-6 bg-gradient-to-b from-white to-transparent\" />\n        <div className=\"absolute pointer-events-none left-0 right-0 bottom-0 h-6 bg-gradient-to-t from-white to-transparent\" />\n      </div>\n    </div>\n  )\n})\n","import React, { memo } from 'react'\nimport DomLoading from '@/components/Loading';\n\ninterface iSimiSong {\n  id: number\n  album: { picUrl: string },\n  name: string\n  alias: string\n  artists: { name: string }[]\n  [key: string]: any\n}\n\ninterface iRight {\n  simiSong: iSimiSong[],\n  loading: boolean\n}\n\nexport default memo<iRight>(({ simiSong = [], loading = false }) => {\n  return (\n    <div className=\"right flex-none mt-28 h-72 overflow-auto\" style={{ width: 244 }}>\n      {\n        loading\n          ? (\n            <div className=\"flex justify-center\">\n              <DomLoading />\n            </div>\n          )\n          : <div className=\"pb-4 relative\">\n            <div>播放来源：...</div>\n            <div className=\"font-bold py-3 text-sm\">包含这首歌的歌单</div>\n            <div>\n              { }\n            </div>\n            <div className=\"font-bold py-3 text-sm\">相似歌曲</div>\n            <div>\n              {simiSong.map((song) => (\n                <button\n                  key={song.id}\n                  type=\"button\"\n                  className=\"flex text-left w-full rounded hover:bg-gray-100 p-1.5 h-10\"\n                >\n                  <div className=\"rounded relative overflow-hidden\">\n                    <img src={`${song.album.picUrl}?param=30y30`} alt=\"\" />\n                  </div>\n                  <div className=\"w-0 flex-auto px-2 py-1 text-gray-600\">\n                    <div className=\"truncate\">\n                      {song.name}\n                      <span className=\"text-gray-500\">{song.alias}</span>\n                      &nbsp;\n                      -\n                      &nbsp;\n                      {song.artists.map((artist) => artist.name)}\n                    </div>\n                  </div>\n                </button>\n              ))}\n            </div>\n            <div className=\"absolute pointer-events-none left-0 right-0 bottom-0 h-16 bg-gradient-to-t from-white to-transparent\" />\n          </div>\n      }\n    </div>\n  )\n});\n","import React, {\n  memo, useEffect, useState,\n} from 'react';\nimport { apiCommentMusic, apiSimiSong } from '@/api';\nimport DomLoading from '@/components/Loading';\nimport DomPage from '@/components/Page';\nimport { useHistory } from 'react-router-dom';\n\nimport DomCommentsList from '@/components/CommentsList';\nimport './style.scss';\nimport { setLyricHide } from '@/reducers/lrc/slice';\nimport { useAppDispatch, useAppSelector } from '@/reducers/hooks'\nimport Left from './components/Left';\nimport Center from './components/Center'\nimport Right from './components/Right';\n\nexport default memo(() => {\n  const dispatch = useAppDispatch();\n  const { listen } = useHistory();\n  const { currentSong } = useAppSelector(({ audio }) => audio);\n  const { lyricVisibility } = useAppSelector(({ lrc }) => lrc);\n  const [loading, setLoading] = useState(true);\n  const [simiSong, setSimiSong] = useState([]);\n  const [comments, setComments] = useState({});\n  const [page, setPage] = useState(1);\n  const limit = 20;\n  const handleLeftInit = async () => {\n    try {\n      const comments = await apiCommentMusic({\n        id: currentSong.id,\n        limit,\n        offset: (page - 1) * limit,\n      });\n      setComments(comments);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleRightInit = async () => {\n    try {\n      const { songs } = await apiSimiSong({\n        id: currentSong.id,\n      });\n      setSimiSong(songs);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleInit = async () => {\n    await handleLeftInit();\n    await handleRightInit();\n    setLoading(false);\n  };\n  useEffect(() => {\n    if (!lyricVisibility) return;\n    if (loading) handleInit();\n    else handleLeftInit();\n  }, [lyricVisibility, page, currentSong.id]);\n  useEffect(() => {\n    const unlisten = listen((route) => {\n      dispatch(setLyricHide());\n    });\n    return unlisten;\n  }, []);\n\n  if (!lyricVisibility) return null;\n  return (\n    <div id=\"lrc\" className=\"absolute inset-x-0 z-10 overflow-hidden\">\n      <div className=\"w-full h-full bg-white overflow-auto transform\">\n        <div className=\"lrc_inner m-auto\" style={{ width: 888 }}>\n          <div className=\"lrc_header flex justify-between\">\n            <Left />\n            <Center />\n            <Right {...{ simiSong, loading }} />\n          </div>\n          <div className=\"lrc_main mt-14 flex justify-center\">\n            <div style={{ width: 556 }}>\n              {\n                loading\n                  ? (\n                    <div className=\"flex justify-center\">\n                      <DomLoading />\n                    </div>\n                  )\n                  : (\n                    <>\n                      <DomCommentsList comments={comments} more={currentSong.id} type=\"song\" />\n                      <DomPage\n                        total={Math.ceil(comments.total / limit)}\n                        page={page}\n                        func={setPage} />\n                    </>\n                  )\n              }\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n"],"names":["memo","currentSong","useAppSelector","audio","running","className","id","style","transform","zIndex","classNames","on","src","al","picUrl","alt","stroke","size","type","IconFolderPlus","IconCloudDownload","IconShare","Lrc","currentTime","lrcList","lrc","RefScroll","useRef","RefCurrentLine","useState","currentLineIndex","setCurrentLineIndex","useEffect","findIndex","time","current","scrollTop","offsetTop","clientHeight","scrollBehavior","ref","length","map","index","word","key","classnames","trim","width","name","ar","artist","Link","to","height","simiSong","loading","song","album","alias","artists","dispatch","useAppDispatch","listen","useHistory","lyricVisibility","setLoading","setSimiSong","comments","setComments","page","setPage","handleLeftInit","apiCommentMusic","limit","offset","console","log","handleRightInit","apiSimiSong","songs","handleInit","route","setLyricHide","Left","Center","Right","more","total","Math","ceil","func"],"sourceRoot":""}