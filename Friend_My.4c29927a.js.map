{"version":3,"file":"Friend_My.4c29927a.js","mappings":"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","sources":["webpack://wyy/./src/pages/Friend/My.tsx"],"sourcesContent":["import React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { apiHotTopic, apiEvent, apiCommentEvent } from '@/api';\n\nimport { IconPlus } from '@tabler/icons';\n\nimport { setLoginVisibilty } from '@/reducers/common/slice';\nimport './style.scss';\n\nimport DomGender from '@/components/Gender';\nimport useInfinite from '@/hooks/useInfinite';\nimport DomLoading from '@/components/Loading';\nimport DomDynamic from '@/components/Dynamic';\nimport DomTopicList from './components/TopicList';\n\nconst getArticleFromJson = (json) => {\n  const obj = JSON.parse(json);\n  return (\n    <>\n      <div className=\"song\">\n        <div className=\"cover\">\n          <img src={obj.img80x80} alt=\"\" />\n        </div>\n        <div className=\"\">\n          {obj.song.name}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default memo(() => {\n  console.log('friend');\n  const { profile } = useSelector(({ account }) => account);\n  // const [hot, setHot] = useState([]);\n  const [event, setEvent] = useState([]);\n  const [hot, setHot] = useState([]);\n  // const { url } = useRouteMatch();\n  const dispatch = useDispatch();\n\n  const DomScroll = useRef();\n  const DomObserver = useRef();\n  const refLasttime = useRef(-1);\n  const handleInitHot = async () => {\n    try {\n      const { hot } = await apiHotTopic({\n        limit: 5,\n      });\n      setHot(hot);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleInitEvent = async () => {\n    try {\n      const { event, lasttime } = await apiEvent({\n        lasttime: refLasttime.current,\n      });\n      refLasttime.current = lasttime;\n      // dispatch(setFriendEventAdd({ event }));\n      setEvent((prev) => [...prev, ...event]);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  // const handleInit = async () => {\n  //   await handleInitHot()\n  //   await handleInitEvent()\n  // };\n\n  useEffect(() => {\n    setEvent([]);\n    handleInitHot();\n  }, []);\n  useInfinite(handleInitEvent, DomScroll, DomObserver);\n\n  return (\n    <div className=\"domFriend h-full overflow-auto\" ref={DomScroll}>\n      <div className=\"flex divide-x\">\n        <div className=\"domFriend_left relative flex-auto\">\n          <div className=\"domFriend_header h-14 px-8 flex items-center sticky top-0 z-10 bg-white\">\n            <span className=\"h1\">动态</span>\n            <button type=\"button\" className=\"flex ml-auto items-center ui_theme_bg_color text-white h-6 px-3 rounded-full\">\n              <IconPlus size={12} stroke={5} />\n              写动态\n            </button>\n          </div>\n          <div className=\"domFriend_content\">\n            <div className=\"px-8\">\n              <DomDynamic list={event} />\n            </div>\n            <div className=\"flex-center\" ref={DomObserver}>\n              {event.length === 0\n                ? (\n                  <div className=\"empty text-center text-gray-400 pt-48\">\n                    暂无动态\n                  </div>\n                )\n                : <DomLoading />}\n            </div>\n          </div>\n        </div>\n        <div className=\"domFriend_right flex-none\" style={{ width: 250 }}>\n          <div className=\"domFriend_user\">\n            {\n              profile.userId\n                ? (\n                  <div className=\"logined h-40 pt-8 bg-gray-100\">\n                    <div className=\"top flex px-5 items-start\">\n                      <Link to={`/user/${profile.userId}`} className=\"avatar w-12 h-12 rounded-full overflow-hidden\">\n                        <img\n                          className=\"\"\n                          src={`${profile.avatarUrl}?param=100y100`}\n                          alt=\"\"\n                        />\n                      </Link>\n                      <div className=\"flex-center\">\n                        <Link to={`/user/${profile.userId}`} className=\"nickname ml-2.5\">\n                          {profile.nickname}\n                        </Link>\n                        &nbsp;\n                        <DomGender gender={profile.gender} size={14} />\n                      </div>\n                    </div>\n                    <div className=\"infos flex divide-x text-center mt-4\">\n                      <Link to={`/user/${profile.userId}/dynamic`} className=\"info flex-1 ui_text_black_hover\">\n                        <div className=\"num text-xl\">{profile.eventCount}</div>\n                        <div className=\"string\">动态</div>\n                      </Link>\n                      <Link to={`/user/${profile.userId}/follow`} className=\"info flex-1 ui_text_black_hover\">\n                        <div className=\"num text-xl\">{profile.follows}</div>\n                        <div className=\"string\">关注</div>\n                      </Link>\n                      <Link to={`/user/${profile.userId}/fans`} className=\"info flex-1 ui_text_black_hover\">\n                        <div className=\"num text-xl\">{profile.followeds}</div>\n                        <div className=\"string\">粉丝</div>\n                      </Link>\n                    </div>\n                  </div>\n                )\n                : (\n                  <div className=\"nologin px-5\">\n                    <div style={{ height: 170 }} />\n                    <div className=\"tips text-center text-gray-500\">\n                      登录网易云音乐，可以享受无限收藏的乐趣，并且无限同步到手机\n                    </div>\n                    <button\n                      type=\"button\"\n                      className=\"login ui_theme_bg_color text-white w-full h-10 mt-4\"\n                      onClick={() => dispatch(setLoginVisibilty(true))}\n                    >\n                      立即登录\n                    </button>\n                  </div>\n                )\n            }\n          </div>\n          <div className=\"domFriend_hotTopic mt-5\">\n            <div className=\"header flex px-5 mb-2.5\">\n              <span className=\"font-bold\">热门话题</span>\n              <Link className=\"text-gray-400 ml-auto\" to=\"/friend/hotTopic\">更多 &gt;</Link>\n            </div>\n            <DomTopicList list={hot} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n"],"names":["memo","console","log","profile","useSelector","account","useState","event","setEvent","hot","setHot","dispatch","useDispatch","DomScroll","useRef","DomObserver","refLasttime","handleInitHot","apiHotTopic","limit","handleInitEvent","apiEvent","lasttime","current","prev","useEffect","useInfinite","className","ref","type","IconPlus","size","stroke","list","length","style","width","userId","Link","to","src","avatarUrl","alt","nickname","gender","eventCount","follows","followeds","height","onClick","setLoginVisibilty"],"sourceRoot":""}