"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[2631],{35682:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(48926),r=((0,l.Z)(n),a(49064)),u=(0,l.Z)(r),c=a(63038),o=(0,l.Z)(c),s=a(87757),d=((0,l.Z)(s),a(87363)),i=(0,l.Z)(d),f=a(16719),m=(a(63233),a(75850));exports.default=function(){var e=(0,d.useState)(""),t=(0,o.default)(e,2),a=t[0],l=(t[1],(0,d.useContext)(m.LoginContext));(0,u.default)(l.loginReducer);var n=l.loginDispatch;return(0,d.useEffect)((function(){}),[]),i.default.createElement("div",{className:"form"},i.default.createElement("div",{className:"angle"},i.default.createElement("button",{className:"mt-2.5",type:"button",onClick:function(){return n({type:"SET_TYPE",payload:{type:"signin"}})}},"< 返回登录")),i.default.createElement("div",{style:{height:200,color:"var(--themeColor)"},className:"flex-center"},i.default.createElement(f.IconFaceId,{size:100,stroke:1})),i.default.createElement("div",null,"为了安全，我们会向您的手机发送短信检验码"),i.default.createElement("form",{onSubmit:function(){},className:"mt-6",autoComplete:"off"},i.default.createElement("div",{className:"flex space-x-4"},i.default.createElement("div",{className:"flex-1 relative"},i.default.createElement("i",{className:"absolute inset-y-0 flex"},i.default.createElement(f.IconKey,{size:16,className:"m-auto w-6"})),i.default.createElement("input",{type:"text",className:"border h-full pl-6 rounded",placeholder:"填写验证码"})),i.default.createElement("div",{className:"flex-1"},i.default.createElement("button",{type:"button",className:"submit"},"重新获取"))),i.default.createElement("div",{className:"info"},i.default.createElement("div",{className:"warn text-red-500 ml-auto"},a)),i.default.createElement("div",{className:"actions"},i.default.createElement("button",{type:"submit",className:"submit"},"完成"))))}},46462:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(63038),r=(0,l.Z)(n),u=a(87363),c=(0,l.Z)(u),o=a(16719),s=a(75850),d=a(14594),i=(0,l.Z)(d);exports.default=function(){var e=(0,u.useState)(),t=(0,r.default)(e,2),a=t[0],l=t[1],n=(0,u.useState)(),d=(0,r.default)(n,2),f=d[0],m=d[1],p=(0,u.useState)(""),E=(0,r.default)(p,2),v=E[0],y=E[1],g=(0,u.useContext)(s.LoginContext),b=(g.loginReducer.countrycode,g.loginDispatch),h=function(){};return c.default.createElement("div",{className:"form"},c.default.createElement("div",{className:"angle"},c.default.createElement("button",{className:"mt-2.5",type:"button",onClick:function(){return b({type:"SET_TYPE",payload:{type:"signin"}})}},"< 返回登录")),c.default.createElement("div",{style:{height:200,color:"var(--themeColor)"},className:"flex-center"},c.default.createElement(o.IconFaceId,{size:100,stroke:1})),c.default.createElement("form",{onSubmit:function(e){e.preventDefault(),a?f?b({type:"SET_TYPE",payload:{type:"identify"}}):y("⚠️请输入登录密码"):y("⚠️请输入手机号码")},autoComplete:"off"},c.default.createElement("table",{className:"table"},c.default.createElement("colgroup",null,c.default.createElement("col",{width:"84"}),c.default.createElement("col",{width:"auto"}),c.default.createElement("col",{width:"84"})),c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement(i.default,null)),c.default.createElement("td",{colSpan:"2"},c.default.createElement("input",{type:"text",name:"phone",placeholder:"请输入手机号",className:"input",value:a,onFocus:h,onChange:function(e){var t=e.target;return l(t.value)}}))),c.default.createElement("tr",null,c.default.createElement("td",{colSpan:"3"},c.default.createElement("input",{type:"password",name:"password",placeholder:"设置登录密码",className:"input",value:f,minLength:"8",maxLength:"20",onFocus:h,onChange:function(e){var t=e.target;return m(t.value)}}))))),c.default.createElement("div",{className:"info"},v?c.default.createElement("div",{className:"warn text-red-500 ml-auto"},v):c.default.createElement("span",{className:"text-gray-400"},"密码8-20位，至少包含字母/数字/字符2中组合")),c.default.createElement("div",{className:"actions"},c.default.createElement("button",{type:"submit",className:"submit"},"下一步"))))}},74565:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(48926),r=(0,l.Z)(n),u=a(63038),c=(0,l.Z)(u),o=a(87757),s=(0,l.Z)(o),d=a(87363),i=(0,l.Z)(d),f=a(16719),m=a(63233),p=a(75850),E=a(65800),v=function(e){var t=e.handleInit,a=void 0===t?function(){return null}:t;return i.default.createElement("div",{className:"absolute bg-black bg-opacity-60 flex-center flex-col inset-0 mask text-white"},i.default.createElement("div",null,"二维码已失效"),i.default.createElement("button",{type:"button",className:"btn w-20 h-8 rounded mt-2 bg-blue-500",onClick:a},"点击刷新"))},y=function(){return i.default.createElement("div",{className:"scansuccess flex-center flex-col"},i.default.createElement("div",{className:"flex-center ui_themeColor my-10"},i.default.createElement(f.IconFaceId,{size:64,stroke:"1"})),i.default.createElement("span",{className:"text-gray-400 text-sm"},"扫描成功"),i.default.createElement("div",{className:"tips text-base mt-4"},"请在手机上确认登录"))},g=function(e){var t=e.qrimg,a=e.handleInit,l=e.status,n=e.handleChooseOtherSign;return i.default.createElement("div",{className:"scanwait text-center"},i.default.createElement("div",{className:"qrbox relative"},i.default.createElement("div",{className:"left"},i.default.createElement("div",{className:"ico ui_themeColor flex-center"},i.default.createElement(f.IconScan,{size:64}))),i.default.createElement("div",{className:"right"},i.default.createElement("div",{className:"qrimg relative m-auto"},i.default.createElement("img",{src:t,alt:""}),800===l&&i.default.createElement(v,{handleInit:a})),i.default.createElement("div",{className:"tips text-sm mt-4"},"使用",i.default.createElement("a",{href:"https://music.163.com/#/download",className:"ui_link"},"网易云音乐APP"),"扫码登录"))),i.default.createElement("button",{type:"button",onClick:n},"选择其他登录模式 >"))};exports.default=(0,d.memo)((function(){var e=(0,d.useState)(""),t=(0,c.default)(e,2),a=t[0],l=t[1],n=(0,d.useState)(""),u=(0,c.default)(n,2),o=u[0],f=u[1],v=(0,d.useState)(0),b=(0,c.default)(v,2),h=b[0],N=b[1],x=(0,d.useRef)(),w=(0,d.useContext)(p.LoginContext).loginDispatch,S=function(){var e=(0,r.default)(s.default.mark((function e(){var t,a,n,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.apiLoginQrKey)();case 3:return t=e.sent,a=t.data.unikey,e.next=7,(0,m.apiLoginQrCreate)({key:a,qrimg:null});case 7:n=e.sent,r=n.data.qrimg,f(a),l(r),N(0),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,r.default)(s.default.mark((function e(){var t,a,l;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.apiLoginQrCheck)({key:o}).catch((function(e){return console.log(e)}));case 2:t=e.sent,a=t.code,l=t.cookie,e.t0=a,e.next=800===e.t0?8:802===e.t0?11:803===e.t0?13:16;break;case 8:return clearInterval(x.current),N(800),e.abrupt("break",16);case 11:return N(802),e.abrupt("break",16);case 13:return(0,E.setCookie)(l),window.location.reload(),e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){S()}),[]),(0,d.useEffect)((function(){return x.current=setInterval(C,5e3),function(){clearInterval(x.current)}}),[o]);var _=(0,d.useMemo)((function(){return 0===h||800===h}),[h]),k=(0,d.useMemo)((function(){return 802===h}),[h]);return i.default.createElement("div",{className:"qr pt-24 flex items-center flex-col"},i.default.createElement("div",{className:"title text-2xl"},"扫码登录"),_&&i.default.createElement(g,{qrimg:a,handleInit:S,status:h,handleChooseOtherSign:function(){return w({type:"SET_TYPE",payload:{type:"signin"}})}}),k&&i.default.createElement(y,null))}))},9023:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(48926),r=(0,l.Z)(n),u=a(63038),c=(0,l.Z)(u),o=a(87757),s=(0,l.Z)(o),d=a(87363),i=(0,l.Z)(d),f=a(63233),m=a(16719),p=a(65800),E=a(23922),v=(0,l.Z)(E),y=a(75850),g=a(14594),b=(0,l.Z)(g),h=a(4590),N=(0,l.Z)(h);exports.default=(0,d.memo)((function(){var e=(0,d.useContext)(y.LoginContext),t=e.loginReducer,a=t.argeeArgument,l=t.loginphone,n=t.loginpassword,u=t.countrycode,o=e.loginDispatch,E=(0,d.useState)(""),g=(0,c.default)(E,2),h=g[0],x=g[1],w=(0,d.useState)(!1),S=(0,c.default)(w,2),C=S[0],_=S[1],k=(0,d.useRef)(),I=(0,d.useRef)(),O=function(){var e=(0,r.default)(s.default.mark((function e(){var t,a,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.apiLoginCellphone)({phone:l,password:n,countrycode:u});case 3:(t=e.sent).data,a=t.code,t.msg,r=t.cookie,t.token,t.profile,200===a&&((0,p.setCookie)(r),window.location.reload()),502===a&&x("⚠️当前登录失败，请稍后再试"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return i.default.createElement("div",{className:"form px-10"},i.default.createElement("div",{className:"angle absolute top-0 left-0"},i.default.createElement("button",{type:"button",onClick:function(){return o({type:"SET_TYPE",payload:{type:"scan"}})}},i.default.createElement(m.IconQrcode,{size:36})),i.default.createElement("span",{className:"absolute top-3 left-12 pr-3 pl-4 py-1.5 tips text-white whitespace-nowrap bg-gray-400"},"扫码登录更安全")),i.default.createElement("div",{style:{height:200},className:"flex-center ui_themeColor"},i.default.createElement(m.IconFaceId,{size:100,stroke:1})),i.default.createElement("form",{onSubmit:function(e){e.preventDefault(),a?l?n?/\d{11}/.test(l)?O():x("⚠️请输入11位数字的手机号"):x("⚠️请输入密码"):x("⚠️请输入手机号"):alert("请先勾选同意《服务条款》《服务条款》《服务条款》")},autoComplete:"off"},i.default.createElement("table",{className:"table"},i.default.createElement("colgroup",null,i.default.createElement("col",{width:"84"}),i.default.createElement("col",{width:"auto"}),i.default.createElement("col",{width:"84"})),i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(b.default,null)),i.default.createElement("td",{colSpan:"2"},i.default.createElement("input",{type:"text",name:"phone",placeholder:"请输入手机号",className:"input",readOnly:!0,onFocus:function(e){return e.target.removeAttribute("readonly")},value:l,onChange:function(e){return function(e){o({type:"SET_SIGNIN_PHONE",payload:{loginphone:e}})}(e.target.value)}}))),i.default.createElement("tr",null,i.default.createElement("td",{colSpan:"2"},i.default.createElement("input",{type:C?"text":"password",name:"password",placeholder:"请输入密码",className:"input",readOnly:!0,onFocus:function(e){return e.target.removeAttribute("readonly")},value:n,onChange:function(e){return function(e){o({type:"SET_SIGNIN_PASSWORD",payload:{loginpassword:e}})}(e.target.value)}}),i.default.createElement("button",{type:"button",className:"togglePassword",onClick:function(){return _(!C)}},C?i.default.createElement(m.IconEye,{size:16}):i.default.createElement(m.IconEyeOff,{size:16}))),i.default.createElement("td",null,i.default.createElement("div",{className:"flex-center"},i.default.createElement("button",{type:"button",className:"text-gray-400",onClick:function(){return o({type:"SET_TYPE",payload:{type:"reset"}})}},"重设密码")))))),i.default.createElement("div",{className:"info"},i.default.createElement("label",{htmlFor:"autoLogin",className:"auto"},i.default.createElement(v.default,{ref:I,name:"autoLogin"}),"  自动登录"),i.default.createElement("div",{className:"warn ml-auto text-red-500"},h)),i.default.createElement("div",{className:"actions"},i.default.createElement("button",{type:"submit",className:"submit"},"登 录"),i.default.createElement("button",{type:"button",className:"signup underline my-2 mx-auto text-sm block w-min whitespace-nowrap",onClick:function(){a?o({type:"SET_TYPE",payload:{type:"signup"}}):alert("请先勾选同意《服务条款》《服务条款》《服务条款》")}},"注册"),i.default.createElement(N.default,null)),i.default.createElement("label",{htmlFor:"argument",className:"argument flex items-center whitespace-nowrap mt-9"},i.default.createElement(v.default,{ref:k,name:"argument",onChange:function(e){return function(e){o({type:"SET_SIGNIN_ARGEEARGUMENT",payload:{argeeArgument:e}})}(e.target.checked)},checked:a})," ",i.default.createElement("span",{className:"text-gray-400"},"同意"),i.default.createElement("a",{className:"ui_link hover",target:"_blank",rel:"noopener noreferrer",href:"https://st.music.163.com/official-terms/service"},"《服务条款》"),i.default.createElement("a",{className:"ui_link hover",target:"_blank",rel:"noopener noreferrer",href:"https://st.music.163.com/official-terms/privacy"},"《隐私条款》"),i.default.createElement("a",{className:"ui_link hover",target:"_blank",rel:"noopener noreferrer",href:"https://st.music.163.com/official-terms/children"},"《儿童隐私条款》"))))}))},43017:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(63038),r=(0,l.Z)(n),u=a(87363),c=(0,l.Z)(u),o=a(16719),s=a(14594),d=(0,l.Z)(s),i=a(4590),f=(0,l.Z)(i),m=a(75850);exports.default=(0,u.memo)((function(){var e=(0,u.useState)(""),t=(0,r.default)(e,2),a=t[0],l=t[1],n=(0,u.useContext)(m.LoginContext),s=n.loginReducer,i=s.registerphone,p=s.registerpassword,E=(s.countrycode,n.loginDispatch);return c.default.createElement("div",{className:"form px-10"},c.default.createElement("div",{className:"angle absolute top-0 left-0"},c.default.createElement("button",{className:"mt-2.5",type:"button",onClick:function(){return E({type:"SET_TYPE",payload:{type:"signin"}})}},"< 返回登录")),c.default.createElement("div",{style:{height:200,color:"var(--themeColor)"},className:"flex-center"},c.default.createElement(o.IconFaceId,{size:100,stroke:1})),c.default.createElement("form",{onSubmit:function(e){e.preventDefault(),i?p||l("⚠️请输入登录密码"):l("⚠️请输入手机号码")},autoComplete:"off"},c.default.createElement("table",{className:"table"},c.default.createElement("colgroup",null,c.default.createElement("col",{width:"84"}),c.default.createElement("col",{width:"auto"}),c.default.createElement("col",{width:"84"})),c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement(d.default,null)),c.default.createElement("td",{colSpan:"2"},c.default.createElement("input",{type:"text",name:"phone",placeholder:"请输入手机号",className:"input",readOnly:!0,onFocus:function(e){return e.target.removeAttribute("readonly")},value:i,onChange:function(e){e.target.value}}))),c.default.createElement("tr",null,c.default.createElement("td",{colSpan:"3"},c.default.createElement("input",{type:"password",name:"password",placeholder:"设置登录密码",className:"input",readOnly:!0,onFocus:function(e){return e.target.removeAttribute("readonly")},value:p,minLength:"8",maxLength:"20",onChange:function(e){e.target.value}}))))),c.default.createElement("div",{className:"info"},a?c.default.createElement("div",{className:"warn ui_red"},a):c.default.createElement("span",{className:"text-gray-400"},"密码8-20位，至少包含字母/数字/字符2中组合")),c.default.createElement("div",{className:"actions"},c.default.createElement("button",{type:"submit",className:"submit"},"注册"),c.default.createElement("div",{className:"hint flex items-center justify-between mt-8 mb-4"},"其他注册方式"),c.default.createElement(f.default,null))))}))},14594:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(63038),r=(0,l.Z)(n);a(21249);var u=a(87363),c=(0,l.Z)(u),o=a(94184),s=(0,l.Z)(o),d=a(16719),i=a(21624),f=a(75850);exports.default=(0,u.memo)((function(){var e=(0,i.useSelector)((function(e){return e.common})).countriesCodeList,t=(0,u.useContext)(f.LoginContext),a=t.loginReducer.countrycode,l=t.loginDispatch,n=(0,u.useState)(!1),o=(0,r.default)(n,2),m=o[0],p=o[1];return c.default.createElement("div",{className:"customSelect"},c.default.createElement("button",{onClick:function(){return p(!m)},type:"button",className:"default"},c.default.createElement(d.IconDeviceMobile,{size:24,stroke:.5,className:"ico"}),"+",a,c.default.createElement("div",{className:"arrow"},c.default.createElement(d.IconCaretDown,{size:12,className:"fill-current"}))),c.default.createElement("div",{className:"customOptionGroup",style:{display:m?null:"none"}},e.map((function(e){return e.countryList.map((function(e){return c.default.createElement("button",{key:e.zh,type:"button",className:(0,s.default)("customOption flex w-full px-3 h-6",{on:e.code===a}),onClick:function(){return function(e){l({type:"SET_SIGNIN_COUNTRYCODE",payload:{countrycode:e}})}(e.code)}},c.default.createElement("div",{className:"flag w-8"}),c.default.createElement("div",{className:"zh"},e.zh),c.default.createElement("div",{className:"code ml-auto"},"+".concat(e.code)))}))}))))}))},4590:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(7788),r=a(87363),u=(0,l.Z)(r);exports.default=(0,r.memo)((function(){return u.default.createElement("div",{className:"threes flex justify-between"},u.default.createElement("button",{type:"button",className:"three"},u.default.createElement(n.SymbolWX,{hover:!0})),u.default.createElement("button",{type:"button",className:"three"},u.default.createElement(n.SymbolQQ,{hover:!0})),u.default.createElement("button",{type:"button",className:"three"},u.default.createElement(n.SymbolWB,{hover:!0})),u.default.createElement("button",{type:"button",className:"three"},u.default.createElement(n.SymbolWY,{hover:!0})))}))},75850:(e,t,a)=>{a.r(t),a(47941),a(82526),a(57327),a(38880),a(54747),a(49337);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0}),exports.LoginContext=void 0;var n=a(59713),r=(0,l.Z)(n),u=a(63038),c=(0,l.Z)(u),o=a(87363),s=(0,l.Z)(o),d=a(21624),i=a(16719),f=a(26405);a(45373);var m=a(74565),p=(0,l.Z)(m),E=a(9023),v=(0,l.Z)(E),y=a(43017),g=(0,l.Z)(y),b=a(46462),h=(0,l.Z)(b),N=a(35682),x=(0,l.Z)(N);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=exports.LoginContext=(0,o.createContext)(null),_={scan:function(){return s.default.createElement(p.default,null)},signin:function(){return s.default.createElement(v.default,null)},signup:function(){return s.default.createElement(g.default,null)},reset:function(){return s.default.createElement(h.default,null)},identify:function(){return s.default.createElement(x.default,null)}};exports.default=function(){var e=(0,d.useDispatch)(),t=(0,d.useSelector)((function(e){return e.common})).loginVisibility,a=(0,o.useReducer)((function(e,t){switch(t.type){case"SET_TYPE":case"SET_SIGNIN_WARN":case"SET_SIGNIN_PHONE":case"SET_SIGNIN_PASSWORD":case"SET_SIGNIN_ARGEEARGUMENT":case"SET_SIGNIN_COUNTRYCODE":return S(S({},e),t.payload);default:return e}}),{argeeArgument:!1,loginphone:"",loginpassword:"",registerphone:"",registerpassword:"",type:"scan",countrycode:"86"}),l=(0,c.default)(a,2),n=l[0],r=l[1];return t?s.default.createElement("div",{id:"dialogLogin",className:"-translate-x-1/2 -translate-y-1/2 bg-white fixed left-1/2 rounded shadow top-1/2 transform ui_dialog"},s.default.createElement("button",{type:"button",className:"ui_dialog_close close",onClick:function(){return e((0,f.setLoginVisibilty)())}},s.default.createElement(i.IconX,{stroke:1.5})),s.default.createElement(C.Provider,{value:{loginReducer:n,loginDispatch:r}},_[n.type]())):null}},45373:(e,t,a)=>{a.r(t)}}]);