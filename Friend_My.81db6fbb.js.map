{"version":3,"file":"Friend_My.81db6fbb.js","mappings":"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","sources":["webpack://wyy/./src/pages/Friend/My.tsx"],"sourcesContent":["import React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { apiHotTopic, apiEvent, apiCommentEvent } from '@/api';\n\nimport { IconPlus } from '@tabler/icons';\n\nimport { setLoginVisibilty } from '@/reducers/common/slice';\nimport './style.scss';\n\nimport DomGender from '@/components/Gender';\nimport useInfinite from '@/hooks/useInfinite';\nimport DomLoading from '@/components/Loading';\nimport DomDynamic from '@/components/Dynamic';\nimport DomTopicList from './components/TopicList';\n\nconst getArticleFromJson = (json) => {\n  const obj = JSON.parse(json);\n  return (\n    <>\n      <div className=\"song\">\n        <div className=\"cover\">\n          <img src={obj.img80x80} alt=\"\" />\n        </div>\n        <div className=\"\">\n          {obj.song.name}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default memo(() => {\n  console.log('friend');\n  const { profile } = useSelector(({ account }) => account);\n  // const [hot, setHot] = useState([]);\n  const [event, setEvent] = useState([]);\n  const [hot, setHot] = useState([]);\n  // const { url } = useRouteMatch();\n  const dispatch = useDispatch();\n\n  const DomScroll = useRef();\n  const DomObserver = useRef();\n  const refLasttime = useRef(-1);\n  const handleInitHot = async () => {\n    try {\n      const { hot } = await apiHotTopic({\n        limit: 5,\n      });\n      setHot(hot);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleInitEvent = async () => {\n    try {\n      const { event, lasttime } = await apiEvent({\n        lasttime: refLasttime.current,\n      });\n      refLasttime.current = lasttime;\n      // dispatch(setFriendEventAdd({ event }));\n      setEvent((prev) => [...prev, ...event]);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  // const handleInit = async () => {\n  //   await handleInitHot()\n  //   await handleInitEvent()\n  // };\n\n  useEffect(() => {\n    setEvent([]);\n    handleInitHot();\n  }, []);\n  useInfinite(handleInitEvent, DomScroll, DomObserver);\n\n  return (\n    <div className=\"domFriend h-full overflow-auto\" ref={DomScroll}>\n      <div className=\"flex divide-x\">\n        <div className=\"domFriend_left relative flex-auto\">\n          <div className=\"domFriend_header h-14 px-8 flex items-center sticky top-0 z-10 bg-white\">\n            <span className=\"h1\">动态</span>\n            <button type=\"button\" className=\"flex ml-auto items-center ui_theme_bg_color text-white h-6 px-3 rounded-full\">\n              <IconPlus size={12} stroke={5} />\n              写动态\n            </button>\n          </div>\n          <div className=\"domFriend_content\">\n            <div className=\"px-8\">\n              <DomDynamic list={event} />\n            </div>\n            <div className=\"flex-center\" ref={DomObserver}>\n              {event.length === 0\n                ? (\n                  <div className=\"empty text-center text-gray-400 pt-48\">\n                    暂无动态\n                  </div>\n                )\n                : <DomLoading />}\n            </div>\n          </div>\n        </div>\n        <div className=\"domFriend_right flex-none\" style={{ width: 250 }}>\n          <div className=\"domFriend_user\">\n            {\n              profile.userId\n                ? (\n                  <div className=\"logined h-40 pt-8 bg-gray-100\">\n                    <div className=\"top flex px-5 items-start\">\n                      <Link to={`/user/${profile.userId}`} className=\"avatar w-12 h-12 rounded-full overflow-hidden\">\n                        <img\n                          className=\"\"\n                          src={`${profile.avatarUrl}?param=100y100`}\n                          alt=\"\"\n                        />\n                      </Link>\n                      <div className=\"flex-center\">\n                        <Link to={`/user/${profile.userId}`} className=\"nickname ml-2.5\">\n                          {profile.nickname}\n                        </Link>\n                        &nbsp;\n                        <DomGender gender={profile.gender} size={14} />\n                      </div>\n                    </div>\n                    <div className=\"infos flex divide-x text-center mt-4\">\n                      <Link to={`/user/${profile.userId}/dynamic`} className=\"info flex-1 ui_text_black_hover\">\n                        <div className=\"num text-xl\">{profile.eventCount}</div>\n                        <div className=\"string\">动态</div>\n                      </Link>\n                      <Link to={`/user/${profile.userId}/follow`} className=\"info flex-1 ui_text_black_hover\">\n                        <div className=\"num text-xl\">{profile.follows}</div>\n                        <div className=\"string\">关注</div>\n                      </Link>\n                      <Link to={`/user/${profile.userId}/fans`} className=\"info flex-1 ui_text_black_hover\">\n                        <div className=\"num text-xl\">{profile.followeds}</div>\n                        <div className=\"string\">粉丝</div>\n                      </Link>\n                    </div>\n                  </div>\n                )\n                : (\n                  <div className=\"nologin px-5\">\n                    <div style={{ height: 170 }} />\n                    <div className=\"tips text-center text-gray-500\">\n                      登录网易云音乐，可以享受无限收藏的乐趣，并且无限同步到手机\n                    </div>\n                    <button\n                      type=\"button\"\n                      className=\"login ui_theme_bg_color text-white w-full h-10 mt-4\"\n                      onClick={() => dispatch(setLoginVisibilty(true))}\n                    >\n                      立即登录\n                    </button>\n                  </div>\n                )\n            }\n          </div>\n          <div className=\"domFriend_hotTopic mt-5\">\n            <div className=\"header flex px-5 mb-2.5\">\n              <span className=\"font-bold\">热门话题</span>\n              <Link className=\"text-gray-400 ml-auto\" to=\"/friend/hotTopic\">更多 &gt;</Link>\n            </div>\n            <DomTopicList list={hot} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n"],"names":["memo","console","log","profile","useSelector","account","useState","event","setEvent","hot","setHot","dispatch","useDispatch","DomScroll","useRef","DomObserver","refLasttime","handleInitHot","apiHotTopic","limit","handleInitEvent","apiEvent","lasttime","current","prev","useEffect","className","ref","type","IconPlus","size","stroke","list","length","style","width","userId","Link","to","src","avatarUrl","alt","nickname","gender","eventCount","follows","followeds","height","onClick","setLoginVisibilty"],"sourceRoot":""}