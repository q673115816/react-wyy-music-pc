(self.webpackChunkwyy=self.webpackChunkwyy||[]).push([[489],{742:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j}),n(7941),n(2526),n(5003),n(4747),n(9337);var r=n(6156),a=n(2137),l=n(9351),c=n(7757),i=n.n(c),s=(n(7327),n(6992),n(1539),n(8674),n(8783),n(3948),n(1249),n(3804)),o=n.n(s),u=n(847),m=n(6955),f=n(5325),d=n(7647),p=n(5200),E=n(4184),y=n.n(E),v=n(2131),b=n(8556),g=n(7953),x=(n(5594),n(345));const h=function(e){var t=e.list;return o().createElement("div",{className:"domUserDetail_list px-8 grid grid-cols-4 gap-5"},t.map((function(e){return o().createElement(x.Z,{item:e,key:e.id})})))};n(8309);const N=function(e){var t=e.list,n=void 0===t?[]:t;return o().createElement("div",null,n.map((function(e,t){return o().createElement("div",{key:e.id,className:y()("hover:bg-gray-100 pl-8 py-3 flex items-center",{"bg-gray-50":t%2==0})},o().createElement(u.Link,{to:"/playlist/music/".concat(e.id),className:"rounded overflow-hidden relative group"},o().createElement("img",{src:"".concat(e.coverImgUrl,"?param=60y60"),alt:""}),o().createElement("button",{type:"button",className:"absolute rounded-full bg-white bg-opacity-90 inset-0 flex-center m-auto w-6 h-6 ui_themeColor opacity-0 group-hover:opacity-100 transition-opacity duration-500"},o().createElement(p.IconPlayerPlay,{size:16,className:"fill-current"}))),o().createElement(u.Link,{to:"/playlist/music/".concat(e.id),className:"flex-auto w-0 px-3 truncate text-sm ui_text_black_hover"},e.name),o().createElement("span",{className:"px-3 count text-gray-400",style:{width:"".concat(1/7*100,"%")}},"歌曲：",e.trackCount),o().createElement("span",{className:"px-3 creator truncate text-gray-300",style:{width:"".concat(1/7*100,"%")}},"by",o().createElement(u.Link,{to:"/user/".concat(e.userId),className:"ui_text_gray_hover"},e.creator.nickname)),o().createElement("button",{type:"button",className:"px-3 subscribed flex items-center ui_text_gray_hover",style:{width:"".concat(1/7*100,"%")}},o().createElement(p.IconFolderPlus,{size:16}),e.subscribedCount),o().createElement("button",{type:"button",className:"px-3 playCount flex items-center ui_text_gray_hover",style:{width:"".concat(1/7*100,"%")}},o().createElement(p.IconPlayerPlay,{size:16}),(0,g.LU)(e.playCount)))})))},w=function(){return o().createElement("div",null)};var k=[["grid","大图模式",p.IconLayoutGrid],["list","列表模式",p.IconLayoutList],["column","图列模式",p.IconList]],_={grid:function(e){return o().createElement(h,{list:e})},list:function(e){return o().createElement(N,{list:e})},column:function(e){return o().createElement(w,{list:e})}};const I=function(e){var t=e.list,n=void 0===t?[]:t,r=(0,s.useState)("grid"),a=(0,l.Z)(r,2),c=a[0],i=a[1];return o().createElement("div",{className:"pb-10"},o().createElement("div",{className:"domUserDetail_headerBar flex items-center px-8 pb-4"},o().createElement("span",{className:"name text-base font-bold"},"歌单"),o().createElement("div",{className:"layouts ml-auto flex overflow-hidden rounded space-x-0.5"},k.map((function(e){var t=(0,l.Z)(e,3),n=t[0],r=t[1],a=t[2];return o().createElement("button",{key:n,type:"button",className:y()("layout bg-gray-100 h-5 w-6 flex-center",c===n?"bg-gray-500 text-white":"hover:bg-gray-200"),onClick:function(){return i(n)},title:r},o().createElement(a,{size:16}))})))),_[c](n))};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const j=function(){var e=(0,f.useSelector)((function(e){return e.common})).isLogin,t=(0,s.useState)({}),n=(0,l.Z)(t,2),r=n[0],c=n[1],E=(0,s.useState)([]),y=(0,l.Z)(E,2),g=y[0],x=y[1],h=(0,f.useSelector)((function(e){return e.account})),N=(0,u.useRouteMatch)().url,w=(0,u.useParams)().uid,k=(0,s.useState)(!1),_=(0,l.Z)(k,2),O=_[0],j=_[1],C=(0,s.useState)(!1),L=(0,l.Z)(C,2),S=L[0],Z=L[1];(0,s.useEffect)((function(){e&&Z(String(h.profile.userId)===w)}),[e]);var D=g.filter((function(e){return String(e.userId)===w})),z=g.filter((function(e){return String(e.userId)!==w})),U=function(){var e=(0,a.Z)(i().mark((function e(){var t,n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([(0,m.um)({uid:w}),(0,m.Uu)({uid:w})]);case 3:t=e.sent,n=(0,l.Z)(t,2),r=n[0],a=n[1].playlist,c(r),x(a),j(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,a.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.profile.followed,e.prev=1,e.next=4,(0,m.iQ)({id:t,t:!0===n?0:1});case 4:200===e.sent.code&&c(P(P({},r),{},{profile:P(P({},r.profile),{},{followed:!n})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){U()}),[w]),e?O?o().createElement("div",{className:"domUserDetail"},o().createElement("div",{className:"domUserDetail_header p-8"},o().createElement("div",{className:"avatar rounded-full overflow-hidden flex-none"},o().createElement("img",{src:"".concat(r.profile.avatarUrl,"?param=200y200"),alt:"",className:"ui_coverimg"})),o().createElement("div",{className:"content"},o().createElement("div",{className:"name"},r.profile.nickname),o().createElement("div",{className:"contain"},o().createElement("div",{className:"left flex-center"},11===r.profile.vipType&&o().createElement(o().Fragment,null,o().createElement("a",{href:"https://music.163.com/#/member"},"黑胶会员")," "),r.identify&&o().createElement("span",{className:"authentication",title:r.identify.imageDesc},o().createElement("span",{className:"ico"},o().createElement("img",{className:"ui_containimg",src:r.identify.imageUrl,alt:""})),r.identify.imageDesc),o().createElement("a",{className:"level",href:"https://music.163.com/#/user/level"},"Lv",r.level),o().createElement(d.ZP,{gender:r.profile.gender,size:16})),o().createElement("div",{className:"right ml-auto flex-center"},S?o().createElement(u.Link,{to:"".concat(N,"/edit"),className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center"},o().createElement(p.IconEdit,{size:18,stroke:1.5}),"  编辑个人信息"):o().createElement(o().Fragment,null,o().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center"},o().createElement(p.IconMail,{size:20,stroke:1})," 发私信"),r.profile.followed?o().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:function(){return F(r.profile.userId)}},o().createElement(p.IconCheck,{size:16}),"  已关注"):o().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:function(){return F(r.profile.userId)}},o().createElement(p.IconPlus,{size:16,style:{color:"#EC4141"}}),"  关注")))),o().createElement("hr",null),o().createElement("div",{className:"infos text-center divide-x grid mt-5",style:{gridTemplateColumns:"repeat(3, 88px)"}},o().createElement(u.Link,{to:"".concat(N,"/dynamic"),className:"info"},o().createElement("div",{className:"num text-base"},r.profile.eventCount),o().createElement("div",{className:"string"},"动态")),o().createElement(u.Link,{to:"".concat(N,"/follow"),className:"info"},o().createElement("div",{className:"num text-base"},r.profile.follows),o().createElement("div",{className:"string"},"关注")),o().createElement(u.Link,{to:"".concat(N,"/fans"),className:"info"},o().createElement("div",{className:"num text-base"},r.profile.followeds),o().createElement("div",{className:"string"},"粉丝"))),o().createElement("div",{className:"list"},o().createElement("div",{className:"item"},o().createElement("span",null,"社交网络："),r.bindings.map((function(e){if(e.url)switch(e.type){case 2:return o().createElement("a",{href:e.url,key:e.url},o().createElement(v.Hl,{size:16,active:!0,key:e.url}));default:return null}}))),o().createElement("div",{className:"item"},o().createElement("span",null,"个人介绍："),o().createElement("span",{className:"text-gray-400",style:{whiteSpace:"pre-wrap"}},r.profile.signature||"暂无介绍"))))),o().createElement("div",{className:"domUserDetail_main"},o().createElement(I,{list:D}),o().createElement(I,{list:z}))):o().createElement("div",{className:"flex-center"},o().createElement(b.Z,null)):o().createElement("div",null,"查看个人信息请先登录")}}}]);