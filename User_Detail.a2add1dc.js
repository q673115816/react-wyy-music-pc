(self.webpackChunkwyy=self.webpackChunkwyy||[]).push([[489],{742:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C}),n(7941),n(2526),n(5003),n(4747),n(9337);var a=n(6156),r=n(2137),l=n(9351),c=n(7757),i=n.n(c),s=(n(7327),n(6992),n(1539),n(8674),n(8783),n(3948),n(1249),n(3804)),o=n.n(s),m=n(847),u=n(6955),d=n(5325),f=n(7647),p=n(5200),E=n(4184),v=n.n(E),y=n(2131),b=n(8556),h=(n(9653),n(7953)),N=(n(5594),n(345));const g=function(){return o().createElement("div",{className:"cartoon hb r"},o().createElement("div",{className:"ears"}),o().createElement("div",{className:"face r c"}),o().createElement("div",{className:"nose ha hb"}),o().createElement("div",{className:"forehead ha c"}),o().createElement("div",{className:"eyes r"}),o().createElement("div",{className:"pupil"}),o().createElement("div",{className:"pupil"}),o().createElement("div",{className:"smile"}),o().createElement("div",{className:"smile"}),o().createElement("div",{className:"snout ha hb"}),o().createElement("div",{className:"mouth ha hb"}),o().createElement("div",{className:"whiskers r"}))};var x=function(){var e=(0,m.useParams)().uid,t=(0,d.useSelector)((function(e){return e.account})).profile;return(null==t?void 0:t.userId)!==Number(e)?null:o().createElement("div",{className:"item"},o().createElement(m.Link,{to:function(e){return"".concat(e.pathname,"/record")}},o().createElement("div",{className:"cover relative border ui_aspect-ratio-1/1"},o().createElement("div",{className:"absolute inset-0"},o().createElement(g,null)),o().createElement("button",{type:"button",className:"playArrow opacity-0 group-hover:opacity-100 transition-opacity duration-500 ui_themeColor absolute right-0 bottom-0 m-2 bg-white bg-opacity-90 rounded-full p-2"},o().createElement(p.IconPlayerPlay,{size:22,className:"fill-current"})))),o().createElement("div",{className:"footer mt-2 text-sm"},o().createElement(m.Link,{to:function(e){return"".concat(e.pathname,"/record")},className:""},"听歌排行")))};const w=(0,s.memo)((function(e){var t=e.list,n=void 0===t?[]:t;return o().createElement("div",{className:"domUserDetail_list px-8 grid grid-cols-4 gap-5"},o().createElement(x,null),n.map((function(e){return o().createElement(N.Z,{item:e,key:e.id})})))}));n(8309);const k=function(e){var t=e.list,n=void 0===t?[]:t;return o().createElement("div",null,n.map((function(e,t){return o().createElement("div",{key:e.id,className:v()("hover:bg-gray-100 pl-8 py-3 flex items-center",{"bg-gray-50":t%2==0})},o().createElement(m.Link,{to:"/playlist/music/".concat(e.id),className:"rounded overflow-hidden relative group"},o().createElement("img",{src:"".concat(e.coverImgUrl,"?param=60y60"),alt:""}),o().createElement("button",{type:"button",className:"absolute rounded-full bg-white bg-opacity-90 inset-0 flex-center m-auto w-6 h-6 ui_themeColor opacity-0 group-hover:opacity-100 transition-opacity duration-500"},o().createElement(p.IconPlayerPlay,{size:16,className:"fill-current"}))),o().createElement(m.Link,{to:"/playlist/music/".concat(e.id),className:"flex-auto w-0 px-3 truncate text-sm ui_text_black_hover"},e.name),o().createElement("span",{className:"px-3 count text-gray-400",style:{width:"".concat(1/7*100,"%")}},"歌曲：",e.trackCount),o().createElement("span",{className:"px-3 creator truncate text-gray-300",style:{width:"".concat(1/7*100,"%")}},"by",o().createElement(m.Link,{to:"/user/".concat(e.userId),className:"ui_text_gray_hover"},e.creator.nickname)),o().createElement("button",{type:"button",className:"px-3 subscribed flex items-center ui_text_gray_hover",style:{width:"".concat(1/7*100,"%")}},o().createElement(p.IconFolderPlus,{size:16}),e.subscribedCount),o().createElement("button",{type:"button",className:"px-3 playCount flex items-center ui_text_gray_hover",style:{width:"".concat(1/7*100,"%")}},o().createElement(p.IconPlayerPlay,{size:16}),(0,h.LU)(e.playCount)))})))},_=function(){return o().createElement("div",null)};var I=[["grid","大图模式",p.IconLayoutGrid],["list","列表模式",p.IconLayoutList],["column","图列模式",p.IconList]],P={grid:function(e){return o().createElement(w,{list:e})},list:function(e){return o().createElement(k,{list:e})},column:function(e){return o().createElement(_,{list:e})}};const O=function(e){var t=e.list,n=void 0===t?[]:t,a=(0,s.useState)("grid"),r=(0,l.Z)(a,2),c=r[0],i=r[1];return o().createElement("div",{className:"pb-10"},o().createElement("div",{className:"domUserDetail_headerBar flex items-center px-8 pb-4"},o().createElement("span",{className:"name text-base font-bold"},"歌单"),o().createElement("div",{className:"layouts ml-auto flex overflow-hidden rounded space-x-0.5"},I.map((function(e){var t=(0,l.Z)(e,3),n=t[0],a=t[1],r=t[2];return o().createElement("button",{key:n,type:"button",className:v()("layout bg-gray-100 h-5 w-6 flex-center",c===n?"bg-gray-500 text-white":"hover:bg-gray-200"),onClick:function(){return i(n)},title:a},o().createElement(r,{size:16}))})))),P[c](n))};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const C=(0,s.memo)((function(e){var t=e.uid;console.log("user_detail");var n=(0,d.useSelector)((function(e){return e.common})).isLogin,a=(0,s.useState)({}),c=(0,l.Z)(a,2),E=c[0],v=c[1],h=(0,s.useState)([]),N=(0,l.Z)(h,2),g=N[0],x=N[1],w=(0,d.useSelector)((function(e){return e.account})),k=(0,s.useState)(!1),_=(0,l.Z)(k,2),I=_[0],P=_[1],L=(0,s.useState)(!1),C=(0,l.Z)(L,2),S=C[0],Z=C[1];(0,s.useEffect)((function(){n&&Z(String(w.profile.userId)===t)}),[n]);var z=g.filter((function(e){return String(e.userId)===t})),D=g.filter((function(e){return String(e.userId)!==t})),U=function(){var e=(0,r.Z)(i().mark((function e(){var n,a,r,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([(0,u.um)({uid:t}),(0,u.Uu)({uid:t})]);case 3:n=e.sent,a=(0,l.Z)(n,2),r=a[0],c=a[1].playlist,v(r),x(c),P(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.profile.followed,e.prev=1,e.next=4,(0,u.iQ)({id:t,t:!0===n?0:1});case 4:200===e.sent.code&&v(j(j({},E),{},{profile:j(j({},E.profile),{},{followed:!n})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){U()}),[t]),n?I?o().createElement("div",{className:"domUserDetail"},o().createElement("div",{className:"domUserDetail_header p-8"},o().createElement("div",{className:"avatar rounded-full overflow-hidden flex-none"},o().createElement("img",{src:"".concat(E.profile.avatarUrl,"?param=200y200"),alt:"",className:"ui_coverimg"})),o().createElement("div",{className:"content"},o().createElement("div",{className:"name"},E.profile.nickname),o().createElement("div",{className:"contain"},o().createElement("div",{className:"left flex-center"},11===E.profile.vipType&&o().createElement(o().Fragment,null,o().createElement("a",{href:"https://music.163.com/#/member"},"黑胶会员")," "),E.identify&&o().createElement("span",{className:"authentication",title:E.identify.imageDesc},o().createElement("span",{className:"ico"},o().createElement("img",{className:"ui_containimg",src:E.identify.imageUrl,alt:""})),E.identify.imageDesc),o().createElement("a",{className:"level",href:"https://music.163.com/#/user/level"},"Lv",E.level),o().createElement(f.ZP,{gender:E.profile.gender,size:16})),o().createElement("div",{className:"right ml-auto flex-center"},S?o().createElement(m.Link,{to:function(e){var t=e.pathname;return"".concat(t,"/edit")},className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center"},o().createElement(p.IconEdit,{size:18,stroke:1.5}),"  编辑个人信息"):o().createElement(o().Fragment,null,o().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center"},o().createElement(p.IconMail,{size:20,stroke:1})," 发私信"),E.profile.followed?o().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:function(){return F(E.profile.userId)}},o().createElement(p.IconCheck,{size:16}),"  已关注"):o().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:function(){return F(E.profile.userId)}},o().createElement(p.IconPlus,{size:16,style:{color:"#EC4141"}}),"  关注")))),o().createElement("hr",null),o().createElement("div",{className:"infos text-center divide-x grid mt-5",style:{gridTemplateColumns:"repeat(3, 88px)"}},o().createElement(m.Link,{to:function(e){var t=e.pathname;return"".concat(t,"/dynamic")},className:"info"},o().createElement("div",{className:"num text-base"},E.profile.eventCount),o().createElement("div",{className:"string"},"动态")),o().createElement(m.Link,{to:function(e){var t=e.pathname;return"".concat(t,"/follow")},className:"info"},o().createElement("div",{className:"num text-base"},E.profile.follows),o().createElement("div",{className:"string"},"关注")),o().createElement(m.Link,{to:function(e){var t=e.pathname;return"".concat(t,"/fans")},className:"info"},o().createElement("div",{className:"num text-base"},E.profile.followeds),o().createElement("div",{className:"string"},"粉丝"))),o().createElement("div",{className:"list"},o().createElement("div",{className:"item"},o().createElement("span",null,"社交网络："),E.bindings.map((function(e){if(e.url)switch(e.type){case 2:return o().createElement("a",{href:e.url,key:e.url},o().createElement(y.Hl,{size:16,active:!0,key:e.url}));default:return null}}))),o().createElement("div",{className:"item"},o().createElement("span",null,"个人介绍："),o().createElement("span",{className:"text-gray-400",style:{whiteSpace:"pre-wrap"}},E.profile.signature||"暂无介绍"))))),o().createElement("div",{className:"domUserDetail_main"},o().createElement(O,{list:z}),o().createElement(O,{list:D}))):o().createElement("div",{className:"flex-center"},o().createElement(b.Z,null)):o().createElement("div",null,"查看个人信息请先登录")}))}}]);