"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[8265],{355:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(63038),r=(0,n.Z)(l);a(21249);var u=a(87363),o=(0,n.Z)(u),c=a(21624),i=a(93011),d=a(23922),s=(0,n.Z)(d),f=a(34640),m=(0,n.Z)(f);a(70819);var p=[["标清",!0],["高清（需要2云贝）",!1],["超清（需要5云贝）",!1]];exports.default=function(){var e=(0,c.useDispatch)(),t=(0,c.useSelector)((function(e){return e.mask})),a=t.callback;return t.dialogDownloadVideoVisibility?o.default.createElement(m.default,{id:"dialogDownloadVideo",title:"选择下载清晰度"},o.default.createElement("div",{className:"content px-12 py-8"},o.default.createElement("div",{className:""},p.map((function(e){var t=(0,r.default)(e,2),a=t[0];return t[1],o.default.createElement("div",{className:"flex items-center",key:a},o.default.createElement("label",{htmlFor:""},o.default.createElement(s.default,null),a))}))),o.default.createElement("div",{className:"flex justify-center mt-10 space-x-4"},o.default.createElement("button",{type:"button",className:"w-20 h-8 rounded-full ui_theme_bg_color text-white",onClick:function(){a(),e((0,i.setDialogReset)())}},"确定"),o.default.createElement("button",{type:"button",className:"w-20 h-8 rounded-full border hover:bg-gray-50",onClick:function(){return e((0,i.setDialogReset)())}},"取消")))):null}},8155:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(63038),r=(0,n.Z)(l);a(66992),a(41539),a(78783),a(33948),a(60285),a(94986),a(92222);var u=a(87363),o=a(93011),c=a(68367),i=(0,n.Z)(c),d=a(1343);exports.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=(0,d.useAppDispatch)(),n=(0,u.useRef)(),l=(0,u.useRef)(),c=(0,u.useState)(0),s=(0,r.default)(c,2),f=s[0],m=s[1],p=(0,u.useState)("下载"),v=(0,r.default)(p,2),b=v[0],E=v[1],y=function(){m(0),E("下载")},h=function(){n.current&&(n.current.postMessage({method:"abort"}),n.current.terminate(),n.current=null)},x=function(){var a=new URL(e).pathname,n=a.substr(a.lastIndexOf(".")),r=window.URL.createObjectURL(l.current),u=document.createElement("a");u.download="".concat(t,".").concat(n),u.href=r,u.click(),window.URL.revokeObjectURL(r)},g=function(){E("缓存中");var t=new i.default;t.postMessage({method:"init",url:e}),t.addEventListener("message",(function(e){var t=e.data,a=e.data.callback;switch(a){case"progress":m(t[a]);break;case"state":E(t[a]),l.current=t.response,x()}})),n.current=t},w=function(){"已缓存"!==b?"下载"===b&&a((0,o.setDialogDownloadVideoShow)({callback:g})):x()};return{downloadProcess:f,downloadState:b,handleInitDownload:y,handleUnLoadDownload:h,handleDownload:w}}},41177:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(8155);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(0,n.Z)(l).default}})},74439:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(49064),r=(0,n.Z)(l),u=a(48926),o=(0,n.Z)(u),c=a(63038),i=(0,n.Z)(c),d=a(87757),s=(0,n.Z)(d);a(21249),a(68309),a(60086),a(29253),a(82526),a(41817),a(92222);var f=a(87363),m=(0,n.Z)(f),p=a(66711),v=a(33548),b=a(94184),E=(0,n.Z)(b),y=a(27484),h=(0,n.Z)(y),x=a(16719);a(25211);var g=a(12503),w=a(90266),S=a(63233),k=a(66508),_=a(94592),N=(0,n.Z)(_),T=a(1343),P=a(12720),D=(0,n.Z)(P),M=a(90443),Z=(0,n.Z)(M),C=a(74849),I=(0,n.Z)(C),O=a(355),j=(0,n.Z)(O),L=a(92673),U=(0,n.Z)(L),R=a(18393),V=(0,n.Z)(R),F=a(69475),z=(0,n.Z)(F),A=a(75799),B=(0,n.Z)(A),Y=function(e){var t=e.list,a=void 0===t?[]:t,n=e.func;return m.default.createElement("div",{className:"domVideoDetail_group mt-3 space-x-1"},a.map((function(e){return m.default.createElement(p.Link,{className:"group bg-gray-50 rounded-full px-2 py-1",onClick:function(){return n(e.id)},to:"/video/list",key:e.id},e.name)})))};exports.default=(0,f.memo)((function(e){var t,a,n,l,u,c,d=e.type,b=e.vid;console.log("player");var y=(0,T.useAppDispatch)();(0,f.useEffect)((function(){y((0,w.setAudioRunningPause)())}),[]);var _=(0,z.default)({type:d,vid:b}),P=_.name,M=_.sub,C=_.isSub,O=(_.isLike,_.pending,_.urls),L=_.related,R=_.detail,F=_.detailInfo,A=_.handleSub,J=(_.handleInit,_.downloadProcess),W=_.downloadState,X=_.handleDownload,q=_.page,G=_.comments,H=_.commentsLoading,K=_.setPage,Q=_.next,$=(0,p.useHistory)().goBack,ee=(0,f.useState)(!1),te=(0,i.default)(ee,2),ae=te[0],ne=te[1],le=(0,f.useState)(""),re=(0,i.default)(le,2),ue=re[0],oe=re[1],ce=function(){var e=(0,o.default)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,S.apiFollow)({id:R.creator.userId,t:followed?0:1});case 3:t=e.sent,(0,r.default)(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ie=(0,B.default)(),de=ie.DomVideoWrap,se=ie.DomScroll,fe=ie.fixed;return m.default.createElement("div",{className:" overflow-auto h-full",ref:se},m.default.createElement("div",{style:{width:930},className:"flex justify-between m-auto"},m.default.createElement("div",{className:"left",style:{width:620}},m.default.createElement("div",{className:"domVideoDetail_header flex items-center"},m.default.createElement("button",{type:"button",className:"flex items-center text-base font-bold",onClick:function(){return $()}},m.default.createElement(x.IconChevronLeft,{size:28,stroke:1}),P)),m.default.createElement("div",{className:"ui_aspect-ratio-16/9",ref:de},m.default.createElement(V.default,{url:null==O?void 0:O.url,detail:R,fixed:fe,next:Q})),m.default.createElement("div",{className:"domVideoDetail_creator flex items-center mt-5"},m.default.createElement(p.Link,{to:"/user/".concat(null==R||null===(t=R.creator)||void 0===t?void 0:t.userId),className:"avatar rounded-full overflow-hidden border"},m.default.createElement("img",{className:"",src:null==R||null===(a=R.creator)||void 0===a?void 0:a.avatarUrl,alt:""})),m.default.createElement(p.Link,{className:"nickname ml-2.5",to:"/user/".concat(null==R||null===(n=R.creator)||void 0===n?void 0:n.userId)},null==R||null===(l=R.creator)||void 0===l?void 0:l.nickname),"video"===d&&m.default.createElement("button",{onClick:ce,type:"button",className:(0,E.default)("follow text-red-500 bg-red-50 ml-auto h-8 rounded-full",{on:null==R||null===(u=R.creator)||void 0===u?void 0:u.followed})},null!=R&&null!==(c=R.creator)&&void 0!==c&&c.followed?"+ 已关注":"+ 关注")),m.default.createElement("button",{type:"button",className:"domVideoDetail_title h1 flex items-center mt-5 text-left",onClick:function(){return ne(!ae)}},null==R?void 0:R.title,ae?m.default.createElement(x.IconCaretUp,{size:24,className:"fill-current"}):m.default.createElement(x.IconCaretDown,{size:24,className:"fill-current"})),m.default.createElement("div",{className:"domVideoDetail_info text-gray-300 mt-3"},"发布：",(0,h.default)(null==R?void 0:R.publishTime).format("YYYY-MM-DD"),"  播放",(0,g.transPlayCount)(null==R?void 0:R.playCount)),m.default.createElement(Y,{list:null==R?void 0:R.videoGroup,func:function(e){return y((0,k.setVideoListId)({id:e}))}}),ae&&m.default.createElement("div",{className:"domVideoDetail_description mt-4"},R.description),m.default.createElement("div",{className:"domVideoDetail_actions flex space-x-3 mt-8"},m.default.createElement("button",{type:"button",className:"flex-center border h-8 rounded-full px-6 hover:bg-gray-100"},m.default.createElement(x.IconThumbUp,{size:20,stroke:1}),F.liked?"已赞":"赞","(",F.likedCount,")"),m.default.createElement("button",{type:"button",className:"flex-center border h-8 rounded-full px-6 hover:bg-gray-100",onClick:A},C?m.default.createElement(x.IconCheckbox,{size:20,stroke:1}):m.default.createElement(x.IconFolderPlus,{size:20,stroke:1}),C?"已收藏":"收藏","(",R[M],")"),m.default.createElement("button",{type:"button",className:"flex-center border h-8 rounded-full px-6 hover:bg-gray-100"},m.default.createElement(x.IconScreenShare,{size:20,stroke:1}),"分享","(".concat(F.shareCount,")")),m.default.createElement("button",{type:"button",onClick:X,className:(0,E.default)("relative w-24 h-8 rounded-full overflow-hidden",0===J?" border":"")},m.default.createElement("div",{className:"absolute inset-0 flex justify-end overflow-hidden"},m.default.createElement("span",{className:"w-24 h-8 flex-center bg-white"},m.default.createElement(x.IconDownload,{size:20,stroke:1}),W)),m.default.createElement("div",{className:"absolute inset-y-0 left-0 overflow-hidden",style:{right:"".concat(100*(1-J),"%")}},m.default.createElement("span",{className:"w-24 h-8 flex-center ui_theme_bg_color text-white"},m.default.createElement(x.IconDownload,{size:20,stroke:1}),W))),m.default.createElement(j.default,null)),m.default.createElement("div",{className:"domVideoDetail_main mt-8"},m.default.createElement("div",{className:"title mb-5"},m.default.createElement(p.Link,{to:"/comment/".concat(d,"/").concat(b),className:"h1 font-bold"},"评论")," ",m.default.createElement("span",null,"(".concat(R.commentCount,")"))),m.default.createElement("div",{className:"domVideoDetail_feedback mb-10"},m.default.createElement(N.default,{value:ue,setValue:oe,length:140})),H?m.default.createElement("div",{className:""},m.default.createElement(I.default,null)):m.default.createElement(m.default.Fragment,null,m.default.createElement(D.default,{comments:G}),m.default.createElement(Z.default,{total:Math.ceil(G.total/v.commentLimit),page:q,func:K})))),m.default.createElement(U.default,{related:L})))}))},75799:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(63038),r=(0,n.Z)(l);a(54747);var u=a(87363);exports.default=function(){var e=(0,u.useRef)(),t=(0,u.useRef)(),a=(0,u.useRef)(),n=(0,u.useState)(!1),l=(0,r.default)(n,2),o=l[0],c=l[1];return(0,u.useEffect)((function(){return a.current=new IntersectionObserver((function(e){e.forEach((function(e){c(!e.isIntersecting)}))}),{root:t.current}),a.current.observe(e.current),function(){a.current.disconnect()}}),[]),{DomVideoWrap:e,DomScroll:t,fixed:o}}},69475:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(48926),r=(0,n.Z)(l),u=a(63038),o=(0,n.Z)(u),c=a(87757),i=(0,n.Z)(c);a(69826),a(68309),a(60086);var d=a(87363),s=a(1343),f=a(63233),m=a(33548),p=a(93011),v=a(80635),b=a(15742),E=(0,n.Z)(b),y=a(73077),h=(0,n.Z)(y),x=a(41177),g=(0,n.Z)(x),w={video:{init:E.default,name:"视频详情",sub:"subscribeCount",apiComments:f.apiCommentVideo},mv:{init:h.default,name:"MV详情",sub:"subCount",apiComments:f.apiCommentMV}};exports.default=function(e){var t=e.vid,a=e.type,n=(0,s.useAppDispatch)(),l=(0,s.useAppSelector)((function(e){return e.account})).mvSublist,u=(0,d.useState)(1),c=(0,o.default)(u,2),b=c[0],E=c[1],y=(0,d.useState)({}),h=(0,o.default)(y,2),x=h[0],S=h[1],k=(0,d.useState)(!0),_=(0,o.default)(k,2),N=_[0],T=_[1],P=(0,d.useMemo)((function(){return l.find((function(e){return e.vid===t}))}),[t,l]),D=(0,d.useMemo)((function(){return null}),[t]),M=w[a].init(),Z=M.pending,C=M.urls,I=M.related,O=M.detail,j=M.detailInfo,L=M.handleInit,U=function(){var e=(0,r.default)(i.default.mark((function e(){var t,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.apiMVSublist)();case 3:t=e.sent,a=t.data,n((0,v.setMVSublist)({mvSublist:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,r.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"video"!==a){e.next=7;break}return e.next=4,(0,f.apiVideoSub)({id:t,t:P?0:1});case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,(0,f.apiMVSub)({mvid:t,t:P?0:1});case 9:e.t0=e.sent;case 10:200===e.t0.code&&U(),n((0,p.setToast)(P?"取消收藏成功":"收藏成功")),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(0),console.log(e.t1);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,r.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w[a].apiComments({id:t,limit:m.commentLimit,offset:(b-1)*m.commentLimit});case 3:n=e.sent,S(n),N&&T(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),F=(0,d.useMemo)((function(){return{type:a,vid:t}}),[a,t]),z=(0,d.useMemo)((function(){var e;return{title:(null==I||null===(e=I[0])||void 0===e?void 0:e.title)||"",link:""}}),[a,t]),A=(0,g.default)(null==C?void 0:C.url,null==O?void 0:O.title),B=A.downloadProcess,Y=A.downloadState,J=A.handleInitDownload,W=A.handleUnLoadDownload,X=A.handleDownload;return(0,d.useEffect)((function(){return L(t),V(),J(),function(){W()}}),[t]),(0,d.useEffect)((function(){V()}),[b]),{params:F,name:w[a].name,sub:w[a].sub,isSub:P,isLike:D,pending:Z,urls:C,related:I,detail:O,detailInfo:j,handleSub:R,handleInit:L,downloadProcess:B,downloadState:Y,handleDownload:X,page:b,comments:x,commentsLoading:N,setPage:E,next:z}}},92673:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0}),a(21249),a(92222);var l=a(87363),r=(0,n.Z)(l),u=a(66711),o=a(27484),c=(0,n.Z)(o),i=a(12503),d=a(16719),s=a(33548),f=a(96298),m=(0,n.Z)(f);exports.default=function(e){var t=e.related,a=void 0===t?[]:t;return r.default.createElement("div",{className:"right",style:{width:280}},r.default.createElement("div",{className:"domVideoDetail_header flex items-center text-base font-bold"},"相关推荐"),r.default.createElement("div",{className:"domVideoDetail_related"},a.map((function(e){return r.default.createElement("div",{className:"item mb-2.5 flex",key:e.vid},r.default.createElement(u.Link,{to:"/player/".concat(s.playerTypes[e.type],"/").concat(e.vid),className:"cover relative flex-none rounded overflow-hidden"},r.default.createElement("img",{className:"",src:e.coverUrl,alt:""}),r.default.createElement("div",{className:"playTime absolute top-0 right-0 mx-2 my-1 flex-center text-white"},r.default.createElement(d.IconPlayerPlay,{size:12}),(0,i.transPlayCount)(e.playTime)),r.default.createElement("div",{className:"durationms absolute bottom-0 right-0 mx-2 my-1 text-white"},(0,c.default)(e.durationms).format("mm:ss"))),r.default.createElement("div",{className:"content p-2 flex-auto w-0"},r.default.createElement("div",{className:"title ui_ellipse"},r.default.createElement(u.Link,{title:e.title,to:"/player/".concat(s.playerTypes[e.type],"/").concat(e.vid),className:"ui_text_black_hover"},0===e.type&&r.default.createElement(m.default,{className:"inline-block"}),e.title)),r.default.createElement("div",{className:"username mt-2 truncate text-gray-400"},"by ",r.default.createElement(u.Link,{to:"/user/".concat(e.creator[0].userId),className:"ui_text_gray_hover"},e.creator[0].userName))))}))))}},73077:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(48926),r=(0,n.Z)(l),u=a(63038),o=(0,n.Z)(u),c=a(87757),i=(0,n.Z)(c);a(66992),a(41539),a(88674),a(78783),a(33948),a(68309),a(82526),a(41817);var d=a(87363),s=a(61533),f=a(63233);exports.default=function(){var e=(0,d.useState)(!1),t=(0,o.default)(e,2),a=t[0],n=t[1],l=(0,d.useState)({}),u=(0,o.default)(l,2),c=u[0],m=u[1],p=(0,d.useState)([]),v=(0,o.default)(p,2),b=v[0],E=v[1],y=(0,d.useState)({}),h=(0,o.default)(y,2),x=h[0],g=h[1],w=(0,d.useState)({}),S=(0,o.default)(w,2),k=S[0],_=S[1],N=function(){var e=(0,r.default)(i.default.mark((function e(t){var a,l,r,u,c,d,p,v,b;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([(0,f.apiMVUrl)({id:t}),(0,f.apiRelatedAllvideo)({id:t}),(0,f.apiMVDetail)({mvid:t}),(0,f.apiMVDetailInfo)({mvid:t})]);case 3:a=e.sent,l=(0,o.default)(a,4),r=l[0].data,u=l[1].data,c=void 0===u?[]:u,d=l[2].data,p=void 0===d?{}:d,v=l[3],b=void 0===v?{}:v,p.title=p.name,p.description=p.desc,(0,s.unstable_batchedUpdates)((function(){m(r),E(c),g(p),_(b),n(!0)})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();return{pending:a,urls:c,related:b,detail:x,detailInfo:k,handleInit:N}}},15742:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(48926),r=(0,n.Z)(l),u=a(63038),o=(0,n.Z)(u),c=a(87757),i=(0,n.Z)(c);a(66992),a(41539),a(88674),a(78783),a(33948);var d=a(87363),s=a(61533),f=a(63233);exports.default=function(){var e=(0,d.useState)(!1),t=(0,o.default)(e,2),a=t[0],n=t[1],l=(0,d.useState)({}),u=(0,o.default)(l,2),c=u[0],m=u[1],p=(0,d.useState)([]),v=(0,o.default)(p,2),b=v[0],E=v[1],y=(0,d.useState)({}),h=(0,o.default)(y,2),x=h[0],g=h[1],w=(0,d.useState)({}),S=(0,o.default)(w,2),k=S[0],_=S[1],N=function(){var e=(0,r.default)(i.default.mark((function e(t){var a,l,r,u,c,d,p,v,b;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([(0,f.apiVideoUrl)({id:t}),(0,f.apiRelatedAllvideo)({id:t}),(0,f.apiVideoDetail)({id:t}),(0,f.apiVideoDetailInfo)({vid:t})]);case 3:a=e.sent,l=(0,o.default)(a,4),r=l[0].urls,u=l[1].data,c=void 0===u?[]:u,d=l[2].data,p=void 0===d?{}:d,v=l[3],b=void 0===v?{}:v,p.playCount=p.playTime,(0,s.unstable_batchedUpdates)((function(){m(r[0]),E(c),g(p),_(b),n(!0)})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return{pending:a,urls:c,related:b,detail:x,detailInfo:k,handleInit:N}}},54512:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(63038),r=(0,n.Z)(l);a(21249);var u=a(87363),o=(0,n.Z)(u),c=a(16719),i=a(27484),d=(0,n.Z)(i),s=a(18393),f=["标清","高清","超清","1080P","没这功能"],m=function(){var e=(0,u.useState)(!1),t=(0,r.default)(e,2),a=t[0],n=t[1],l=(0,u.useState)("超清"),i=(0,r.default)(l,2),d=i[0],s=i[1];return o.default.createElement("div",{className:"relative w-16"},o.default.createElement("button",{onClick:function(){return n(!a)},type:"button",className:"flex-center w-full group"},o.default.createElement(c.IconDeviceDesktop,{className:"text-gray-600 group-hover:text-gray-400",size:20})," ",o.default.createElement("span",{className:"text-gray-400"},d)),a&&o.default.createElement("div",{className:"absolute left-0 right-0 bottom-full border text-white divide-y divide-gray-400 transform -translate-y-4 bg-black bg-opacity-80 border-gray-400 text-center"},f.map((function(e){return o.default.createElement("button",{key:e,type:"button",className:"black w-full py-1",onClick:function(){return s(e),void n(!1)}},e)}))))};exports.default=function(){var e=(0,u.useContext)(s.VideoContext),t=e.handlechangeFull,a=e.full,n=e.handleChangePlay,l=e.play,r=e.currentTime,i=e.duration;return o.default.createElement("div",{className:"h-10 flex-none bg-black flex items-center pl-2"},o.default.createElement("button",{type:"button",className:"border rounded-full text-white border-current w-6 h-6 flex-center",onClick:n},l?o.default.createElement(c.IconPlayerPause,{className:"fill-current",size:12}):o.default.createElement(c.IconPlayerPlay,{className:"fill-current",size:12})),o.default.createElement("span",{className:"text-gray-300 ml-2"},(0,d.default)(1e3*r).format("mm:ss"),"  /  ",(0,d.default)(1e3*i).format("mm:ss")),o.default.createElement("div",{className:"ml-auto flex divide-x"},o.default.createElement("div",{className:"flex"},o.default.createElement("button",{type:"button"}),o.default.createElement("div",null)),o.default.createElement(m,null),o.default.createElement("button",{onClick:t,type:"button",className:"flex-center w-10 text-gray-400 hover:text-white"},a?o.default.createElement(c.IconArrowsMinimize,{size:20,stroke:1}):o.default.createElement(c.IconArrowsMaximize,{size:20,stroke:1}))))}},37975:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(63038),r=(0,n.Z)(l);a(21249),a(92222);var u=a(87363),o=(0,n.Z)(u),c=a(27484),i=(0,n.Z)(c),d=a(18393),s=a(82029),f=a(94792),m=(0,n.Z)(f);exports.default=(0,u.memo)((function(){var e=(0,u.useState)(!1),t=(0,r.default)(e,2),a=t[0],n=t[1],l=(0,u.useState)(!1),c=(0,r.default)(l,2),f=c[0],p=c[1],v=(0,u.useState)(0),b=(0,r.default)(v,2),E=b[0],y=b[1],h=(0,u.useState)(0),x=(0,r.default)(h,2),g=x[0],w=x[1],S=(0,u.useContext)(d.VideoContext),k=S.duration,_=S.currentTime,N=S.buffered,T=S.videoDispatch;return(0,u.useEffect)((function(){f||w(_/k)}),[_]),o.default.createElement("div",{className:"h-1 relative bg-black cursor-pointer"},a&&o.default.createElement("div",{className:"absolute bottom-0 text-white px-2 py-1 border border-gray-600 bg-black bg-opacity-80 transform -translate-y-4 -translate-x-1/2",style:{left:"".concat(100*E,"%")}},(0,i.default)(E*k*1e3).format("mm:ss")),o.default.createElement("div",{className:"absolute inset-0",title:"缓存"},N.map((function(e){var t=(0,r.default)(e,2),a=t[0],n=t[1];return o.default.createElement("div",{key:"".concat(a,"-").concat(n),className:"absolute inset-y-0 bg-gray-400",style:{left:"".concat(a/k*100,"%"),right:"".concat(100*(1-n/k),"%")}})}))),o.default.createElement("div",{className:"h-full relative w-0 ui_theme_bg_color",title:"播放进度",style:{width:"".concat(100*g,"%")}},o.default.createElement(m.default,{className:"absolute shadow right-0 top-1/2 transform -translate-y-1/2 bg-white rounded-full h-3 w-3 flex-center",onMouseDown:function(){p(!0)},onMouseMove:function(){},onMouseUp:function(){p(!1)}},o.default.createElement("i",{className:"rounded-full ui_theme_bg_color w-1 h-1"}))),o.default.createElement("progress",{onMouseEnter:function(e){n(!0)},onMouseMove:function(e){var t=e.clientX,a=e.target.getBoundingClientRect(),n=a.left,l=a.width;y((t-n)/l),f&&w((t-n)/l)},onMouseLeave:function(e){n(!1)},onMouseUp:function(){p(!1)},onClick:function(e){var t=e.clientX,a=e.target.getBoundingClientRect(),n=(t-a.left)/a.width;w(n),T((0,s.actionSetJumpTime)(n*k))},max:k,value:_,className:"absolute bottom-0 left-0 opacity-0 w-full"}))}))},18393:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0}),exports.VideoContext=void 0;var l=a(48926),r=(0,n.Z)(l),u=a(63038),o=(0,n.Z)(u),c=a(87757),i=(0,n.Z)(c);a(29253);var d=a(87363),s=(0,n.Z)(d),f=a(16719),m=a(94184),p=(0,n.Z)(m),v=a(85392),b=a(21624),E=a(54512),y=(0,n.Z)(E),h=a(37975),x=(0,n.Z)(h),g=a(97252),w=(0,n.Z)(g),S=a(82029),k=exports.VideoContext=(0,d.createContext)(null);exports.default=(0,d.memo)((function(e){var t=e.url,a=(e.detail,e.brs,e.fixed),n=(e.next,(0,d.useReducer)(w.default,g.initialState)),l=(0,o.default)(n,2),u=l[0],c=u.play,m=u.duration,E=u.currentTime,h=u.jumpTime,_=u.buffered,N=u.full,T=l[1],P=(0,d.useRef)(null),D=(0,b.useDispatch)(),M=(0,d.useState)(!1),Z=(0,o.default)(M,2),C=(Z[0],Z[1]),I=(0,d.useState)(!0),O=(0,o.default)(I,2),j=(O[0],O[1],function(){c?P.current.pause():P.current.play(),T((0,S.actionSetPlay)(!c))}),L=function(){var e=(0,r.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=6;break}return e.next=3,document.webkitExitFullscreen();case 3:D((0,v.setPositionTrue)()),e.next=9;break;case 6:return e.next=8,document.documentElement.webkitRequestFullScreen();case 8:D((0,v.setPositionFalse)());case 9:T((0,S.actionSetFull)(!N));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){P.current.currentTime=h}),[h]),s.default.createElement("div",{className:(0,p.default)("ui_aspect-ratio-16/9",a?" absolute bottom-16 right-8 z-10 w-80":"relative")},s.default.createElement("div",{className:(0,p.default)("flex flex-col inset-0",N?"fixed z-50":"absolute")},s.default.createElement("div",{className:"bg-black flex-auto h-0 relative"},s.default.createElement("video",{src:t,ref:P,onClick:j,onProgress:function(e){for(var t=e.target,a=[],n=0;n<t.buffered.length;n+=1){var l=[t.buffered.start(n),t.buffered.end(n)];a.push(l)}T((0,S.actionSetBuffered)(a))},onTimeUpdate:function(e){var t=e.target;T((0,S.actionSetCurrentTime)(t.currentTime))},onLoadedMetadata:function(e){var t=e.target;T((0,S.actionSetDuration)(t.duration))},className:"h-full m-auto cursor-pointer",onDoubleClick:L,onEnded:function(){C(!0)},playsInline:!0,autoPlay:c}),!c&&s.default.createElement("button",{onClick:j,type:"button",className:"ico text-white bg-black bg-opacity-10 border border-gray-300 cursor-pointer hover:border-white rounded-full absolute inset-0 m-auto w-16 h-16 flex-center"},s.default.createElement(f.IconPlayerPlay,{size:24,className:"fill-current"}))),s.default.createElement(k.Provider,{value:{handleChangePlay:j,play:c,duration:m,currentTime:E,buffered:_,handlechangeFull:L,full:N,videoDispatch:T}},s.default.createElement(x.default,null),s.default.createElement(y.default,null))))}))},74822:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SET_FULL="SET_FULL",t.SET_PLAY="SET_PLAY",t.SET_BUFFERED="SET_BUFFERED",t.SET_DURATION="SET_DURATION",t.SET_CURRENTTIME="SET_CURRENTTIME",t.SET_JUMPTIME="SET_JUMPTIME"},82029:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0}),exports.actionSetDuration=exports.actionSetJumpTime=exports.actionSetCurrentTime=exports.actionSetBuffered=exports.actionSetFull=exports.actionSetPlay=exports.createAction=void 0;var l=a(59713),r=(0,n.Z)(l),u=a(74822),o=exports.createAction=function(e,t,a){return{type:e,payload:(0,r.default)({},t,a)}};exports.actionSetPlay=function(e){return o(u.SET_PLAY,"play",e)},exports.actionSetFull=function(e){return o(u.SET_FULL,"full",e)},exports.actionSetBuffered=function(e){return o(u.SET_BUFFERED,"buffered",e)},exports.actionSetCurrentTime=function(e){return o(u.SET_CURRENTTIME,"currentTime",e)},exports.actionSetJumpTime=function(e){return o(u.SET_JUMPTIME,"jumpTime",e)},exports.actionSetDuration=function(e){return o(u.SET_DURATION,"duration",e)}},97252:(e,t,a)=>{a.r(t),a(47941),a(82526),a(57327),a(38880),a(54747),a(49337);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0}),exports.initialState=void 0;var l=a(59713),r=(0,n.Z)(l),u=a(74822);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}exports.initialState={play:!1,full:!1,buffered:[],duration:0,currentTime:0,jumpTime:0},exports.default=function(e,t){switch(t.type){case u.SET_PLAY:case u.SET_FULL:return c(c({},e),t.payload);case u.SET_BUFFERED:return c(c({},e),{},{buffered:t.payload.buffered});case u.SET_DURATION:return c(c({},e),{},{duration:t.payload.duration});case u.SET_CURRENTTIME:return c(c({},e),t.payload);case u.SET_JUMPTIME:return c(c({},e),{},{jumpTime:t.payload.jumpTime});default:return e}}},87471:(e,t,a)=>{a.r(t);var n=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var l=a(74439);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(0,n.Z)(l).default}})},70819:(e,t,a)=>{a.r(t)},25211:(e,t,a)=>{a.r(t)},68367:(e,t,a)=>{function n(){return new Worker(a.p+"download.worker.a54eaec8.worker.js")}a.r(t),a.d(t,{default:()=>n})}}]);