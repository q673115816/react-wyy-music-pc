"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[4725],{131:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(2982),r=(a(4916),a(4765),a(2222),a(7327),a(1249),a(8309),a(3804)),c=a.n(r),l=a(1343),s=a(847),o=a(309),i=a(3011),u=a(7704),m=a(885),h=a(5200);const d=(0,r.memo)((function(e){var t=e.handleSearch,a=(0,l.T)(),n=(0,r.useState)(!1),i=(0,m.Z)(n,2),u=i[0],d=i[1],f=(0,r.useRef)(null),y=(0,l.C)((function(e){return e.search})).searchHistory;return(0,r.useEffect)((function(){f.current&&f.current.clientHeight>66&&d(!0)}),[]),c().createElement(c().Fragment,null,c().createElement("div",{className:"subtitle flex items-center px-5 py-2 text-gray-500"},c().createElement("span",{className:"text-sm"},"搜索历史")," ",c().createElement("button",{type:"button",onClick:function(){a((0,o.setSearchHistory)([]))}},c().createElement(h.IconTrash,{size:16})),u&&c().createElement("button",{type:"button",onClick:function(){return d(!1)},className:"ml-auto ui_text_black_hover"},"查看全部")),c().createElement("div",{className:"px-5",style:u?{height:66,overflow:"hidden"}:null,ref:f},c().createElement("div",{className:"searchHistory flex flex-wrap -m-1"},y.map((function(e){return c().createElement(s.Link,{key:e,to:"/search/".concat(e),onClick:function(){return t(e)},className:"item group hover:bg-gray-100 border rounded-full relative m-1 py-1 px-4"},e,c().createElement("button",{type:"button",className:"ico absolute opacity-0 group-hover:opacity-100 inset-y-0 m-auto text-gray-400",onClick:function(t){var n;t.preventDefault(),t.stopPropagation(),n=e,a((0,o.setSearchHistory)(y.filter((function(e){return e!==n}))))}},c().createElement(h.IconX,{size:14,stroke:2})))})))))}));var f=a(4184),y=a.n(f);const p=(0,r.memo)((function(e){var t=e.list,a=void 0===t?[]:t,n=e.handleSearch;return c().createElement("div",{className:"list"},a.map((function(e,t){return c().createElement(s.Link,{to:"/search/".concat(e.searchWord),onClick:function(){return n(e.searchWord)},className:"item flex items-center w-full hover:bg-gray-100",key:e.content},c().createElement("span",{className:y()("index flex-center text-base flex-none",t<3?"text-red-500":"text-gray-300")},t+1),c().createElement("div",{className:"aside flex-auto w-0 px-1"},c().createElement("div",{className:"name flex items-center gap-1"},c().createElement("span",{className:y()("searchWord",t<3?"font-bold":"")},e.searchWord),e.iconUrl&&c().createElement("img",{className:"h-2.5",src:e.iconUrl,alt:"hot"}),c().createElement("span",{className:"text-gray-400"},e.score)),c().createElement("div",{className:"content mt-2 text-gray-400 truncate"},e.content)))})))})),v=(0,r.memo)((function(){var e,t=(0,l.T)(),a=(0,l.C)((function(e){return e.search})),r=a.searchValue,m=a.searchHot,h=a.searchSuggest,f=a.searchHistory,y=(0,l.C)((function(e){return e.mask})).searchVisibility,v=function(e){t((0,i.setDialogReset)()),t((0,o.setSearchValue)({searchValue:e})),t((0,o.setSearchHistory)([e].concat((0,n.Z)(f.filter((function(t){return t!==e}))))))};return y?c().createElement(u.Z,null,c().createElement("div",{className:"absolute domHeader_search_box shadow rounded bg-white py-2 z-10"},r?c().createElement("div",{className:"domHeader_search_box_value overflow-auto h-full flex-auto"},c().createElement(s.Link,{to:"/search/".concat(r),onClick:function(){return v(r)}},'搜索"',c().createElement("span",{className:"ui_link"},r),'"相关的结果>'),null==h||null===(e=h.order)||void 0===e?void 0:e.map((function(e,t){return c().createElement("div",{key:e},h[e].map((function(e){return c().createElement("div",{key:e.id},e.name)})))}))):c().createElement("div",{className:"domHeader_search_box_noValue overflow-auto h-full flex-auto"},f.length>0&&c().createElement(d,{handleSearch:v}),c().createElement("div",{className:"subtitle px-5 py-3 text-sm text-gray-400"},"热搜榜"),c().createElement(p,{list:m,handleSearch:v})))):null}))}}]);