{"version":3,"file":"Lrc.723b4bf7.js","mappings":"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","sources":["webpack://wyy/./src/layout/Lrc/components/Left.tsx","webpack://wyy/./src/layout/Lrc/components/Center.tsx","webpack://wyy/./src/layout/Lrc/components/Right.tsx","webpack://wyy/./src/layout/Lrc/Lrc.tsx"],"sourcesContent":["import React, { memo } from \"react\";\nimport { IconFolderPlus, IconCloudDownload, IconShare } from \"@tabler/icons\";\nimport DomHeart from \"@/components/Table/Heart\";\nimport classNames from \"classnames\";\nimport { useAppSelector } from \"@/reducers/hooks\";\n\nexport default memo(() => {\n  const { currentSong } = useAppSelector(({ audio }) => audio);\n  const { running } = useAppSelector(({ audio }) => audio);\n\n  return (\n    <div className=\"left\">\n      <div className=\"relative\">\n        <div\n          id=\"stylus\"\n          className=\"mt-16 mb-10 relative m-auto w-min duration-500 transition-transform z-10\"\n          style={running ? { transform: \"rotate(40deg)\" } : {}}\n        >\n          <div\n            className=\"point shadow relative transform -translate-y-1/2 rounded-full bg-gray-300 w-5 h-5 border-8 border-white bg-white\"\n            style={{ zIndex: 2 }}\n          />\n          <div\n            className=\"handle absolute top-0 left-1/2 shadow bg-white h-2 w-20 origin-top-left\"\n            style={{ transform: \"rotate(45deg) translate(0, -50%)\", zIndex: 1 }}\n          >\n            <div\n              className=\" absolute left-full bg-white shadow w-12 h-2 origin-top-left\"\n              style={{ transform: \"rotate(-45deg) translate(-10%, 0)\" }}\n            >\n              <div className=\"shadow w-4 h-4 absolute left-full -top-1 bg-white\" />\n            </div>\n          </div>\n        </div>\n        <div className=\" rounded-full bg-gray-300 p-2.5 w-64 h-64\">\n          <div\n            className={classNames(\"flex-center rounded-full p-9\", {\n              on: running,\n            })}\n            id=\"record\"\n          >\n            <img\n              className=\"rounded-full border-8 border-black\"\n              src={currentSong.al.picUrl}\n              alt=\"\"\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"flex mt-4 justify-between\">\n        <DomHeart\n          stroke=\"2\"\n          id={currentSong.id}\n          size={24}\n          className=\"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200\"\n        />\n        <button\n          type=\"button\"\n          className=\"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200\"\n        >\n          <IconFolderPlus size={24} stroke={1} />\n        </button>\n        <button\n          type=\"button\"\n          className=\"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200\"\n        >\n          <IconCloudDownload size={24} stroke={1} />\n        </button>\n        <button\n          type=\"button\"\n          className=\"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200\"\n        >\n          <IconShare size={24} stroke={1} />\n        </button>\n      </div>\n    </div>\n  );\n});\n","import React, { memo, useEffect, useRef, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useAppDispatch, useAppSelector } from \"@/reducers/hooks\";\nimport classnames from \"classnames\";\n\nconst Lrc = memo(() => {\n  const { currentTime } = useAppSelector(({ audio }) => audio);\n  const { lrcList } = useAppSelector(({ lrc }) => lrc);\n  const RefScroll = useRef(null);\n  const RefCurrentLine = useRef(null);\n  const [currentLineIndex, setCurrentLineIndex] = useState(0);\n\n  useEffect(() => {\n    setCurrentLineIndex(\n      lrcList.findIndex(({ time }) => time > currentTime) - 1\n    );\n  }, [currentTime]);\n\n  useEffect(() => {\n    RefScroll.current.scrollTop = 0;\n  }, [lrcList]);\n\n  useEffect(() => {\n    if (RefCurrentLine?.current) {\n      RefScroll.current.scrollTop =\n        RefCurrentLine.current.offsetTop - RefScroll.current.clientHeight / 2;\n    }\n  }, [currentLineIndex]);\n  return (\n    <div\n      style={{ scrollBehavior: \"smooth\" }}\n      className=\"whitespace-pre-line select-text text-center text-gray-500 space-y-2 overflow-auto overscroll-contain h-full pt-36\"\n      ref={RefScroll}\n    >\n      {lrcList.length ? (\n        lrcList.map(({ time, word }, index) => (\n          <div\n            ref={currentLineIndex === index ? RefCurrentLine : null}\n            key={time}\n            className={classnames(\n              \"leading-5\",\n              currentLineIndex === index && \"font-bold text-black\"\n            )}\n          >\n            {word.trim()}\n            &nbsp;\n          </div>\n        ))\n      ) : (\n        <div>纯音乐，请您欣赏</div>\n      )}\n    </div>\n  );\n});\n\nexport default memo(() => {\n  const { currentSong } = useAppSelector(({ audio }) => audio);\n  return (\n    <div className=\"center overflow-auto pt-5\" style={{ width: 300 }}>\n      <div className=\"text-2xl text-center\">{currentSong.name}</div>\n      <div className=\"flex justify-center mt-2 whitespace-nowrap\">\n        <div className=\"truncate\">\n          {currentSong.ar.map((artist) => (\n            <Link\n              key={artist.id}\n              to={`/artist/${artist.id}`}\n              className=\"ui_text_gray_hover\"\n            >\n              {artist.name}\n            </Link>\n          ))}\n        </div>\n        &nbsp; - &nbsp;\n        <div className=\"truncate\">\n          <Link\n            to={`/playlist/album/${currentSong.al.id}`}\n            className=\"ui_text_gray_hover\"\n          >\n            {currentSong.al.name}\n          </Link>\n        </div>\n      </div>\n      <div className=\"relative\">\n        <div className=\"relative mt-8\" style={{ height: 330 }}>\n          <Lrc />\n        </div>\n        <div className=\"absolute pointer-events-none left-0 right-0 top-0 h-6 bg-gradient-to-b from-white to-transparent\" />\n        <div className=\"absolute pointer-events-none left-0 right-0 bottom-0 h-6 bg-gradient-to-t from-white to-transparent\" />\n      </div>\n    </div>\n  );\n});\n","import React, { memo } from \"react\";\nimport DomLoading from \"@/components/Loading\";\n\ninterface iSimiSong {\n  id: number;\n  album: { picUrl: string };\n  name: string;\n  alias: string;\n  artists: { name: string }[];\n  [key: string]: any;\n}\n\ninterface iRight {\n  simiSong: iSimiSong[];\n  loading: boolean;\n}\n\nexport default memo<iRight>(({ simiSong = [], loading = false }) => {\n  return (\n    <div\n      className=\"right flex-none mt-28 h-72 overflow-auto\"\n      style={{ width: 244 }}\n    >\n      {loading ? (\n        <div className=\"flex justify-center\">\n          <DomLoading />\n        </div>\n      ) : (\n        <div className=\"pb-4 relative\">\n          <div>播放来源：...</div>\n          <div className=\"font-bold py-3 text-sm\">包含这首歌的歌单</div>\n          <div>{}</div>\n          <div className=\"font-bold py-3 text-sm\">相似歌曲</div>\n          <div>\n            {simiSong.map((song) => (\n              <button\n                key={song.id}\n                type=\"button\"\n                className=\"flex text-left w-full rounded hover:bg-gray-100 p-1.5 h-10\"\n              >\n                <div className=\"rounded relative overflow-hidden\">\n                  <img src={`${song.album.picUrl}?param=30y30`} alt=\"\" />\n                </div>\n                <div className=\"w-0 flex-auto px-2 py-1 text-gray-600\">\n                  <div className=\"truncate\">\n                    {song.name}\n                    <span className=\"text-gray-500\">{song.alias}</span>\n                    &nbsp; - &nbsp;\n                    {song.artists.map((artist) => artist.name)}\n                  </div>\n                </div>\n              </button>\n            ))}\n          </div>\n          <div className=\"absolute pointer-events-none left-0 right-0 bottom-0 h-16 bg-gradient-to-t from-white to-transparent\" />\n        </div>\n      )}\n    </div>\n  );\n});\n","import React, { memo, useEffect, useState } from \"react\";\nimport { apiCommentMusic, apiSimiSong } from \"@/api\";\nimport DomLoading from \"@/components/Loading\";\nimport DomPage from \"@/components/Page\";\nimport { useLocation } from \"react-router-dom\";\n\nimport DomCommentsList from \"@/components/CommentsList\";\nimport \"./style.scss\";\nimport { setLyricHide } from \"@/reducers/lrc/slice\";\nimport { useAppDispatch, useAppSelector } from \"@/reducers/hooks\";\nimport Left from \"./components/Left\";\nimport Center from \"./components/Center\";\nimport Right from \"./components/Right\";\n\nexport default memo(() => {\n  const dispatch = useAppDispatch();\n  const location = useLocation();\n  const { currentSong } = useAppSelector(({ audio }) => audio);\n  const { lyricVisibility } = useAppSelector(({ lrc }) => lrc);\n  const [loading, setLoading] = useState(true);\n  const [simiSong, setSimiSong] = useState([]);\n  const [comments, setComments] = useState({});\n  const [page, setPage] = useState(1);\n  const limit = 20;\n  const handleLeftInit = async () => {\n    try {\n      const comments = await apiCommentMusic({\n        id: currentSong.id,\n        limit,\n        offset: (page - 1) * limit,\n      });\n      setComments(comments);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleRightInit = async () => {\n    try {\n      const { songs } = await apiSimiSong({\n        id: currentSong.id,\n      });\n      setSimiSong(songs);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleInit = async () => {\n    await handleLeftInit();\n    await handleRightInit();\n    setLoading(false);\n  };\n  useEffect(() => {\n    if (!lyricVisibility) return;\n    if (loading) handleInit();\n    else handleLeftInit();\n  }, [lyricVisibility, page, currentSong.id]);\n  useEffect(() => {\n    // const unlisten = listen((route) => {\n    //   dispatch(setLyricHide());\n    // });\n    // return unlisten;\n  }, []);\n\n  if (!lyricVisibility) return null;\n  return (\n    <div id=\"lrc\" className=\"absolute inset-x-0 z-10 overflow-hidden\">\n      <div className=\"w-full h-full bg-white overflow-auto transform\">\n        <div className=\"lrc_inner m-auto\" style={{ width: 888 }}>\n          <div className=\"lrc_header flex justify-between\">\n            <Left />\n            <Center />\n            <Right {...{ simiSong, loading }} />\n          </div>\n          <div className=\"lrc_main mt-14 flex justify-center\">\n            <div style={{ width: 556 }}>\n              {loading ? (\n                <div className=\"flex justify-center\">\n                  <DomLoading />\n                </div>\n              ) : (\n                <>\n                  <DomCommentsList\n                    comments={comments}\n                    more={currentSong.id}\n                    type=\"song\"\n                  />\n                  <DomPage\n                    total={Math.ceil(comments.total / limit)}\n                    page={page}\n                    func={setPage}\n                  />\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n"],"names":["memo","currentSong","useAppSelector","audio","running","className","id","style","transform","zIndex","classNames","on","src","al","picUrl","alt","stroke","size","type","IconFolderPlus","IconCloudDownload","IconShare","Lrc","currentTime","lrcList","lrc","RefScroll","useRef","RefCurrentLine","useState","currentLineIndex","setCurrentLineIndex","useEffect","findIndex","time","current","scrollTop","offsetTop","clientHeight","scrollBehavior","ref","length","map","index","word","key","classnames","trim","width","name","ar","artist","Link","to","height","simiSong","loading","song","album","alias","artists","useAppDispatch","useLocation","lyricVisibility","setLoading","setSimiSong","comments","setComments","page","setPage","handleLeftInit","apiCommentMusic","limit","offset","console","log","handleRightInit","apiSimiSong","songs","handleInit","Left","Center","Right","more","total","Math","ceil","func"],"sourceRoot":""}