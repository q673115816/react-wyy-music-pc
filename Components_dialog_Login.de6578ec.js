"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[2631],{1729:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var a=n(885),l=n(7363),r=n.n(l),c=n(6719),o=n(6405),s=n(57),m=n(5861),u=n(7757),i=n.n(u),p=n(1533),d=n(1565),E=n(5800),f=(0,l.createContext)(null),y="SET_TYPE",v="SET_SIGNIN_PHONE",h="SET_SIGNIN_PASSWORD",g="SET_SIGNIN_ARGEEARGUMENT",b="SET_SIGNIN_COUNTRYCODE",N=function(e,t){switch(t.type){case y:return void(e.type=t.payload.type);default:return;case v:return void(e.loginphone=t.payload.loginphone);case h:return void(e.loginpassword=t.payload.loginpassword);case g:return void(e.argeeArgument=t.payload.argeeArgument);case b:return void(e.countrycode=t.payload.countrycode)}},x={argeeArgument:!1,loginphone:"",loginpassword:"",registerphone:"",registerpassword:"",type:"scan",countrycode:"86"},w=(0,l.memo)((function(e){var t=e.handleInit;return r().createElement("div",{className:"absolute bg-black bg-opacity-60 flex-center flex-col inset-0 mask text-white"},r().createElement("div",null,"二维码已失效"),r().createElement("button",{type:"button",className:"btn w-20 h-8 rounded mt-2 bg-blue-500",onClick:t},"点击刷新"))})),k=function(){return r().createElement("div",{className:"scansuccess flex-center flex-col"},r().createElement("div",{className:"flex-center ui_themeColor my-10"},r().createElement(c.IconFaceId,{size:64,stroke:"1"})),r().createElement("span",{className:"text-gray-400 text-sm"},"扫描成功"),r().createElement("div",{className:"tips text-base mt-4"},"请在手机上确认登录"))},C=(0,l.memo)((function(e){var t=e.qrimg,n=e.handleChooseOtherSign,a=e.children;return r().createElement("div",{className:"scanwait text-center"},r().createElement("div",{className:"qrbox relative"},r().createElement("div",{className:"left"},r().createElement("div",{className:"ico ui_themeColor flex-center"},r().createElement(c.IconScan,{size:64}))),r().createElement("div",{className:"right"},r().createElement("div",{className:"qrimg relative m-auto"},r().createElement("img",{src:t,alt:""}),a),r().createElement("div",{className:"tips text-sm mt-4"},"使用",r().createElement("a",{href:"https://music.163.com/#/download",className:"ui_link"},"网易云音乐APP"),"扫码登录"))),r().createElement("button",{type:"button",onClick:n},"选择其他登录模式 >"))}));const S=(0,l.memo)((function(){var e=(0,l.useState)(""),t=(0,a.Z)(e,2),n=t[0],c=t[1],o=(0,l.useState)(""),s=(0,a.Z)(o,2),u=s[0],v=s[1],h=(0,l.useState)(0),g=(0,a.Z)(h,2),b=g[0],N=g[1],x=(0,l.useRef)(),S=(0,l.useContext)(f).loginDispatch,I=(0,l.useCallback)((0,m.Z)(i().mark((function e(){var t,n,a,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.IT)();case 3:return t=e.sent,n=t.data.unikey,e.next=7,(0,d.y4)({key:n,qrimg:!0});case 7:a=e.sent,l=a.data.qrimg,(0,p.unstable_batchedUpdates)((function(){v(n),c(l),N(0)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),_=function(){var e=(0,m.Z)(i().mark((function e(){var t,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.rW)({key:u}).catch((function(e){return console.log(e)}));case 2:t=e.sent,n=t.code,a=t.cookie,e.t0=n,e.next=800===e.t0?8:802===e.t0?11:803===e.t0?13:16;break;case 8:return x.current&&clearInterval(x.current),N(800),e.abrupt("break",16);case 11:return N(802),e.abrupt("break",16);case 13:return(0,E.d)(a),window.location.reload(),e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=(0,l.useCallback)((function(){return S({type:y,payload:{type:"signin"}})}),[]);return(0,l.useEffect)((function(){I()}),[]),(0,l.useEffect)((function(){return x.current=setInterval(_,5e3),function(){x.current&&clearInterval(x.current)}}),[u]),r().createElement("div",{className:"qr pt-24 flex items-center flex-col"},r().createElement("div",{className:"title text-2xl"},"扫码登录"),(0===b||800===b)&&r().createElement(C,{qrimg:n,handleChooseOtherSign:Z},800===b&&r().createElement(w,{handleInit:I})),802===b&&r().createElement(k,null))}));var I=n(3922),_=(n(1249),n(4184)),Z=n.n(_),z=n(1343);const D=(0,l.memo)((function(){var e=(0,z.C)((function(e){return e.common})).countriesCodeList,t=(0,l.useContext)(f),n=t.loginReducer.countrycode,o=t.loginDispatch,s=(0,l.useState)(!1),m=(0,a.Z)(s,2),u=m[0],i=m[1];return r().createElement("div",{className:"customSelect"},r().createElement("button",{onClick:function(){return i(!u)},type:"button",className:"default"},r().createElement(c.IconDeviceMobile,{size:24,stroke:.5,className:"ico"}),"+",n,r().createElement("div",{className:"arrow"},r().createElement(c.IconCaretDown,{size:12,className:"fill-current"}))),r().createElement("div",{className:"customOptionGroup",style:{display:u?"":"none"}},e.map((function(e){return e.countryList.map((function(e){var t=e.zh,a=e.code;return r().createElement("button",{key:t,type:"button",className:Z()("customOption flex w-full px-3 h-6",{on:a===n}),onClick:function(){return function(e){o({type:b,payload:{countrycode:e}})}(a)}},r().createElement("div",{className:"flag w-8"}),r().createElement("div",{className:"zh"},t),r().createElement("div",{className:"code ml-auto"},"+".concat(a)))}))}))))}));var F=n(7788);const O=(0,l.memo)((function(){return r().createElement("div",{className:"threes flex justify-between"},r().createElement("button",{type:"button",className:"three"},r().createElement(F.PT,{hover:!0})),r().createElement("button",{type:"button",className:"three"},r().createElement(F.B3,{hover:!0})),r().createElement("button",{type:"button",className:"three"},r().createElement(F.Hl,{hover:!0})),r().createElement("button",{type:"button",className:"three"},r().createElement(F.Pl,{hover:!0})))})),R=(0,l.memo)((function(){var e=(0,l.useContext)(f),t=e.loginReducer,n=t.argeeArgument,o=t.loginphone,s=t.loginpassword,u=t.countrycode,p=e.loginDispatch,b=(0,l.useState)(""),N=(0,a.Z)(b,2),x=N[0],w=N[1],k=(0,l.useState)(!1),C=(0,a.Z)(k,2),S=C[0],_=C[1],Z=(0,l.useRef)(),z=(0,l.useRef)(),F=function(){var e=(0,m.Z)(i().mark((function e(){var t,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.nu)({phone:o,password:s,countrycode:u});case 3:(t=e.sent).data,n=t.code,t.msg,a=t.cookie,t.token,t.profile,200===n&&((0,E.d)(a),window.location.reload()),502===n&&w("⚠️当前登录失败，请稍后再试"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return r().createElement("div",{className:"form px-10"},r().createElement("div",{className:"angle absolute top-0 left-0"},r().createElement("button",{type:"button",onClick:function(){return p({type:y,payload:{type:"scan"}})}},r().createElement(c.IconQrcode,{size:36})),r().createElement("span",{className:"absolute top-3 left-12 pr-3 pl-4 py-1.5 tips text-white whitespace-nowrap bg-gray-400"},"扫码登录更安全")),r().createElement("div",{style:{height:200},className:"flex-center ui_themeColor"},r().createElement(c.IconFaceId,{size:100,stroke:1})),r().createElement("form",{onSubmit:function(e){e.preventDefault(),n?o?s?/\d{11}/.test(o)?F():w("⚠️请输入11位数字的手机号"):w("⚠️请输入密码"):w("⚠️请输入手机号"):alert("请先勾选同意《服务条款》《服务条款》《服务条款》")},autoComplete:"off"},r().createElement("table",{className:"table"},r().createElement("colgroup",null,r().createElement("col",{style:{width:84}}),r().createElement("col",{style:{width:"calc(100% - 168px)"}}),r().createElement("col",{style:{width:84}})),r().createElement("tbody",null,r().createElement("tr",null,r().createElement("td",null,r().createElement(D,null)),r().createElement("td",{colSpan:2},r().createElement("input",{type:"text",name:"phone",placeholder:"请输入手机号",className:"input",readOnly:!0,onFocus:function(e){return e.target.removeAttribute("readonly")},value:o,onChange:function(e){return function(e){p({type:v,payload:{loginphone:e}})}(e.target.value)}}))),r().createElement("tr",null,r().createElement("td",{colSpan:2},r().createElement("input",{type:S?"text":"password",name:"password",placeholder:"请输入密码",className:"input",readOnly:!0,onFocus:function(e){return e.target.removeAttribute("readonly")},value:s,onChange:function(e){return function(e){p({type:h,payload:{loginpassword:e}})}(e.target.value)}}),r().createElement("button",{type:"button",className:"togglePassword",onClick:function(){return _(!S)}},S?r().createElement(c.IconEye,{size:16}):r().createElement(c.IconEyeOff,{size:16}))),r().createElement("td",null,r().createElement("div",{className:"flex-center"},r().createElement("button",{type:"button",className:"text-gray-400",onClick:function(){return p({type:y,payload:{type:"reset"}})}},"重设密码")))))),r().createElement("div",{className:"info"},r().createElement("label",{htmlFor:"autoLogin",className:"auto"},r().createElement(I.Z,{ref:z,name:"autoLogin"}),"  自动登录"),r().createElement("div",{className:"warn ml-auto text-red-500"},x)),r().createElement("div",{className:"actions"},r().createElement("button",{type:"submit",className:"submit"},"登 录"),r().createElement("button",{type:"button",className:"signup underline my-2 mx-auto text-sm block w-min whitespace-nowrap",onClick:function(){n?p({type:y,payload:{type:"signup"}}):alert("请先勾选同意《服务条款》《服务条款》《服务条款》")}},"注册"),r().createElement(O,null)),r().createElement("label",{htmlFor:"argument",className:"argument flex items-center whitespace-nowrap mt-9"},r().createElement(I.Z,{ref:Z,name:"argument",onChange:function(e){return function(e){p({type:g,payload:{argeeArgument:e}})}(e.target.checked)},checked:n})," ",r().createElement("span",{className:"text-gray-400"},"同意"),r().createElement("a",{className:"ui_link hover",target:"_blank",rel:"noopener noreferrer",href:"https://st.music.163.com/official-terms/service"},"《服务条款》"),r().createElement("a",{className:"ui_link hover",target:"_blank",rel:"noopener noreferrer",href:"https://st.music.163.com/official-terms/privacy"},"《隐私条款》"),r().createElement("a",{className:"ui_link hover",target:"_blank",rel:"noopener noreferrer",href:"https://st.music.163.com/official-terms/children"},"《儿童隐私条款》"))))})),A=(0,l.memo)((function(){var e=(0,l.useState)(""),t=(0,a.Z)(e,2),n=t[0],o=t[1],s=(0,l.useContext)(f),m=s.loginReducer,u=m.registerphone,i=m.registerpassword,p=(m.countrycode,s.loginDispatch),d=(0,l.useCallback)((function(e){return e.target.removeAttribute("readonly")}),[]);return r().createElement("div",{className:"form px-10"},r().createElement("div",{className:"angle absolute top-0 left-0"},r().createElement("button",{className:"mt-2.5",type:"button",onClick:function(){return p({type:y,payload:{type:"signin"}})}},"< 返回登录")),r().createElement("div",{style:{height:200,color:"var(--themeColor)"},className:"flex-center"},r().createElement(c.IconFaceId,{size:100,stroke:1})),r().createElement("form",{onSubmit:function(e){e.preventDefault(),u?i||o("⚠️请输入登录密码"):o("⚠️请输入手机号码")},autoComplete:"off"},r().createElement("table",{className:"table"},r().createElement("colgroup",null,r().createElement("col",{width:"84"}),r().createElement("col",{width:"auto"}),r().createElement("col",{width:"84"})),r().createElement("tbody",null,r().createElement("tr",null,r().createElement("td",null,r().createElement(D,null)),r().createElement("td",{colSpan:2},r().createElement("input",{type:"text",name:"phone",placeholder:"请输入手机号",className:"input",readOnly:!0,onFocus:d,value:u,onChange:function(){}}))),r().createElement("tr",null,r().createElement("td",{colSpan:3},r().createElement("input",{type:"password",name:"password",placeholder:"设置登录密码",className:"input",readOnly:!0,onFocus:d,value:i,minLength:8,maxLength:20,onChange:function(){}}))))),r().createElement("div",{className:"info"},n?r().createElement("div",{className:"warn ui_red"},n):r().createElement("span",{className:"text-gray-400"},"密码8-20位，至少包含字母/数字/字符2中组合")),r().createElement("div",{className:"actions"},r().createElement("button",{type:"submit",className:"submit"},"注册"),r().createElement("div",{className:"hint flex items-center justify-between mt-8 mb-4"},"其他注册方式"),r().createElement(O,null))))})),T=function(){var e=(0,l.useState)(""),t=(0,a.Z)(e,2),n=t[0],o=t[1],s=(0,l.useState)(""),m=(0,a.Z)(s,2),u=m[0],i=m[1],p=(0,l.useState)(""),d=(0,a.Z)(p,2),E=d[0],v=d[1],h=(0,l.useContext)(f),g=(h.loginReducer.countrycode,h.loginDispatch),b=function(){};return r().createElement("div",{className:"form"},r().createElement("div",{className:"angle"},r().createElement("button",{className:"mt-2.5",type:"button",onClick:function(){return g({type:y,payload:{type:"signin"}})}},"< 返回登录")),r().createElement("div",{style:{height:200,color:"var(--themeColor)"},className:"flex-center"},r().createElement(c.IconFaceId,{size:100,stroke:1})),r().createElement("form",{onSubmit:function(e){e.preventDefault(),n?u?g({type:y,payload:{type:"identify"}}):v("⚠️请输入登录密码"):v("⚠️请输入手机号码")},autoComplete:"off"},r().createElement("table",{className:"table"},r().createElement("colgroup",null,r().createElement("col",{width:"84"}),r().createElement("col",{width:"auto"}),r().createElement("col",{width:"84"})),r().createElement("tbody",null,r().createElement("tr",null,r().createElement("td",null,r().createElement(D,null)),r().createElement("td",{colSpan:2},r().createElement("input",{type:"text",name:"phone",placeholder:"请输入手机号",className:"input",value:n,onFocus:b,onChange:function(e){var t=e.target;return o(t.value)}}))),r().createElement("tr",null,r().createElement("td",{colSpan:3},r().createElement("input",{type:"password",name:"password",placeholder:"设置登录密码",className:"input",value:u,minLength:8,maxLength:20,onFocus:b,onChange:function(e){var t=e.target;return i(t.value)}}))))),r().createElement("div",{className:"info"},E?r().createElement("div",{className:"warn text-red-500 ml-auto"},E):r().createElement("span",{className:"text-gray-400"},"密码8-20位，至少包含字母/数字/字符2中组合")),r().createElement("div",{className:"actions"},r().createElement("button",{type:"submit",className:"submit"},"下一步"))))};var L=n(6459);const P=function(){var e=(0,l.useState)(""),t=(0,a.Z)(e,2),n=t[0],o=(t[1],(0,l.useContext)(f));(0,L.Z)(o.loginReducer);var s=o.loginDispatch;return r().createElement("div",{className:"form"},r().createElement("div",{className:"angle"},r().createElement("button",{className:"mt-2.5",type:"button",onClick:function(){return s({type:y,payload:{type:"signin"}})}},"< 返回登录")),r().createElement("div",{style:{height:200,color:"var(--themeColor)"},className:"flex-center"},r().createElement(c.IconFaceId,{size:100,stroke:1})),r().createElement("div",null,"为了安全，我们会向您的手机发送短信检验码"),r().createElement("form",{onSubmit:function(){},className:"mt-6",autoComplete:"off"},r().createElement("div",{className:"flex space-x-4"},r().createElement("div",{className:"flex-1 relative"},r().createElement("i",{className:"absolute inset-y-0 flex"},r().createElement(c.IconKey,{size:16,className:"m-auto w-6"})),r().createElement("input",{type:"text",className:"border h-full pl-6 rounded",placeholder:"填写验证码"})),r().createElement("div",{className:"flex-1"},r().createElement("button",{type:"button",className:"submit"},"重新获取"))),r().createElement("div",{className:"info"},r().createElement("div",{className:"warn text-red-500 ml-auto"},n)),r().createElement("div",{className:"actions"},r().createElement("button",{type:"submit",className:"submit"},"完成"))))};var q={scan:r().createElement(S,null),signin:r().createElement(R,null),signup:r().createElement(A,null),reset:r().createElement(T,null),identify:r().createElement(P,null)};const G=(0,l.memo)((function(){var e=(0,z.T)(),t=(0,z.C)((function(e){return e.common})).loginVisibility,n=(0,s.C)(N,x),l=(0,a.Z)(n,2),m=l[0],u=l[1];return t?r().createElement("div",{id:"dialogLogin",className:"-translate-x-1/2 -translate-y-1/2 bg-white fixed left-1/2 rounded shadow top-1/2 transform ui_dialog"},r().createElement("button",{type:"button",className:"ui_dialog_close close",onClick:function(){return e((0,o.setLoginVisibilty)())}},r().createElement(c.IconX,{stroke:1.5})),r().createElement(f.Provider,{value:{loginReducer:m,loginDispatch:u}},q[m.type])):null}))}}]);