"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[8113],{85868:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(87363),l=(0,r.Z)(n),u=a(66711),c=a(45493),o=(0,r.Z)(c),s=a(85959),d=(0,r.Z)(s),f=a(98010),i=(0,r.Z)(f);exports.default=(0,n.memo)((function(){return l.default.createElement(u.Switch,null,l.default.createElement(u.Route,{path:"/look",exact:!0,component:o.default}),l.default.createElement(u.Route,{path:"/look/my",component:d.default}),l.default.createElement(u.Route,{path:"/look/:id(\\d*)",component:i.default}))}))},74593:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(48926),l=(0,r.Z)(n),u=a(63038),c=(0,r.Z)(u),o=a(87757),s=(0,r.Z)(o),d=a(87363),f=(0,r.Z)(d),i=a(66711),m=a(47467),p=(0,r.Z)(m),v=a(88767),h=a(74849),k=(0,r.Z)(h),E=a(8062),b=(0,r.Z)(E);exports.default=(0,d.memo)((function(){var e=(0,d.useState)(20),t=(0,c.default)(e,2),a=(t[0],t[1],(0,d.useRef)(null)),r=(0,d.useRef)(null),n=(0,d.useState)([]),u=(0,c.default)(n,2),o=(u[0],u[1],(0,v.useQuery)("look",(0,l.default)(s.default.mark((function e(){var t,a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.get("http://localhost:3333/list").then((function(e){return e.data}));case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))))),m=o.data,h=(o.error,o.isLoading),E=o.isSuccess;return o.status,f.default.createElement("div",{className:"domLook overflow-auto max-h-full flex-auto",ref:a},f.default.createElement("div",{className:"domLook_header ui_header"},f.default.createElement("span",{className:"title h1"},"LOOK直播"),f.default.createElement("span",{className:"text-gray-400 slogan ml-2"},"在这里，看见音乐"),f.default.createElement(i.Link,{to:function(e){var t=e.pathname;return"".concat(t,"/my")},className:"ml-2 py-1 px-2 rounded bg-red-500 text-white"},"我的直播"),f.default.createElement("a",{href:"https://look.163.com/hot",className:"text-gray-400 ml-auto"},"更多 >")),f.default.createElement("div",{className:"px-8"},h&&f.default.createElement("div",{className:"pt-48 flex-center"},f.default.createElement(k.default,null)),E&&f.default.createElement(b.default,{list:m}),f.default.createElement("div",{ref:r})))}))},8062:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(63038),l=(0,r.Z)(n);a(92222),a(21249);var u=a(87363),c=(0,r.Z)(u),o=a(66711),s=a(1343),d=a(86813),f=a(65302);exports.default=(0,u.memo)((function(e){var t=e.list,a=(0,s.useAppSelector)(d.liveSelector).socket,r=(0,o.useHistory)().push,n=(0,o.useLocation)().pathname,i=(0,u.useCallback)((function(e,t){e.preventDefault(),a||(0,f.useCreateSocket)(),prompt(),a.emit("join",{}),r("".concat(n,"/").concat(t))}),[n]);return c.default.createElement("div",{className:"grid grid-cols-3 gap-5"},t.map((function(e){var t=(0,l.default)(e,2),a=t[0],r=t[1];return c.default.createElement("div",{key:a},c.default.createElement("a",{href:"".concat(n,"/").concat(a),onClick:function(e){return i(e,a)}},c.default.createElement("img",{className:"ui_aspect-ratio-16/9 cursor-pointer",loading:"lazy",src:r.banner,alt:""})),c.default.createElement("a",{href:"".concat(n,"/").concat(a),onClick:function(e){return i(e,a)},className:"cursor-pointer"},r.title),c.default.createElement("div",null,c.default.createElement(o.Link,{to:"/"},r.user)))})))}))},45493:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(74593);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(0,r.Z)(n).default}})},35529:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(48926),l=(0,r.Z)(n),u=a(87757),c=(0,r.Z)(u);a(54747);var o=a(87363),s=(0,r.Z)(o),d=a(1343),f=a(86813),i=a(94184),m=(0,r.Z)(i),p=a(65302),v=(0,r.Z)(p),h=(0,o.memo)((function(e){var t=e.onClick,a=e.status,r=e.children;return s.default.createElement("button",{type:"button",className:(0,m.default)("text-white rounded p-2",a?"bg-red-500":"bg-blue-500"),onClick:t},r)}));exports.default=(0,o.memo)((function(){var e=(0,d.useAppDispatch)(),t=(0,d.useAppSelector)(f.liveSelector).status,a=(0,o.useRef)(null),r=(0,o.useRef)(null),n=(0,o.useRef)(null),u=function(){var t=(0,l.default)(c.default.mark((function t(){return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((0,f.pushOpen)()),v.default.connect(),v.default.emit("create",{uid:110});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return s.default.createElement("div",{className:"w-full h-full p-8 overflow-auto"},s.default.createElement("div",{className:"flex"},s.default.createElement(h,{onClick:function(){t.deskTop?a.current&&(a.current.srcObject.getTracks().forEach((function(e){return e.stop()})),a.current.srcObject=null,e((0,f.deskTopClose)())):r.current=navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}).then((function(t){a.current.srcObject=t,e((0,f.deskTopOpen)())})).catch((function(e){return console.log(e)}))},status:t.deskTop},"桌面共享开关"),s.default.createElement(h,{onClick:function(){t.user?e((0,f.userClose)()):(e((0,f.userOpen)()),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){n.current&&(n.current.srcObject=e)})).catch((function(e){return console.log(e)})))},status:t.user},"摄像头开关"),s.default.createElement(h,{onClick:function(){t.push?(e((0,f.pushClose)()),v.default.disconnect()):u()},status:t.push},"推送开关")),s.default.createElement("div",{className:"flex flex-col"},s.default.createElement("div",{className:""},s.default.createElement("video",{className:"w-full",ref:a,autoPlay:!0,playsInline:!0})),s.default.createElement("div",{className:""},s.default.createElement("video",{className:"w-full",ref:n,autoPlay:!0,playsInline:!0}))))}))},85959:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(35529);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(0,r.Z)(n).default}})},49105:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(87363),l=(0,r.Z)(n);exports.default=(0,n.memo)((function(){return l.default.createElement("div",{className:"p-8"},"return ",l.default.createElement("button",{onClick:methodDoesNotExist},"Break the world"),";")}))},98010:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(49105);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(0,r.Z)(n).default}})},28194:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(85868);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(0,r.Z)(n).default}})},65302:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0}),exports.useCreateSocket=void 0;var n=a(64428),l=(0,r.Z)(n),u=a(1343),c=a(86813),o=(0,l.default)("http://localhost:3333",{autoConnect:!1});o.on("create-success",(function(e){console.log(e)})),o.on("join-success",(function(e){console.log(e)})),o.on("disconnect-success",(function(e){console.log(e)})),exports.useCreateSocket=function(){(0,u.useAppDispatch)()((0,c.createLiveSocket)({socket:o})),o.connect()},exports.default=o}}]);