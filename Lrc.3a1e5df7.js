"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[995],{6746:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ue});var a=n(7363),r=n.n(a),l=n(885),c=n(6719),s=n(5510),o=n(57),i=n(5861),m=n(7757),u=n.n(m),d=n(1533),f=n(9965),E=n(9365),p=(0,a.createContext)(null),v="SET_TYPE",h="SET_SIGNIN_PHONE",g="SET_SIGNIN_PASSWORD",b="SET_SIGNIN_ARGEEARGUMENT",y="SET_SIGNIN_COUNTRYCODE",N=function(e,t){switch(t.type){case v:return void(e.type=t.payload.type);case"SET_SIGNIN_WARN":return;case h:return void(e.loginphone=t.payload.loginphone);case g:return void(e.loginpassword=t.payload.loginpassword);case b:return void(e.argeeArgument=t.payload.argeeArgument);case y:return void(e.countrycode=t.payload.countrycode);default:return}},x={argeeArgument:!0,loginphone:"",loginpassword:"",registerphone:"",registerpassword:"",type:"scan",countrycode:"86"},w=(0,a.memo)((function(e){var t=e.handleInit;return r().createElement("div",{className:"absolute bg-black bg-opacity-60 flex-center flex-col inset-0 mask text-white"},r().createElement("div",null,"二维码已失效"),r().createElement("button",{type:"button",className:"btn w-20 h-8 rounded mt-2 bg-blue-500",onClick:t},"点击刷新"))})),k=function(){return r().createElement("div",{className:"scansuccess flex-center flex-col"},r().createElement("div",{className:"flex-center ui_themeColor my-10"},r().createElement(c.IconFaceId,{size:64,stroke:"1"})),r().createElement("span",{className:"text-gray-400 text-sm"},"扫描成功"),r().createElement("div",{className:"tips text-base mt-4"},"请在手机上确认登录"))},_=(0,a.memo)((function(e){var t=e.qrimg,n=e.handleChooseOtherSign,a=e.children;return r().createElement("div",{className:"scanwait text-center"},r().createElement("div",{className:"qrbox relative"},r().createElement("div",{className:"left"},r().createElement("div",{className:"ico ui_themeColor flex-center"},r().createElement(c.IconScan,{size:64}))),r().createElement("div",{className:"right"},r().createElement("div",{className:"qrimg relative m-auto"},r().createElement("img",{src:t,alt:""}),a),r().createElement("div",{className:"tips text-sm mt-4"},"使用",r().createElement("a",{href:"https://music.163.com/#/download",className:"ui_link"},"网易云音乐APP"),"扫码登录"))),r().createElement("button",{type:"button",onClick:n},"选择其他登录模式 >"))}));const C=(0,a.memo)((function(){var e=(0,a.useState)(""),t=(0,l.Z)(e,2),n=t[0],c=t[1],s=(0,a.useState)(""),o=(0,l.Z)(s,2),m=o[0],h=o[1],g=(0,a.useState)(0),b=(0,l.Z)(g,2),y=b[0],N=b[1],x=(0,a.useRef)(),C=(0,a.useContext)(p).loginDispatch,S=(0,a.useCallback)((0,i.Z)(u().mark((function e(){var t,n,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.IT)();case 3:return t=e.sent,n=t.data.unikey,e.next=7,(0,f.y4)({key:n,qrimg:!0});case 7:a=e.sent,r=a.data.qrimg,(0,d.unstable_batchedUpdates)((function(){h(n),c(r),N(0)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),I=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.rW)({key:m}).catch((function(e){return console.log(e)}));case 2:t=e.sent,n=t.code,a=t.cookie,e.t0=n,e.next=800===e.t0?8:802===e.t0?11:803===e.t0?13:16;break;case 8:return x.current&&clearInterval(x.current),N(800),e.abrupt("break",16);case 11:return N(802),e.abrupt("break",16);case 13:return(0,E.d)(a),window.location.reload(),e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=(0,a.useCallback)((function(){return C({type:v,payload:{type:"signin"}})}),[]);return(0,a.useEffect)((function(){S()}),[]),(0,a.useEffect)((function(){return x.current=setInterval(I,5e3),function(){x.current&&clearInterval(x.current)}}),[m]),r().createElement("div",{className:"qr pt-24 flex items-center flex-col"},r().createElement("div",{className:"title text-2xl"},"扫码登录"),(0===y||800===y)&&r().createElement(_,{qrimg:n,handleChooseOtherSign:P},800===y&&r().createElement(w,{handleInit:S})),802===y&&r().createElement(k,null))}));n(4916);var S=n(8176),I=(n(1249),n(4184)),P=n.n(I),Z=n(9638);const z=(0,a.memo)((function(){var e=(0,Z.C)((function(e){return e.common})).countriesCodeList,t=(0,a.useContext)(p),n=t.loginReducer.countrycode,s=t.loginDispatch,o=(0,a.useState)(!1),i=(0,l.Z)(o,2),m=i[0],u=i[1];return r().createElement("div",{className:"customSelect"},r().createElement("button",{onClick:function(){return u(!m)},type:"button",className:"default"},r().createElement(c.IconDeviceMobile,{size:24,stroke:.5,className:"ico"}),"+",n,r().createElement("div",{className:"arrow"},r().createElement(c.IconCaretDown,{size:12,className:"fill-current"}))),r().createElement("div",{className:"customOptionGroup",style:{display:m?"":"none"}},e.map((function(e){return e.countryList.map((function(e){var t=e.zh,a=e.code;return r().createElement("button",{key:t,type:"button",className:P()("customOption flex w-full px-3 h-6",{on:a===n}),onClick:function(){return function(e){s({type:y,payload:{countrycode:e}})}(a)}},r().createElement("div",{className:"flag w-8"}),r().createElement("div",{className:"zh"},t),r().createElement("div",{className:"code ml-auto"},"+".concat(a)))}))}))))}));var M=n(4539);const D=(0,a.memo)((function(){return r().createElement("div",{className:"threes flex justify-between"},r().createElement("button",{type:"button",className:"three"},r().createElement(M.PT,{hover:!0})),r().createElement("button",{type:"button",className:"three"},r().createElement(M.B3,{hover:!0})),r().createElement("button",{type:"button",className:"three"},r().createElement(M.Hl,{hover:!0})),r().createElement("button",{type:"button",className:"three"},r().createElement(M.Pl,{hover:!0})))}));n(8309);const T=(0,a.memo)((function(e){var t=e.value,n=void 0===t?"":t,s=e.onChange,o=e.name,i=void 0===o?"name":o,m=e.type,u=void 0===m?"text":m,d=e.placeholder,f=void 0===d?"":d,E=(0,a.useState)(u),p=(0,l.Z)(E,2),v=p[0],h=p[1],g=(0,a.useState)(!1),b=(0,l.Z)(g,2),y=b[0],N=b[1],x=(0,a.useCallback)((function(){h(y?"password":"text"),N(!y)}),[y]);return r().createElement(r().Fragment,null,r().createElement("input",{type:v,name:i,placeholder:f,className:"input",value:n,onChange:s}),"password"===u&&r().createElement("button",{type:"button",className:"togglePassword",onClick:x},y?r().createElement(c.IconEye,{size:16}):r().createElement(c.IconEyeOff,{size:16})))})),L=(0,a.memo)((function(){var e=(0,a.useContext)(p),t=e.loginReducer,n=t.argeeArgument,s=t.loginphone,o=t.loginpassword,m=t.countrycode,d=e.loginDispatch,y=(0,a.useState)(""),N=(0,l.Z)(y,2),x=N[0],w=N[1],k=(0,a.useState)(!0),_=(0,l.Z)(k,2),C=_[0],I=_[1],P=(0,a.useCallback)((function(e){var t=e.target;I(t.checked)}),[]),Z=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.nu)({phone:s,password:o,countrycode:m});case 3:(t=e.sent).data,n=t.code,t.msg,a=t.cookie,t.token,t.profile,200===n&&((0,E.d)(a),window.location.reload()),502===n&&w("⚠️当前登录失败，请稍后再试"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),M=(0,a.useCallback)((function(e){var t=e.target.value;d({type:h,payload:{loginphone:t}})}),[]),L=(0,a.useCallback)((function(e){var t=e.target.value;d({type:g,payload:{loginpassword:t}})}),[]),U=(0,a.useCallback)((function(e){var t=e.target.checked;d({type:b,payload:{argeeArgument:t}})}),[]);return r().createElement("div",{className:"form px-10"},r().createElement("div",{className:"angle absolute top-0 left-0"},r().createElement("button",{type:"button",onClick:function(){return d({type:v,payload:{type:"scan"}})}},r().createElement(c.IconQrcode,{size:36})),r().createElement("span",{className:"absolute top-3 left-12 pr-3 pl-4 py-1.5 tips text-white whitespace-nowrap bg-gray-400"},"扫码登录更安全")),r().createElement("div",{style:{height:200},className:"flex-center ui_themeColor"},r().createElement(c.IconFaceId,{size:100,stroke:1})),r().createElement("form",{onSubmit:function(e){e.preventDefault(),n?s?o?/\d{11}/.test(s)?Z():w("⚠️请输入11位数字的手机号"):w("⚠️请输入密码"):w("⚠️请输入手机号"):alert("请先勾选同意《服务条款》《服务条款》《服务条款》")},autoComplete:"off"},r().createElement("table",{className:"table"},r().createElement("colgroup",null,r().createElement("col",{style:{width:84}}),r().createElement("col",{style:{width:"calc(100% - 168px)"}}),r().createElement("col",{style:{width:84}})),r().createElement("tbody",null,r().createElement("tr",null,r().createElement("td",null,r().createElement(z,null)),r().createElement("td",{colSpan:2},r().createElement(T,{type:"text",name:"phone",placeholder:"请输入手机号",value:s,onChange:M}))),r().createElement("tr",null,r().createElement("td",{colSpan:2},r().createElement(T,{type:"password",name:"password",placeholder:"请输入密码",value:o,onChange:L})),r().createElement("td",null,r().createElement("div",{className:"flex-center"},r().createElement("button",{type:"button",className:"text-gray-400",onClick:function(){return d({type:v,payload:{type:"reset"}})}},"重设密码")))))),r().createElement("div",{className:"info"},r().createElement("label",{htmlFor:"autoLogin",className:"auto"},r().createElement(S.Z,{onChange:P,checked:C,name:"autoLogin"}),"  自动登录"),r().createElement("div",{className:"warn ml-auto text-red-500"},x)),r().createElement("div",{className:"actions"},r().createElement("button",{type:"submit",className:"submit"},"登 录"),r().createElement("button",{type:"button",className:"signup underline my-2 mx-auto text-sm block w-min whitespace-nowrap",onClick:function(){n?d({type:v,payload:{type:"signup"}}):alert("请先勾选同意《服务条款》《服务条款》《服务条款》")}},"注册"),r().createElement(D,null)),r().createElement(R,null,r().createElement(S.Z,{name:"argument",onChange:U,checked:n}))))}));var R=(0,a.memo)((function(e){var t=e.children;return r().createElement("label",{htmlFor:"argument",className:"argument flex items-center whitespace-nowrap mt-9"},t," ",r().createElement("span",{className:"text-gray-400"},"同意"),r().createElement("a",{className:"ui_link hover",target:"_blank",rel:"noopener noreferrer",href:"https://st.music.163.com/official-terms/service"},"《服务条款》"),r().createElement("a",{className:"ui_link hover",target:"_blank",rel:"noopener noreferrer",href:"https://st.music.163.com/official-terms/privacy"},"《隐私条款》"),r().createElement("a",{className:"ui_link hover",target:"_blank",rel:"noopener noreferrer",href:"https://st.music.163.com/official-terms/children"},"《儿童隐私条款》"))}));const U=(0,a.memo)((function(){var e=(0,a.useState)(""),t=(0,l.Z)(e,2),n=t[0],s=t[1],o=(0,a.useContext)(p),i=o.loginReducer,m=i.registerphone,u=i.registerpassword,d=(i.countrycode,o.loginDispatch),f=(0,a.useCallback)((function(e){return e.target.removeAttribute("readonly")}),[]);return r().createElement("div",{className:"form px-10"},r().createElement("div",{className:"angle absolute top-0 left-0"},r().createElement("button",{className:"mt-2.5",type:"button",onClick:function(){return d({type:v,payload:{type:"signin"}})}},"< 返回登录")),r().createElement("div",{style:{height:200,color:"var(--themeColor)"},className:"flex-center"},r().createElement(c.IconFaceId,{size:100,stroke:1})),r().createElement("form",{onSubmit:function(e){e.preventDefault(),m?u||s("⚠️请输入登录密码"):s("⚠️请输入手机号码")},autoComplete:"off"},r().createElement("table",{className:"table"},r().createElement("colgroup",null,r().createElement("col",{width:"84"}),r().createElement("col",{width:"auto"}),r().createElement("col",{width:"84"})),r().createElement("tbody",null,r().createElement("tr",null,r().createElement("td",null,r().createElement(z,null)),r().createElement("td",{colSpan:2},r().createElement("input",{type:"text",name:"phone",placeholder:"请输入手机号",className:"input",readOnly:!0,onFocus:f,value:m,onChange:function(){}}))),r().createElement("tr",null,r().createElement("td",{colSpan:3},r().createElement("input",{type:"password",name:"password",placeholder:"设置登录密码",className:"input",readOnly:!0,onFocus:f,value:u,minLength:8,maxLength:20,onChange:function(){}}))))),r().createElement("div",{className:"info"},n?r().createElement("div",{className:"warn ui_red"},n):r().createElement("span",{className:"text-gray-400"},"密码8-20位，至少包含字母/数字/字符2中组合")),r().createElement("div",{className:"actions"},r().createElement("button",{type:"submit",className:"submit"},"注册"),r().createElement("div",{className:"hint flex items-center justify-between mt-8 mb-4"},"其他注册方式"),r().createElement(D,null))))})),F=function(){var e=(0,a.useState)(""),t=(0,l.Z)(e,2),n=t[0],s=t[1],o=(0,a.useState)(""),i=(0,l.Z)(o,2),m=i[0],u=i[1],d=(0,a.useState)(""),f=(0,l.Z)(d,2),E=f[0],h=f[1],g=(0,a.useContext)(p),b=(g.loginReducer.countrycode,g.loginDispatch),y=function(){};return r().createElement("div",{className:"form"},r().createElement("div",{className:"angle"},r().createElement("button",{className:"mt-2.5",type:"button",onClick:function(){return b({type:v,payload:{type:"signin"}})}},"< 返回登录")),r().createElement("div",{style:{height:200,color:"var(--themeColor)"},className:"flex-center"},r().createElement(c.IconFaceId,{size:100,stroke:1})),r().createElement("form",{onSubmit:function(e){e.preventDefault(),n?m?b({type:v,payload:{type:"identify"}}):h("⚠️请输入登录密码"):h("⚠️请输入手机号码")},autoComplete:"off"},r().createElement("table",{className:"table"},r().createElement("colgroup",null,r().createElement("col",{width:"84"}),r().createElement("col",{width:"auto"}),r().createElement("col",{width:"84"})),r().createElement("tbody",null,r().createElement("tr",null,r().createElement("td",null,r().createElement(z,null)),r().createElement("td",{colSpan:2},r().createElement("input",{type:"text",name:"phone",placeholder:"请输入手机号",className:"input",value:n,onFocus:y,onChange:function(e){var t=e.target;return s(t.value)}}))),r().createElement("tr",null,r().createElement("td",{colSpan:3},r().createElement("input",{type:"password",name:"password",placeholder:"设置登录密码",className:"input",value:m,minLength:8,maxLength:20,onFocus:y,onChange:function(e){var t=e.target;return u(t.value)}}))))),r().createElement("div",{className:"info"},E?r().createElement("div",{className:"warn text-red-500 ml-auto"},E):r().createElement("span",{className:"text-gray-400"},"密码8-20位，至少包含字母/数字/字符2中组合")),r().createElement("div",{className:"actions"},r().createElement("button",{type:"submit",className:"submit"},"下一步"))))};var H=n(6459);const V=function(){var e=(0,a.useState)(""),t=(0,l.Z)(e,2),n=t[0],s=(t[1],(0,a.useContext)(p));(0,H.Z)(s.loginReducer);var o=s.loginDispatch;return r().createElement("div",{className:"form"},r().createElement("div",{className:"angle"},r().createElement("button",{className:"mt-2.5",type:"button",onClick:function(){return o({type:v,payload:{type:"signin"}})}},"< 返回登录")),r().createElement("div",{style:{height:200,color:"var(--themeColor)"},className:"flex-center"},r().createElement(c.IconFaceId,{size:100,stroke:1})),r().createElement("div",null,"为了安全，我们会向您的手机发送短信检验码"),r().createElement("form",{onSubmit:function(){},className:"mt-6",autoComplete:"off"},r().createElement("div",{className:"flex space-x-4"},r().createElement("div",{className:"flex-1 relative"},r().createElement("i",{className:"absolute inset-y-0 flex"},r().createElement(c.IconKey,{size:16,className:"m-auto w-6"})),r().createElement("input",{type:"text",className:"border h-full pl-6 rounded",placeholder:"填写验证码"})),r().createElement("div",{className:"flex-1"},r().createElement("button",{type:"button",className:"submit"},"重新获取"))),r().createElement("div",{className:"info"},r().createElement("div",{className:"warn text-red-500 ml-auto"},n)),r().createElement("div",{className:"actions"},r().createElement("button",{type:"submit",className:"submit"},"完成"))))};var A={scan:r().createElement(C,null),signin:r().createElement(L,null),signup:r().createElement(U,null),reset:r().createElement(F,null),identify:r().createElement(V,null)};const q=(0,a.memo)((function(){var e=(0,Z.T)(),t=(0,Z.C)((function(e){return e.common})).loginVisibility,n=(0,o.C)(N,x),a=(0,l.Z)(n,2),i=a[0],m=a[1];return t?r().createElement("div",{id:"dialogLogin",className:"-translate-x-1/2 -translate-y-1/2 bg-white fixed left-1/2 rounded shadow top-1/2 transform ui_dialog"},r().createElement("button",{type:"button",className:"ui_dialog_close close",onClick:function(){return e((0,s.setLoginVisibilty)())}},r().createElement(c.IconX,{stroke:1.5})),r().createElement(p.Provider,{value:{loginReducer:i,loginDispatch:m}},A[i.type])):null}));n(2222),n(7042),n(5827),n(1539);var j=n(1624),O=n(9922),Y=n(6467);const X=function(){var e=(0,i.Z)(u().mark((function e(t){var n,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:function(){return null},(new DataTransfer).items.add("text/plain",t),e.next=5,navigator.clipboard.writeText(t);case 5:n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var G={songs:"单曲"};const W=function(){var e=(0,j.useDispatch)(),t=(0,j.useSelector)((function(e){return e.mask})),n=t.dialogShareVisibility,a=t.contextMenuType,l=t.contextMenuItemId,c=t.contextMenuItem,s=(0,j.useSelector)((function(e){return e.account})).profile,o=(0,j.useSelector)((function(e){return e.common})).baseUrl,m="".concat(o,"/").concat(a,"?id=").concat(l,"&userId=").concat(s.userId),d=function(){var t=(0,i.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:X(m,(function(){e((0,O.setToast)("复制链接成功"))})),e((0,O.setDialogReset)());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return n?r().createElement(Y.Z,{id:"dialogShare",title:"分享"},r().createElement("div",{className:"list divide-y divide-fuchsia-300"},r().createElement("div",null,r().createElement("button",{type:"button",className:"item flex items-center"},r().createElement("i",{className:"ico"},r().createElement(M.QA,{active:!0})),"分享到云音乐动态")),r().createElement("div",null,r().createElement("button",{type:"button",className:"item flex items-center"},r().createElement("i",{className:"ico"},r().createElement(M.Ro,{active:!0})),"私信分享")),r().createElement("div",null,r().createElement("button",{type:"button",className:"item flex items-center",onClick:function(){e((0,O.setDialogShareWXShow)())}},r().createElement("i",{className:"ico"},r().createElement(M.PT,{active:!0})),"微信好友")),r().createElement("div",null,r().createElement("a",{target:"_block",href:"https://connect.qq.com/widget/shareqq/index.html?site=网易云音乐&url=".concat(m,"&from=qq&title=分享").concat(G[a],"：").concat(c.name,"&summary=").concat(c.ar.reduce((function(e,t){return"".concat(e,"/").concat(t.name)}),"").slice(1),"&pics=").concat(c.al.picUrl,"?imageView&thumbnail=120y120"),className:"item flex items-center"},r().createElement("i",{className:"ico"},r().createElement(M.B3,{active:!0})),"QQ好友")),r().createElement("div",null,r().createElement("a",{href:"#",className:"item flex items-center"},r().createElement("i",{className:"ico"},r().createElement(M.uq,{active:!0})),"QQ空间")),r().createElement("div",null,r().createElement("a",{href:"#",className:"item flex items-center"},r().createElement("i",{className:"ico"},r().createElement(M.Hl,{active:!0})),"微博")),r().createElement("div",null,r().createElement("button",{onClick:d,type:"button",className:"item flex items-center"},r().createElement("i",{className:"ico"},r().createElement(M.qo,{active:!0})),"复制链接")))):null};var Q=n(9361),B=n.n(Q);const J=function(){var e=(0,j.useDispatch)(),t=(0,j.useSelector)((function(e){return e.mask})),n=t.contextMenuShareLink;return t.dialogShareWXVisibility?r().createElement(Y.Z,{id:"dialogShareWX",title:"分享"},r().createElement("div",{className:"content"},r().createElement("div",{className:"qr"},r().createElement(B(),{size:110,level:"H",value:n,title:n}),r().createElement("div",{className:"tips"},"打开微信，扫一扫~")),r().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full red",onClick:function(){return e((0,O.setDialogReset)())}},"完成"))):null},K=function(){var e=(0,j.useSelector)((function(e){return e.mask})).dialogCreatePlaylistVisibility,t=(0,a.useState)(""),n=(0,l.Z)(t,2),c=n[0],s=n[1],o=(0,a.useRef)(),m=function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,(0,f.a4)({name:c,privacy:o.current.value?10:null});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return e?r().createElement(Y.Z,{id:"dialogCreatePlaylist",title:"新建歌单"},r().createElement("form",{className:"content px-4 pb-8",onSubmit:m},r().createElement("div",null,r().createElement("input",{type:"text",name:"name",className:"border w-full h-8 p-2 rounded placeholder-gray-300",placeholder:"请输入新歌单标题",onChange:function(e){return s(e.target.value)}})),r().createElement("div",{className:"mt-2"},r().createElement("label",{htmlFor:"privacy",className:"flex items-center"},r().createElement(S.Z,{name:"privacy",ref:o})," ",r().createElement("span",null,"设置为隐私歌单"))),r().createElement("div",{className:"flex-center"},r().createElement("button",{type:"submit",className:P()("inline-flex items-center justify-center border px-3 h-8 rounded-full red",{disabled:0===c.length})},"创建")))):null};var $=n(5326);const ee=(0,a.memo)((function(){var e=(0,j.useDispatch)(),t=(0,j.useSelector)((function(e){return e.mask})),n=t.artistId,a=t.dialogUnSubscriptionVisibility,l=function(){var t=(0,i.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,f.dU)({id:n});case 3:e((0,O.setDialogReset)()),e((0,O.setToast)("取消收藏！")),(0,$.r)(e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return a?r().createElement(Y.Z,{id:"dialogUnSubscription",title:""},r().createElement("div",{className:"main"},r().createElement("div",{className:"content"},r().createElement("div",{className:"text-center"},"确定要取消收藏该歌手？")),r().createElement("div",{className:"actions flex justify-center pt-10 pb-6"},r().createElement("button",{type:"button",className:"ui_theme_bg_color text-white rounded-full h-7 w-16",onClick:l},"确定")))):null}));var te=n(7484),ne=n.n(te),ae=n(6711),re=n(780),le=n(2446),ce=n(5721),se=function(){var e=(0,j.useDispatch)();return r().createElement("div",{className:"empty w-min m-auto pt-20 whitespace-nowrap"},r().createElement("div",{className:"text-gray-400 text-sm text"},"您还没添加任何歌曲！"),r().createElement("div",{className:"text-gray-400 mt-6"},"去首页",r().createElement(ae.Link,{to:"/",className:"ui_text_black_hover underline",onClick:function(){return e((0,O.setPopupPlaylistToggle)({}))}},"发现音乐")))},oe=function(e){var t=e.list,n=void 0===t?[]:t,a=e.currentId;if(0===n.length)return r().createElement(se,null);var l=(0,j.useSelector)((function(e){return e.audio})).running;return r().createElement("div",null,n.map((function(e,t){return r().createElement(ce.Z,{schema:[["评论","播放"],["收藏到歌单","分享","复制链接","不感兴趣","下载"]],type:"song",item:e,key:e.id,tabIndex:"2",className:P()("flex items-center hover:bg-gray-100 focus:bg-gray-200 focus:outline-none h-9 group ",{"bg-gray-50":t%2==1,ui_themeColor:e.id===a})},r().createElement("div",{className:"w-6 flex-center flex-none"},e.id===a&&(l?r().createElement(c.IconPlayerPlay,{className:"fill-current ui_themeColor",size:12}):r().createElement(c.IconPlayerPause,{size:12,className:"fill-current ui_themeColor",stroke:1}))),r().createElement("div",{className:"name flex-auto w-0"},r().createElement(le.Z,{item:e})),r().createElement("div",{className:"w-24 px-1 flex-none truncate text-gray-500 group-hover:text-black"},e.ar.map((function(e,t){return r().createElement("span",{key:e.id},t>0&&" / ",r().createElement(ae.Link,{to:"/artist/".concat(e.id)},e.name))}))),r().createElement("div",{className:"w-8 px-1 flex-none"},r().createElement(ae.Link,{to:"/"},r().createElement(c.IconLink,{size:16,stroke:1}))),r().createElement("div",{className:"w-16 px-1 flex-none text-gray-300 group-hover:text-black"},ne()(e.dt).format("mm:ss")))})))};const ie=(0,a.memo)((function(){var e=(0,j.useDispatch)(),t=(0,j.useSelector)((function(e){return e.mask})).popupStatus,n=(0,j.useSelector)((function(e){return e.audio})),a=n.playlist,l=n.currentSong;return"playlist"!==t?null:r().createElement("div",{id:"playlist",className:"absolute right-0 shadow bg-white z-40 flex flex-col"},r().createElement("div",{className:"px-5 flex-none"},r().createElement("div",{className:"py-4"},r().createElement("div",{className:"h1"},"当前播放")),r().createElement("div",{className:"actions flex items-center pb-2.5 border-b"},r().createElement("span",{className:"text-gray-400"},"总".concat(a.length,"首")),r().createElement("div",{className:"right ml-auto flex divide-x"},r().createElement("button",{type:"button",className:P()("action px-5 flex-center",{"text-gray-300":0===a.length})},r().createElement(c.IconFolderPlus,{size:20,stroke:1}),"收藏全部"),r().createElement("button",{type:"button",onClick:function(){return 0!==a.length&&e((0,re.setAudioPlaylistClear)())},className:P()("action px-5 flex-center",{"text-gray-300":0===a.length})},"清空列表")))),r().createElement("div",{className:"overflow-auto h-full flex-auto"},r().createElement(oe,{list:a,currentId:l.id})))}));var me=n(92),ue=(n(9600),{song:function(e){return r().createElement("span",null,"单曲：「",e.song.name,e.song.alias.length>0&&r().createElement("span",{className:"text-gray-400"},"（".concat(e.song.alias.join(","),"）")),"」")},album:function(e){return r().createElement("span",null,"专辑：「",e.album.name,"」")},topic:function(e){return r().createElement("span",null,"专栏文章：「",e.topic.title,"」")},promotionUrl:function(e){return r().createElement("span",null,e.promotionUrl.text,"：「",e.msg,"」")},picInfo:function(){return"[图片]"}}),de=["私信","评论","@我","通知"];const fe=function(){var e=(0,Z.T)(),t=(0,Z.C)((function(e){return e.common})),n=t.isLogin,c=t.newMsgCount,o=t.msgs,m=void 0===o?[]:o,d=t.comments,E=void 0===d?[]:d,p=t.forwards,v=void 0===p?[]:p,h=t.notices,g=void 0===h?[]:h,b=(0,a.useState)([]),y=(0,l.Z)(b,2),N=y[0],x=y[1],w=(0,a.useState)("私信"),k=(0,l.Z)(w,2),_=k[0],C=k[1],S=function(){var t=(0,i.Z)(u().mark((function t(n){var a,r,l,c,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n();case 3:a=t.sent,r=a.msgs,l=a.comments,c=a.forwards,o=a.notices,e((0,s.setMsgPrivate)({msgs:r,comments:l,forwards:c,notices:o})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),I=function(e){C(e),"私信"===e?(S(f.fy),x(m)):"评论"===e?(S(f.sj),x(E)):"@我"===e?(S(f.LD),x(v)):"通知"===e&&(S(f.$F),x(g))};(0,a.useEffect)((function(){I(_)}),[]);var z=function(){var t=(0,i.Z)(u().mark((function t(n,a){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((0,me.setMsgPrivateHistory)({uid:n,nickname:a,showMsgPrivateHistory:!0}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return r().createElement(r().Fragment,null,r().createElement("div",{className:"header flex items-baseline p-6 pb-b"},r().createElement("span",{className:"title text-lg"},"消息"),n?r().createElement("button",{type:"button",className:"clear text-sm font-bold ml-auto ui_link"},"一键已读"):r().createElement("span",{className:"clear text-sm font-bold ml-auto ui_disabled"},"一键已读")),r().createElement("div",{className:"nav flex-none flex m-auto w-min rounded-full border"},de.map((function(e){return r().createElement("button",{onClick:function(){return I(e)},type:"button",key:e,className:P()("nav_link relative w-20 h-8 rounded-full",_===e?"bg-gray-400 text-white":"hover:bg-gray-200")},e,"私信"===e&&r().createElement("span",{className:"lt_ico border border-white rounded-full leading-tight px-1 absolute top-0 right-0 bg-red-500 transform translate-x-1/2 -translate-y-1/2 z-10"},c))}))),r().createElement("div",{className:"list mt-3 overflow-auto max-h-full flex-auto"},N.length>0?N.map((function(e){var t;return r().createElement("div",{className:"item flex pr-4 pt-4 hover:bg-gray-100",key:e.fromUser.userId},r().createElement("div",{className:"w-4 flex-center h-8"},e.newMsgCount>0&&r().createElement("i",{className:"rounded-full w-1.5 h-1.5 bg-red-500"})),r().createElement(ae.Link,{to:"/user/".concat(e.fromUser.userId),className:"avatar w-8 h-8 relative flex-none"},r().createElement("img",{className:"rounded-full",src:e.fromUser.avatarUrl,alt:""}),r().createElement("i",{className:"ico absolute right-0 bottom-0 w-3.5 h-3.5"},r().createElement("img",{className:"ui_containimg",src:null===(t=e.fromUser.avatarDetail)||void 0===t?void 0:t.identityIconUrl,alt:""}))),r().createElement("button",{type:"button",className:"content border-b pb-3 flex-auto text-left ml-2.5 w-0",onClick:function(){return z(e.fromUser.userId,e.fromUser.nickname)}},r().createElement("div",{className:"top flex"},r().createElement("span",{className:"ui_link"},e.fromUser.nickname),r().createElement("span",{className:"time ml-auto text-gray-400"},ne()(e.lastMsgTime).format("YYYY年MM月DD日"))),r().createElement("div",{className:"bottom truncate"},function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n=["song","album","topic","promotionUrl","picInfo"];t<n.length;t++){var a=n[t];if(e[a])return ue[a](e)}return e.msg}(JSON.parse(e.lastMsg)))))})):r().createElement("div",{className:"empty"},"暂无",_,"内容")))};var Ee=n(2316),pe=n(7443),ve=n(5463),he=n(3661),ge=function(e){var t=e.msg,n=void 0===t?{}:t;return r().createElement("button",{type:"button",className:"share w-56 flex rounded p-2 bg-gray-50 mt-2"},r().createElement("div",{className:"avatar flex-none w-10 h-10 rounded relative overflow-hidden"},r().createElement("img",{src:"".concat(n.song.album.picUrl,"?param=100y100"),alt:""}),r().createElement("i",{className:"absolute inset-0 m-auto w-6 h-6 bg-white bg-opacity-90 flex-center rounded-full ui_themeColor"},r().createElement(c.IconPlayerPlay,{size:14,className:"fill-current"}))),r().createElement("div",{className:"content flex-auto w-0 pl-2.5 text-left"},r().createElement("div",{className:"name truncate"},n.song.name,n.song.alias.length>0&&r().createElement("span",{className:"text-gray-400"},"（".concat(n.song.alias.join(","),"）"))),r().createElement("div",{className:"text-gray-400 artist truncate"},n.song.artists.map((function(e,t){return r().createElement("span",{key:e.name},t>0&&" / ",e.name)})))))},be=function(e){var t=e.msg,n=void 0===t?{}:t;return r().createElement(ae.Link,{to:"/playlist/album/".concat(n.album.id),className:"share flex rounded p-2 bg-gray-50 mt-2 w-56"},r().createElement("button",{type:"button",className:"avatar flex-none w-10 h-10 rounded relative overflow-hidden group"},r().createElement("img",{src:"".concat(n.album.picUrl,"?param=100y100"),alt:""}),r().createElement("i",{className:"absolute opacity-0 group-hover:opacity-100 inset-0 m-auto w-6 h-6 bg-white bg-opacity-90 flex-center rounded-full ui_themeColor"},r().createElement(c.IconPlayerPlay,{size:14,className:"fill-current"}))),r().createElement("div",{className:"content flex-auto w-0 pl-2.5 text-left"},r().createElement("div",{className:"name truncate"},n.album.name,n.album.alias.length>0&&r().createElement("span",{className:"text-gray-400"},"（".concat(n.album.alias.join(","),"）"))),r().createElement("div",{className:"text-gray-400 artist truncate"},n.album.artist.name)))},ye=function(e){var t=e.msg,n=void 0===t?{}:t;return r().createElement("div",{className:"img"},r().createElement("img",{src:n.picInfo.picUrl,className:"",alt:""}))},Ne=function(e){var t=e.msg,n=void 0===t?{}:t,a=n.type;return 16===a?r().createElement(ye,{msg:n}):r().createElement(r().Fragment,null,(0,Ee.j)(n.msg),1===a&&r().createElement(ge,{msg:n}),2===a&&r().createElement(be,{msg:n}))},xe=function(e){var t=e.msg,n=void 0===t?{}:t;return r().createElement("div",{className:"flex"},r().createElement("div",{className:"w-60 flex"},r().createElement("div",{className:"rounded-lg rounded-tl-none bg-blue-50 p-3 select-text"},r().createElement(Ne,{msg:n}))))},we=function(e){var t=e.msg,n=void 0===t?{}:t;return r().createElement("div",{className:"flex"},r().createElement("div",{className:"ml-auto w-60 flex"},r().createElement("div",{className:"ml-auto rounded-lg rounded-br-none bg-blue-50 p-3 select-text"},r().createElement(Ne,{msg:n}))))};const ke=(0,a.memo)((function(){var e=(0,Z.T)(),t=(0,a.useRef)(null),n=(0,Z.C)((function(e){return e.letter})),s=n.uid,o=n.hint,m=n.nickname,d=n.privatMsgs,E=(0,Z.C)((function(e){return e.account})).profile,p=(0,a.useState)(!1),v=(0,l.Z)(p,2),h=v[0],g=v[1],b=(0,a.useState)(""),y=(0,l.Z)(b,2),N=y[0],x=y[1],w=(0,a.useCallback)((function(e){x(e.target.value)}),[]),k=function(){var n=(0,i.Z)(u().mark((function n(){var a,r,l,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,f.$0)({uid:s});case 3:a=n.sent,r=a.hint,l=a.msgs,c=void 0===l?[]:l,e((0,me.setMsgPrivateHistory)({hint:r,privatMsgs:c.reverse()})),t.current.scrollTo(0,t.current.scrollHeight),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(){return n.apply(this,arguments)}}(),_=function(){var t=(0,i.Z)(u().mark((function t(){var n,a,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,f.oF)({user_ids:s,msg:N});case 3:n=t.sent,a=n.newMsgs,r=void 0===a?[]:a,e((0,me.setMsgPrivateHistory)({privatMsgs:r.reverse()})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return(0,a.useEffect)((function(){k()}),[s]),r().createElement(r().Fragment,null,r().createElement("div",{className:"topbar relative text-center text-sm flex-center",style:{height:50}},r().createElement("button",{type:"button",className:"back absolute inset-y-0 left-0 p-2.5 flex-center ui_text_gray_hover",onClick:function(){return e((0,me.setMsgPrivateHistory)({showMsgPrivateHistory:!1}))}},r().createElement(c.IconChevronLeft,{size:22})),r().createElement("span",null,m)),r().createElement("div",{className:"history overflow-auto max-h-full flex-auto px-5",ref:t},d.map((function(e){return r().createElement("div",{className:"item mt-5",key:e.id},r().createElement("div",{className:"time text-gray-400"},ne()(e.time).format("YYYY年MM月DD日 HH:mm")),e.toUser.userId===E.userId?r().createElement("div",{className:"msg flex justify-start"},r().createElement("div",{className:"avatar flex-none mr-4 rounded-full overflow-hidden w-8 h-8"},r().createElement("img",{className:"",src:e.fromUser.avatarUrl,alt:""})),r().createElement(xe,{msg:JSON.parse(e.msg)})):r().createElement(we,{msg:JSON.parse(e.msg)}))})),o&&r().createElement("div",{className:"hint"},o)),r().createElement("div",{className:"feedback p-3"},r().createElement(he.Z,{placeholder:"回复 ".concat(m),max:200,onChange:w}),r().createElement("div",{className:"actions flex mt-2.5"},r().createElement("div",{className:"left relative"},h&&r().createElement("div",{className:"-translate-x-3 -translate-y-1/2 absolute faces right-full top-1/2 transform"},r().createElement(ve.Z,{handleHide:function(){return g(!1)},clickface:function(e){x(N+e)}})),r().createElement("button",{type:"button",className:"action",onClick:function(){return g(!h)}},r().createElement(c.IconMoodSmile,{size:24,stroke:1.4})),r().createElement("button",{type:"button",className:"action"},r().createElement(c.IconPhoto,{size:24,stroke:1.4}))),r().createElement("button",{type:"button",className:"ml-auto border px-4 h-8 rounded-full",onClick:function(){(0,pe.XA)(N)<=200?(_(),x("")):console.log("to long")}},"发送"))))})),_e=function(){var e=(0,Z.C)((function(e){return e.letter})).showMsgPrivateHistory,t=(0,Z.C)((function(e){return e.mask})).popupStatus,n=(0,Z.T)();return(0,a.useEffect)((function(){return function(){n((0,me.setMsgPrivateHistory)({showMsgPrivateHistory:!1}))}}),[]),"letter"!==t?null:r().createElement("div",{id:"privateLetter",className:"flex flex-col absolute z-40"},e?r().createElement(ke,null):r().createElement(fe,null))};n(9714);const Ce=(0,a.memo)((function(){var e=(0,j.useSelector)((function(e){return e.mask})).toastTitle,t=(0,a.useRef)(1500),n=(0,a.useRef)(),l=(0,a.useRef)(),s=(0,j.useDispatch)(),o=function e(){t.current<=0||(t.current-=Date.now()-l.current,l.current=Date.now(),requestAnimationFrame(e))};return(0,a.useEffect)((function(){if(null==e||!e.toString())return!1;t.current=1500,o(),clearTimeout(n.current),n.current=setTimeout((function(){s((0,O.setToast)(""))}),1500)}),[e]),null!=e&&e.toString()?r().createElement("div",{id:"toast",className:P()("absolute z-50 whitespace-nowrap px-4 inset-0 m-auto flex-center rounded-lg bg-black bg-opacity-80 text-gray-200 text-lg")},r().createElement(c.IconCircleCheck,{size:24})," ",null==e?void 0:e.toString()):null}));n(7327);var Se=n(8234);const Ie=function(){var e=(0,j.useDispatch)(),t=(0,j.useSelector)((function(e){return e.common})).baseUrl,n=(0,j.useSelector)((function(e){return e.account})),s=n.profile,o=n.playlist,m=(0,j.useSelector)((function(e){return e.mask})),d=m.contextMenuVisibility,E=m.contextMenuX,p=m.contextMenuY,v=m.contextMenuItem,h=m.contextMenuTotal,g=m.contextMenuSechma,b=m.contextMenuType,y=m.contextMenuItemId,N=(0,j.useSelector)((function(e){return e.inset})),x=N.globalX,w=N.globalY,k=o.filter((function(e){return!1===e.subscribed})),_="".concat(t,"/").concat(b,"?id=").concat(y,"&userId=").concat(s.userId);(0,a.useEffect)((function(){e((0,O.setContextMenuShareLink)({contextMenuShareLink:_}))}),[]);var C=function(){e((0,re.setAudioImmediate)({currentSong:v})),e((0,O.setDialogReset)())},S=function(){e((0,re.setAudioImmediateNext)({currentSong:v})),e((0,O.setDialogReset)())},I=function(){console.log("播放歌单")},P=function(){console.log("下一首播放歌单")},Z=function(){var t=(0,i.Z)(u().mark((function t(){var n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,f.Bw)({mvid:y,t:1});case 3:n=t.sent,a=n.message,e((0,O.setDialogReset)()),e((0,O.setToast)(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),z=function(){X(_,(function(){e((0,O.setToast)("复制链接成功"))})),e((0,O.setDialogReset)())},M=function(){e((0,O.setDialogCreatePlaylistShow)())},D=(0,a.useCallback)((function(){return e((0,O.setDialogShareShow)())}),[]),T=(0,a.useMemo)((function(){var t,n=(t=function(){return e((0,O.setDialogReset)())},{评论:function(e){var n=e.contextMenuItem,a=e.contextMenuTotal,l=e.contextMenuType;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement(ae.Link,{to:"/comment/".concat(l,"/").concat(n.id),onClick:t,className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconMessage,{size:22,stroke:1})),"查看评论 (",a,")"))},播放:function(e){var t=e.handlePlay;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{type:"button",onClick:t,className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconPlayerPlay,{size:22,stroke:1})),"播放(Enter)"))},下一首播放:function(e){var t=e.handlePlayNext;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{onClick:t,type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconArrowForward,{size:22,stroke:1})),"下一首播放"))},播放歌单:function(e){var t=e.handlePlayPlaylist;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{type:"button",onClick:t,className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconPlayerPlay,{size:22,stroke:1})),"播放(Enter)"))},下一首播放歌单:function(e){var t=e.handlePlayNextPlaylist;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{onClick:t,type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconArrowForward,{size:22,stroke:1})),"下一首播放"))},查看歌单:function(e){var n=e.contextMenuItem;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement(ae.Link,{to:"/playlist/music/".concat(n.id),onClick:t,className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconPlayerPlay,{size:22,stroke:1})),"查看歌单"))},播放MV:function(e){var n=e.contextMenuItem,a=e.contextMenuType;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement(ae.Link,{to:"/player/".concat(a,"/").concat(n.id),onClick:t,className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconPlayerPlay,{size:22,stroke:1})),"播放MV"))},收藏MV:function(e){var t=e.handleSubscribeMV;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{onClick:t,type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconFolderPlus,{size:22,stroke:1})),"收藏MV"))},收藏到歌单:function(e){var t=e.handleCreatePlaylist,n=e.ownPlaylist,a=void 0===n?[]:n;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("span",{className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconFolderPlus,{size:22,stroke:1})),"收藏到歌单(Ctrl+S)",r().createElement("i",{className:"arrow"})),r().createElement("ul",{className:"ui_contextmenu sub"},r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{type:"button",onClick:t,className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconCirclePlus,{size:22,stroke:1})),"创建新歌单")),r().createElement("li",{className:"hr"}),a.map((function(e){return r().createElement("li",{className:"ui_contextmenu_item",key:e.id},r().createElement("button",{type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},10===e.privacy?r().createElement(c.IconLock,{size:22,stroke:1}):r().createElement(c.IconMusic,{size:22,stroke:1})),e.name))}))))},分享:function(e){var t=e.handleDialogShare;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{onClick:t,type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconShare,{size:22,stroke:1})),"分享....."))},复制链接:function(e){var t=e.handleCopyLink;return r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{type:"button",onClick:t,className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconLink,{size:22,stroke:1})),"复制链接"))},不感兴趣:function(e){return(0,H.Z)(e),r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("span",{className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconCircleX,{size:22,stroke:1})),"不感兴趣",r().createElement("i",{className:"arrow"})),r().createElement("ul",{className:"ui_contextmenu sub"},r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"}),"创建新歌单")),r().createElement("li",{className:"hr"}),r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"}),"创建新歌单")),r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"}),"创建新歌单"))))},下载:function(){return r().createElement("li",{className:"ui_contextmenu_item "},r().createElement("span",{className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconDownload,{size:22,stroke:1})),"下载(L)",r().createElement("i",{className:"arrow"})),r().createElement("ul",{className:"ui_contextmenu sub"},r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconCirclePlus,{size:22,stroke:1})),"创建新歌单")),r().createElement("li",{className:"hr"}),r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconMusic,{size:22,stroke:1})),"创建新歌单")),r().createElement("li",{className:"ui_contextmenu_item"},r().createElement("button",{type:"button",className:"ui_contextmenu_btn "},r().createElement("i",{className:"ico"},r().createElement(c.IconMusic,{size:22,stroke:1})),"创建新歌单"))))}});return g.map((function(e){return[e.join(","),e.map((function(e){return[e,n[e]]}))]}))}),[g]);return d?r().createElement(Se.Z,null,r().createElement("ul",{id:"contextmenu",className:"ui_contextmenu divide-y",style:{left:E-x,top:p-w}},T.map((function(e){var t=(0,l.Z)(e,2),n=t[0],a=t[1];return r().createElement("div",{key:n},a.map((function(e){var t=(0,l.Z)(e,2),n=t[0],a=t[1];return r().createElement(a,{contextMenuTotal:h,contextMenuItem:v,handlePlay:C,handlePlayNext:S,handlePlayPlaylist:I,handlePlayNextPlaylist:P,handleDialogShare:D,handleCopyLink:z,handleCreatePlaylist:M,handleSubscribeMV:Z,ownPlaylist:k,contextMenuType:b,key:n})})))})))):null};var Pe=n(2982),Ze=(n(4765),n(9384));const ze=(0,a.memo)((function(e){var t=e.handleSearch,n=(0,Z.T)(),s=(0,a.useState)(!1),o=(0,l.Z)(s,2),i=o[0],m=o[1],u=(0,a.useRef)(null),d=(0,Z.C)((function(e){return e.search})).searchHistory;return(0,a.useEffect)((function(){u.current&&u.current.clientHeight>66&&m(!0)}),[]),r().createElement(r().Fragment,null,r().createElement("div",{className:"subtitle flex items-center px-5 py-2 text-gray-500"},r().createElement("span",{className:"text-sm"},"搜索历史")," ",r().createElement("button",{type:"button",onClick:function(){n((0,Ze.setSearchHistory)([]))}},r().createElement(c.IconTrash,{size:16})),i&&r().createElement("button",{type:"button",onClick:function(){return m(!1)},className:"ml-auto ui_text_black_hover"},"查看全部")),r().createElement("div",{className:"px-5",style:i?{height:66,overflow:"hidden"}:null,ref:u},r().createElement("div",{className:"searchHistory flex flex-wrap -m-1"},d.map((function(e){return r().createElement(ae.Link,{key:e,to:"/search/".concat(e),onClick:function(){return t(e)},className:"item group hover:bg-gray-100 border rounded-full relative m-1 py-1 px-4"},e,r().createElement("button",{type:"button",className:"ico absolute opacity-0 group-hover:opacity-100 inset-y-0 m-auto text-gray-400",onClick:function(t){var a;t.preventDefault(),t.stopPropagation(),a=e,n((0,Ze.setSearchHistory)(d.filter((function(e){return e!==a}))))}},r().createElement(c.IconX,{size:14,stroke:2})))})))))})),Me=(0,a.memo)((function(e){var t=e.list,n=void 0===t?[]:t,a=e.handleSearch;return r().createElement("div",{className:"list"},n.map((function(e,t){return r().createElement(ae.Link,{to:"/search/".concat(e.searchWord),onClick:function(){return a(e.searchWord)},className:"h-14 flex items-center w-full hover:bg-gray-100",key:e.content},r().createElement("span",{className:P()("w-14 flex-center text-base flex-none",t<3?"text-red-500":"text-gray-300")},t+1),r().createElement("div",{className:"aside flex-auto w-0 px-1"},r().createElement("div",{className:"name flex items-center gap-1"},r().createElement("span",{className:P()("searchWord",t<3?"font-bold":"")},e.searchWord),e.iconUrl&&r().createElement("img",{className:"h-2.5",src:e.iconUrl,alt:"hot"}),r().createElement("span",{className:"text-gray-400"},e.score)),r().createElement("div",{className:"content mt-2 text-gray-400 truncate"},e.content)))})))})),De={box:"LTstfD4eLLGcz09BEYE3",box_value:"au1uEReGboNqQez0Co57",box_noValue:"XXCEfhciqFto6gokVvKX"};var Te=function(){var e,t=(0,Z.T)(),n=(0,Z.C)((function(e){return e.search})),a=n.searchValue,l=n.searchHot,c=n.searchSuggest,s=n.searchHistory,o=(0,Z.C)((function(e){return e.mask})).searchVisibility,i=function(e){t((0,O.setDialogReset)()),t((0,Ze.setSearchValue)({searchValue:e})),t((0,Ze.setSearchHistory)([e].concat((0,Pe.Z)(s.filter((function(t){return t!==e}))))))};return o?r().createElement(Se.Z,null,r().createElement("div",{className:P()(De.box,"absolute shadow rounded bg-white py-2 z-10")},a?r().createElement("div",{className:P()(De.box_Value,"overflow-auto h-full flex-auto")},r().createElement(ae.Link,{to:"/search/".concat(a),onClick:function(){return i(a)}},'搜索"',r().createElement("span",{className:"ui_link"},a),'"相关的结果>'),null==c||null===(e=c.order)||void 0===e?void 0:e.map((function(e){return r().createElement("div",{key:e},c[e].map((function(e){return r().createElement("div",{key:e.id},e.name)})))}))):r().createElement("div",{className:P()(De.box_noValue,"overflow-auto h-full flex-auto")},s.length>0&&r().createElement(ze,{handleSearch:i}),r().createElement("div",{className:"subtitle px-5 py-3 text-sm text-gray-400"},"热搜榜"),r().createElement(Me,{list:l,handleSearch:i})))):null};const Le=(0,a.memo)(Te);var Re=function(){return r().createElement(r().Fragment,null,r().createElement(W,null),r().createElement(J,null),r().createElement(K,null),r().createElement(ee,null),r().createElement(ie,null),r().createElement(_e,null),r().createElement(Le,null),r().createElement(Ie,null),r().createElement(Ce,null),r().createElement(q,null))};const Ue=(0,a.memo)(Re)},3775:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(5861),r=n(885),l=n(7757),c=n.n(l),s=n(7363),o=n.n(s),i=n(9965),m=n(8157),u=n(9097),d=n(6711),f=n(8876),E=n(9638),p=n(6719),v=n(1495),h=n(4184),g=n.n(h);const b=(0,s.memo)((function(){var e=(0,E.C)((function(e){return e.audio})).currentSong,t=(0,E.C)((function(e){return e.audio})).running;return o().createElement("div",{className:"left"},o().createElement("div",{className:"relative"},o().createElement("div",{id:"stylus",className:"mt-16 mb-10 relative m-auto w-min duration-500 transition-transform z-10",style:t?{transform:"rotate(40deg)"}:{}},o().createElement("div",{className:"point shadow relative transform -translate-y-1/2 rounded-full bg-gray-300 w-5 h-5 border-8 border-white bg-white",style:{zIndex:2}}),o().createElement("div",{className:"handle absolute top-0 left-1/2 shadow bg-white h-2 w-20 origin-top-left",style:{transform:"rotate(45deg) translate(0, -50%)",zIndex:1}},o().createElement("div",{className:" absolute left-full bg-white shadow w-12 h-2 origin-top-left",style:{transform:"rotate(-45deg) translate(-10%, 0)"}},o().createElement("div",{className:"shadow w-4 h-4 absolute left-full -top-1 bg-white"})))),o().createElement("div",{className:" rounded-full bg-gray-300 p-2.5 w-64 h-64"},o().createElement("div",{className:g()("flex-center rounded-full p-9",{on:t}),id:"record"},o().createElement("img",{className:"rounded-full border-8 border-black",src:e.al.picUrl,alt:""})))),o().createElement("div",{className:"flex mt-4 justify-between"},o().createElement(v.Z,{stroke:"2",id:e.id,size:24,className:"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200"}),o().createElement("button",{type:"button",className:"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200"},o().createElement(p.IconFolderPlus,{size:24,stroke:1})),o().createElement("button",{type:"button",className:"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200"},o().createElement(p.IconCloudDownload,{size:24,stroke:1})),o().createElement("button",{type:"button",className:"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200"},o().createElement(p.IconShare,{size:24,stroke:1}))))}));n(4553),n(1249),n(3210),n(8309);var y=(0,s.memo)((function(){var e=(0,E.C)((function(e){return e.audio})).currentTime,t=(0,E.C)((function(e){return e.lrc})).lrcList,n=(0,s.useRef)(null),a=(0,s.useRef)(null),l=(0,s.useState)(0),c=(0,r.Z)(l,2),i=c[0],m=c[1];return(0,s.useEffect)((function(){m(t.findIndex((function(t){return t.time>e}))-1)}),[e]),(0,s.useEffect)((function(){n.current.scrollTop=0}),[t]),(0,s.useEffect)((function(){null!=a&&a.current&&(n.current.scrollTop=a.current.offsetTop-n.current.clientHeight/2)}),[i]),o().createElement("div",{style:{scrollBehavior:"smooth"},className:"whitespace-pre-line select-text text-center text-gray-500 space-y-2 overflow-auto overscroll-contain h-full pt-36",ref:n},t.length?t.map((function(e,t){var n=e.time,r=e.word;return o().createElement("div",{ref:i===t?a:null,key:n,className:g()("leading-5",i===t&&"font-bold text-black")},r.trim()," ")})):o().createElement("div",null,"纯音乐，请您欣赏"))}));const N=(0,s.memo)((function(){var e=(0,E.C)((function(e){return e.audio})).currentSong;return o().createElement("div",{className:"center overflow-auto pt-5",style:{width:300}},o().createElement("div",{className:"text-2xl text-center"},e.name),o().createElement("div",{className:"flex justify-center mt-2 whitespace-nowrap"},o().createElement("div",{className:"truncate"},e.ar.map((function(e){return o().createElement(d.Link,{key:e.id,to:"/artist/".concat(e.id),className:"ui_text_gray_hover"},e.name)}))),"  -  ",o().createElement("div",{className:"truncate"},o().createElement(d.Link,{to:"/playlist/album/".concat(e.al.id),className:"ui_text_gray_hover"},e.al.name))),o().createElement("div",{className:"relative"},o().createElement("div",{className:"relative mt-8",style:{height:330}},o().createElement(y,null)),o().createElement("div",{className:"absolute pointer-events-none left-0 right-0 top-0 h-6 bg-gradient-to-b from-white to-transparent"}),o().createElement("div",{className:"absolute pointer-events-none left-0 right-0 bottom-0 h-6 bg-gradient-to-t from-white to-transparent"})))})),x=(0,s.memo)((function(e){var t=e.simiSong,n=void 0===t?[]:t,a=e.loading,r=void 0!==a&&a;return o().createElement("div",{className:"right flex-none mt-28 h-72 overflow-auto",style:{width:244}},r?o().createElement("div",{className:"flex justify-center"},o().createElement(m.Z,null)):o().createElement("div",{className:"pb-4 relative"},o().createElement("div",null,"播放来源：..."),o().createElement("div",{className:"font-bold py-3 text-sm"},"包含这首歌的歌单"),o().createElement("div",null),o().createElement("div",{className:"font-bold py-3 text-sm"},"相似歌曲"),o().createElement("div",null,n.map((function(e){return o().createElement("button",{key:e.id,type:"button",className:"flex text-left w-full rounded hover:bg-gray-100 p-1.5 h-10"},o().createElement("div",{className:"rounded relative overflow-hidden"},o().createElement("img",{src:"".concat(e.album.picUrl,"?param=30y30"),alt:""})),o().createElement("div",{className:"w-0 flex-auto px-2 py-1 text-gray-600"},o().createElement("div",{className:"truncate"},e.name,o().createElement("span",{className:"text-gray-500"},e.alias),"  -  ",e.artists.map((function(e){return e.name})))))}))),o().createElement("div",{className:"absolute pointer-events-none left-0 right-0 bottom-0 h-16 bg-gradient-to-t from-white to-transparent"})))})),w=(0,s.memo)((function(){(0,E.T)(),(0,d.useLocation)();var e=(0,E.C)((function(e){return e.audio})).currentSong,t=(0,E.C)((function(e){return e.lrc})).lyricVisibility,n=(0,s.useState)(!0),l=(0,r.Z)(n,2),p=l[0],v=l[1],h=(0,s.useState)([]),g=(0,r.Z)(h,2),y=g[0],w=g[1],k=(0,s.useState)({}),_=(0,r.Z)(k,2),C=_[0],S=_[1],I=(0,s.useState)(1),P=(0,r.Z)(I,2),Z=P[0],z=P[1],M=function(){var t=(0,a.Z)(c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,i.dV)({id:e.id,limit:20,offset:20*(Z-1)});case 3:n=t.sent,S(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=(0,a.Z)(c().mark((function t(){var n,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,i.wA)({id:e.id});case 3:n=t.sent,a=n.songs,w(a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return e.next=4,D();case 4:v(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){t&&(p?T():M())}),[t,Z,e.id]),(0,s.useEffect)((function(){}),[]),t?o().createElement("div",{id:"lrc",className:"absolute inset-x-0 z-10 overflow-hidden"},o().createElement("div",{className:"w-full h-full bg-white overflow-auto transform"},o().createElement("div",{className:"lrc_inner m-auto",style:{width:888}},o().createElement("div",{className:"lrc_header flex justify-between"},o().createElement(b,null),o().createElement(N,null),o().createElement(x,{simiSong:y,loading:p})),o().createElement("div",{className:"lrc_main mt-14 flex justify-center"},o().createElement("div",{style:{width:556}},p?o().createElement("div",{className:"flex justify-center"},o().createElement(m.Z,null)):o().createElement(o().Fragment,null,o().createElement(f.Z,{comments:C,more:e.id,type:"song"}),o().createElement(u.Z,{total:Math.ceil(C.total/20),page:Z,func:z}))))))):null}))}}]);