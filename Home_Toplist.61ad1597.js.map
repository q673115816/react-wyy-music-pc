{"version":3,"file":"Home_Toplist.61ad1597.js","mappings":"8VAAA,e,aACA,WACA,WACA,WACA,W,aACA,W,aACA,WACA,WACA,WACA,W,aACA,SAEA,IAAMA,EAAa,SAAC,GAAD,QAAGC,OAAAA,OAAH,MAAY,GAAZ,SACjB,+BAAKC,UAAU,2BAETD,EAAOE,KAAI,SAACC,EAAOC,GAAR,OACT,+BACEC,SAAS,IACTJ,WAAW,aAAW,8DAA+D,CAAE,aAAcG,EAAQ,GAAM,IACnHE,IAAKH,EAAMI,MAEX,gCAAMN,WAAW,aAAW,oBAAqBG,EAAQ,EAAI,eAAiB,kBAAmBA,EAAQ,GACzG,gCAAMH,UAAU,0BAAhB,OACA,gCACEA,UAAU,OACVO,MAAOL,EAAMI,KAAOJ,EAAMM,MAEzBN,EAAMI,KAELJ,EAAMM,KAAKC,OAAS,GAElB,gCAAMT,UAAU,iBAAhB,IAGIE,EAAMM,KAAKP,KAAI,SAACO,GAAD,OAAUA,KAH7B,MAUN,gCACER,UAAU,wBACVO,MAAOL,EAAMQ,GAAGT,KAAI,SAACU,GAAD,OAAYA,EAAOL,QAAMM,KAAK,MAGhDV,EAAMQ,GAAGT,KAAI,SAACU,EAAQR,GAAT,OACX,gCAAME,IAAKM,EAAOE,IACfV,EAAQ,GAAK,MACd,wBAAC,EAAAW,KAAD,CAAMC,GAAE,kBAAaJ,EAAOE,IAAMb,UAAU,4CACzCW,EAAOL,iB,iBAYf,IAAAU,OAAK,WAAM,UACxB,GAAsB,IAAAC,cAAY,qBAAGC,KAAgBC,WAA7CC,KAAAA,OAAR,MAAe,GAAf,EAEA,GAA8B,IAAAC,UAAS,IAAvC,qBAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA8B,IAAAF,UAAS,IAAvC,qBAAOG,EAAP,KAAgBC,EAAhB,KACA,GAA8B,IAAAJ,WAAS,GAAvC,qBAAOK,EAAP,KAAgBC,EAAhB,KACMC,GAAW,IAAAC,eACXC,EAAU,+CAAG,oIAEQ,IAAAC,oBAFR,uBAEPX,EAFO,EAEPA,KACRQ,GAAS,IAAAI,mBAAkBZ,IAHZ,SAIyBa,QAAQC,IAAR,wBACnCd,EAAKe,MAAM,EAAG,GAAGlC,KAAI,SAACmC,GAAD,OAAU,IAAAC,mBAAkB,CAAExB,GAAIuB,EAAKvB,GAAIyB,MAAO,QADpC,EAEtC,IAAAC,kBAAiB,MANJ,qCAIRC,EAJQ,KAIHC,EAJG,KAIEC,EAJF,KAIOC,EAJP,KAIYC,EAJZ,KAQfrB,EAAW,CAACiB,EAAKC,EAAKC,EAAKC,IAC3BlB,EAAWmB,GACXjB,GAAW,GAVI,kDAYfkB,QAAQC,IAAR,MAZe,0DAAH,qDAmBhB,OAHA,IAAAC,YAAU,WACRjB,MACC,IACCJ,EAAgB,+BAAK1B,UAAU,6BAA4B,wBAAC,UAAD,OAE7D,+BAAKA,UAAU,2DACb,+BAAKA,UAAU,4BACb,+BAAKA,UAAU,iCAAf,OACA,+BAAKA,UAAU,4BACZsB,EAAQrB,KAAI,gBAAamC,EAAb,EAAGY,SAAH,OACX,+BACE3C,IAAK+B,EAAKvB,GACVb,UAAU,sBAEV,wBAAC,EAAAc,KAAD,CACEC,GAAE,0BAAqBqB,EAAKvB,IAC5Bb,UAAU,sDAEV,+BACEA,UAAU,gBACViD,IAAG,UAAKb,EAAKc,YAAV,kBACHC,IAAI,KAEN,+BAAKnD,UAAU,kDACb,gCAAMA,UAAU,UACb,aAAMoC,EAAKgB,YAAYC,OAAO,UADjC,OAKF,kCAAQC,KAAK,SAAStD,UAAU,oIAC9B,wBAAC,EAAAuD,eAAD,CAAgBC,KAAM,GAAIxD,UAAU,mBAGxC,+BAAKA,UAAU,mCACb,wBAACF,EAAD,CAAYC,OAAQqC,EAAKrC,OAAOoC,MAAM,EAAG,KACzC,wBAAC,EAAArB,KAAD,CACEC,GAAE,0BAAqBqB,EAAKvB,IAC5Bb,UAAU,qCAFZ,eASN,+BACEA,UAAU,sBAEV,wBAAC,EAAAc,KAAD,CACEC,GAAG,iBACHf,UAAU,sDAFZ,MAKE,+BAAKA,UAAU,kDACb,gCAAMA,UAAU,UACb,uBAAMwB,EAAQJ,YAAd,aAAM,EAAcgC,YAAYC,OAAO,UAD1C,OAKF,kCACEC,KAAK,SACLtD,UAAU,oIAEV,wBAAC,EAAAuD,eAAD,CAAgBC,KAAM,GAAIxD,UAAU,mBAGxC,+BAAKA,UAAU,mCACb,+BAAKA,UAAU,2BACZwB,MAAAA,GADH,UACGA,EACGJ,YAFN,iBACG,EAEGI,eAHN,aACG,EAGGW,MAAM,EAAG,GACVlC,KAAI,SAACmC,EAAMjC,GAAP,OACH,wBAAC,EAAAW,KAAD,CACET,IAAK+B,EAAKvB,GACVb,WAAW,aAAW,yBAA0B,CAAE,aAAcG,EAAQ,GAAM,IAC9EY,GAAE,kBAAaqB,EAAKvB,KAEpB,+BAAKb,WAAW,aAAW,YAAa,CAAE,eAAgBG,EAAQ,KAC/DA,EAAQ,GAEX,+BAAKH,UAAU,0BACZoC,EAAKqB,WAAatD,GAAS,IAC3BiC,EAAKqB,SAAWtD,GAAS,IACzBiC,EAAKqB,SAAWtD,GAAS,KAE5B,+BAAKH,UAAU,QAAQoC,EAAK9B,WAIpC,wBAAC,EAAAQ,KAAD,CACEC,GAAG,iBACHf,UAAU,qCAFZ,aASN,+BAAKA,UAAU,iCAAf,OACA,+BAAKA,UAAU,mDACZoB,EAAKe,MAAM,GAAGlC,KAAI,SAACmC,GAAD,OACjB,+BAAKpC,UAAU,qBAAqBK,IAAK+B,EAAKvB,IAC5C,wBAAC,EAAAC,KAAD,CACEC,GAAE,0BAAqBqB,EAAKvB,IAC5Bb,UAAU,gDAEV,gCAAMA,UAAU,6EACd,wBAAC,EAAAuD,eAAD,CAAgBC,KAAM,MACrB,IAAAE,gBAAetB,EAAKuB,YAEvB,+BACE3D,UAAU,GACViD,IAAG,UAAKb,EAAKc,YAAV,kBACHC,IAAI,KAEN,kCACEG,KAAK,SACLtD,UAAU,+IAEV,wBAAC,EAAAuD,eAAD,CAAgBC,KAAM,GAAIxD,UAAU,mBAGxC,wBAAC,EAAAc,KAAD,CACEC,GAAE,0BAAqBqB,EAAKvB,IAC5Bb,UAAU,oDAEToC,EAAK9B,iB","sources":["webpack://wyy/./src/pages/Home/Toplist/index.tsx"],"sourcesContent":["import React, { useEffect, useState, memo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { IconPlayerPlay } from '@tabler/icons';\nimport classNames from 'classnames';\nimport dayjs from 'dayjs';\nimport { apiToplistDetail, apiPlaylistDetail, apiToplistArtist } from '@/api';\nimport { setTopListsDetail } from '@/reducers/home/slice';\nimport { transPlayCount } from '@/common/utils';\nimport DomLoading from '@/components/Loading';\nimport './style.scss';\n\nconst DomContent = ({ tracks = [] }) => (\n  <div className=\"official_rank_list mb-3\">\n    {\n        tracks.map((track, index) => (\n          <div\n            tabIndex=\"2\"\n            className={classNames('item hover:bg-gray-100 focus:bg-gray-200 focus:outline-none', { 'bg-gray-50': index % 2 === 0 })}\n            key={track.name}\n          >\n            <span className={classNames('index text-sm w-4', index < 3 ? 'text-red-500' : 'text-gray-300')}>{index + 1}</span>\n            <span className=\"status w-4 flex-center\">&nbsp;口&nbsp;</span>\n            <span\n              className=\"name\"\n              title={track.name + track.alia}\n            >\n              {track.name}\n              {\n                track.alia.length > 0\n                && (\n                  <span className=\"text-gray-400\">\n                    (\n                    {\n                      track.alia.map((alia) => alia)\n                    }\n                    )\n                  </span>\n                )\n              }\n            </span>\n            <span\n              className=\"ml-auto text-gray-400\"\n              title={track.ar.map((artist) => artist.name).join('/')}\n            >\n              {\n                track.ar.map((artist, index) => (\n                  <span key={artist.id}>\n                    {index > 0 && ' / '}\n                    <Link to={`/artist/${artist.id}`} className=\"artist text-gray-400 hover:text-gray-500\">\n                      {artist.name}\n                    </Link>\n                  </span>\n                ))\n              }\n            </span>\n          </div>\n        ))\n      }\n  </div>\n);\n\nexport default memo(() => {\n  const { list = [] } = useSelector(({ home }) => home.toplist);\n\n  const [fiveTop, setFiveTop] = useState([]);\n  const [artists, setArtists] = useState({});\n  const [loading, setLoading] = useState(true);\n  const dispatch = useDispatch();\n  const handleInit = async () => {\n    try {\n      const { list } = await apiToplistDetail();\n      dispatch(setTopListsDetail(list));\n      const [飙升榜, 新歌榜, 原创榜, 热歌榜, 歌手榜] = await Promise.all([\n        ...list.slice(0, 4).map((item) => apiPlaylistDetail({ id: item.id, limit: 5 })),\n        apiToplistArtist(1),\n      ]);\n      setFiveTop([飙升榜, 新歌榜, 原创榜, 热歌榜]);\n      setArtists(歌手榜);\n      setLoading(false);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    handleInit();\n  }, []);\n  if (loading) return <div className=\"flex-center w-full h-full\"><DomLoading /></div>;\n  return (\n    <div className=\"domHome_content px-8 overflow-auto max-h-full flex-auto\">\n      <div className=\"domHome_toplist ui_w1100\">\n        <div className=\"domHome_toplist_title h1 mb-4\">官方榜</div>\n        <div className=\"domHome_toplist_official\">\n          {fiveTop.map(({ playlist: item }) => (\n            <div\n              key={item.id}\n              className=\"official_rank flex\"\n            >\n              <Link\n                to={`/playlist/music/${item.id}`}\n                className=\"official_rank_cover overflow-hidden relative group\"\n              >\n                <img\n                  className=\"ui_containimg\"\n                  src={`${item.coverImgUrl}?param=200y200`}\n                  alt=\"\"\n                />\n                <div className=\"absolute inset-0 m-auto flex-center text-white\">\n                  <span className=\"pt-16\">\n                    {dayjs(item.updateTime).format('MM月DD日')}\n                    更新\n                  </span>\n                </div>\n                <button type=\"button\" className=\"opacity-0 group-hover:opacity-100 absolute inset-0 m-auto flex-center rounded-full w-10 h-10 text-red-500 bg-white bg-opacity-50\">\n                  <IconPlayerPlay size={22} className=\"fill-current\" />\n                </button>\n              </Link>\n              <div className=\"official_rank_content flex-auto\">\n                <DomContent tracks={item.tracks.slice(0, 5)} />\n                <Link\n                  to={`/playlist/music/${item.id}`}\n                  className=\"text-gray-400 hover:text-gray-500\"\n                >\n                  查看全部 &gt;\n                </Link>\n              </div>\n            </div>\n          ))}\n          <div\n            className=\"official_rank flex\"\n          >\n            <Link\n              to=\"/toplistartist\"\n              className=\"official_rank_cover overflow-hidden relative group\"\n            >\n              歌手榜\n              <div className=\"absolute inset-0 m-auto flex-center text-white\">\n                <span className=\"pt-16\">\n                  {dayjs(artists.list?.updateTime).format('MM月DD日')}\n                  更新\n                </span>\n              </div>\n              <button\n                type=\"button\"\n                className=\"opacity-0 group-hover:opacity-100 absolute inset-0 m-auto flex-center rounded-full w-10 h-10 text-red-500 bg-white bg-opacity-50\"\n              >\n                <IconPlayerPlay size={22} className=\"fill-current\" />\n              </button>\n            </Link>\n            <div className=\"official_rank_content flex-auto\">\n              <div className=\"official_rank_list mb-3\">\n                {artists\n                  ?.list\n                  ?.artists\n                  ?.slice(0, 5)\n                  .map((item, index) => (\n                    <Link\n                      key={item.id}\n                      className={classNames('item hover:bg-gray-100', { 'bg-gray-50': index % 2 === 0 })}\n                      to={`/artist/${item.id}`}\n                    >\n                      <div className={classNames('index w-4', { 'text-red-500': index < 3 })}>\n                        {index + 1}\n                      </div>\n                      <div className=\"status w-4 flex-center\">\n                        {item.lastRank === index && '-'}\n                        {item.lastRank < index && '↓'}\n                        {item.lastRank > index && '↑'}\n                      </div>\n                      <div className=\"name\">{item.name}</div>\n                    </Link>\n                  ))}\n              </div>\n              <Link\n                to=\"/toplistartist\"\n                className=\"text-gray-400 hover:text-gray-500\"\n              >\n                查看全部 &gt;\n              </Link>\n            </div>\n          </div>\n        </div>\n        <div className=\"domHome_toplist_title h1 mb-4\">全球榜</div>\n        <div className=\"domHome_toplist_cardlist grid grid-cols-5 gap-5\">\n          {list.slice(4).map((item) => (\n            <div className=\"item flex flex-col\" key={item.id}>\n              <Link\n                to={`/playlist/music/${item.id}`}\n                className=\"cover group rounded overflow-hidden relative\"\n              >\n                <span className=\"playCount flex items-center absolute top-0 right-0 py-0.5 px-2 text-white\">\n                  <IconPlayerPlay size={12} />\n                  {transPlayCount(item.playCount)}\n                </span>\n                <img\n                  className=\"\"\n                  src={`${item.coverImgUrl}?param=200y200`}\n                  alt=\"\"\n                />\n                <button\n                  type=\"button\"\n                  className=\"play opacity-0 group-hover:opacity-100 absolute inset-0 m-auto bg-white bg-op text-red-500 w-10 h-10 rounded-full flex-center bg-opacity-95\"\n                >\n                  <IconPlayerPlay size={20} className=\"fill-current\" />\n                </button>\n              </Link>\n              <Link\n                to={`/playlist/music/${item.id}`}\n                className=\"name mt-1 text-sm text-gray-600 hover:text-black\"\n              >\n                {item.name}\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n});\n"],"names":["DomContent","tracks","className","map","track","index","tabIndex","key","name","title","alia","length","ar","artist","join","id","Link","to","memo","useSelector","home","toplist","list","useState","fiveTop","setFiveTop","artists","setArtists","loading","setLoading","dispatch","useDispatch","handleInit","apiToplistDetail","setTopListsDetail","Promise","all","slice","item","apiPlaylistDetail","limit","apiToplistArtist","飙升榜","新歌榜","原创榜","热歌榜","歌手榜","console","log","useEffect","playlist","src","coverImgUrl","alt","updateTime","format","type","IconPlayerPlay","size","lastRank","transPlayCount","playCount"],"sourceRoot":""}