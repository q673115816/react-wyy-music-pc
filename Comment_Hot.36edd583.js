(self.webpackChunkwyy=self.webpackChunkwyy||[]).push([[281],{3940:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(7329),c=n(2137),a=n(9351),u=n(7757),s=n.n(u),o=(n(4747),n(2222),n(1249),n(3804)),i=n.n(o),l=(n(847),n(6955)),f=n(5763),m=n(9301),p=n(8556),d=n(8172);const v=(0,o.memo)((function(e){var t=e.id,n=(0,o.useState)([]),u=(0,a.Z)(n,2),v=u[0],h=u[1],k=(0,o.useRef)(!0),y=(0,o.useRef)(0),x=(0,o.useRef)(),w=(0,o.useRef)(),Z=function(){var e=(0,c.Z)(s().mark((function e(n,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.W3)({id:t,cid:n,t:r?0:1,type:0});case 3:200===e.sent.code&&h((0,d.ZP)((function(e){e.forEach((function(e){e.commentId===n&&(e.liked=!r,e.likedCount+=r?-1:1)}))}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,c.Z)(s().mark((function e(){var n,c,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.current){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,(0,l.jH)({id:t,type:0,limit:20,offset:y.current});case 5:n=e.sent,c=n.hotComments,a=n.hasMore,k.current=a,y.current+=20,h((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(c))})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return(0,m.Z)(E,w,x),i().createElement("div",{className:"domComment px-8 py-5 overflow-auto max-h-full flex-auto",ref:w},i().createElement("div",{className:"h1"},"精彩评论"),i().createElement("div",{className:"domComment_list"},v.map((function(e){return i().createElement(f.Z,{item:e,handleLike:Z,key:e.commentId})})),k.current&&i().createElement("div",{className:"flex justify-center py-4"},i().createElement(p.Z,null)),i().createElement("div",{ref:x})))}))}}]);