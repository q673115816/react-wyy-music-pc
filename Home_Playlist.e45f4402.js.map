{"version":3,"file":"Home_Playlist.e45f4402.js","mappings":"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","sources":["webpack://wyy/./src/pages/Home/Playlist/Highquality/index.tsx","webpack://wyy/./src/pages/Home/Playlist/Home/components/Banner.tsx","webpack://wyy/./src/pages/Home/Playlist/Home/components/HeaderBar.tsx","webpack://wyy/./src/pages/Home/Playlist/Home/index.tsx","webpack://wyy/./src/pages/Home/Playlist/index.tsx"],"sourcesContent":["import React, {\n  useEffect, useRef, useState, memo,\n} from 'react';\nimport {\n  Link, NavLink,\n} from 'react-router-dom';\nimport { IconFilter, IconPlayerPlay, IconCrown } from '@tabler/icons';\nimport classNames from 'classnames';\nimport { apiTopPlaylistHighquality, apiPlaylistHighqualityTags } from '@/api';\nimport { transPlayCount } from '@/common/utils';\nimport useInfinite from '@/hooks/useInfinite';\nimport DomPlaylistAsyncReplace from '@/components/GroupPlay/PlaylistAsyncReplace';\nimport DomTagsBox from '@/components/Tags/Box';\n\n// import './style.scss';\n\nexport default memo(({ cat = '全部歌单' }) => {\n  console.log('home_playlist_high');\n  const [data, setData] = useState([]);\n  const [tags, setTags] = useState([]);\n  const before = useRef(0);\n  const [showPopup, setShowPopup] = useState(false);\n  const domObserver = useRef();\n  const domScroll = useRef();\n  const handleBeforeInit = async () => {\n    try {\n      const { tags = [] } = await apiPlaylistHighqualityTags();\n      setTags(tags);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleInit = async () => {\n    try {\n      const { playlists = [], lasttime } = await apiTopPlaylistHighquality({\n        cat,\n        limit: 20,\n        before: before.current,\n      });\n      before.current = lasttime;\n      setData((data) => [...data, ...playlists]);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useInfinite(handleInit, domScroll, domObserver);\n\n  useEffect(() => {\n    handleBeforeInit();\n  }, []);\n\n  useEffect(() => {\n    setData([]);\n  }, [cat]);\n\n  return (\n    <div\n      className=\"domHome_playlist_highquality px-8 overflow-auto flex-auto\"\n      ref={domScroll}\n    >\n      <div className=\"py-3 flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <span className=\"font-bold text-xl\">\n            精品歌单\n          </span>\n          &nbsp;\n          <a\n            href=\"https://music.163.com/#/topic?id=202001\"\n            className=\"flex-center w-4 h-4 border rounded-full text-gray-400 hover:text-gray-500 border-current\"\n          >\n            ?\n          </a>\n        </div>\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowPopup(!showPopup)}\n            type=\"button\"\n            className=\"flex items-center border hover:bg-gray-100 rounded-full px-2 py-1\"\n          >\n            <IconFilter size={16} stroke={1} />\n            {cat}\n          </button>\n          <div\n            className=\"absolute divide-y bg-white top-8 right-0 z-10 shadow rounded-lg\"\n            style={{ width: 510, display: showPopup ? null : 'none' }}\n          >\n            <div className=\"py-4 px-6\">\n              <NavLink\n                activeClassName=\"ui_themeColor\"\n                className=\"item hover:ui_themeColor text-sm\"\n                onClick={() => setShowPopup(false)}\n                to=\"./全部歌单\"\n              >\n                <span className={classNames('inline-flex inner px-3 py-1 rounded-full overflow-hidden', { ui_bg_opacity: cat === '全部歌单' })}>\n                  全部歌单\n                </span>\n              </NavLink>\n            </div>\n            <div className=\"p-6 grid grid-cols-5 gap-y-4\">\n              {tags.map((item) => (\n                <NavLink\n                  onClick={() => setShowPopup(false)}\n                  to={item.name}\n                  activeClassName=\"ui_themeColor\"\n                  className=\"item hover:ui_themeColor text-sm whitespace-nowrap\"\n                  key={item.id}\n                >\n                  <span className={classNames('inline-flex inner px-3 py-1 rounded-full overflow-hidden', { ui_bg_opacity: item.name === cat })}>\n                    {item.name}\n                  </span>\n                </NavLink>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"domHome_playlist_highquality_list grid gap-6 grid-cols-2\">\n        {\n          data.map((item) => (\n            <div className=\"item flex\" key={item.id}>\n              <div className=\"cover w-32 h-32 rounded-lg group overflow-hidden flex-none relative\">\n                <Link\n                  to={`/playlist/music/${item.id}`}\n                  className=\"\"\n                >\n                  <span className=\"absolute top-0 left-0 p-0.5 w-8 h-8 bg-yellow-500 text-white ui_angle_top_left\">\n                    <IconCrown size={14} className=\"transform -rotate-45\" />\n                  </span>\n                  <img loading={`lazy`} src={`${item.coverImgUrl}?param=200y200`} className={`ui_aspect-ratio-1/1`} alt=\"\" />\n                  <div className=\"absolute text-white top-0 right-0 py-1 px-2 flex-center\">\n                    <IconPlayerPlay size={12} />\n                    {transPlayCount(item.playCount)}\n                  </div>\n                </Link>\n                <DomPlaylistAsyncReplace\n                  id={item.id}\n                  className=\"playArrow opacity-0 group-hover:opacity-100 ui_themeColor absolute right-0 bottom-0 m-2 p-2 bg-white bg-opacity-90 rounded-full\"\n                >\n                  <IconPlayerPlay size={16} className=\"fill-current\" />\n                </DomPlaylistAsyncReplace>\n              </div>\n              <div className=\"ml-2 flex-auto w-0 pt-5\">\n                <div className=\"text-sm truncate ui_text_black_hover\">\n                  <Link to={`/playlist/music/${item.id}`} className=\"\">\n                    {item.name}\n                  </Link>\n                </div>\n                <div className=\"mt-3 flex items-center ui_text_gray_hover\">\n                  by&nbsp;\n                  <Link to={`/user/${item.userId}`} className=\"\">\n                    {item.creator.nickname}\n                  </Link>\n                  &nbsp;\n                  {\n                    item?.creator?.avatarDetail?.identityIconUrl\n                    && <img className=\"w-3 h-3\" src={item.creator.avatarDetail.identityIconUrl} alt=\"\" />\n                  }\n                </div>\n                <div className=\"mt-4 text-gray-300 flex items-center\">\n                  <DomTagsBox text={item.tag} className=\"flex-none mr-1\" />\n                  <span className=\"flex-auto truncate\">\n                    {item.copywriter}\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))\n        }\n        <div ref={domObserver} />\n      </div>\n    </div>\n  );\n});\n","import React, { memo } from 'react';\nimport { Link } from 'react-router-dom';\nimport { IconCrown } from '@tabler/icons';\n\nexport default memo(({ item = {}, cat = '全部歌单' }) => (\n  <Link\n    to={`/home/playlist/highquality/${cat}`}\n    className=\"domHome_playlist_banner flex items-center relative  rounded-lg overflow-hidden z-10\"\n  >\n    <div\n      className=\"absolute inset-0 bg-center\"\n      style={{\n        backgroundImage: `url(${item.coverImgUrl})`,\n        filter: 'blur(20px) grayscale(80%)',\n        zIndex: '-1',\n      }}\n    />\n    <div className=\"cover w-36 h-36 rounded-lg overflow-hidden\">\n      <img src={item.coverImgUrl} alt=\"\" />\n    </div>\n    <div className=\"contennt ml-2.5\">\n      <div className=\"tag border border-current flex-center text-sm rounded-full\">\n        <IconCrown size={16} />\n        &nbsp;\n        精品歌单\n      </div>\n      <div className=\"text-white text-base mt-4\">\n        {item.name}\n      </div>\n      <div className=\"text-gray-300 mt-2\">\n        {item.copywriter}\n      </div>\n    </div>\n  </Link>\n));\n","import React, { memo, useState } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport classNames from 'classnames';\nimport { IconChevronRight } from '@tabler/icons';\nimport { useSelector } from 'react-redux';\n\nconst DomSmallHot = () => (\n  <svg\n    className=\"absolute left-full top-1/4 fill-current\"\n    viewBox=\"0 0 12 12\"\n    width=\"12\"\n    height=\"6\"\n  >\n    <text dominantBaseline=\"middle\" textAnchor=\"middle\" x=\"0.5em\" y=\"0.5em\" className=\"fill-current ui_themeColor font-bold\">hot</text>\n  </svg>\n);\n\nconst DomSubList = memo(({ sub = [], category = null, cat = '' }) => (\n  <div className=\"flex-auto grid grid-cols-6 gap-y-4\">\n    {\n      sub\n        .filter((item) => item.category === Number(category))\n        .map((item) => (\n          <NavLink\n            activeClassName=\"on ui_themeColor\"\n            className=\"domHome_playlist_popup_nav_link text-gray-600 hover:ui_themeColor\"\n            to={`/home/playlist/${encodeURIComponent(item.name)}`}\n            key={item.name}\n          >\n            <span className={classNames('inline-flex inner px-4 py-1 rounded-full overflow-hidden', { ui_bg_opacity: item.name === cat })}>\n              <span className=\"relative\">\n                {item.name}\n                {\n                  item.hot && <DomSmallHot />\n                }\n              </span>\n            </span>\n          </NavLink>\n        ))\n    }\n  </div>\n));\nexport default memo(({ cat }) => {\n  const [popup, setPopup] = useState(false);\n  const {\n    hot,\n    catlist,\n  } = useSelector(({ home }) => home.playlist);\n  return (\n    <div className=\"domHome_playlist_nav pt-4 pb-4 flex items-center\">\n      <div className=\"relative\">\n        <button\n          type=\"button\"\n          className=\"border flex items-center justify-center h-8 w-24 rounded-full hover:bg-gray-100 focus:outline-none text-sm\"\n          onClick={() => setPopup(!popup)}\n        >\n          {decodeURIComponent(cat)}\n          <IconChevronRight size={20} stroke={1} />\n        </button>\n        <div className=\"domHome_playlist_popup_nav absolute z-20 bg-white shadow text-sm divide-y top-full mt-1 pb-20\" style={{ display: popup ? null : 'none' }}>\n          <div className=\"pl-8 py-4\">\n            <NavLink\n              onClick={() => setPopup(false)}\n              activeClassName=\"on ui_themeColor\"\n              exact\n              className=\"domHome_playlist_popup_nav_link text-gray-600 hover:ui_themeColor\"\n              to=\"/home/playlist/全部歌单\"\n            >\n              <span className={classNames('inline-flex inner px-4 py-1 rounded-full overflow-hidden', { ui_bg_opacity: cat === '全部歌单' })}>\n                全部歌单\n              </span>\n            </NavLink>\n          </div>\n          <div className=\"p-5 space-y-4\">\n            {\n              Object.entries(catlist.categories)\n                .map(([category, value]) => (\n                  <div key={category} className=\"flex\">\n                    <div className=\"category text-gray-300\">\n                      {value}\n                    </div>\n                    <DomSubList\n                      sub={catlist.sub}\n                      category={category}\n                      cat={cat}\n                    />\n                  </div>\n                ))\n            }\n          </div>\n        </div>\n      </div>\n      <div className=\"ml-auto flex\">\n        {hot.tags?.map((item) => (\n          <NavLink\n            activeClassName=\"ui_themeColor ui_bg_opacity\"\n            className=\"domHome_playlist_nav_link text-gray-500 hover:text-gray-700 px-2 rounded-full text-center\"\n            to={`/home/playlist/${encodeURIComponent(item.name)}`}\n            key={item.name}\n          >\n            {item.name}\n          </NavLink>\n        ))}\n      </div>\n\n    </div>\n  );\n});\n","import React, {\n  useState, useEffect, useRef, memo,\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport './style.scss';\nimport {\n  apiTopPlaylist,\n  apiPlaylistCatlist,\n  apiTopPlaylistHighquality,\n  apiPlaylistHighqualityTags,\n  apiPlaylistHot,\n} from '@/api';\nimport { setTopPlaylist, setPlaylistCatlist } from '@/reducers/home/slice';\nimport DomLoading from '@/components/Loading';\nimport DomResize from '@/components/ResizeObserver';\nimport DomPage from '@/components/Page';\nimport DomItem from '@/components/GridPlaylist/Item';\nimport DomBanner from './components/Banner';\nimport DomHeaderBar from './components/HeaderBar';\n\nexport default memo(({ cat = '全部歌单', page = 1 }) => {\n  // console.log('playlist');\n  page = Number(page)\n  const { push } = useHistory();\n  const [order, setOrder] = useState('hot');// new , default = hot\n  // const [offer, setOffer] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const dispatch = useDispatch();\n  const DomScroll = useRef();\n\n  const {\n    highquality,\n    playlists,\n  } = useSelector(({ home: { playlist } }) => playlist);\n\n  const handleProInit = async () => {\n    try {\n      const [hot, catlist] = await Promise.all([\n        apiPlaylistHot(),\n        apiPlaylistCatlist(),\n      ]);\n      dispatch(setPlaylistCatlist({\n        hot, catlist,\n      }));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleInit = async () => {\n    setLoading(true);\n\n    try {\n      const highquality = await apiTopPlaylistHighquality({\n        cat,\n        limit: 1,\n      });\n      const playlists = await apiTopPlaylist({\n        order,\n        cat,\n        limit: 100,\n        offset: (page - 1) * 100,\n      });\n      dispatch(setTopPlaylist({\n        highquality,\n        playlists,\n      }));\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setLoading(false);\n      DomScroll.current.scrollTo(0, 0);\n    }\n  };\n\n  useEffect(() => {\n    handleProInit();\n  }, []);\n\n  useEffect(() => {\n    handleInit();\n  }, [order, cat, page]);\n  if (loading) {\n    return (\n      <div className=\"flex-center w-full h-full\">\n        <DomLoading />\n      </div>\n    );\n  }\n  return (\n    <div className=\"domHome_playlist px-8 overflow-auto max-h-full flex-auto\" ref={DomScroll}>\n      <div className=\"ui_w1100\">\n        {highquality.playlists.length > 0 && <DomBanner item={highquality.playlists[0]} cat={cat} />}\n        <DomHeaderBar cat={cat} />\n        <DomResize className=\"domHome_playlist_list grid gap-5\" small=\"grid-cols-4\" big=\"grid-cols-5\">\n          {\n            playlists.playlists.map((item) => (\n              <DomItem item={item} key={item.id} />\n            ))\n          }\n        </DomResize>\n        <DomPage\n          total={Math.ceil(playlists.total / 100)}\n          page={page}\n          func={(props) => push(`${props}`)}\n        />\n      </div>\n    </div>\n  );\n});\n","import React, { memo } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport useMemoParmas from '@/hooks/useMemoParams';\nimport DomHome from './Home';\nimport DomHighquality from './Highquality';\n\nexport default memo(() => (\n  <Switch>\n    <Route path=\"/home/playlist/highquality\">\n      {({ match: { path } }) => (\n        <Switch>\n          <Route path={`${path}/:cat`}>\n            {useMemoParmas(DomHighquality)}\n          </Route>\n          <Redirect to={`${path}/全部歌单`} />\n        </Switch>\n      )}\n    </Route>\n    <Route path=\"/home/playlist/:cat/:page\">\n      {useMemoParmas(DomHome)}\n    </Route>\n    <Redirect from=\"/home/playlist/:cat\" to=\"/home/playlist/:cat/1\" />\n    <Redirect to=\"/home/playlist/全部歌单\" />\n    {/* <Route path=\"/home/playlist\" component={DomHome} /> */}\n  </Switch>\n));\n"],"names":["memo","cat","console","log","useState","data","setData","tags","setTags","before","useRef","showPopup","setShowPopup","domObserver","domScroll","handleBeforeInit","apiPlaylistHighqualityTags","handleInit","apiTopPlaylistHighquality","limit","current","playlists","lasttime","useEffect","className","ref","href","onClick","type","IconFilter","size","stroke","style","width","display","NavLink","activeClassName","to","ui_bg_opacity","map","item","name","key","id","Link","IconCrown","loading","src","coverImgUrl","alt","IconPlayerPlay","transPlayCount","playCount","userId","creator","nickname","avatarDetail","identityIconUrl","text","tag","copywriter","backgroundImage","filter","zIndex","DomSmallHot","viewBox","height","dominantBaseline","textAnchor","x","y","DomSubList","sub","category","Number","encodeURIComponent","hot","popup","setPopup","useSelector","home","playlist","catlist","decodeURIComponent","IconChevronRight","exact","Object","entries","categories","value","page","push","useHistory","order","setLoading","dispatch","useDispatch","DomScroll","highquality","handleProInit","Promise","all","apiPlaylistHot","apiPlaylistCatlist","setPlaylistCatlist","apiTopPlaylist","offset","setTopPlaylist","scrollTo","length","small","big","total","Math","ceil","func","props","Switch","Route","path","match","DomHighquality","Redirect","DomHome","from"],"sourceRoot":""}