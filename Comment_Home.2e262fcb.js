"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[247],{2418:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var n=a(5861),r=a(885),l=a(7757),c=a.n(l),o=(a(8309),a(1249),a(7363)),s=a.n(o),m=a(6711),i=a(6719),u=a(5457),d=a(3548),p=a(4592),v=a(2720),f=a(4849),h=a(8124),E={song:{apiDetail:function(e){var t=e.id;return(0,u.VO)({ids:t})},apiComment:u.dV,header:function(e){var t,a=e.detail;return s().createElement("div",{className:"domComment_header"},s().createElement("div",{className:"domComment_infos flex "},s().createElement("div",{className:"cover h-20 rounded overflow-hidden relative"},s().createElement("img",{loading:"lazy",className:"h-full",src:a.al.picUrl,alt:""}),s().createElement("div",{className:"ico absolute inset-0 m-auto flex-center w-8 h-8 ui_themeColor rounded-full bg-white bg-opacity-90"},s().createElement(i.IconPlayerPlay,{size:16,className:"fill-current"}))),s().createElement("div",{className:"content px-6 py-2"},s().createElement("div",{className:"title text-lg"},a.name),s().createElement("div",{className:"info text-gray-500 mt-2 space-x-5"},s().createElement("span",null,"专辑：",s().createElement(m.Link,{className:"ui_text_gray_hover",to:"/playlist/album/".concat(a.al.id)},null===(t=a.al)||void 0===t?void 0:t.name)),s().createElement("span",null,"歌手：",a.ar.map((function(e,t){return s().createElement("span",{key:e.id},t>0&&" / ",s().createElement(m.Link,{className:"ui_text_gray_hover",to:"/artist/".concat(e.id)},e.name))})))))))}},mv:{apiDetail:u.Ro,apiComment:u.L,header:function(){return s().createElement("div",null)}},video:{apiDetail:u.ld,apiComment:u.ju,header:function(){return s().createElement("div",null)}}};const x=(0,o.memo)((function(e){var t=e.id,a=e.type;console.log("comment");var l=(0,o.useState)({}),m=(0,r.Z)(l,2),u=m[0],x=m[1],y=(0,o.useState)({}),b=(0,r.Z)(y,2),N=b[0],g=b[1],k=(0,o.useState)(""),w=(0,r.Z)(k,2),_=w[0],C=w[1],Z=(0,o.useState)(!0),z=(0,r.Z)(Z,2),I=z[0],S=z[1],D=(0,o.useState)(1),L=(0,r.Z)(D,2),M=L[0],V=L[1],P=function(){var e=(0,n.Z)(c().mark((function e(){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E[a].apiDetail({id:t});case 3:n=e.sent,r=n.songs,x(r[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,n.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E[a].apiComment({id:t,offset:20*(M-1),limit:d.zI});case 3:n=e.sent,g(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,n.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return e.next=4,j();case 4:S(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=(0,o.useMemo)((function(){return E[a].header}),[a]);return(0,o.useEffect)((function(){I?A():j()}),[M]),I?s().createElement("div",{className:"w-full h-full flex-center"},s().createElement(f.Z,null)):s().createElement("div",{className:"domComment overflow-auto px-8 py-5 h-full"},s().createElement(H,{detail:u}),s().createElement("div",{className:"domComment_write mt-4"},s().createElement(p.Z,{value:_,setValue:C,length:140}),s().createElement("div",{className:"domComment_write_actions flex mt-2.5"},s().createElement("div",{className:"flex space-x-2"},s().createElement("button",{type:"button",className:"text-gray-500 hover:text-black"},s().createElement(i.IconMoodSmile,{size:20,stroke:1.5})),s().createElement("button",{type:"button",className:"text-gray-500 hover:text-black"},s().createElement(i.IconAt,{size:20,stroke:1.5})),s().createElement("button",{type:"button",className:"text-gray-500 hover:text-black"},s().createElement(i.IconHash,{size:20,stroke:1.5}))),s().createElement("button",{type:"button",className:"ui_btn flex-center border px-4 h-8 text-sm hover:bg-gray-100 rounded-full ml-auto"},"评论"))),s().createElement("div",{className:"domComment_main mt-8"},s().createElement(v.Z,{comments:N,more:t,type:a}),s().createElement(h.Z,{total:Math.ceil(N.total/d.zI),page:M,func:V})))}))}}]);