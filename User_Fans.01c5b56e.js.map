{"version":3,"sources":["webpack://wyy/./src/pages/User/Fans/index.tsx"],"names":["memo","uid","console","log","useState","profile","setProfile","data","setData","handleInit","Promise","all","apiUserDetail","apiUserFolloweds","followeds","handleClick","useCallback","id","apiFollow","t","produce","draft","findIndex","item","userId","followed","useEffect","className","Link","to","nickname","list"],"mappings":"iSAQA,SAAeA,WAAK,YAAa,IAAVC,EAAU,EAAVA,IACrBC,QAAQC,IAAI,aACZ,OAA8BC,cAAS,IAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAAwBF,cAAS,IAAjC,eAAOG,EAAP,KAAaC,EAAb,KAEMC,EAAU,mCAAG,mHAE4BC,QAAQC,IAAI,EACrDC,QAAc,CACZX,SAEFY,QAAiB,CACfZ,UAPW,+BAENI,EAFM,KAENA,QAAaS,EAFP,KAEOA,UAQtBR,EAAWD,GACXG,EAAQM,GAXO,kDAafZ,QAAQC,IAAR,MAbe,0DAAH,qDAiBVY,GAAcC,iBAAW,mCAAC,WAAOC,GAAP,iGAEVC,QAAU,CAC1BD,KACAE,EAAG,IAJuB,iBAE5B,UAIAX,EAAQY,KAAQ,SAACC,GACfA,EAAMA,EAAMC,WAAU,SAACC,GAAD,OAAUA,EAAKC,SAAWP,MAAKQ,UAAW,MAPtC,gDAU5BvB,QAAQC,IAAR,MAV4B,yDAAD,sDAY5B,IAKH,OAHAuB,gBAAU,WACRjB,MACC,IAED,yBAAKkB,UAAU,sBACb,yBAAKA,UAAU,uCACb,kBAAC,EAAAC,KAAD,CAAMC,GAAG,MACNxB,EAAQyB,UAFb,OAMA,yBAAKH,UAAU,2BACb,kBAAC,IAAD,CAAaI,KAAMxB,EAAMQ,YAAaA,GACpC,yBAAKY,UAAU,SAAf","file":"User_Fans.01c5b56e.js","sourcesContent":["import React, {\n  memo, useCallback, useEffect, useState,\n} from 'react';\nimport { apiUserDetail, apiUserFolloweds, apiFollow } from '@/api';\nimport { Link } from 'react-router-dom';\nimport produce from 'immer';\nimport DomCardList from '../components/CardList';\n\nexport default memo(({ uid }) => {\n  console.log('user_fans');\n  const [profile, setProfile] = useState({});\n  const [data, setData] = useState([]);\n\n  const handleInit = async () => {\n    try {\n      const [{ profile }, { followeds }] = await Promise.all([\n        apiUserDetail({\n          uid,\n        }),\n        apiUserFolloweds({\n          uid,\n        }),\n      ]);\n      setProfile(profile);\n      setData(followeds);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleClick = useCallback(async (id) => {\n    try {\n      const { } = await apiFollow({\n        id,\n        t: 1,\n      });\n      setData(produce((draft) => {\n        draft[draft.findIndex((item) => item.userId === id)].followed = true;\n      }));\n    } catch (error) {\n      console.log(error);\n    }\n  }, []);\n\n  useEffect(() => {\n    handleInit();\n  }, []);\n  return (\n    <div className=\"domUser_followlist\">\n      <div className=\"h1 domUser_subpage_header ui_header\">\n        <Link to=\"./\">\n          {profile.nickname}\n        </Link>\n        的粉丝\n      </div>\n      <div className=\"domUser_followlist_main\">\n        <DomCardList list={data} handleClick={handleClick}>\n          <div className=\"empty\">\n            还没有粉丝\n          </div>\n        </DomCardList>\n      </div>\n    </div>\n  );\n});\n"],"sourceRoot":""}