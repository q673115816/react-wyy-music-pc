(self.webpackChunkwyy=self.webpackChunkwyy||[]).push([[238],{959:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>$});var n=a(3804),r=a.n(n),l=a(847),c=a(65),s=a(2137),i=a(9351),m=a(7757),u=a.n(m),o=(a(1249),a(2526),a(1817),a(4916),a(4723),a(8309),a(5325)),d=a(7484),p=a.n(d),f=a(6955),v=a(5200),E=a(9703),x=a(4184),y=a.n(x),b=a(7953),g=a(8556),N=a(564),h=a(8172),k=a(292),Z=a(9725),w=a(977),_=a(2053),C=a(7377),D=a(8157),I=a(9619);const S=function(e){var t=e.songs,a=void 0===t?[]:t;return 0===a.length?r().createElement("div",{className:"pt-16 text-center text-sm text-gray-400"},"暂无音乐"):r().createElement("div",{style:{"--ui_grid_template":"36px / 54px 30px 30px 36% 4fr 6fr 2fr"},className:"mt-4"},r().createElement("div",{className:"grid ui_grid_template"},r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500"},"音乐标题"),r().createElement("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500"},"歌手"),r().createElement("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500"},"专辑"),r().createElement("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500"},"时长")),a.map((function(e,t){return r().createElement(k.Z,{schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","不感兴趣","下载"]],type:"song",item:e,key:e.id},r().createElement("div",{tabIndex:"2",className:y()("grid items-center focus:outline-none focus:bg-gray-200 hover:bg-gray-100 ui_grid_template",t%2==0&&"bg-gray-50")},r().createElement("div",{className:"pr-2"},r().createElement(Z.Z,{index:t,id:e.id})),r().createElement("div",{className:"px-1"},r().createElement(w.Z,{id:e.id})),r().createElement("div",{className:"px-1"},r().createElement(_.Z,null)),r().createElement(C.Z,{className:"px-1",item:e}),r().createElement(D.Z,{className:"px-1",artists:e.ar}),r().createElement(I.Z,{className:"px-1",name:e.al.name,id:e.al.id}),r().createElement("div",{className:"text-gray-500 px-1"},p()(e.dt).format("mm:ss"))))})))};var P=a(6232),L=a(4561);const z=function(e){var t=e.id,a=(0,n.useState)({}),l=(0,i.Z)(a,2),c=l[0],m=l[1],o=function(){var e=(0,s.Z)(u().mark((function e(){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.wL)({id:t});case 3:a=e.sent,m(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){o()}),[]),r().createElement("div",{className:"px-8"},r().createElement("div",{className:"pt-10 pb-10"},r().createElement(L.Z,null)),r().createElement(P.Z,{comments:c}))};var j=a(7647),U=a(1059);const O=function(e){var t=e.id,a=(0,n.useState)([]),c=(0,i.Z)(a,2),m=c[0],o=c[1],d=(0,n.useState)(0),p=(0,i.Z)(d,2),v=p[0],E=p[1],x=(0,n.useState)(1),y=(0,i.Z)(x,2),b=y[0],g=y[1],N=function(){var e=(0,s.Z)(u().mark((function e(){var a,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.UL)({id:t,limit:60,offset:60*(b-1)});case 3:a=e.sent,n=a.subscribers,r=a.total,o(n),E(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){N()}),[b]),r().createElement("div",{className:"px-8"},r().createElement("div",{className:"domPlaylistDetail_subscribers flex justify-between flex-wrap"},m.map((function(e){return r().createElement("div",{key:e.userId,className:"item flex mt-6"},r().createElement(l.Link,{to:"/user/".concat(e.userId),className:"avatar border rounded-full overflow-hidden"},r().createElement("img",{src:"".concat(e.avatarUrl,"?param=100y100"),alt:""})),r().createElement("div",{className:"ml-2 flex-auto w-0 flex flex-col justify-center"},r().createElement("div",{className:"text-sm flex items-center"},r().createElement(l.Link,{to:"/user/".concat(e.userId)},e.nickname)," ",r().createElement(j.ZP,{gender:e.gender,size:16})),r().createElement("div",{className:"mt-2 truncate"},e.signature)))}))),r().createElement(U.Z,{total:Math.ceil(v/60),page:b,func:g}))};var Y=[["歌曲列表","playlist"],["评论","comments"],["收藏者","subscribers"]],M=function(e){var t=e.status,a=e.id,n=e.songs;switch(t){case"playlist":return r().createElement(S,{songs:n});case"comments":return r().createElement(z,{id:a});case"subscribers":return r().createElement(O,{id:a});default:return null}},R=function(e){var t=e.tags,a=void 0===t?[]:t;return 0===a.length?null:r().createElement("div",{className:"tags"},r().createElement("span",null,"标签："),a.map((function(e,t){return r().createElement("span",{key:e},t>0&&" / ",r().createElement(l.Link,{to:"/home/playlist/".concat(e),className:"tag ui_link"},e))})))},T=function(e){var t=e.description,a=void 0===t?"":t;if(!a)return null;var l=(0,n.useState)(!1),c=(0,i.Z)(l,2),s=c[0],m=c[1],u=a.match(/^.*$/gm);return r().createElement("div",{className:"relative pr-5"},r().createElement("div",{className:"whitespace-pre-line leading-6"},"简介：",r().createElement("span",{className:y()("text-gray-500 select-text",!s&&"truncate inline-block max-w-xs align-bottom")},s?a:u[0]),r().createElement("button",{type:"button",onClick:function(){return m(!s)},className:"absolute top-0 right-0 text-gray-500"},s?r().createElement(v.IconCaretUp,{size:16,className:"fill-current"}):r().createElement(v.IconCaretDown,{size:16,className:"fill-current"}))))};const Q=function(){var e,t,a,c,m=(0,o.useDispatch)(),d=(0,n.useState)(!0),x=(0,i.Z)(d,2),k=x[0],Z=x[1],w=(0,n.useState)([]),_=(0,i.Z)(w,2),C=_[0],D=_[1],I=(0,l.useParams)().id,S=(0,n.useState)({}),P=(0,i.Z)(S,2),L=P[0],z=P[1],j=(0,n.useState)("playlist"),U=(0,i.Z)(j,2),O=U[0],Q=U[1],F=((0,o.useSelector)((function(e){return e.common})).isLogin,function(){var e=(0,s.Z)(u().mark((function e(){var t,a,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.MY)({id:I});case 3:if(t=e.sent,z((0,h.ZP)((function(e){for(var a in t)e[a]=t[a]}))),!(t.playlist.trackCount>0)){e.next=11;break}return e.next=8,(0,f.VO)({ids:t.playlist.trackIds.map((function(e){return e.id}))});case 8:a=e.sent,n=a.songs,D(n);case 11:Z(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}());(0,n.useEffect)((function(){F()}),[]);var V=function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.so)({t:t?2:1,id:I});case 3:200===e.sent.code&&(m((0,E.fz)(t?"取消收藏成功！":"收藏成功！")),z((0,h.ZP)((function(e){e.playlist.subscribed=!t})))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){F()}),[I]),k?r().createElement("div",{className:"w-full h-full flex-center"},r().createElement(g.Z,null)):r().createElement("div",{className:"domPlaylistDetail overflow-auto h-full"},r().createElement("div",{className:"domPlaylistDetail_header p-8 flex"},r().createElement("div",{className:"cover border rounded overflow-hidden flex-none"},r().createElement("img",{className:"",src:"".concat(L.playlist.coverImgUrl,"?param=200y200"),alt:""})),r().createElement("div",{className:"info flex-auto w-0 ml-5"},r().createElement("div",{className:"name flex items-center"},r().createElement("span",{className:"type text-red-500 border border-current px-1 py-0.5 rounded mr-2 leading-none"},"歌单"),r().createElement("span",{className:"h1 select-text"},L.playlist.name||"我喜欢的音乐")),r().createElement("div",{className:"creator flex items-center mt-2"},r().createElement(l.Link,{to:"/user/".concat(null===(e=L.playlist.creator)||void 0===e?void 0:e.userId),className:"avator w-6 h-6 rounded-full overflow-hidden mr-2"},r().createElement("img",{className:"",src:"".concat(null===(t=L.playlist.creator)||void 0===t?void 0:t.avatarUrl,"?param=50y50"),alt:""})),r().createElement(l.Link,{to:"/user/".concat(null===(a=L.playlist.creator)||void 0===a?void 0:a.userId),className:"nickname ui_link mr-2"},null===(c=L.playlist.creator)||void 0===c?void 0:c.nickname),r().createElement("span",{className:"text-gray-500"},p()(L.playlist.createTime||Date.now()).format("YYYY-MM-DD"),"创建")),r().createElement("div",{className:"actions flex space-x-2 mt-2"},r().createElement(N.Z,{playlist:C}),r().createElement("button",{onClick:function(){return V(L.playlist.subscribed)},type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full btn"},L.playlist.subscribed?r().createElement(v.IconCheckbox,{size:20,stroke:1}):r().createElement(v.IconFolderPlus,{size:20,stroke:1})," ",L.playlist.subscribed?"已收藏":"收藏","(".concat((0,b.Qb)(L.playlist.subscribedCount),")")),r().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full btn"},r().createElement(v.IconScreenShare,{size:20,stroke:1}),"  分享","(".concat((0,b.Qb)(L.playlist.shareCount),")")),r().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full btn"},r().createElement(v.IconCloudDownload,{size:20,stroke:1}),"  下载全部")),r().createElement("div",{className:"space-y-1 mt-2"},r().createElement(R,{tags:L.playlist.tags}),r().createElement("div",null,r().createElement("span",{className:"mr-3"},"歌曲：",r().createElement("span",{className:"text-gray-500"},L.playlist.trackCount)),r().createElement("span",null,"播放：",r().createElement("span",{className:"text-gray-500"},(0,b.LU)(L.playlist.playCount)))),r().createElement(T,{description:L.playlist.description})))),r().createElement("div",{className:"domPlaylistDetail_main mt-4"},r().createElement("div",{className:"space-x-4 flex items-baseline px-8"},Y.map((function(e){var t=(0,i.Z)(e,2),a=t[0],n=t[1];return r().createElement("button",{type:"button",className:y()("text-sm",O===n&&"text-base font-bold ui_underline"),key:a,onClick:function(){return Q(n)}},a,"评论"===a&&"(".concat(L.playlist.commentCount,")"))}))),r().createElement("div",null,r().createElement(M,{id:I,status:O,songs:C}))))};var F=a(6814);const V=function(){var e=(0,l.useParams)().id,t=function(){var t=(0,s.Z)(u().mark((function t(){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,f.NW)({rid:e});case 3:a=t.sent,(0,F.Z)(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return(0,n.useEffect)((function(){t()}),[]),r().createElement("div",{className:"domPlaylistDetail"},r().createElement("div",{className:"domPlaylistDetail_header"}),r().createElement("div",{className:"domPlaylistDetail_main"},"TODO"))},W=function(){var e=(0,n.useState)(0);return(0,i.Z)(e,1)[0],r().createElement("div",null,"TOTO")},$=(0,n.memo)((function(){return r().createElement(l.Switch,null,r().createElement(l.Route,{path:"/playlist/music/:id"},(0,c.Z)(Q)),r().createElement(l.Route,{path:"/playlist/dj/:id"},(0,c.Z)(V)),r().createElement(l.Route,{path:"/playlist/album/:id"},(0,c.Z)(W)),r().createElement(l.Route,{path:"/playlist"},r().createElement(Q,null)))}))}}]);