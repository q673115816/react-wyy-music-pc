{"version":3,"file":"Friend_Topic.5a6cd360.js","mappings":"uOASA,SAAeA,EAAAA,EAAAA,OAAK,YAAY,IAATC,EAAS,EAATA,GACrB,GAA4BC,EAAAA,EAAAA,UAAS,IAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAAsBF,EAAAA,EAAAA,UAAS,IAA/B,eAAOG,EAAP,KAAYC,EAAZ,KACA,GAAwBJ,EAAAA,EAAAA,UAAS,IAAjC,eAAOK,EAAP,KAAaC,EAAb,KACMC,GAAQC,EAAAA,EAAAA,QAAOT,GACfU,GAAYD,EAAAA,EAAAA,UACZE,GAAcF,EAAAA,EAAAA,UAEdG,EAAa,mCAAG,oHAEIC,EAAAA,EAAAA,IAAe,CACnCL,MAAOA,EAAMM,UAHG,uBAEVC,EAFU,EAEVA,IAFU,UAKIC,EAAAA,EAAAA,IAAY,CAChCC,MAAO,KANS,gBAKVb,EALU,EAKVA,IAGRD,EAAUY,GACVV,EAAOD,GATW,kDAWlBc,QAAQC,IAAR,MAXkB,0DAAH,qDAcbC,EAAe,mCAAG,gHAEKC,EAAAA,EAAAA,IAAuB,CAC9Cb,MAAOA,EAAMM,UAHK,gBAEZQ,EAFY,EAEZA,OAGRf,EAAQe,GALY,gDAOpBJ,QAAQC,IAAR,MAPoB,yDAAH,qDAgBrB,OANAI,EAAAA,EAAAA,GAAYH,EAAiBV,EAAWC,IACxCa,EAAAA,EAAAA,YAAU,WACRhB,EAAMM,QAAUd,EAChBO,EAAQ,IACRK,EAAcZ,KACb,CAACA,IAEF,yBAAKyB,UAAU,iCAAiCC,IAAKhB,GACnD,yBAAKe,UAAU,iBACb,yBAAKA,UAAU,4BACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,YACb,yBACEA,UAAU,2FACVE,MAAO,CAAEC,OAAQ,IAAKC,gBAAiB,OAAF,OAAS3B,EAAO4B,WAAhB,OAErC,4BACEC,KAAK,SACLN,UAAU,uHAEV,kBAAC,EAAAO,UAAD,CAAWC,KAAM,GAAIC,OAAQ,KAE/B,yBAAKT,UAAU,sDACb,0BAAMA,UAAU,4CAAhB,WACOvB,EAAOiC,MADd,MAGA,0BAAMV,UAAU,gGAAhB,UACMvB,EAAOkC,iBADb,SAIF,4BAAQL,KAAK,SAASN,UAAU,8FAC9B,kBAAC,EAAAY,WAAD,CAAYJ,KAAM,KADpB,SAKF,yBAAKR,UAAU,QAAQvB,EAAOoC,OAEhC,kBAAC,IAAD,CAAYC,KAAMjC,IAClB,yBAAKoB,IAAKf,MAGd,yBAAKc,UAAU,4BAA4BE,MAAO,CAAEa,MAAO,MACzD,yBAAKf,UAAU,6BAAf,QACA,kBAAC,IAAD,CAAcc,KAAMnC","sources":["webpack://wyy/./src/pages/Friend/Topic.tsx"],"sourcesContent":["import React, {\n  memo, useEffect, useRef, useState,\n} from 'react';\nimport { apiTopicDetail, apiTopicDetailEventHot, apiHotTopic } from '@/api';\nimport useInfinite from '@/hooks/useInfinite';\nimport DomDynamic from '@/components/Dynamic';\nimport { IconShare, IconPencil } from '@tabler/icons';\nimport DomTopicList from './components/TopicList';\n\nexport default memo(({ id }) => {\n  const [detail, setDetail] = useState({});\n  const [hot, setHot] = useState([]);\n  const [data, setData] = useState([]);\n  const actid = useRef(id);\n  const DomScroll = useRef();\n  const DomObserver = useRef();\n\n  const handleInitHot = async () => {\n    try {\n      const { act } = await apiTopicDetail({\n        actid: actid.current,\n      });\n      const { hot } = await apiHotTopic({\n        limit: 10,\n      });\n      setDetail(act);\n      setHot(hot);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleInitEvent = async () => {\n    try {\n      const { events } = await apiTopicDetailEventHot({\n        actid: actid.current,\n      });\n      setData(events);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  useInfinite(handleInitEvent, DomScroll, DomObserver);\n  useEffect(() => {\n    actid.current = id;\n    setData([]);\n    handleInitHot(id);\n  }, [id]);\n  return (\n    <div className=\"domFriend h-full overflow-auto\" ref={DomScroll}>\n      <div className=\"flex divide-x\">\n        <div className=\"domFriend_left flex-auto\">\n          <div className=\"px-8 pt-4\">\n            <div className=\"border-b\">\n              <div\n                className=\"rounded overflow-hidden border bg-white flex-center flex-col relative bg-cover bg-center\"\n                style={{ height: 220, backgroundImage: `url(${detail.coverPCUrl})` }}\n              >\n                <button\n                  type=\"button\"\n                  className=\"absolute m-4 w-8 h-8 flex-center top-0 right-0 border text-white border-current rounded-full bg-black bg-opacity-50\"\n                >\n                  <IconShare size={24} stroke={1} />\n                </button>\n                <div className=\"relative border-t border-b py-6 text-white text-xl\">\n                  <span className=\"w-52 text-center whitespace-nowrap w-min\">\n                    {`#${detail.title}#`}\n                  </span>\n                  <span className=\"absolute inset-x-0 text-center text-xs whitespace-nowrap top-full transform -translate-y-1/2\">\n                    {`${detail.participateCount}人参与`}\n                  </span>\n                </div>\n                <button type=\"button\" className=\"bg-white flex-center h-9 mt-4 w-52 rounded text-red-500 bg-opacity-90 hover:bg-opacity-100\">\n                  <IconPencil size={16} />\n                  立即参与\n                </button>\n              </div>\n              <div className=\"pb-8\">{detail.text}</div>\n            </div>\n            <DomDynamic list={data} />\n            <div ref={DomObserver} />\n          </div>\n        </div>\n        <div className=\"domFriend_right flex-none\" style={{ width: 250 }}>\n          <div className=\"p-4 text-sm text-gray-700\">推荐话题</div>\n          <DomTopicList list={hot} />\n        </div>\n      </div>\n    </div>\n  );\n});\n"],"names":["memo","id","useState","detail","setDetail","hot","setHot","data","setData","actid","useRef","DomScroll","DomObserver","handleInitHot","apiTopicDetail","current","act","apiHotTopic","limit","console","log","handleInitEvent","apiTopicDetailEventHot","events","useInfinite","useEffect","className","ref","style","height","backgroundImage","coverPCUrl","type","IconShare","size","stroke","title","participateCount","IconPencil","text","list","width"],"sourceRoot":""}