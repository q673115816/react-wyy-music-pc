{"version":3,"file":"Ai.4bf33588.js","mappings":"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","sources":["webpack://wyy/./src/pages/AI/Icon.tsx","webpack://wyy/./src/pages/AI/Speech.tsx","webpack://wyy/./src/pages/AI/AI.tsx"],"sourcesContent":["import React, { memo } from \"react\"\n\nexport default memo(() => (\n<svg viewBox=\"0 0 1024 1024\" width=\"256\" height=\"256\" className=\"mb-4\">\n  <path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#FD8469\" />\n  <path d=\"M110.462992 829.68189C203.993701 948.207874 349.127559 1024 512 1024s307.2-75.792126 401.537008-194.31811H110.462992z\" fill=\"#F1543F\" />\n  <path d=\"M586.179528 817.587402l14.513385-89.499213h-177.385826l14.513385 89.499213z\" fill=\"#FFFFFF\" p-id=\"17925\" />\n  <path d=\"M595.855118 759.533858l4.837795-31.445669h-177.385826l4.837795 31.445669z\" fill=\"#E6E9EE\" />\n  <path d=\"M815.974803 740.182677H208.025197c-12.900787 0-23.382677-10.48189-23.382677-23.382677V278.979528c0-12.900787 10.48189-23.382677 23.382677-23.382678h608.755905c12.900787 0 23.382677 10.48189 23.382678 23.382678v437.014173c0 12.900787-10.48189 24.188976-24.188977 24.188976z\" fill=\"#FFFFFF\" />\n  <path d=\"M227.376378 298.330709h569.247244v351.546456H227.376378z\" fill=\"#84DBFF\" />\n  <path d=\"M227.376378 298.330709h569.247244v8.062992H227.376378z\" fill=\"#54C0EB\" />\n  <path d=\"M635.36378 829.68189H388.63622v-12.094488c0-12.900787 10.48189-22.576378 22.576378-22.576378h200.768504c12.900787 0 22.576378 10.48189 22.576378 22.576378v12.094488h0.8063z\" fill=\"#E6E9EE\" />\n  <path d=\"M512 690.998425m-25.801575 0a25.801575 25.801575 0 1 0 51.60315 0 25.801575 25.801575 0 1 0-51.60315 0Z\" fill=\"#E6E9EE\" />\n  <path d=\"M681.322835 553.927559H362.834646c-6.450394 0-12.094488-5.644094-12.094489-12.094488v-166.097638c0-6.450394 5.644094-12.094488 12.094489-12.094488h318.488189c6.450394 0 12.094488 5.644094 12.094488 12.094488v166.097638c0 6.450394-5.644094 12.094488-12.094488 12.094488z\" fill=\"#E6E9EE\" />\n  <path d=\"M375.735433 385.411024h292.686614v13.707086H375.735433zM375.735433 418.469291h292.686614v13.707087H375.735433zM375.735433 452.333858h292.686614v13.707087H375.735433zM375.735433 485.392126h292.686614v13.707087H375.735433zM375.735433 518.450394h166.097638v13.707086h-166.097638z\" fill=\"#CED5E0\" p-id=\"17933\" />\n  <path d=\"M683.741732 610.368504l24.995276-24.995276-50.796851-51.603149 41.12126-24.188977-108.044094-17.738582 17.738583 108.044094 24.188976-41.12126z\" fill=\"#324A5E\" />\n</svg>\n))\n","import { useAppDispatch } from '@/reducers/hooks'\nimport { setToast } from '@/reducers/mask/slice'\nimport { IconBrandGithub } from '@tabler/icons'\nimport React, {memo, useCallback, useState} from 'react'\nimport { useRef } from 'react'\n\nexport default memo(() => {\n  const dispatch = useAppDispatch()\n  const [text, setText] = useState('')\n  const active = useRef(false)\n  const [_active, setActive] = useState(false)\n\n  const createRecognition = () => {\n    const grammar = '#JSGF V1.0; grammar colors; public <color> = aqua | azure | beige | bisque | black | blue | brown | chocolate | coral | crimson | cyan | fuchsia | ghostwhite | gold | goldenrod | gray | green | indigo | ivory | khaki | lavender | lime | linen | magenta | maroon | moccasin | navy | olive | orange | orchid | peru | pink | plum | purple | red | salmon | sienna | silver | snow | tan | teal | thistle | tomato | turquoise | violet | white | yellow ;'\n\n    const recognition = new webkitSpeechRecognition();\n    const speechRecognitionList = new webkitSpeechGrammarList();\n    speechRecognitionList.addFromString(grammar, 1);\n    recognition.grammars = speechRecognitionList;\n    //recognition.continuous = false;\n    // recognition.interimResults = false;\n    recognition.continuous = true;\n    recognition.interimResults = true;\n    // recognition.lang = 'en-US';\n    recognition.lang = 'cmn-Hans-CN';\n    recognition.maxAlternatives = 1;\n\n    recognition.onresult = function (event) {\n      console.log('result')\n      console.log(event);\n      let text = ''\n      for (const [{ transcript }] of event.results) {\n        text += transcript\n      }\n      // const color = event.results[0][0].transcript;\n      setText(text)\n    }\n\n    recognition.onstart = (e) => {\n      console.log(e, 'start')\n    }\n\n    recognition.onend = (e) => {\n      console.log(e, 'end')\n      active.current = false\n      setActive(false)\n    }\n\n    recognition.onspeechstart = (e) => {\n      console.log(e, 'speechstart')\n    }\n\n    recognition.onspeechend = (e) => {\n      console.log(e, 'speechend')\n    }\n\n    recognition.onsoundstart = (e) => {\n      console.log(e, 'soundstart')\n    }\n\n    recognition.onsoundend = (e) => {\n      console.log(e, 'soundend')\n    }\n\n    recognition.onaudiostart = (e) => {\n      console.log(e, 'audiostart')\n    }\n\n    recognition.onaudioend = (e) => {\n      console.log(e, 'audioend')\n    }\n    return recognition\n  }\n  const { current: recognition } = useRef(createRecognition())\n\n\n  const message = `在最新浏览器下使用`\n  const handleStart = useCallback(() => {\n    if (!('speechSynthesis' in globalThis)) {\n      return dispatch(setToast(message))\n    }\n\n    if (active.current) {\n      // 终止会卡死一会\n      console.log('toggleEnd')\n      active.current = false\n      setActive(false)\n      recognition.abort()\n\n      return\n    } else {\n      active.current = true\n      setActive(true)\n      console.log('start')\n      recognition.start();\n      console.log('Ready to receive a color command.');\n    }\n  }, [])\n  return (\n    <div className=\"absolute bottom-0 left-0\">\n      {\n      _active &&\n      <textarea value={text} readOnly></textarea>\n      }\n      <div>\n        {_active && `(真人讲话的效果较好，但是放歌给电脑听电脑听清，所以可以选择自己唱歌给电脑听，中途关闭会小卡)`}\n      </div>\n      <button\n        type=\"button\"\n        title={message}\n        onClick={handleStart}\n        className=\"border px-2 flex-center hover:bg-black hover:text-white\">\n        <IconBrandGithub />{_active ? '正在收集声音' : '隐藏功能'}\n      </button>\n    </div>\n  )\n})\n","import React, {\n  useState, memo, useEffect,\n} from 'react';\nimport { IconFileImport, IconMicrophone } from '@tabler/icons';\nimport './style.scss';\nimport { setToast } from '@/reducers/mask/slice';\nimport IconRejected from './Icon'\nimport Speech from './Speech'\nimport { useAppDispatch } from '@/reducers/hooks';\nimport { useCallback } from 'react';\nimport { useRef } from 'react';\n\ntype IProps = { handleCallback: () => void }\n\nconst Wait = memo<IProps>(({ handleCallback }) => {\n  const [time, setTime] = useState(15);\n  useEffect(() => {\n    const id = setTimeout(() => {\n      if (time > 1) {\n        setTime(time - 1);\n      } else {\n        handleCallback();\n      }\n    }, 1000);\n    return () => {\n      clearTimeout(id);\n    };\n  }, [time]);\n  return (\n    <div className=\"flex flex-col items-center\">\n      <div id=\"ai_work\" className=\"p-32 relative\">\n        <div className=\"flex-center rounded-full text-white bg-red-500 w-32 h-32\">\n          <IconMicrophone size={64} />\n        </div>\n      </div>\n      <div>\n        {\n          (time % 2 === 0 || time % 3 === 0 || time % 5 === 0)\n            ? '外部声源无法识别'\n            : '正在识别电脑中正在播放的音乐'\n        }\n        {`(${time}s)`}\n      </div>\n      <button\n        type=\"button\"\n        className=\"mt-4 text-base hover:bg-gray-100 rounded border h-10 w-28\"\n        onClick={handleCallback}\n      >\n        停止识别\n      </button>\n    </div>\n  );\n});\n\nconst Rejected = memo<IProps>(({ handleCallback }) => {\n  const dispatch = useAppDispatch();\n  return (\n    <div className=\"flex flex-col items-center\">\n      <IconRejected/>\n      <div className=\"text-base\">\n        未识别出音乐，仅支持当前电脑正在播放的音乐\n      </div>\n      <button\n        type=\"button\"\n        className=\"text-sm ui_theme_bg_color text-white py-2 px-6 rounded mt-4\"\n        onClick={handleCallback}\n      >\n        重新识别\n      </button>\n      <button\n        type=\"button\"\n        className=\"mt-3 text-blue-400 text-sm\"\n        onClick={() => dispatch(setToast('反馈成功，感谢您的反馈'))}\n      >\n        提交反馈\n      </button>\n    </div>\n  );\n});\n\nexport default memo(() => {\n  const dispatch = useAppDispatch();\n  const [listen, setListen] = useState(true);\n  /**\n   * 应该不会有成功吧？\n   * TODO\n   * speech\n   */\n  return (\n    <div className=\"domAi py-5 px-8 flex flex-col h-full relative\">\n      <Speech/>\n      <div className=\"domAi_header flex items-baseline\">\n        <div className=\"h1\">听歌识曲</div>\n        <button\n          type=\"button\"\n          className=\"ml-auto flex items-center\"\n          onClick={() => dispatch(setToast('创建【听歌识曲】图标至桌面成功'))}\n        >\n          <IconFileImport size={16} stroke={1} />\n          创建桌面快捷方式\n        </button>\n      </div>\n      <div className=\"flex-auto domAi_main flex items-center justify-center\">\n        {\n          listen\n            ? <Wait handleCallback={() => setListen(false)} />\n            : <Rejected handleCallback={() => setListen(true)} />\n        }\n      </div>\n    </div>\n  );\n});\n"],"names":["memo","viewBox","width","height","className","d","fill","dispatch","useAppDispatch","useState","text","setText","active","useRef","_active","setActive","recognition","webkitSpeechRecognition","speechRecognitionList","webkitSpeechGrammarList","addFromString","grammars","continuous","interimResults","lang","maxAlternatives","onresult","event","console","log","results","transcript","onstart","e","onend","current","onspeechstart","onspeechend","onsoundstart","onsoundend","onaudiostart","onaudioend","createRecognition","message","handleStart","useCallback","globalThis","abort","start","setToast","value","readOnly","type","title","onClick","IconBrandGithub","Wait","handleCallback","time","setTime","useEffect","id","setTimeout","clearTimeout","IconMicrophone","size","Rejected","Icon","listen","setListen","Speech","IconFileImport","stroke"],"sourceRoot":""}