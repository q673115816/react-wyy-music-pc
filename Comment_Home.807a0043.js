"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[247],{72418:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(48926),r=(0,l.Z)(n),u=a(63038),c=(0,l.Z)(u),o=a(87757),m=(0,l.Z)(o);a(68309),a(21249);var i=a(87363),s=(0,l.Z)(i),d=a(66711),f=a(16719),p=a(63233),v=a(33548),h=a(94592),E=(0,l.Z)(h),x=a(12720),y=(0,l.Z)(x),b=a(74849),g=(0,l.Z)(b),N=a(90443),k=(0,l.Z)(N),w={song:{apiDetail:function(e){var t=e.id;return(0,p.apiSongDetail)({ids:t})},apiComment:p.apiCommentMusic,header:function(e){var t,a=e.detail;return s.default.createElement("div",{className:"domComment_header"},s.default.createElement("div",{className:"domComment_infos flex "},s.default.createElement("div",{className:"cover h-20 rounded overflow-hidden relative"},s.default.createElement("img",{loading:"lazy",className:"h-full",src:a.al.picUrl,alt:""}),s.default.createElement("div",{className:"ico absolute inset-0 m-auto flex-center w-8 h-8 ui_themeColor rounded-full bg-white bg-opacity-90"},s.default.createElement(f.IconPlayerPlay,{size:16,className:"fill-current"}))),s.default.createElement("div",{className:"content px-6 py-2"},s.default.createElement("div",{className:"title text-lg"},a.name),s.default.createElement("div",{className:"info text-gray-500 mt-2 space-x-5"},s.default.createElement("span",null,"专辑：",s.default.createElement(d.Link,{className:"ui_text_gray_hover",to:"/playlist/album/".concat(a.al.id)},null===(t=a.al)||void 0===t?void 0:t.name)),s.default.createElement("span",null,"歌手：",a.ar.map((function(e,t){return s.default.createElement("span",{key:e.id},t>0&&" / ",s.default.createElement(d.Link,{className:"ui_text_gray_hover",to:"/artist/".concat(e.id)},e.name))})))))))}},mv:{apiDetail:p.apiMVDetail,apiComment:p.apiCommentMV,header:function(){return s.default.createElement("div",null)}},video:{apiDetail:p.apiVideoDetail,apiComment:p.apiCommentVideo,header:function(){return s.default.createElement("div",null)}}};exports.default=(0,i.memo)((function(e){var t=e.id,a=e.type;console.log("comment");var l=(0,i.useState)({}),n=(0,c.default)(l,2),u=n[0],o=n[1],d=(0,i.useState)({}),p=(0,c.default)(d,2),h=p[0],x=p[1],b=(0,i.useState)(""),N=(0,c.default)(b,2),C=N[0],_=N[1],Z=(0,i.useState)(!0),D=(0,c.default)(Z,2),M=D[0],S=D[1],z=(0,i.useState)(1),V=(0,c.default)(z,2),I=V[0],L=V[1],P=function(){var e=(0,r.default)(m.default.mark((function e(){var l,n;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w[a].apiDetail({id:t});case 3:l=e.sent,n=l.songs,o(n[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.default)(m.default.mark((function e(){var l;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w[a].apiComment({id:t,offset:20*(I-1),limit:v.commentLimit});case 3:l=e.sent,x(l),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,r.default)(m.default.mark((function e(){return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return e.next=4,j();case 4:S(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=(0,i.useMemo)((function(){return w[a].header}),[a]);return(0,i.useEffect)((function(){M?A():j()}),[I]),M?s.default.createElement("div",{className:"w-full h-full flex-center"},s.default.createElement(g.default,null)):s.default.createElement("div",{className:"domComment overflow-auto px-8 py-5 h-full"},s.default.createElement(H,{detail:u}),s.default.createElement("div",{className:"domComment_write mt-4"},s.default.createElement(E.default,{value:C,setValue:_,length:140}),s.default.createElement("div",{className:"domComment_write_actions flex mt-2.5"},s.default.createElement("div",{className:"flex space-x-2"},s.default.createElement("button",{type:"button",className:"text-gray-500 hover:text-black"},s.default.createElement(f.IconMoodSmile,{size:20,stroke:1.5})),s.default.createElement("button",{type:"button",className:"text-gray-500 hover:text-black"},s.default.createElement(f.IconAt,{size:20,stroke:1.5})),s.default.createElement("button",{type:"button",className:"text-gray-500 hover:text-black"},s.default.createElement(f.IconHash,{size:20,stroke:1.5}))),s.default.createElement("button",{type:"button",className:"ui_btn flex-center border px-4 h-8 text-sm hover:bg-gray-100 rounded-full ml-auto"},"评论"))),s.default.createElement("div",{className:"domComment_main mt-8"},s.default.createElement(y.default,{comments:h,more:t,type:a}),s.default.createElement(k.default,{total:Math.ceil(h.total/v.commentLimit),page:I,func:L})))}))}}]);