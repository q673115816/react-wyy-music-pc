"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[9631],{26083:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var r=a(48926),n=(0,l.Z)(r),c=a(63038),o=(0,l.Z)(c),d=a(87757),m=(0,l.Z)(d);a(68309),a(21249),a(92222),a(66992),a(41539),a(88674),a(78783),a(33948),a(47042);var u=a(87363),i=(0,l.Z)(u),s=a(66711),f=a(21624),v=a(78313),p=a(23792),E=(0,l.Z)(p),h=a(16719),x=a(63233),y=a(43335),g=(0,l.Z)(y),N=a(74849),b=(0,l.Z)(N);a(49851);var k=(0,u.memo)((function(e){var t=e.item,a=void 0===t?{}:t;return i.default.createElement("div",{className:"item"},i.default.createElement("div",{className:"cover relative rounded border overflow-hidden"},i.default.createElement(s.Link,{to:"/playlist/dj/".concat(a.id),className:""},i.default.createElement("img",{loading:"lazy",className:"ui_aspect-ratio-1/1",src:a.picUrl,alt:""}),i.default.createElement("div",{className:"absolute bottom-0 left-0 right-0 h-1/4 ui_linear_mask_bottom"}),i.default.createElement("div",{className:"absolute left-0 bottom-0 max-w-full px-2 py-1 text-white truncate"},a.name))),i.default.createElement("div",{className:"footer mt-2 text-sm"},i.default.createElement(s.Link,{to:"/playlist/dj/".concat(a.id),className:"text-gray-600 hover:text-black"},a.rcmdtext)))})),_=function(e){var t=e.onClick;return i.default.createElement("button",{type:"button",onClick:t,className:"absolute right-full inset-y-0 z-10 w-8 h-8 flex-center text-gray-500 m-auto"},i.default.createElement(h.IconChevronLeft,{size:30,stroke:1}))},j=function(e){var t=e.onClick;return i.default.createElement("button",{type:"button",onClick:t,className:"absolute left-full inset-y-0 z-10 w-8 h-8 flex-center text-gray-500 m-auto"},i.default.createElement(h.IconChevronRight,{size:30,stroke:1}))},w=function(e){var t=e.catelist,a=void 0===t?[]:t,l={speed:500,infinite:!1,slidesToShow:8,slidesToScroll:8,draggable:!1,prevArrow:i.default.createElement(_,null),nextArrow:i.default.createElement(j,null)};return i.default.createElement("div",{className:"domHome_dj_nav px-10 mt-9"},i.default.createElement(E.default,l,i.default.createElement("div",{className:"item"},i.default.createElement(s.Link,{to:"/home/dj/toplist"},i.default.createElement("div",{className:"inner"},i.default.createElement("div",{className:"btn flex-center ui_themeColor"},i.default.createElement(h.IconChartBar,{stroke:1})),i.default.createElement("div",{className:"name text-gray-500 mt-2"},"排行榜")))),a.map((function(e){return i.default.createElement("div",{className:"item",key:e.id},i.default.createElement(s.Link,{to:"/dj-category/".concat(e.name,"/").concat(e.id)},i.default.createElement("div",{className:"inner"},i.default.createElement("div",{className:"btn flex-center ui_themeColor"},i.default.createElement("img",{className:"w-8 h-8",src:e.pic56x56Url,alt:""})),i.default.createElement("div",{className:"name text-gray-500 mt-2"},e.name))))}))))},R=["创作翻唱","声之剧场","音乐故事","情感调频","声音恋人"];exports.default=(0,u.memo)((function(){var e=(0,f.useDispatch)(),t=(0,u.useState)(!0),a=(0,o.default)(t,2),l=a[0],r=a[1],c=(0,f.useSelector)((function(e){return e.home.dj})),d=c.DjBanner,p=(c.category,c.catelist),E=c.DjPersonalizeRecommend,h=c.result,y=function(){var t=(0,n.default)(m.default.mark((function t(){var a,l,n,c,d,u,i,s,f,p,E,h;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([(0,x.apiDjBanner)(),(0,x.apiDjCategoryRecommend)(),(0,x.apiDjCatelist)(),(0,x.apiDjPersonalizeRecommend)(),(0,x.apiDjRadioHot)({cateId:2001,limit:6}),(0,x.apiDjRadioHot)({cateId:10001,limit:6}),(0,x.apiDjRadioHot)({cateId:2,limit:6}),(0,x.apiDjRadioHot)({cateId:3,limit:6}),(0,x.apiDjRadioHot)({cateId:3001,limit:6})]);case 3:a=t.sent,l=(0,o.default)(a,9),n=l[0],c=l[1],d=l[2],u=void 0===d?[]:d,i=l[3],s=l[4],f=l[5],p=l[6],E=l[7],h=l[8],e((0,v.setHomeDj)({DjBanner:n.data,category:c.data,catelist:u.categories,DjPersonalizeRecommend:i.data,result:{创作翻唱:s.djRadios,声之剧场:f.djRadios,音乐故事:p.djRadios,情感调频:E.djRadios,声音恋人:h.djRadios}})),r(!1),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(){return t.apply(this,arguments)}}();return(0,u.useEffect)((function(){y()}),[]),l?i.default.createElement("div",{className:"flex-center w-full h-full"},i.default.createElement(b.default,null)):i.default.createElement("div",{className:"domHome_content px-8 overflow-auto max-h-full flex-auto"},i.default.createElement("div",{className:"domHome_dj pb-16 ui_w1100"},i.default.createElement("div",{className:"domHome_dj_banner"},d.length>0&&i.default.createElement(g.default,{list:d,coverSrc:"pic"})),i.default.createElement("div",{className:"domHome_item"},i.default.createElement(w,{catelist:p})),i.default.createElement("div",{className:"domHome_item mt-8"},i.default.createElement("div",{className:"domHome_linktitle h1"},"电台个性推荐"),i.default.createElement("div",{className:"mt-4 grid grid-cols-5 gap-5"},E.slice(0,5).map((function(e){return i.default.createElement(k,{item:e,key:e.id})})))),R.map((function(e){return i.default.createElement("div",{key:e,className:"domHome_item mt-8"},i.default.createElement(s.Link,{className:"domHome_linktitle h1",to:"/dj-category/".concat(e)},e,">"),i.default.createElement("div",{className:"mt-4 grid grid-cols-5 gap-5"},h[e].slice(0,5).map((function(e){return i.default.createElement(k,{item:e,key:e.id})}))))}))))}))},84357:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var r=a(48926),n=(0,l.Z)(r),c=a(63038),o=(0,l.Z)(c),d=a(87757),m=(0,l.Z)(d);a(68309),a(21249);var u=a(87363),i=(0,l.Z)(u),s=a(61533),f=a(27484),v=(0,l.Z)(f),p=a(16719),E=a(94184),h=(0,l.Z)(E),x=a(66711),y=a(63233);a(61292);var g=[["节目榜","/home/dj/toplist"],["新晋电台榜","/home/dj/toplist/now"],["热门电台榜","/home/dj/toplist/hot"]],N={default:{map:function(e){var t=e.lastRank,a=e.rank,l=e.score,r=e.program,n=r.id,c=r.name,o=r.coverUrl,d=r.radio;return{id:n,name:c,lastRank:t,rank:a,coverUrl:o,score:l,userName:d.name,userId:d.id,category:d.category}}},other:{map:function(e){var t=e.id,a=e.name,l=e.lastRank,r=e.rank,n=e.picUrl,c=e.score,o=e.dj;return{id:t,name:a,lastRank:l,rank:r,coverUrl:n,score:c,userName:o.nickname,userId:o.userId,category:e.category}}}},b=(0,u.memo)((function(e){var t=e.lastRank,a=e.rank;switch(!0){case-1===t:return i.default.createElement("div",{className:"text-green-500"},"new");case t-a<0:return i.default.createElement("div",{className:"flex-center text-gray-500"},i.default.createElement(p.IconArrowDown,{size:10,className:"text-blue-500"}),-t+a);case t-a==0:return i.default.createElement("div",{className:"flex-center text-gray-500"},i.default.createElement(p.IconMinus,{size:10}),"0");case t-a>0:return i.default.createElement("div",{className:"flex-center text-gray-500"},i.default.createElement(p.IconArrowUp,{size:10,className:"text-red-500"}),t-a);default:return i.default.createElement("div",null)}})),k=(0,u.memo)((function(e){var t=e.updateTime;return i.default.createElement("div",{className:"domHome_dj_toplist_header relative py-7"},i.default.createElement("div",{className:"domHome_dj_toplist_nav m-auto w-min flex rounded-full border",style:{borderColor:"#bbb"}},g.map((function(e){var t=(0,o.default)(e,2),a=t[0],l=t[1];return i.default.createElement(x.NavLink,{key:a,to:l,exact:!0,activeStyle:{backgroundColor:"#bbb"},activeClassName:"text-white",className:"domHome_dj_toplist_nav_link flex-center w-28 h-8 rounded-full text-center hover:bg-gray-100"},a)}))),i.default.createElement("div",{className:"absolute flex-center top-1/2 transform -translate-y-1/2 right-8 text-gray-400"},"最近更新：",t&&(0,v.default)(t).format("MM月DD日"),i.default.createElement("div",{className:"relative ui_group"},i.default.createElement("span",{className:"block flex-center  border rounded-full w-4 h-4 flex-none"},"?"),i.default.createElement("div",{className:"absolute text-gray-500 top-6 right-0 shadow rounded p-4 w-48 border hidden ui_group-hover:block bg-white"},"选取云音乐中7天内发布的热度最高的节目，热度由节目播放、赞、分享数量总和计算"))))})),_=(0,u.memo)((function(e){var t=e.item,a=e.index,l=e.maxScore;return i.default.createElement("div",{tabIndex:"2",className:(0,h.default)("item h-20 flex items-center hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",{"bg-gray-50":a%2==0}),key:t.id},i.default.createElement("div",{className:"index flex flex-col items-center justify-center"},i.default.createElement("div",{className:(0,h.default)("font-bold text-sm",{"text-red-500":a<3,"text-gray-400":a>2})},a+1),i.default.createElement("div",null,i.default.createElement(b,{lastRank:t.lastRank,rank:t.rank}))),i.default.createElement("button",{type:"button",className:"cover relative"},i.default.createElement("img",{src:"".concat(t.coverUrl,"?param=60y60"),alt:""}),i.default.createElement("i",{className:"ico ui_themeColor absolute inset-0 flex-center rounded-full w-6 h-6 m-auto bg-white bg-opacity-90"},i.default.createElement(p.IconPlayerPlay,{size:16,className:"fill-current"}))),i.default.createElement("div",{className:"name flex-auto truncate"},t.name),i.default.createElement("div",{className:"radio flex-auto truncate"},i.default.createElement(x.Link,{className:"ui_text_gray_hover",to:"/playlist/dj/".concat(t.userId)},t.userName)),i.default.createElement("div",{className:"category"},i.default.createElement(x.Link,{to:"/",className:"ui_text_gray_hover border border-current"},t.category)),i.default.createElement("div",{className:"score"},i.default.createElement("div",{className:"rounded bg-gray-300 overflow-hidden h-2"},i.default.createElement("div",{className:"h-full bg-gray-500 w-0",style:{width:"".concat(t.score/l*100,"%")}}))))}));exports.default=(0,u.memo)((function(e){var t=e.type,a=(0,u.useState)([]),l=(0,o.default)(a,2),r=l[0],c=l[1],d=(0,u.useState)(),f=(0,o.default)(d,2),v=f[0],p=f[1],E=(0,u.useMemo)((function(){return t?"other":"default"}),[t]),h=function(){var e=(0,n.default)(m.default.mark((function e(){var a,l,r;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,(0,y.apiDjToplist)({type:t});case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,(0,y.apiDjProgramToplist)();case 9:e.t0=e.sent;case 10:a=e.t0,l=a.toplist,r=a.updateTime,(0,s.unstable_batchedUpdates)((function(){c(l.map(N[E].map)),p(r)})),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(0),console.log(e.t1);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),x=(0,u.useMemo)((function(){var e,t;return null!==(e=null===(t=r[0])||void 0===t?void 0:t.score)&&void 0!==e?e:0}),[r]);return(0,u.useEffect)((function(){h()}),[t]),i.default.createElement("div",{className:"domHome_dj_toplist h-full overflow-auto"},i.default.createElement(k,{updateTime:v}),i.default.createElement("div",{className:"domHome_dj_toplist_main"},i.default.createElement("div",{className:"list"},r.map((function(e,t){return i.default.createElement(_,{item:e,index:t,key:e.id,maxScore:x})})))))}))},93230:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var r=a(87363),n=(0,l.Z)(r),c=a(66711),o=a(11603),d=(0,l.Z)(o),m=a(26083),u=(0,l.Z)(m),i=a(84357),s=(0,l.Z)(i);exports.default=(0,r.memo)((function(){return n.default.createElement(c.Switch,null,n.default.createElement(c.Route,{path:"/home/dj/toplist/:type?"},(0,d.default)(s.default)),n.default.createElement(c.Route,{path:"/home/dj"},n.default.createElement(u.default,null)))}))},61292:(e,t,a)=>{a.r(t)},49851:(e,t,a)=>{a.r(t)}}]);