{"version":3,"file":"js/History.js?version=dac6d27e","mappings":"2SAMAA,IAAAA,OAAaC,KACbD,IAAAA,OAAa,SAWb,IAAME,EAAW,SAAQ,G,QAALC,QAAAA,OAAO,IAAG,KAAE,EAC9B,OACA,kBADCC,MAAG,CACFC,UAAU,OACVC,MAAO,CAAE,qBAAsB,4B,kBAE9BF,MAAG,CAACC,UAAU,Q,kBACZD,MAAG,CAACC,UAAU,S,kBACZD,MAAG,CAACC,UAAU,wC,kBACZD,MAAG,CAACC,UAAU,U,kBACdD,MAAG,CAACC,UAAU,2BAA0B,QAAI,yBACxCA,UAAU,6BAA4B,MAAE,wBACzC,CAACA,UAAU,+BAA8B,UAAI,yBAGhDA,UAAU,SACZF,EAAQI,KAAI,SAACC,EAAMC,GAClB,OAAM,kBAALC,EAAAA,EAAa,CACZC,OAAQ,CACN,CAAC,KAAU,KAAU,SACH,CAAjB,QAAmB,KAAU,OAAgB,OAAgB,OAEhEC,KAAK,OACLJ,KAAMA,EACNK,IAAKL,EAAKM,GACVC,SAAS,IACTV,UAAWW,GAAAA,CACT,gGACA,CAAE,aAAcP,EAAQ,GAAM,K,sDAI7BL,MAAG,CAACC,UAAU,yB,kBACZY,EAAAA,EAAO,CAACR,MAAOA,K,kBAEjBS,EAAAA,EAAO,CAACV,KAAMA,EAAMH,UAAU,S,kBAC9Bc,EAAAA,EAAS,CAACC,QAASZ,EAAKa,GAAIhB,UAAU,S,kBACtCD,MAAG,CAACC,UAAU,wCACZL,GAAAA,CAAMQ,EAAKc,UAAUC,oBAUtC,SAAeC,EAAAA,EAAAA,OAAK,YAClBC,EAAAA,EAAAA,KACA,IAAMC,GAAWC,EAAAA,EAAAA,KACTxB,GAAYyB,EAAAA,EAAAA,IAAe,SAAQ,GAAOC,OAAP,EAALA,SAA9B1B,QACF2B,GAAkBC,EAAAA,EAAAA,cAAY,WAClC,GAAuB,IAAnB5B,EAAQ6B,OAAc,OAAO,EACjCN,GAASO,EAAAA,EAAAA,2BACR,CAAC9B,IACJ,OAAM,kBACHC,MAAG,CAACC,UAAU,6C,kBACZD,MAAG,CAACC,UAAU,oB,kBACZD,MAAG,CAACC,UAAU,0B,kBACZD,MAAG,CAACC,UAAU,MAAK,QAAI,MAEhB,yBAAHA,UAAU,iBAAkB,IAAC,OAAmB,EAAT2B,OAAQ,MAAI,2BACjD,CACLE,QAASJ,EACTlB,KAAK,SACLP,UAAWW,GAAAA,CACT,kBACmB,IAAnBb,EAAQ6B,OAAe,gBAAkB,YAE5C,SAED,sBAEDG,CAAaC,SAAUjC,KAEzBA,EAAQ6B,OAAS,EAAC,kBAChB9B,EAAQ,CAACC,QAASA,I,kBAElBC,MAAG,CAACC,UAAU,mCAAkC,iBCrFzD,EARe,WACb,OAAM,kBACHgC,EAAAA,OAAM,uBACJC,EAAAA,MAAK,CAAC7B,OAAAA,EAAM8B,QAAO,kBAAGC,EAAO","sources":["webpack://wyy/./src/features/History/History.tsx","webpack://wyy/./src/features/History/Router.tsx"],"sourcesContent":["import React, { memo, useCallback } from \"react\";\nimport classNames from \"classnames\";\n\nimport dayjs from \"dayjs\";\nimport \"dayjs/locale/zh-cn\";\nimport relativeTime from \"dayjs/plugin/relativeTime\";\ndayjs.extend(relativeTime);\ndayjs.locale(\"zh-cn\");\n\nimport useLoginStatus from \"@/hooks/useLoginStatus\";\nimport DomRank from \"@/components/Table/Rank\";\nimport DomGroupPlay from \"@/components/GroupPlay\";\nimport DomName from \"@/components/Table/Name\";\nimport DomArtist from \"@/components/Table/Artists\";\nimport DomMenuCreate from \"@/components/MenuCreate/MenuCreate\";\nimport { setAudioHistoryClear } from \"@/modules/reducers/audio/slice\";\nimport { useAppDispatch, useAppSelector } from \"@/modules/hooks\";\n\nconst DomTable = ({ history = [] }) => (\n  <div\n    className=\"pb-8\"\n    style={{ \"--ui_grid_template\": \"36px / 54px 45% 5fr 3fr\" }}\n  >\n    <div className=\"list\">\n      <div className=\"thead\">\n        <div className=\"item grid leading-8 ui_grid_template\">\n          <div className=\"index\" />\n          <div className=\"name text-gray-500 px-2\">音乐标题</div>\n          <div className=\"artist text-gray-500 px-2\">歌手</div>\n          <div className=\"duration text-gray-500 px-2\">播放时间</div>\n        </div>\n      </div>\n      <div className=\"tbody\">\n        {history.map((item, index) => (\n          <DomMenuCreate\n            schema={[\n              [\"评论\", \"播放\", \"下一首播放\"],\n              [\"收藏到歌单\", \"分享\", \"复制链接\", \"不感兴趣\", \"下载\"],\n            ]}\n            type=\"song\"\n            item={item}\n            key={item.id}\n            tabIndex=\"2\"\n            className={classNames(\n              \"grid h-9 items-center hover:bg-gray-100 focus:bg-gray-200 focus:outline-none ui_grid_template\",\n              { \"bg-gray-50\": index % 2 === 0 }\n            )}\n          >\n            <>\n              <div className=\"index pr-3 text-right\">\n                <DomRank index={index} />\n              </div>\n              <DomName item={item} className=\"px-2\" />\n              <DomArtist artists={item.ar} className=\"px-2\" />\n              <div className=\"duration text-gray-400 truncate px-2\">\n                {dayjs(item.lastTime).fromNow()}\n              </div>\n            </>\n          </DomMenuCreate>\n        ))}\n      </div>\n    </div>\n  </div>\n);\n\nexport default memo(() => {\n  useLoginStatus();\n  const dispatch = useAppDispatch();\n  const { history } = useAppSelector(({ audio }) => audio);\n  const memoHandleClear = useCallback(() => {\n    if (history.length === 0) return false;\n    dispatch(setAudioHistoryClear());\n  }, [history]);\n  return (\n    <div className=\"w-full overflow-auto max-h-full flex-auto\">\n      <div className=\"px-8 pb-2.5 pt-6\">\n        <div className=\"flex items-center pb-8\">\n          <div className=\"h1\">最近播放</div>\n          &nbsp; &nbsp;\n          <div className=\"text-gray-400\">{`共${history.length}首`}</div>\n          <button\n            onClick={memoHandleClear}\n            type=\"button\"\n            className={classNames(\n              \"ml-auto text-sm\",\n              history.length === 0 ? \"text-gray-300\" : \"ui_link\"\n            )}\n          >\n            清空列表\n          </button>\n        </div>\n        <DomGroupPlay playlist={history} />\n      </div>\n      {history.length > 0 ? (\n        <DomTable history={history} />\n      ) : (\n        <div className=\"text-center pt-40 text-gray-400\">\n          你还没播放任何音乐\n        </div>\n      )}\n    </div>\n  );\n});\n","import React from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport History from \"./History\";\nconst Router = () => {\n  return (\n    <Routes>\n      <Route index element={<History />} />\n    </Routes>\n  );\n};\n\nexport default Router;\n"],"names":["dayjs","relativeTime","DomTable","history","div","className","style","map","item","index","DomMenuCreate","schema","type","key","id","tabIndex","classNames","DomRank","DomName","DomArtist","artists","ar","lastTime","fromNow","memo","useLoginStatus","dispatch","useAppDispatch","useAppSelector","audio","memoHandleClear","useCallback","length","setAudioHistoryClear","onClick","DomGroupPlay","playlist","Routes","Route","element","History"],"sourceRoot":""}