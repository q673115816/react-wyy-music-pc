{"version":3,"file":"js/Look.js?version=48f0fb0e","mappings":"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","sources":["webpack://wyy/./src/features/Look/socket.ts","webpack://wyy/./src/features/Look/Content.ts","webpack://wyy/./src/features/Look/Look.tsx","webpack://wyy/./src/features/Look/Home/List.tsx","webpack://wyy/./src/features/Look/Home/Home.tsx","webpack://wyy/./src/features/Look/config.ts","webpack://wyy/./src/features/Look/RTC.ts","webpack://wyy/./src/features/Look/Live/Live.tsx","webpack://wyy/./src/features/Look/Live/useGetInput.tsx","webpack://wyy/./src/features/Look/Room/Room.tsx","webpack://wyy/./src/features/Look/Router.tsx"],"sourcesContent":["import io from \"socket.io-client\";\n\nconst socket = io(LIVE_URL, {\n  autoConnect: false,\n});\n\nsocket.on(\"create-success\", (data) => {\n  console.log(data);\n});\n\nsocket.on(\"create-error\", (data) => {\n  console.log(data);\n});\n\nsocket.on(\"join-success\", (data) => {\n  console.log(data);\n});\n\nsocket.on(\"disconnect-success\", (data) => {\n  console.log(data);\n});\n\nsocket.on(\"list-success\", (data) => {\n  console.log(data);\n});\n\nexport default socket;\n","import socket from \"./socket\";\nimport { Socket } from \"socket.io-client\";\nexport const SOCKET_CONNECT = \"SOCKET_CONNECT\";\nexport const SOCKET_DISCONNECT = \"SOCKET_DISCONNECT\";\nexport const SOCKET_DESKTOP_START = \"SOCKET_DESKTOP_START\";\nexport const SOCKET_DESKTOP_END = \"SOCKET_DESKTOP_END\";\nexport const SOCKET_USER_START = \"SOCKET_USER_START\";\nexport const SOCKET_USER_END = \"SOCKET_USER_END\";\nexport const SOCKET_PUSH_START = \"SOCKET_PUSH_START\";\nexport const SOCKET_PUSH_END = \"SOCKET_PUSH_END\";\nexport const SOCKET_JOIN_START = \"SOCKET_JOIN_START\";\nexport const SOCKET_JOIN_END = \"SOCKET_JOIN_END\";\n\nexport interface LookState {\n  socket: Socket;\n}\n\nexport const LookReducer = (draft: LookState, { type, payload }: any) => {\n  switch (type) {\n    case SOCKET_CONNECT:\n      socket.connect();\n      return;\n    case SOCKET_DISCONNECT:\n      socket.disconnect();\n      return;\n    case SOCKET_DESKTOP_START:\n      return;\n    case SOCKET_DESKTOP_END:\n      return;\n    case SOCKET_USER_START:\n      return;\n    case SOCKET_USER_END:\n      return;\n    case SOCKET_PUSH_START:\n      return;\n    case SOCKET_PUSH_END:\n      return;\n    case SOCKET_JOIN_START:\n      return;\n    default:\n      return draft;\n  }\n};\n\nexport const LookInitialState: LookState = {\n  socket,\n};\n","import React, { memo, useEffect, createContext } from \"react\";\nimport { useImmerReducer } from \"use-immer\";\nimport { Routes, Route, Outlet } from \"react-router-dom\";\nimport adapter from \"webrtc-adapter\";\nimport { useAppDispatch } from \"@/reducers/hooks\";\nimport {\n  LookInitialState,\n  LookReducer,\n  SOCKET_CONNECT,\n  SOCKET_DISCONNECT,\n} from \"./Content\";\nimport getIP from \"./getIP\";\n\nexport const LookContent = createContext<any>(null);\n\nexport default memo(function Base() {\n  const dispatch = useAppDispatch();\n  const [lookReducer, lookDispatch] = useImmerReducer(\n    LookReducer,\n    LookInitialState\n  );\n  useEffect(() => {\n    lookDispatch({ type: SOCKET_CONNECT });\n    return () => {\n      lookDispatch({ type: SOCKET_DISCONNECT });\n    };\n  }, []);\n  return (\n    <LookContent.Provider value={{ lookReducer, lookDispatch }}>\n      <Outlet />\n    </LookContent.Provider>\n  );\n});\n","import React, { FC, memo } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { iHome } from \"./types\";\n\nconst Home: FC<iHome> = ({ list }) => {\n  return (\n    <div className={`grid grid-cols-3 gap-5`}>\n      {list.map(({ uid = \"\", title = \"\", banner = \"\", user = \"\" }) => (\n        <div key={uid}>\n          <Link to={uid}>\n            <img\n              className={`ui_aspect-ratio-16/9 cursor-pointer`}\n              loading={`lazy`}\n              src={banner}\n              alt=\"\"\n            />\n          </Link>\n          <Link to={uid} className={`cursor-pointer`}>\n            {title}\n          </Link>\n          <div>\n            <Link to={`/user/${uid}`}>{user}</Link>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default memo(Home);\n","import React, {\n  useState,\n  memo,\n  useRef,\n  useEffect,\n  useCallback,\n  MouseEventHandler,\n  useContext,\n} from \"react\";\nimport useInfinite from \"@/hooks/useInfinite\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useQuery } from \"react-query\";\nimport Loading from \"@/components/Loading\";\nimport Rea from \"react-error-boundary\";\nimport socket from \"../socket\";\nimport { iList } from \"./types\";\nimport LiveList from \"./List\";\nimport { LookContent } from \"../Look\";\n\nexport default memo(function Home() {\n  const [size, setSize] = useState(20);\n  const {\n    lookReducer: { socket },\n    lookDispatch,\n  } = useContext(LookContent);\n\n  const DomScroll = useRef(null);\n  const DomObserver = useRef(null);\n  const [list, setList] = useState<iList>([]);\n  // useInfinite(() => { setSize((prev) => prev + 20); }, DomScroll, DomObserver);\n  const { data = [], error, isLoading, isSuccess, status } = useQuery(\n    \"look\",\n    async () => {\n      const { data } = await fetch(`${LIVE_URL}/list`).then((res) => res.json())\n      return data;\n    }\n  );\n\n  return (\n    <div className=\"domLook overflow-auto max-h-full flex-auto\" ref={DomScroll}>\n      <div className=\"domLook_header ui_header\">\n        <span className=\"title h1\">LOOK直播</span>\n        <span className=\"text-gray-400 slogan ml-2\">在这里，看见音乐</span>\n        <Link\n          to={`my`}\n          className=\"ml-2 py-1 px-2 rounded bg-red-500 text-white\"\n        >\n          我的直播\n        </Link>\n        <a href=\"https://look.163.com/hot\" className=\"text-gray-400 ml-auto\">\n          更多 &gt;\n        </a>\n      </div>\n      <div className=\"px-8\">\n        <LiveList list={data} />\n        <div ref={DomObserver} />\n      </div>\n    </div>\n  );\n});\n","export const configuration: RTCConfiguration = {\n  iceServers: [\n    {\n      urls: [\n        \"stun:stun.xten.com\",\n        \"stun:stun.services.mozilla.com\",\n        \"stun:stun1.l.google.com:19302\",\n        \"stun:stun2.l.google.com:19302\",\n      ],\n    },\n  ],\n}\n","import { configuration } from \"./config\";\n\nexport default class {\n  pc: RTCPeerConnection;\n  remoteStreams: MediaStream[] = [];\n  description: RTCLocalSessionDescriptionInit | null = null;\n  constructor() {\n    this.pc = new RTCPeerConnection(configuration);\n    this.init();\n  }\n\n  init() {\n    this.pc.onicecandidate = (e) => {\n      console.log(\"pc onicecandidate\");\n      const peerConnection = e.target;\n      const iceCandidate = e.candidate;\n      if (iceCandidate) {\n        const newIceCandidate = new RTCIceCandidate(iceCandidate);\n        // const otherPeer;\n      }\n    };\n    this.pc.onconnectionstatechange = (e) => {\n      console.log(\"pc onconnectionstatechange\");\n      switch (this.pc.connectionState) {\n        case \"connected\":\n          // The connection has become fully connected\n          break;\n        case \"disconnected\":\n        case \"failed\":\n          // One or more transports has terminated unexpectedly or in an error\n          break;\n        case \"closed\":\n          // The connection has been closed\n          break;\n      }\n    };\n    this.pc.ondatachannel = function (ev) {\n      console.log(\"Data channel is created!\");\n      ev.channel.onopen = function () {\n        console.log(\"Data channel is open and ready to be used.\");\n      };\n    };\n    this.pc.onicecandidateerror = function (event) {\n      console.log(\"pc onicecandidateerror\");\n      if (event.errorCode >= 300 && event.errorCode <= 699) {\n        // STUN errors are in the range 300-699. See RFC 5389, section 15.6\n        // for a list of codes. TURN adds a few more error codes; see\n        // RFC 5766, section 15 for details.\n      } else if (event.errorCode >= 700 && event.errorCode <= 799) {\n        // Server could not be reached; a specific error number is\n        // provided but these are not yet specified.\n      }\n    };\n\n    this.pc.oniceconnectionstatechange = (event) => {\n      console.log(\"pc oniceconnectionstatechange\");\n      if (\n        this.pc.iceConnectionState === \"failed\" ||\n        this.pc.iceConnectionState === \"disconnected\" ||\n        this.pc.iceConnectionState === \"closed\"\n      ) {\n        // Handle the failure\n      }\n    };\n\n    this.pc.onicegatheringstatechange = () => {\n      console.log(\"pc onicegatheringstatechange\");\n      let label = \"Unknown\";\n\n      switch (this.pc.iceGatheringState) {\n        case \"new\":\n        case \"complete\":\n          label = \"Idle\";\n          break;\n        case \"gathering\":\n          label = \"Determining route\";\n          break;\n      }\n      console.log(label);\n    };\n\n    this.pc.onnegotiationneeded = () => {\n      console.log(\"pc onnegotiationneeded\");\n      this.pc\n        .createOffer()\n        .then((offer) => {\n          console.log(\"setLocalDescription\");\n          return this.pc.setLocalDescription(offer);\n        })\n        .then(function () {\n          // Send the offer to the remote peer through the signaling server\n        })\n        .catch((error) => console.log(error));\n    };\n\n    this.pc.onsignalingstatechange = (event) => {\n      console.log(\"pc onsignalingstatechange\");\n      if (this.pc.signalingState === \"have-local-pranswer\") {\n        // setLocalDescription() has been called with an answer\n      }\n    };\n\n    this.pc.ontrack = (e) => {\n      this.remoteStreams = e.streams.slice();\n    };\n  }\n\n  addtrack({\n    track,\n    stream,\n  }: {\n    track: MediaStreamTrack;\n    stream: MediaStream;\n  }) {\n    this.pc.addTrack(track, stream);\n  }\n\n  start() {\n    this.pc\n      .createOffer()\n      .then((description) => {\n        this.description = description;\n        console.log(description);\n        return this.pc.setLocalDescription(description);\n      })\n      .then(() => {\n        console.log(this.pc);\n      })\n      .catch((error) => {\n        console.log(\"createAnswer error \\n\", error);\n      });\n  }\n\n  got(description: RTCSessionDescriptionInit) {\n    this.pc.setRemoteDescription(description).then(() => {});\n  }\n}\n","import React, {\n  FC,\n  memo,\n  MouseEventHandler,\n  ReactEventHandler,\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport classnames from \"classnames\";\nimport useLoginStatus, { handleLoginStatus } from \"@/hooks/useLoginStatus\";\nimport { set, get } from \"lodash\";\nimport { LookContent } from \"@/features/Look/Look\";\nimport {\n  SOCKET_DESKTOP_END,\n  SOCKET_PUSH_END,\n  SOCKET_PUSH_START,\n  SOCKET_USER_END,\n  SOCKET_USER_START,\n} from \"../Content\";\nimport { configuration } from \"../config\";\nimport useGetInput, { iUseGetInput } from \"@/features/Look/Live/useGetInput\";\nimport { Label } from \"react-query/types/devtools/Explorer\";\nimport { UUIDGeneratorBrowser } from \"@/common/utils\";\nimport { useImmer } from \"use-immer\";\nimport RTC from \"../RTC\";\n\n// 以下代码是从网上找的\n//=========================================================================================\n//如果返回的是false说明当前操作系统是手机端，如果返回的是true则说明当前的操作系统是电脑端\n\nfunction IsPC() {\n  const userAgentInfo = navigator.userAgent;\n  const Agents = [\n    \"Android\",\n    \"iPhone\",\n    \"SymbianOS\",\n    \"Windows Phone\",\n    \"iPad\",\n    \"iPod\",\n  ];\n  let flag = true;\n\n  for (let v = 0; v < Agents.length; v++) {\n    if (userAgentInfo.indexOf(Agents[v]) > 0) {\n      flag = false;\n      break;\n    }\n  }\n\n  return flag;\n}\n\n//如果返回true 则说明是Android  false是ios\nfunction is_android() {\n  const u = navigator.userAgent,\n    app = navigator.appVersion;\n  const isAndroid = u.indexOf(\"Android\") > -1 || u.indexOf(\"Linux\") > -1; //g\n  const isIOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端\n  if (isAndroid) {\n    //这个是安卓操作系统\n    return true;\n  }\n\n  if (isIOS) {\n    //这个是ios操作系统\n    return false;\n  }\n}\n\ninterface iButtonProps {\n  onClick: MouseEventHandler;\n  status?: boolean;\n}\n\nconst Button: FC<iButtonProps> = ({ onClick, children, status = false }) => {\n  return (\n    <button\n      type={\"button\"}\n      className={classnames(\n        `text-white rounded px-2 h-8 flex-center`,\n        status ? \"bg-red-500\" : \"bg-blue-500\"\n      )}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n};\n\ninterface iCheck<T> {\n  name: T;\n  checked: boolean;\n  onChange: (key: T) => void;\n}\n\nconst Check: FC<iCheck<initialSourceKey>> = ({\n  name,\n  children,\n  checked,\n  onChange,\n}) => {\n  return (\n    <label htmlFor={name}>\n      <input\n        type=\"checkbox\"\n        id={name}\n        name={name}\n        checked={checked}\n        onChange={() => onChange(name)}\n      />\n      {children}\n    </label>\n  );\n};\n\ninterface initialSource {\n  desktop: boolean;\n  audio: boolean;\n  video: boolean;\n  face: boolean;\n}\n\ntype initialSourceKey = keyof initialSource;\n\nconst sourceList: { key: initialSourceKey; name: string }[] = [\n  {\n    key: \"desktop\",\n    name: \"桌面\",\n  },\n  {\n    key: \"video\",\n    name: \"摄像头-画面\",\n  },\n  {\n    key: \"audio\",\n    name: \"摄像头-声音\",\n  },\n  {\n    key: \"face\",\n    name: \"摄像头-人脸识别\",\n  },\n];\n\nconst inputList: { key: keyof iUseGetInput; name: string }[] = [\n  { key: \"audioinput\", name: \"音频输入\" },\n  { key: \"videoinput\", name: \"视频输入\" },\n];\n\n/*\n * TODO\n *  1.信令系统\n *  2.摄像头叠加桌面，如基本直播\n * */\nexport default memo(function Live() {\n  const {\n    lookReducer: { socket, pc },\n    lookDispatch,\n  } = useContext(LookContent);\n  // const [isSupport] = useState<boolean>(() => {\n  //   return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);\n  // });\n\n  const inputDevice = useGetInput();\n  const [status, setStatus] = useImmer<initialSource>({\n    desktop: false,\n    audio: false,\n    video: false,\n    face: false,\n  });\n  const RefVideo = useRef<HTMLVideoElement>(null);\n  const Refdesktop = useRef<HTMLVideoElement>(null);\n  const RefPC = useRef(new RTC());\n  const RefdesktopMixinTimer = useRef(null);\n  const RefUser = useRef<HTMLCanvasElement>(null);\n  interface iTracks {\n    [key: string]: {\n      [key: string]: Set<MediaStreamTrack>;\n    };\n  }\n  const [tracks, setTracks] = useImmer<iTracks>({\n    desktop: {},\n    user: {},\n  });\n\n  interface iStreams {\n    [key: string]: MediaStream | null;\n  }\n\n  const [streams, setStreams] = useState<iStreams>({\n    desktop: null,\n    user: null,\n    mixin: null,\n  });\n  const [userSize, setUserSize] = useState({\n    width: 0,\n    height: 0,\n  });\n  const RefMixin = useRef<HTMLCanvasElement>(null);\n  const RefCtx = useRef<CanvasRenderingContext2D>(null);\n  const RefMixinCtx = useRef<CanvasRenderingContext2D>(null);\n  const RefFace = useRef(new FaceDetector());\n\n  const handledesktopClose = () => {\n    const diskTop = Refdesktop.current as HTMLVideoElement;\n    const tracks = (diskTop.srcObject as MediaStream).getTracks();\n    tracks.forEach((track) => track.stop());\n    diskTop.srcObject = null;\n    lookDispatch({ type: SOCKET_DESKTOP_END });\n  };\n\n  const handlePushOpen = () => {\n    lookDispatch({\n      type: SOCKET_PUSH_START,\n      payload: {\n        title: \"6666\",\n        user: \"337845818\",\n        uid: \"337845818\",\n        banner:\n          \"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2Ftp03%2F1Z9211616415M2-0-lp.jpg&refer=http%3A%2F%2Fimg.jj20.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1642140129&t=1cd7e5653b612ffbe71c1f461c5cb387\",\n        sdp: \"this is sdp\",\n      },\n    });\n  };\n  const handlePushClose = () => {\n    lookDispatch({ type: SOCKET_PUSH_END, payload: { uid: \"337845818\" } });\n  };\n\n  useEffect(() => handlePushClose, []);\n\n  const handleSetEleSize =\n    ({\n      current: ref,\n    }: {\n      current: HTMLCanvasElement;\n    }): ReactEventHandler<HTMLVideoElement> =>\n    ({ target }) => {\n      const width = target.clientWidth;\n      const height = target.clientHeight;\n      ref.width = width;\n      ref.height = height;\n    };\n\n  const handleFaceDetector = async () => {\n    requestAnimationFrame(handleFaceDetector);\n    const user = RefUser.current as HTMLCanvasElement;\n    const ctx = RefCtx.current as CanvasRenderingContext2D;\n    const { width, height } = user;\n    const faces = await RefFace.current\n      .detect(RefVideo.current)\n      .catch((e: any) => console.log(e));\n    ctx.clearRect(0, 0, width, height);\n    ctx.beginPath();\n    ctx.lineWidth = 3;\n    ctx.strokeStyle = \"lime\";\n    ctx.setLineDash([5]);\n    for (const { boundingBox: face } of faces) {\n      ctx.strokeRect(face.x, face.y, face.width, face.height);\n    }\n  };\n  useEffect(() => {\n    RefCtx.current = (RefUser.current as HTMLCanvasElement).getContext(\"2d\");\n  }, [RefUser]);\n  useEffect(() => {\n    RefMixinCtx.current = (RefMixin.current as HTMLCanvasElement).getContext(\n      \"2d\"\n    );\n  }, [RefMixin]);\n\n  const handleMixindesktop = () => {\n    if (!streams.desktop) return;\n    const { width, height } = RefMixin.current;\n    console.log(\"mixin desktop \");\n    requestAnimationFrame(handleMixindesktop);\n    RefMixinCtx.current.drawImage(Refdesktop.current, 0, 0, width, height);\n  };\n\n  const handleMixinUser = () => {\n    if (!streams.user) return;\n    console.log(\"mixin user \");\n    requestAnimationFrame(handleMixinUser);\n    RefMixinCtx.current.drawImage(RefVideo.current, 0, 0, 200, 160);\n  };\n\n  useEffect(() => {\n    console.log(\"streams desktop effect\");\n    handleMixindesktop();\n  }, [streams.desktop]);\n  useEffect(() => {\n    console.log(\"streams user effect\");\n    handleMixinUser();\n  }, [streams.user]);\n\n  // useEffect(() => {\n  //   console.log(size);\n  //   RefMixin.current.width = size.width;\n  //   RefMixin.current.height = size.height;\n  // }, [size]);\n\n  const handleSetTrack = (track: MediaStreamTrack, name: string) => {\n    const { kind } = track;\n    setTracks((draft) => {\n      draft[name][kind] ??= new Set();\n      draft[name][kind].add(track);\n    });\n  };\n\n  const handledesktopCapture = () => {\n    const diskTop = Refdesktop.current as HTMLVideoElement;\n    navigator.mediaDevices\n      .getDisplayMedia({\n        audio: true,\n        video: true,\n      })\n      .then((mediaStream) => {\n        setStreams((prev) => ({ ...prev, desktop: mediaStream }));\n        // RefdesktopStream.current = mediaStream;\n        diskTop.srcObject = mediaStream;\n        // for (const track of mediaStream.getVideoTracks()) {\n        //   const { width = 0, height = 0 } = track.getSettings();\n        //   setSize({ width, height });\n        // }\n        const tracks = mediaStream.getTracks();\n        for (const track of tracks) {\n          lookDispatch({\n            type: \"addtrack\",\n            payload: {\n              track,\n              stream: mediaStream,\n            },\n          });\n          handleSetTrack(track, \"desktop\");\n        }\n        console.log(\"desktop tracks\", tracks);\n        // const sender = RefRTC.current.addTrack(tracks[0], mediaStream);\n        tracks[0].onended = () => {\n          // RefRTC.current.removeTrack(sender);\n          lookDispatch({ type: SOCKET_DESKTOP_END });\n        };\n        lookDispatch({ type: SOCKET_desktop_START });\n      })\n      .catch((e) => {\n        // DOMException: Permission denied\n        console.log(\"桌面捕获\", e);\n      });\n  };\n\n  const handleUserCapture = () => {\n    const video = RefVideo.current as HTMLVideoElement;\n    navigator.mediaDevices\n      .getUserMedia({\n        // audio: true,\n        video: {\n          width: { ideal: 1280 },\n          height: { ideal: 720 },\n        },\n      })\n      .then((mediaStream) => {\n        setStreams((prev) => ({ ...prev, user: mediaStream }));\n        for (const track of mediaStream.getVideoTracks()) {\n          const { width = 0, height = 0 } = track.getSettings();\n          console.log(track.getSettings());\n          setUserSize({ width, height });\n        }\n        video.srcObject = mediaStream;\n        lookDispatch({ type: SOCKET_USER_START });\n      })\n      .catch((e) => {\n        console.log(\"摄像头捕获\", e);\n      });\n  };\n\n  const handleCapture = () => {\n    handledesktopCapture();\n    // handleUserCapture();\n    // const mediaStream = (RefMixin.current as HTMLCanvasElement).captureStream(\n    //   30\n    // );\n    // setStreams((prev) => ({ ...prev, canvas: mediaStream }));\n    // console.log(mediaStream);\n  };\n\n  const handleSend = () => {\n    RefPC.current.start();\n    socket.emit(\"create\", {\n      title: \"6666\",\n      user: \"337845818\",\n      uid: \"337845818\",\n      banner:\n        \"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2Ftp03%2F1Z9211616415M2-0-lp.jpg&refer=http%3A%2F%2Fimg.jj20.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1642140129&t=1cd7e5653b612ffbe71c1f461c5cb387\",\n      sdp: RefPC.current.description,\n    });\n  };\n\n  const handleChangeStatus = useCallback((key: initialSourceKey) => {\n    setStatus((draft) => {\n      const value = get(draft, key);\n      set(draft, key, !value);\n      // draft[key] = !draft[key];\n    });\n  }, []);\n  return (\n    <div className={`w-full h-full p-8 overflow-auto`}>\n      <div className={`flex`}>\n        <Button onClick={handleCapture}>开始捕获</Button>\n        <Button onClick={handleSend}>推送</Button>\n        <div className={`border ml-auto`}>\n          <div className={`flex flex-col flex-wrap`}>\n            {sourceList.map(({ key, name }) => (\n              <Check\n                key={key}\n                name={key}\n                onChange={handleChangeStatus}\n                checked={status[key]}\n              >\n                <span>{name}</span>\n              </Check>\n            ))}\n            {inputList.map(({ key, name }) => (\n              <div key={key}>\n                <span>{name}</span>\n                <select className={`border`} disabled>\n                  {inputDevice[key].map((item, index) => {\n                    return (\n                      <option value=\"\" key={index}>\n                        {item.label}\n                      </option>\n                    );\n                  })}\n                </select>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n      <div className={`flex flex-col`}>\n        <div className={``}>\n          <video\n            className={`w-full`}\n            ref={Refdesktop}\n            autoPlay\n            playsInline\n            onLoadedMetadata={handleSetEleSize(RefMixin)}\n          />\n        </div>\n        <hr />\n        <div className={\"relative\"}>\n          <video\n            className={`w-full`}\n            ref={RefVideo}\n            autoPlay\n            playsInline\n            style={{ transform: `scale(-1, 1)` }}\n            onLoadedMetadata={handleSetEleSize(RefUser)}\n          />\n          <canvas\n            className={`absolute inset-0 w-full h-full`}\n            style={{ transform: `scale(-1, 1)` }}\n            ref={RefUser}\n          />\n        </div>\n      </div>\n      <hr />\n      <div>\n        <canvas className=\"w-full\" ref={RefMixin} />\n      </div>\n    </div>\n  );\n});\n","import React, { useEffect, useState } from \"react\";\n\nexport interface iUseGetInput {\n  audioinput: MediaDeviceInfo[];\n  videoinput: MediaDeviceInfo[];\n}\n\nconst useGetInput = () => {\n  const [audioinput, setAudioinput] = useState<MediaDeviceInfo[]>([]);\n  const [videoinput, setVideoinput] = useState<MediaDeviceInfo[]>([]);\n  useEffect(() => {\n    (async () => {\n      const deviceInfos = await navigator.mediaDevices.enumerateDevices();\n      const audioinput = [];\n      const videoinput = [];\n      for (const deviceInfo of deviceInfos) {\n        if (deviceInfo.kind === \"audioinput\") {\n          audioinput.push(deviceInfo);\n        } else if (deviceInfo.kind === \"videoinput\") {\n          videoinput.push(deviceInfo);\n        } else {\n          console.log(\"other kind: \", deviceInfo);\n        }\n      }\n      setAudioinput(audioinput);\n      setVideoinput(videoinput);\n    })();\n  }, []);\n  return {\n    audioinput,\n    videoinput,\n  };\n};\n\nexport default useGetInput;\n","import React, { memo, useContext, useEffect, useRef } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { LookContent } from \"../Look\";\nimport { SOCKET_JOIN_START } from \"../Content\";\nimport RTC from \"../RTC\";\n\nexport default memo(function Room() {\n  const { uid } = useParams();\n  const {\n    lookReducer: { socket },\n    lookDispatch,\n  } = useContext(LookContent);\n\n  const RefVideo = useRef(null);\n  const RefPC = useRef(new RTC());\n  const handleInit = async () => {\n    if (!RefVideo.current) return;\n    RefPC.current.start();\n    socket.emit(\"join\", RefPC.current.description);\n  };\n  useEffect(() => {\n    handleInit();\n  }, []);\n\n  useEffect(() => {\n    const handleJoinSuccess = (data: any) => {\n      console.log(\"asd\", data);\n    };\n    socket.on(\"join-success\", handleJoinSuccess);\n    return () => {\n      socket.off(\"join-success\", handleJoinSuccess);\n    };\n  }, []);\n  return (\n    <div className={`p-8 flex`}>\n      <div className=\"relative flex-1\">\n        <video\n          ref={RefVideo}\n          className={`w-full bg-black ui_aspect-ratio-16/9`}\n          autoPlay\n          playsInline\n        />\n        <video\n          className={`absolute bottom-0 right-0 w-36 border m-4 ui_aspect-ratio-16/9`}\n          autoPlay\n          playsInline\n          muted\n        />\n      </div>\n      <div className=\"w-1/4 flex flex-col ml-2 border\">\n        <div className={`flex-1 overflow-auto`} />\n        <hr />\n        <div className=\"\">\n          <textarea\n            className={`resize-none p-1 h-16 w-full block`}\n            placeholder={\"say something\"}\n          />\n        </div>\n      </div>\n    </div>\n  );\n});\n","import React from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport Look from \"./Look\";\nimport Home from \"./Home\";\nimport Live from \"./Live\";\nimport Room from \"./Room\";\n\nconst Router = () => {\n  return (\n    <Routes>\n      <Route element={<Look />}>\n        <Route index element={<Home />} />\n        <Route path={`my`} element={<Live />} />\n        <Route path={`:uid`} element={<Room />} />\n      </Route>\n    </Routes>\n  );\n};\n\nexport default Router;\n"],"names":["socket","io","LIVE_URL","autoConnect","on","data","console","log","SOCKET_CONNECT","SOCKET_DISCONNECT","SOCKET_DESKTOP_END","SOCKET_PUSH_END","LookReducer","draft","type","payload","LookInitialState","LookContent","createContext","memo","useAppDispatch","useImmerReducer","lookReducer","lookDispatch","useEffect","Provider","value","Outlet","Home","list","className","map","uid","title","banner","user","key","Link","to","loading","src","alt","useState","useContext","DomScroll","useRef","DomObserver","useQuery","fetch","then","res","json","error","isLoading","isSuccess","status","ref","href","configuration","iceServers","urls","this","pc","RTCPeerConnection","init","onicecandidate","e","target","iceCandidate","candidate","RTCIceCandidate","onconnectionstatechange","connectionState","ondatachannel","ev","channel","onopen","onicecandidateerror","event","errorCode","oniceconnectionstatechange","iceConnectionState","onicegatheringstatechange","label","iceGatheringState","onnegotiationneeded","createOffer","offer","setLocalDescription","catch","onsignalingstatechange","signalingState","ontrack","remoteStreams","streams","slice","track","stream","addTrack","description","setRemoteDescription","Button","onClick","children","classnames","Check","name","checked","onChange","htmlFor","id","sourceList","inputList","inputDevice","audioinput","setAudioinput","videoinput","setVideoinput","navigator","mediaDevices","enumerateDevices","deviceInfos","deviceInfo","kind","push","useGetInput","useImmer","desktop","audio","video","face","setStatus","RefVideo","Refdesktop","RefPC","RTC","RefUser","setTracks","mixin","setStreams","width","height","RefMixin","RefCtx","RefMixinCtx","handlePushClose","FaceDetector","handleSetEleSize","current","clientWidth","clientHeight","getContext","handleMixindesktop","requestAnimationFrame","drawImage","handleMixinUser","handleSetTrack","Set","add","handleChangeStatus","useCallback","get","set","diskTop","getDisplayMedia","mediaStream","prev","srcObject","tracks","getTracks","onended","SOCKET_desktop_START","start","emit","sdp","disabled","item","index","autoPlay","playsInline","onLoadedMetadata","style","transform","useParams","handleInit","handleJoinSuccess","off","muted","placeholder","Routes","Route","element","Look","path","Live","Room"],"sourceRoot":""}