"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[413],{3910:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var a=n(7363),r=n.n(a),l=n(6711),c=n(4184),o=n.n(c),i=n(7484),s=n.n(i),u=n(6719),m=function(e){var t=e.search,n=e.setSearch,a=e.placeholder,l=void 0===a?"":a;return r().createElement("div",{className:"search"},r().createElement("input",{type:"text",value:t,placeholder:l,onChange:function(e){var t=e.target;return n(t.value)}}),r().createElement("div",{className:"ico"},t?r().createElement("button",{type:"button",onClick:function(){return n("")}},r().createElement(u.IconX,{size:16})):r().createElement(u.IconSearch,{size:16})))};const d=(0,a.memo)(m);var p=n(7264),f=n(2837),y=n(2e3),v=n(1485),E=n(9929),b=n(5101),h=n(6910).u.injectEndpoints({endpoints:function(e){return{getUserCloud:e.query({query:function(e){return{url:"user/cloud",method:"POST",body:e}}})}}}).useGetUserCloudQuery;function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x.apply(this,arguments)}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){N(e,t,n[t])}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){o=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=function(e,t,n){return String(e[n.code]).localeCompare(String(t[n.code]),"zh-CN")*n.type},_=[["音乐标题","songName",k],["歌手","artist",k],["专辑","album",k],["格式","",k],["大小","fileSize",function(e,t,n){return(Number.parseFloat(e[n.code])-Number.parseFloat(t[n.code]))*n.type}],["上传时间","addTime",function(e,t,n){return(e[n.code]-t[n.code])*n.type}]],j=function(){var e=w((0,a.useState)(!1),2),t=e[0],n=e[1],l=w((0,a.useState)(""),2),c=l[0],i=l[1],m=w((0,a.useState)({name:"上传时间",type:-1,code:"addTime",callback:function(e,t,n){return(e[n.code]-t[n.code])*n.type}}),2),g=m[0],N=m[1],k=h({limit:100}),j=k.data,C=void 0===j?{}:j,O=k.isLoading,I=C.data,z=void 0===I?[]:I,M=(C.count,C.maxSize),P=void 0===M?"":M,A=C.size,Z=void 0===A?"":A;return O?null:r().createElement("div",{className:"domManage overflow-auto h-full"},r().createElement("div",{className:"domManage_header ui_header"},r().createElement("span",{className:"domManage_header_title h1"},"我的音乐云盘")),r().createElement("div",{className:"domCloud_info py-2.5 px-8"},r().createElement("span",null,"云盘容量")," ",r().createElement("div",{className:"w-28 h-2.5 inline-block bg-gray-200 rounded-full overflow-hidden"},r().createElement("div",{className:"h-full bg-blue-600",style:{width:Z/P*100||0}}))," ",r().createElement("span",{className:"num"},(Z/1024/1024/1024).toFixed(2),"G/",P/1024/1024/1024,"G")," ",r().createElement("span",{className:"ml-8"},"歌曲永久保存，随时随地多端畅听")," ",r().createElement("a",{href:"https://music.163.com/#/store/product/detail?id=34001",className:"ui_link"},"扩容")),r().createElement("div",{className:"ui_headerBar border-b"},r().createElement("div",{className:"left space-x-2"},r().createElement(v.Z,null),r().createElement("button",{type:"button",className:"flex-center ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},r().createElement(u.IconPlus,{size:20}),"  上传音乐")),r().createElement("div",{className:"right"},r().createElement(d,x({},{search:c,setSearch:i,placeholder:"搜索我的音乐云盘"})))),r().createElement("div",{className:"overflow-auto max-h-full flex-auto pl-8 pr-5"},r().createElement("div",{className:"domManage_table",style:{"--ui_grid_template":"36px / 30px 30px 8fr 3fr 3fr 2fr 2fr 4fr"}},r().createElement("div",{className:"thead"},r().createElement("div",{className:"tr grid ui_grid_template items-center"},r().createElement("div",null),r().createElement("div",null),_.map((function(e){var t=w(e,3),n=t[0],a=t[1],l=t[2];return r().createElement("div",{key:n,className:o()("cell px-1","th",{on:n===g.name}),onClick:function(){return function(e){if(g.name!==e.name)return N(S({},e,{type:1}));switch(g.type){case-1:return N({name:"",code:"",callback:function(e,t){return 0},type:0});case 1:return N(S({},e,{type:-1}));default:return N(S({},e,{type:1}))}}({item:n,code:a,callback:l})}},n,r().createElement("span",{className:"sort"},function(e,t){return t.name!==e?r().createElement(u.IconSwitchVertical,{size:14,color:"#f00",stroke:1}):-1===t.type?r().createElement(u.IconCaretDown,{size:20,stroke:0,fill:"#000"}):1===t.type?r().createElement(u.IconCaretUp,{size:12,stroke:0,fill:"#000"}):0===t.type?r().createElement(u.IconSwitchVertical,{size:14,color:"#f00",stroke:1}):void 0}(n,g)))})))),r().createElement("div",{className:"tbody"},z.map((function(e,t){var n,a,l,c,i,u,m;return r().createElement(p.Z,{type:"song",item:e,schema:[["播放","下一首播放"],["收藏到歌单","分享","下载"],["删除"]],key:e.songId},r().createElement("div",{className:o()("tr grid ui_grid_template items-center hover:bg-gray-100 focus:outline-none focus:bg-gray-200",t%2==0&&"bg-gray-50"),tabIndex:2},r().createElement("div",{className:"cell px-1 index text-gray-400"},r().createElement(f.Z,{index:t,id:e.songId})),r().createElement("div",{className:"cell px-1 download"},r().createElement(y.Z,null)),r().createElement("div",{className:"cell px-1 name truncate",title:e.songName+(null===(n=e.simpleSong)||void 0===n||null===(a=n.tns)||void 0===a?void 0:a.length)>0?"（".concat(null===(l=e.simpleSong)||void 0===l?void 0:l.tns,"）"):""},e.songName,(null===(c=e.simpleSong)||void 0===c||null===(i=c.tns)||void 0===i?void 0:i.length)>0&&r().createElement("span",{className:"text-gray-500"},"（".concat(e.simpleSong.tns,"）"))),r().createElement(E.Z,{className:"px-1",artists:e.simpleSong.ar}),r().createElement(b.Z,{className:"px-1",name:e.album,id:null===(u=e.simpleSong)||void 0===u||null===(m=u.al)||void 0===m?void 0:m.id}),r().createElement("div",{className:"cell px-1 truncate uppercase"},/(?<=\.)(\w*)$/.exec(e.fileName)[0]),r().createElement("div",{className:"cell px-1 truncate"},(e.fileSize/1024/1024).toFixed(1),"MB"),r().createElement("div",{className:"cell px-1 truncate text-gray-400"},s()(e.addTime).format("YYYY-MM-DD"))))}))))),r().createElement("div",{className:"domManage_dialog",style:{display:t?"":"none"}},r().createElement("button",{type:"button",className:"close",onClick:function(){n(!t)}},"×"),r().createElement("div",{className:"title"},"选择本地音乐文件夹"),r().createElement("div",{className:"tips"},"将自动扫描您勾选的目录，文件增删实时同步。"),r().createElement("ul",null,r().createElement("li",null,r().createElement("span",{className:"checkbox"},r().createElement("input",{type:"text"}),r().createElement("i",{className:"material-icons"},"checkbox")),"暂时没法做")),r().createElement("div",{className:"actions"},r().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full red"},"确认"),r().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"添加文件"))))};const C=(0,a.memo)(j),O=function(){return r().createElement(l.Routes,null,r().createElement(l.Route,{index:!0,element:r().createElement(C,null)}))}}}]);
//# sourceMappingURL=Cloud.js.map?version=f2712b61