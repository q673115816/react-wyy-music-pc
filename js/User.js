"use strict";(this.webpackChunk_wyy_web=this.webpackChunk_wyy_web||[]).push([[323],{6716:(e,t,n)=>{n.r(t),n.d(t,{default:()=>at});var r=n(7363),a=n.n(r),l=n(6711),i=n(4013),c=(0,r.createContext)({profile:{}}),o=c.Provider,u=n(6629);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}var d=function(){var e=(0,l.useParams)().uid,t=(0,i.mI)({uid:e}),n=t.data;return t.isLoading?a().createElement(u.Z,null):a().createElement("div",{className:"overflow-auto h-full flex-auto"},a().createElement(o,{value:m({},n)},a().createElement(l.Outlet,null)))};const f=(0,r.memo)(d);var v=n(3009),p=n(6719),y=n(8696),E=function(e){var t=e.list,n=void 0===t?[]:t,r=e.children;return a().createElement("div",{className:"domUserDetail_list px-8 grid grid-cols-4 gap-5"},r,n.map((function(e){return a().createElement(y.Z,{item:e,key:e.id})})))};const h=(0,r.memo)(E);var b=n(3849),g=n.n(b),x=n(3606),N=function(e){var t=e.list,n=void 0===t?[]:t;return a().createElement("div",null,n.map((function(e,t){return a().createElement("div",{key:e.id,className:g()("hover:bg-gray-100 pl-8 py-3 flex items-center",{"bg-gray-50":t%2==0})},a().createElement(l.Link,{to:"/playlist/music/".concat(e.id),className:"rounded overflow-hidden relative group"},a().createElement("img",{src:"".concat(e.coverImgUrl,"?param=60y60"),alt:""}),a().createElement("button",{type:"button",className:"absolute rounded-full bg-white bg-opacity-90 inset-0 flex-center m-auto w-6 h-6 ui_themeColor opacity-0 group-hover:opacity-100 transition-opacity duration-500"},a().createElement(p.IconPlayerPlay,{size:16,className:"fill-current"}))),a().createElement(l.Link,{to:"/playlist/music/".concat(e.id),className:"flex-auto w-0 px-3 truncate text-sm ui_text_black_hover"},e.name),a().createElement("span",{className:"px-3 count text-gray-400",style:{width:"".concat(1/7*100,"%")}},"歌曲：",e.trackCount),a().createElement("span",{className:"px-3 creator truncate text-gray-300",style:{width:"".concat(1/7*100,"%")}},"by",a().createElement(l.Link,{to:"/user/".concat(e.userId),className:"ui_text_gray_hover"},e.creator.nickname)),a().createElement("button",{type:"button",className:"px-3 subscribed flex items-center ui_text_gray_hover",style:{width:"".concat(1/7*100,"%")}},a().createElement(p.IconFolderPlus,{size:16}),e.subscribedCount),a().createElement("button",{type:"button",className:"px-3 playCount flex items-center ui_text_gray_hover",style:{width:"".concat(1/7*100,"%")}},a().createElement(p.IconPlayerPlay,{size:16}),(0,x.LU)(e.playCount)))})))};const w=(0,r.memo)(N);var k=function(){return a().createElement("div",null)};const _=(0,r.memo)(k);var S=["Grid","List","Column"],A=[["Grid","大图模式",p.IconLayoutGrid],["List","列表模式",p.IconLayoutList],["Column","图列模式",p.IconList]],C={Grid:h,List:w,Column:_},I=["创建的歌单","收藏的歌单","创建的播客","收藏的播客","创建的音乐专栏"],j=function(e){var t=e.list,n=void 0===t?[]:t,l=e.layout,i=void 0===l?"Grid":l,c=e.children;return a().createElement("div",{className:"pb-10"},(0,r.createElement)(C[i],{list:n,children:c}))};const U=(0,r.memo)(j);function O(){return a().createElement("div",{className:"cartoon hb r"},a().createElement("div",{className:"ears"}),a().createElement("div",{className:"face r c"}),a().createElement("div",{className:"nose ha hb"}),a().createElement("div",{className:"forehead ha c"}),a().createElement("div",{className:"eyes r"}),a().createElement("div",{className:"pupil"}),a().createElement("div",{className:"pupil"}),a().createElement("div",{className:"smile"}),a().createElement("div",{className:"smile"}),a().createElement("div",{className:"snout ha hb"}),a().createElement("div",{className:"mouth ha hb"}),a().createElement("div",{className:"whiskers r"}))}var L=function(){return a().createElement("div",{className:"item"},a().createElement(l.Link,{to:"record"},a().createElement("div",{className:"cover relative border aspect-square"},a().createElement("div",{className:"absolute inset-0"},a().createElement(O,null)),a().createElement("button",{type:"button",className:"playArrow opacity-0 group-hover:opacity-100 transition-opacity duration-500 ui_themeColor absolute right-0 bottom-0 m-2 bg-white bg-opacity-90 rounded-full p-2"},a().createElement(p.IconPlayerPlay,{size:22,className:"fill-current"})))),a().createElement("div",{className:"footer mt-2 text-sm"},a().createElement(l.Link,{to:"record"},"听歌排行")))};const P=(0,r.memo)(L);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=function(){var e=(0,l.useParams)().uid,t=(0,i.bP)({uid:e}),n=t.data,c=t.isLoading,o=D((0,r.useState)(I[0]),2),s=o[0],m=o[1],d=D((0,r.useState)(S[0]),2),f=d[0],v=d[1],p=(null==n?void 0:n.playlist)||[],y=p.filter((function(t){return String(t.userId)===e})),E=p.filter((function(t){return String(t.userId)!==e}));return c?a().createElement(u.Z,null):a().createElement("div",{className:"domUserDetail_main"},a().createElement("div",{className:"flex px-8 pb-4"},a().createElement("div",{className:"text-base flex gap-4"},I.map((function(e){return a().createElement("button",{className:g()(s===e&&"font-bold ui_underline"),onClick:function(){return m(e)},type:"button",key:e},e)}))),a().createElement("div",{className:"ml-auto flex overflow-hidden rounded space-x-0.5"},A.map((function(e){var t=D(e,3),n=t[0],r=t[1],l=t[2];return a().createElement("button",{key:n,type:"button",className:g()("layout bg-gray-100 h-5 w-6 flex-center",f===n?"bg-gray-500 text-white":"hover:bg-gray-200"),onClick:function(){return v(n)},title:r},a().createElement(l,{size:16}))})))),s===I[0]&&a().createElement(U,{list:y},a().createElement(P,null)),s===I[1]&&a().createElement(U,{list:E}))};const Z=(0,r.memo)(T);var z=n(6319),F=n.n(z),M=n(1862),J=n(6310);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e,t,n,r,a,l,i){try{var c=e[l](i),o=c.value}catch(e){return void n(e)}c.done?t(o):Promise.resolve(o).then(r,a)}var H=function(){var e,t,n,o,u=(0,l.useParams)().uid,s=(n=(0,i.pA)(),o=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}}(n,o)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],m=(0,r.useContext)(c),d=m.profile,f=m.code,y=m.bindings,E=(0,v.C)((function(e){return e.common})).isLogin,h=(0,v.C)((function(e){return e.account})),b=(0,r.useMemo)((function(){return!!E&&String(h.profile.userId)===u}),[E]),g=(e=F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.followed,e.prev=1,e.next=4,s({id:t,t:!0===n?0:1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})),t=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function i(e){G(l,r,a,i,c,"next",e)}function c(e){G(l,r,a,i,c,"throw",e)}i(void 0)}))},function(e){return t.apply(this,arguments)});return f?a().createElement("div",{className:"domUserDetail_header flex p-8"},a().createElement("div",{className:"avatar w-44 h-44 rounded-full overflow-hidden flex-none"},a().createElement("img",{src:"".concat(null==d?void 0:d.avatarUrl,"?param=180y180"),alt:"",className:"w-full h-ull object-cover block"})),a().createElement("div",{className:"ml-5 flex-auto"},a().createElement("div",{className:"font-bold text-xl"},null==d?void 0:d.nickname),a().createElement("div",{className:"flex items-center py-2"},a().createElement("div",{className:"left flex-center"},11===(null==d?void 0:d.vipType)&&a().createElement(a().Fragment,null,a().createElement("a",{href:"https://music.163.com/#/member"},"黑胶会员")," "),(null==d?void 0:d.identify)&&a().createElement("span",{className:"authentication",title:d.identify.imageDesc},a().createElement("span",{className:"w-4 h-4 ml-1"},a().createElement("img",{className:"ui_containimg",src:d.identify.imageUrl,alt:""})),d.identify.imageDesc),a().createElement("a",{className:"w-8 h-4 flex-center rounded-full mr-2 bg-gray-200",href:"https://music.163.com/#/user/level"},"Lv",d.level),a().createElement(M.ZP,{gender:null==d?void 0:d.gender,size:16})),a().createElement("div",{className:"right ml-auto flex-center"},b?a().createElement(l.Link,{to:"/user/edit",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center"},a().createElement(p.IconEdit,{size:18,stroke:1.5}),"  编辑个人信息"):a().createElement(a().Fragment,null,a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center"},a().createElement(p.IconMail,{size:20,stroke:1})," 发私信"),(null==d?void 0:d.followed)?a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:function(){return g(null==d?void 0:d.userId)}},a().createElement(p.IconCheck,{size:16}),"  已关注"):a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:function(){return g(null==d?void 0:d.userId)}},a().createElement(p.IconPlus,{size:16,style:{color:"#EC4141"}}),"  关注")))),a().createElement("hr",null),a().createElement("div",{className:"text-center divide-x flex mt-5"},a().createElement(l.Link,{to:"dynamic",className:"w-20"},a().createElement("div",{className:"text-base"},null==d?void 0:d.eventCount),a().createElement("div",null,"动态")),a().createElement(l.Link,{to:"follow",className:"w-20"},a().createElement("div",{className:"text-base"},null==d?void 0:d.follows),a().createElement("div",null,"关注")),a().createElement(l.Link,{to:"fans",className:"w-20"},a().createElement("div",{className:"text-base"},null==d?void 0:d.followeds),a().createElement("div",null,"粉丝"))),a().createElement("div",{className:"leading-6 mt-2 text-sm"},a().createElement("div",null,a().createElement("span",null,"社交网络："),null==y?void 0:y.map((function(e){if(e.url)return 2===e.type?a().createElement("a",{href:e.url,key:e.url},a().createElement(J.Hl,{size:16,active:!0,key:e.url})):null}))),a().createElement("div",null,a().createElement("span",null,"个人介绍："),a().createElement("span",{className:"text-gray-400",style:{whiteSpace:"pre-wrap"}},(null==d?void 0:d.signature)||"暂无介绍"))))):null};const Q=(0,r.memo)(H);var q=function(){var e=(0,v.C)((function(e){return e.common})).isLogin,t=(0,r.useContext)(c).code;return e?404===t?a().createElement("div",{className:"flex"},"用户不存在"):a().createElement("div",{className:"domUserDetail"},a().createElement(Q,null),a().createElement(Z,null)):a().createElement("div",null,"查看个人信息请先登录")};const B=(0,r.memo)(q);var Y=n(2223),K=n(1697),V=n(2284);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t,n,r,a,l,i){try{var c=e[l](i),o=c.value}catch(e){return void n(e)}c.done?t(o):Promise.resolve(o).then(r,a)}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}}(e,t)||te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}var ne=function(){var e,t,n=(0,l.useParams)().uid,o=void 0===n?"":n,s=ee((0,V.x)([]),2),m=s[0],d=s[1],f=(0,r.useRef)(-1),v=(0,r.useContext)(c).profile,p=ee((0,i.ne)(),2),y=p[0],E=(p[1].isLoading,(0,r.useRef)(!0)),h=(0,r.useRef)(null),b=(0,r.useRef)(null),g=(e=F().mark((function e(){var t,n,r,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.current){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,y({uid:o,lasttime:f.current});case 5:t=e.sent.data,n=t.events,r=t.more,a=t.lasttime,E.current=r,f.current=a,d((function(e){var t,r;(t=e).push.apply(t,function(e){if(Array.isArray(e))return W(e)}(r=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||te(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})),t=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function i(e){X(l,r,a,i,c,"next",e)}function c(e){X(l,r,a,i,c,"throw",e)}i(void 0)}))},function(){return t.apply(this,arguments)});return(0,K.Z)(g,h,b),a().createElement("div",{className:"h-full overflow-auto",ref:h},a().createElement("div",{className:"h1 ui_header"},"".concat(v.nickname,"的动态")),a().createElement("div",{className:"px-8"},m.length>0?a().createElement(Y.Z,{list:m}):a().createElement("div",{className:"empty"},"暂无动态")),a().createElement("div",{ref:b},E.current&&a().createElement(u.Z,null)))};const re=(0,r.memo)(ne);var ae=n(445),le=n(8738),ie=n(5726);const ce=(0,r.memo)((function(e){var t,n=e.item,r=e.handleClick,i=e.handleLetter,c=e.isSelf;return a().createElement("div",{className:"item w-96 flex p-4 hover:bg-gray-50",key:n.userId},a().createElement(l.Link,{to:"/user/".concat(n.userId),className:"relative avatar w-24 h-24 rounded-full border flex-none"},a().createElement("img",{className:"rounded-full",src:"".concat(n.avatarUrl,"?param=100y100"),alt:""}),(null==n||null===(t=n.avatarDetail)||void 0===t?void 0:t.identityIconUrl)&&a().createElement("div",{className:"ico w-6 h-6 absolute right-0 bottom-0"},a().createElement("img",{src:n.avatarDetail.identityIconUrl,alt:""}))),a().createElement("div",{className:"content flex-auto w-0 pl-2"},a().createElement("div",{className:"contain mt-4"},a().createElement("div",{className:"left"},a().createElement(l.Link,{className:"nickname ui_text_black_hover truncate pr-3 w-56",to:"/user/".concat(n.userId)},n.nickname))),a().createElement("div",{className:"contain flex items-baseline"},a().createElement("div",{className:"truncate pr-3 text-gray-500 w-56"},n.signature),a().createElement("div",{className:"right flex-none"},function(e){var t=e.handleLetter,n=e.handleClick,r=e.id,l=e.name;switch(!0){case t&&e.isSelf:return a().createElement("button",{onClick:function(){return t(r,l)},type:"button",className:"follow border flex-center rounded-full w-16 h-6 hover:bg-gray-200"},a().createElement(p.IconPlus,{size:16,className:"text-red-500"})," 私信");case e.followed:return a().createElement("span",{className:"follow border text-gray-500 flex-center rounded-full w-16 h-6"},"已关注");default:return a().createElement("button",{onClick:function(){return n(r)},type:"button",className:"follow border flex-center rounded-full w-16 h-6 hover:bg-gray-200"},a().createElement(p.IconPlus,{size:16,className:"text-red-500"})," 关注")}}({handleLetter:i,handleClick:r,isSelf:c,followed:n.followed,id:n.userId,name:n.nickname}))),a().createElement("div",{className:"info divide-x text-gray-500 mt-1"},a().createElement("span",{className:"pr-6"}," 歌单：".concat(n.playlistCount)),a().createElement("span",{className:"pl-6"},"粉丝：".concat(n.followeds)))))}));var oe=function(e){var t=e.list,n=void 0===t?[]:t,r=e.handleClick,l=e.handleLetter,i=e.isSelf,c=e.children;return a().createElement(a().Fragment,null,0===n.length?c[0]:a().createElement("div",{className:"flex flex-wrap justify-between"},n.map((function(e){return a().createElement(ce,{item:e,handleClick:r,isSelf:i,handleLetter:l,key:e.userId})}))),c[1])};const ue=(0,r.memo)(oe);function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t,n,r,a,l,i){try{var c=e[l](i),o=c.value}catch(e){return void n(e)}c.done?t(o):Promise.resolve(o).then(r,a)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function i(e){me(l,r,a,i,c,"next",e)}function c(e){me(l,r,a,i,c,"throw",e)}i(void 0)}))}}function fe(e){throw e}function ve(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}var ye=function(){var e,t,n,i=(0,r.useContext)(c).profile,o=(0,l.useParams)().uid,s=(0,v.T)(),m=(t=(0,V.x)([]),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}}(t,n)||pe(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=m[0],f=m[1],p=(0,v.C)((function(e){return e.account})),y=(0,r.useMemo)((function(){return p.profile.userId===Number(o)}),[o]),E=(0,r.useRef)(null),h=(0,r.useRef)(null),b=(0,r.useRef)(0),g=(0,r.useRef)(!0),x=(e=de(F().mark((function e(){var t,n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,ae.qm)({uid:o,limit:30,offset:b.current});case 5:t=e.sent,n=t.follow,r=t.more,b.current+=30,g.current=r,f((function(e){return ve(e).concat(ve(n))})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])}))),function(){return e.apply(this,arguments)}),N=(0,r.useCallback)(function(){var e=de(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ae.iQ)({id:t,t:1});case 3:n=null!==(n=e.sent)?n:fe(new TypeError("Cannot destructure undefined")),f((function(e){e[e.findIndex((function(e){return e.userId===t}))].followed=!0})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,K.Z)(x,E,h),a().createElement("div",{className:"domUser_followlist h-full overflow-auto",ref:E},a().createElement("div",{className:"h1 domUser_subpage_header ui_header"},a().createElement(l.Link,{to:"./"},null==i?void 0:i.nickname),"的关注"),a().createElement("div",{className:""},a().createElement(ue,{isSelf:y,list:d,handleClick:N,handleLetter:function(e,t){s((0,le.setPopupLetterToggle)()),s((0,ie.setMsgPrivateHistory)({uid:e,nickname:t,showMsgPrivateHistory:!0}))}},a().createElement("div",{className:"empty"},"还没有关注")),a().createElement("div",{ref:h}),g.current&&a().createElement("div",{className:"flex-center"},a().createElement(u.Z,null))))};const Ee=(0,r.memo)(ye);function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e,t,n,r,a,l,i){try{var c=e[l](i),o=c.value}catch(e){return void n(e)}c.done?t(o):Promise.resolve(o).then(r,a)}function ge(e){throw e}var xe=function(){var e,t,n,o,u=(0,l.useParams)().uid,s=(0,r.useContext)(c).profile,m=(n=(0,i.pA)(),o=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}}(n,o)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],d=(0,i.Ho)({uid:u}),f=d.data,v=(d.isLoading,(null==f?void 0:f.followeds)||[]),p=(0,r.useCallback)((e=F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({id:t,t:1});case 3:n=null!==(n=e.sent)?n:ge(new TypeError("Cannot destructure undefined")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),t=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function i(e){be(l,r,a,i,c,"next",e)}function c(e){be(l,r,a,i,c,"throw",e)}i(void 0)}))},function(e){return t.apply(this,arguments)}),[u]);return a().createElement("div",{className:"domUser_followlist"},a().createElement("div",{className:"h1 ui_header"},a().createElement(l.Link,{to:"./"},s.nickname),"的粉丝"),a().createElement("div",{className:"domUser_followlist_main"},a().createElement(ue,{list:v,handleClick:p},a().createElement("div",{className:"empty"},"还没有粉丝"))))};const Ne=(0,r.memo)(xe);var we=n(1117),ke=n(339),_e=n(3758),Se=n(1331),Ae=n(6356),Ce=function(e){var t=e.type,n=e.uid,r=(0,i._C)({uid:n,type:t}),l=r.data,c=r.isFetching,o=(1===t?null==l?void 0:l.weekData:null==l?void 0:l.allData)||[];return c?a().createElement(u.Z,null):a().createElement("div",{className:"overflow-auto h-0 flex-auto domUser_record_main",style:{"--ui_grid_template":"36px / 24px 24px 24px 10fr 1fr"}},a().createElement("div",{className:"domUser_record_list"},o.map((function(e,t){var n=e.song,r=e.playCount;return a().createElement(we.Z,{item:n,key:n.id,schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","下载"]]},a().createElement("div",{tabIndex:2,className:g()("domUser_record_item focus:outline-none focus:bg-gray-200 items-center hover:bg-gray-100 ui_grid_template px-8 grid",t%2==1&&"bg-gray-50")},a().createElement("div",{className:"index text-gray-400"},a().createElement(ke.Z,{id:n.id,index:t})),a().createElement("div",{className:"heart"},a().createElement(_e.Z,{id:n.id})),a().createElement("div",{className:"download"},a().createElement(Se.Z,null)),a().createElement("div",{className:"name"},a().createElement(Ae.Z,{item:n})),a().createElement("div",{className:"playCount text-gray-400"},r,"次")))}))))};const Ie=(0,r.memo)(Ce);function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ue=function(){var e,t,n=(0,l.useParams)().uid,i=(e=(0,r.useState)(1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],o=i[1];return a().createElement("div",{className:"h-full flex flex-col"},a().createElement("div",{className:"flex-none"},a().createElement("div",{className:"h1 ui_header"},"我的听歌排行"),a().createElement("div",{className:"flex px-8 pb-2 border-b gap-x-8 text-sm"},a().createElement("button",{onClick:function(){return o(1)},type:"button",className:g()("domUser_record_nav_link",{"font-bold":1===c})},"最近一周"),a().createElement("button",{onClick:function(){return o(0)},type:"button",className:g()({"font-bold":0===c})},"所有时间"))),a().createElement(Ie,{type:c,uid:n}))};const Oe=(0,r.memo)(Ue);var Le=n(1745),Pe=function(e){var t=e.children,n=e.value,r=e.onChange;return a().createElement("select",{className:"h-8 px-1.5 rounded border",value:n,onChange:r},t)};const Re=(0,r.memo)(Pe);function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Te=function(e){var t,n,l=e.birthday,i=void 0===l?"":l,c=e.handleEdit,o=(0,r.useRef)((new Date).getFullYear()),u=(0,r.useRef)(new Date(i).getFullYear()),s=(0,r.useRef)(new Date(i).getMonth()),m=(0,r.useRef)(new Date(i).getDate()),d=(t=(0,r.useState)(),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],v=d[1],p=function(){c("birthday",new Date("".concat(u.current,"/").concat(s.current+1,"/").concat(m.current)).valueOf())};return(0,r.useEffect)((function(){!function(){switch(Number(s.current)){case 1:return void(u.current%4==0&&u.current%100!=0||u.current%400==0?v(29):v(28));case 0:case 2:case 4:case 6:case 7:case 9:case 11:return void v(31);default:v(30)}}()}),[s.current]),a().createElement("div",{className:"grid grid-cols-3 gap-3"},a().createElement(Re,{value:u.current,onChange:function(e){u.current=e.target.value,s.current=0,m.current=1,p()}},Object.keys(Array(100).fill(0)).reverse().map((function(e){return a().createElement("option",{key:o.current-e,value:o.current-e},o.current-e,"年")}))),a().createElement(Re,{value:s.current,onChange:function(e){s.current=e.target.value,m.current=1,p()}},Object.keys(Array(12).fill(0)).map((function(e){return a().createElement("option",{key:e,value:e},Number(e)+1,"月")}))),a().createElement(Re,{value:m.current,onChange:function(e){m.current=e.target.value,p()}},Object.keys(Array(f).fill(0)).map((function(e){return a().createElement("option",{key:Number(e)+1,value:Number(e)+1},Number(e)+1,"日")}))))};const Ze=(0,r.memo)(Te),ze=[{id:1,name:"直辖市",cities:{11e4:"北京市",12e4:"天津市",31e4:"上海市",5e5:"重庆市"}},{id:2,name:"特别行政区",cities:{81e4:"香港",82e4:"澳门"}},{id:13e4,name:"河北省",alias:"河北",type:0,cities:{130100:"石家庄市",130200:"唐山市",130300:"秦皇岛市",130400:"邯郸市",130500:"邢台市",130600:"保定市",130700:"张家口市",130800:"承德市",130900:"沧州市",131e3:"廊坊市",131100:"衡水市"}},{id:14e4,name:"山西省",alias:"山西",type:0,cities:{140100:"太原市",140200:"大同市",140300:"阳泉市",140400:"长治市",140500:"晋城市",140600:"朔州市",140700:"晋中市",140800:"运城市",140900:"忻州市",141e3:"临汾市",141100:"吕梁市"}},{id:15e4,name:"内蒙古",alias:null,type:0,cities:{150100:"呼和浩特市",150200:"包头市",150300:"乌海市",150400:"赤峰市",150500:"通辽市",150600:"鄂尔多斯市",150700:"呼伦贝尔市",150800:"巴彦淖尔市",150900:"乌兰察布市",152200:"兴安盟",152500:"锡林郭勒盟",152900:"阿拉善盟"}},{id:21e4,name:"辽宁省",alias:"辽宁",type:0,cities:{210100:"沈阳市",210200:"大连市",210300:"鞍山市",210400:"抚顺市",210500:"本溪市",210600:"丹东市",210700:"锦州市",210800:"营口市",210900:"阜新市",211e3:"辽阳市",211100:"盘锦市",211200:"铁岭市",211300:"朝阳市",211400:"葫芦岛市"}},{id:22e4,name:"吉林省",alias:"吉林",type:0,cities:{220100:"长春市",220200:"吉林市",220300:"四平市",220400:"辽源市",220500:"通化市",220600:"白山市",220700:"松原市",220800:"白城市",222400:"延边朝鲜族自治州"}},{id:23e4,name:"黑龙江省",alias:"黑龙江",type:0,cities:{230100:"哈尔滨市",230200:"齐齐哈尔市",230300:"鸡西市",230400:"鹤岗市",230500:"双鸭山市",230600:"大庆市",230700:"伊春市",230800:"佳木斯市",230900:"七台河市",231e3:"牡丹江市",231100:"黑河市",231200:"绥化市",232700:"大兴安岭地区"}},{id:32e4,name:"江苏省",alias:"江苏",type:0,cities:{320100:"南京市",320200:"无锡市",320300:"徐州市",320400:"常州市",320500:"苏州市",320600:"南通市",320700:"连云港市",320800:"淮安市",320900:"盐城市",321e3:"扬州市",321100:"镇江市",321200:"泰州市",321300:"宿迁市"}},{id:33e4,name:"浙江省",alias:"浙江",type:0,cities:{330100:"杭州市",330200:"宁波市",330300:"温州市",330400:"嘉兴市",330500:"湖州市",330600:"绍兴市",330700:"金华市",330800:"衢州市",330900:"舟山市",331e3:"台州市",331100:"丽水市"}},{id:34e4,name:"安徽省",alias:"安徽",type:0,cities:{340100:"合肥市",340200:"芜湖市",340300:"蚌埠市",340400:"淮南市",340500:"马鞍山市",340600:"淮北市",340700:"铜陵市",340800:"安庆市",341e3:"黄山市",341100:"滁州市",341200:"阜阳市",341300:"宿州市",341500:"六安市",341600:"亳州市",341700:"池州市",341800:"宣城市"}},{id:35e4,name:"福建省",alias:"福建",type:0,cities:{350100:"福州市",350200:"厦门市",350300:"莆田市",350400:"三明市",350500:"泉州市",350600:"漳州市",350700:"南平市",350800:"龙岩市",350900:"宁德市"}},{id:36e4,name:"江西省",alias:"江西",type:0,cities:{360100:"南昌市",360200:"景德镇市",360300:"萍乡市",360400:"九江市",360500:"新余市",360600:"鹰潭市",360700:"赣州市",360800:"吉安市",360900:"宜春市",361e3:"抚州市",361100:"上饶市"}},{id:37e4,name:"山东省",alias:"山东",type:0,cities:{370100:"济南市",370200:"青岛市",370300:"淄博市",370400:"枣庄市",370500:"东营市",370600:"烟台市",370700:"潍坊市",370800:"济宁市",370900:"泰安市",371e3:"威海市",371100:"日照市",371200:"莱芜市",371300:"临沂市",371400:"德州市",371500:"聊城市",371600:"滨州市",371700:"菏泽市"}},{id:41e4,name:"河南省",alias:"河南",type:0,cities:{410100:"郑州市",410200:"开封市",410300:"洛阳市",410400:"平顶山市",410500:"安阳市",410600:"鹤壁市",410700:"新乡市",410800:"焦作市",410900:"濮阳市",411e3:"许昌市",411100:"漯河市",411200:"三门峡市",411300:"南阳市",411400:"商丘市",411500:"信阳市",411600:"周口市",411700:"驻马店市",419001:"济源市"}},{id:42e4,name:"湖北省",alias:"湖北",type:0,cities:{420100:"武汉市",420200:"黄石市",420300:"十堰市",420500:"宜昌市",420600:"襄阳市",420700:"鄂州市",420800:"荆门市",420900:"孝感市",421e3:"荆州市",421100:"黄冈市",421200:"咸宁市",421300:"随州市",422800:"恩施土家族苗族自治州",429004:"仙桃市",429005:"潜江市",429006:"天门市",429021:"神农架林区"}},{id:43e4,name:"湖南省",alias:"湖南",type:0,cities:{430100:"长沙市",430200:"株洲市",430300:"湘潭市",430400:"衡阳市",430500:"邵阳市",430600:"岳阳市",430700:"常德市",430800:"张家界市",430900:"益阳市",431e3:"郴州市",431100:"永州市",431200:"怀化市",431300:"娄底市",433100:"湘西土家族苗族自治州"}},{id:44e4,name:"广东省",alias:"广东",type:0,cities:{440100:"广州市",440200:"韶关市",440300:"深圳市",440400:"珠海市",440500:"汕头市",440600:"佛山市",440700:"江门市",440800:"湛江市",440900:"茂名市",441200:"肇庆市",441300:"惠州市",441400:"梅州市",441500:"汕尾市",441600:"河源市",441700:"阳江市",441800:"清远市",441900:"东莞市",442e3:"中山市",445100:"潮州市",445200:"揭阳市",445300:"云浮市"}},{id:45e4,name:"广西",alias:null,type:0,cities:{450100:"南宁市",450200:"柳州市",450300:"桂林市",450400:"梧州市",450500:"北海市",450600:"防城港市",450700:"钦州市",450800:"贵港市",450900:"玉林市",451e3:"百色市",451100:"贺州市",451200:"河池市",451300:"来宾市",451400:"崇左市"}},{id:46e4,name:"海南省",alias:"海南",type:0,cities:{460100:"海口市",460200:"三亚市",460300:"三沙市",460400:"儋州市",469001:"五指山市",469002:"琼海市",469005:"文昌市",469006:"万宁市",469007:"东方市",469021:"定安县",469022:"屯昌县",469023:"澄迈县",469024:"临高县",469025:"白沙黎族自治县",469026:"昌江黎族自治县",469027:"乐东黎族自治县",469028:"陵水黎族自治县",469029:"保亭黎族苗族自治县",469030:"琼中黎族苗族自治县"}},{id:51e4,name:"四川省",alias:"四川",type:0,cities:{510100:"成都市",510300:"自贡市",510400:"攀枝花市",510500:"泸州市",510600:"德阳市",510700:"绵阳市",510800:"广元市",510900:"遂宁市",511e3:"内江市",511100:"乐山市",511300:"南充市",511400:"眉山市",511500:"宜宾市",511600:"广安市",511700:"达州市",511800:"雅安市",511900:"巴中市",512e3:"资阳市",513200:"阿坝藏族羌族自治州",513300:"甘孜藏族自治州",513400:"凉山彝族自治州"}},{id:52e4,name:"贵州省",alias:"贵州",type:0,cities:{520100:"贵阳市",520200:"六盘水市",520300:"遵义市",520400:"安顺市",520500:"毕节市",520600:"铜仁市",522300:"黔西南布依族苗族自治州",522600:"黔东南苗族侗族自治州",522700:"黔南布依族苗族自治州"}},{id:53e4,name:"云南省",alias:"云南",type:0,cities:{530100:"昆明市",530300:"曲靖市",530400:"玉溪市",530500:"保山市",530600:"昭通市",530700:"丽江市",530800:"普洱市",530900:"临沧市",532300:"楚雄彝族自治州",532500:"红河哈尼族彝族自治州",532600:"文山壮族苗族自治州",532800:"西双版纳傣族自治州",532900:"大理白族自治州",533100:"德宏傣族景颇族自治州",533300:"怒江傈僳族自治州",533400:"迪庆藏族自治州"}},{id:54e4,name:"西藏",alias:null,type:0,cities:{540100:"拉萨市",540200:"日喀则市",540300:"昌都市",540400:"林芝市",540500:"山南市",540600:"那曲市",542500:"阿里地区"}},{id:61e4,name:"陕西省",alias:"陕西",type:0,cities:{610100:"西安市",610200:"铜川市",610300:"宝鸡市",610400:"咸阳市",610500:"渭南市",610600:"延安市",610700:"汉中市",610800:"榆林市",610900:"安康市",611e3:"商洛市"}},{id:62e4,name:"甘肃省",alias:"甘肃",type:0,cities:{620100:"兰州市",620200:"嘉峪关市",620300:"金昌市",620400:"白银市",620500:"天水市",620600:"武威市",620700:"张掖市",620800:"平凉市",620900:"酒泉市",621e3:"庆阳市",621100:"定西市",621200:"陇南市",622900:"临夏回族自治州",623e3:"甘南藏族自治州"}},{id:63e4,name:"青海省",alias:"青海",type:0,cities:{630100:"西宁市",630200:"海东市",632200:"海北藏族自治州",632300:"黄南藏族自治州",632500:"海南藏族自治州",632600:"果洛藏族自治州",632700:"玉树藏族自治州",632800:"海西蒙古族藏族自治州"}},{id:64e4,name:"宁夏",alias:null,type:0,cities:{640100:"银川市",640200:"石嘴山市",640300:"吴忠市",640400:"固原市",640500:"中卫市"}},{id:65e4,name:"新疆",alias:null,type:0,cities:{650100:"乌鲁木齐市",650200:"克拉玛依市",650400:"吐鲁番市",650500:"哈密市",652300:"昌吉回族自治州",652700:"博尔塔拉蒙古自治州",652800:"巴音郭楞蒙古自治州",652900:"阿克苏地区",653e3:"克孜勒苏柯尔克孜自治州",653100:"喀什地区",653200:"和田地区",654e3:"伊犁哈萨克自治州",654200:"塔城地区",654300:"阿勒泰地区",659001:"石河子市",659002:"阿拉尔市",659003:"图木舒克市",659004:"五家渠市",659005:"北屯市",659006:"铁门关市",659007:"双河市",659008:"可克达拉市",659009:"昆玉市"}},{id:71e4,name:"台湾省",alias:"台湾",type:0,cities:{710100:"台北市",710200:"高雄市",710300:"基隆市",710400:"台中市",710500:"台南市",710600:"新竹市",710700:"嘉义市",710900:"台北县",711e3:"宜兰县",711100:"桃园县",711200:"新竹县",711300:"苗栗县",711400:"台中县",711500:"彰化县",711600:"南投县",711700:"云林县",711800:"嘉义县",711900:"台南县",712e3:"高雄县",712100:"屏东县",712200:"澎湖县",712300:"台东县",712400:"花莲县"}},{id:1e6,name:"海外",alias:"海外",type:3,cities:{1000100:"阿尔及利亚",1000200:"阿根廷",1000300:"阿联酋",1000400:"埃及",1000500:"爱尔兰",1000600:"奥地利",1000700:"澳大利亚",1000800:"巴哈马",1000900:"巴基斯坦",1001e3:"巴西",1001100:"白俄罗斯",1001200:"比利时",1001300:"冰岛",1001400:"波兰",1001500:"玻利维亚",1001600:"伯利兹",1001700:"朝鲜",1001800:"丹麦",1001900:"德国",1002e3:"俄罗斯",1002100:"厄瓜多尔",1002200:"法国",1002300:"菲律宾",1002400:"芬兰",1002500:"哥伦比亚",1002600:"古巴",1002700:"关岛",1002800:"哈萨克斯坦",1002900:"韩国",1003e3:"荷兰",1003100:"加拿大",1003200:"加纳",1003300:"柬埔寨",1003400:"捷克",1003500:"卡塔尔",1003600:"科威特",1003700:"克罗地亚",1003800:"肯尼亚",1003900:"老挝",1004e3:"卢森堡",1004100:"罗马尼亚",1004200:"马尔代夫",1004300:"马来西亚",1004400:"美国",1004500:"蒙古",1004600:"孟加拉",1004700:"秘鲁",1004800:"缅甸",1004900:"摩洛哥",1005e3:"墨西哥",1005100:"南非",1005200:"尼日利亚",1005300:"挪威",1005400:"葡萄牙",1005500:"日本",1005600:"瑞典",1005700:"瑞士",1005800:"沙特阿拉伯",1005900:"斯里兰卡",1006e3:"苏丹",1006100:"泰国",1006200:"坦桑尼亚",1006300:"土耳其",1006400:"委内瑞拉",1006500:"乌克兰",1006600:"西班牙",1006700:"希腊",1006800:"新加坡",1006900:"新西兰",1007e3:"匈牙利",1007100:"伊拉克",1007200:"伊朗",1007300:"以色列",1007400:"意大利",1007500:"印度",1007600:"印度尼西亚",1007700:"英国",1007800:"越南",1007900:"智利",101e4:"其他"}}];function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Je=function(e){var t=e.city,n=e.province,l=e.handleEdit,i=Me((0,r.useState)((function(){var e;return(null===(e=ze.find((function(e){return e.id===n})))||void 0===e?void 0:e.cities)||{}})),2),c=i[0],o=i[1],u=(0,r.useCallback)((function(e){var t=e.target,n=Me(t.selectedOptions,1)[0];l("province",Number(t.value)),o(JSON.parse(n.dataset.cities))}),[]),s=(0,r.useCallback)((function(e){var t=e.target;l("city",Number(t.value))}),[]);return a().createElement("div",{className:"grid gap-2 grid-cols-3"},a().createElement(Re,{value:n,onChange:u},ze.map((function(e){var t=e.id,n=e.name,r=e.cities;return a().createElement("option",{value:t,key:t,"data-cities":JSON.stringify(r)},n)}))),a().createElement(Re,{value:t,onChange:s},Object.entries(c).map((function(e){var t=Me(e,2),n=t[0],r=t[1];return a().createElement("option",{value:n,key:n},r)}))))};const $e=(0,r.memo)(Je);var Ge=n(8548),He=function(e){var t=e.text,n=void 0===t?"":t,r=e.children;return a().createElement("div",{className:"row flex"},a().createElement("div",{className:"leading-8 w-12"},n?"".concat(n,"："):""),a().createElement("div",{className:"flex-1"},r))};const Qe=(0,r.memo)(He);var qe=["保密","男","女"],Be=function(e){var t=e.gender,n=e.handleEdit;return a().createElement("div",null,qe.map((function(e,r){return a().createElement("label",{htmlFor:e,key:e,className:"gender"},a().createElement("input",{type:"radio",className:"hidden",name:"gender",id:e,checked:t===r,onChange:function(){return n("gender",r)}}),a().createElement("i",{className:"ico flex-center"}),a().createElement("span",null,e))})))};const Ye=(0,r.memo)(Be);var Ke=n(2611);function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function We(e,t,n,r,a,l,i){try{var c=e[l](i),o=c.value}catch(e){return void n(e)}c.done?t(o):Promise.resolve(o).then(r,a)}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var et=function(){var e,t,n=(0,v.T)(),c=(0,Ge.p)(),o=(0,i.fF)(),s=o.data,m=o.isLoading,d=Xe((0,i.ti)(),2),f=d[0],p=(d[1].isLoading,(null==s?void 0:s.profile)||{}),y=Xe((0,V.x)({nickname:"",signature:"",gender:0,birthday:0,province:0}),2),E=y[0],h=y[1];(0,r.useEffect)((function(){m||h((0,Ke.cloneDeep)(p))}),[m]);var b,x,N=Xe((0,r.useState)(!0),2),w=N[0],k=N[1],_=(b=F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={gender:E.gender,birthday:E.birthday,nickname:E.nickname,province:E.province,city:E.city,signature:E.signature},e.next=4,f(t);case 4:if(200===e.sent.data.code){e.next=7;break}return e.abrupt("return");case 7:k(!0),c("修改个人资料成功"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),x=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=b.apply(e,t);function l(e){We(a,n,r,l,i,"next",e)}function i(e){We(a,n,r,l,i,"throw",e)}l(void 0)}))},function(){return x.apply(this,arguments)}),S=function(e,t){h((function(n){n[e]=t}))};return(0,r.useEffect)((function(){k(JSON.stringify(p)===JSON.stringify(E))}),[E]),301===(null==s?void 0:s.code)?null:m?a().createElement("div",{className:"flex-center w-full h-full"},a().createElement(u.Z,null)):a().createElement("div",null,a().createElement("div",{className:"h1 ui_header"},"编辑个人信息"),a().createElement("div",{className:"flex px-8 py-5 gap-x-20"},a().createElement("div",{className:"flex flex-1 flex-col gap-5"},a().createElement(Qe,{text:"昵称"},a().createElement("div",{className:"value"},a().createElement("input",{type:"text",value:E.nickname,className:"h-8 block w-full px-2.5 border rounded",onInput:function(e){var t=e.target;return S("nickname",t.value)}}))),a().createElement(Qe,{text:"介绍"},a().createElement("div",{className:"border flex-1"},a().createElement("div",{className:"signature rounded flex flex-col items-end"},a().createElement("textarea",{value:E.signature,className:"w-full outline-0 py-1 px-2.5 border-0 h-12 resize-none",onInput:function(e){var t=e.target;return S("signature",t.value)}}),a().createElement("div",{className:g()("p-1",{ui_red:(null==E||null===(e=E.signature)||void 0===e?void 0:e.length)>300})},300-(null==E||null===(t=E.signature)||void 0===t?void 0:t.length))))),a().createElement(Qe,{text:"性别"},a().createElement(Ye,{gender:E.gender,handleEdit:S})),a().createElement(Qe,{text:"生日"},a().createElement(Ze,{birthday:E.birthday,handleEdit:S})),a().createElement(Qe,{text:"地区"},a().createElement($e,{province:E.province,city:E.city,handleEdit:S})),a().createElement(Qe,null,a().createElement("div",{className:"value mt-5"},a().createElement("div",{className:"actions flex gap-5 text-sm"},a().createElement("button",{type:"button",className:g()("flex-center border px-3 h-8 rounded-full ui_theme_bg_color text-white",w&&"opacity-60"),disabled:w,onClick:_},"保 存"),a().createElement(l.Link,{to:"./",className:"flex-center border px-3 h-8 rounded-full"},"取 消"))))),a().createElement("div",null,a().createElement("div",{className:"border rounded overflow-hidden w-40 h-40"},a().createElement("img",{className:"",src:E.avatarUrl,alt:""})),a().createElement("label",{htmlFor:"avatar",className:"border cursor-pointer hover:bg-gray-50 flex-center h-8 m-auto mt-5 px-3 rounded-full update w-min whitespace-nowrap"},a().createElement("input",{onChange:function(e){var t=e.target,r=new FileReader,a=Xe(t.files,1)[0];a&&(r.readAsDataURL(a),r.onload=function(e){n((0,le.setDialogUploadAvatarShow)({avatar:e.target.result}))})},type:"file",name:"",id:"avatar",hidden:!0,accept:"image/bmp,image/gif,image/jpg,image/svg,image/png,image/webp,image/ico,image/svgz,image/tif,image/jpeg,image/jfif,image/pjpeg,image/pjp,image/tiff,image/xbm"}),"修改头像"),a().createElement(Le.Z,null))))};const tt=(0,r.memo)(et);var nt=function(){var e=(0,l.useParams)().uid,t=(0,i.$w)({uid:e}),n=t.data,r=t.isLoading;console.log(n);var c=(null==n?void 0:n.bindings)||[],o=null==n?void 0:n.code;return r?a().createElement(u.Z,null):301===o?"登录查看":a().createElement(a().Fragment,null,a().createElement("div",{className:"h1 ui_header"},"绑定账号"),a().createElement("div",{className:"px-8"},a().createElement("div",{className:"domUser_binding_phone"},a().createElement("div",{className:"text-sm text-gray-500"},"注册账号"),a().createElement("div",{className:"domUser_binding_bar domUser_binding_box"},a().createElement("div",{className:"ico"},a().createElement(J._i,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"手机"),a().createElement("div",null,"使用手机号注册：",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 11===e.length?e.replace(RegExp("(?<=\\d{3})(\\d{4})(?=\\d{4})"),"****"):e}(JSON.parse(c[0].tokenJsonStr).cellphone),"   ",a().createElement("button",{type:"button",className:"ui_link"},"更换手机"))),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"修改密码")))),a().createElement("div",{className:"domUser_binding_three mt-10"},a().createElement("div",{className:"text-sm text-gray-500"},"其他登录方式"),a().createElement("div",{className:"domUser_binding_list"},a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(J.Pl,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"网易邮箱账号")),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"修改密码"))),a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(J.PT,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"微信"),a().createElement("div",null,"ID：",JSON.parse(c[4].tokenJsonStr).nickname)),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"已绑定"))),a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(J.B3,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"QQ"),a().createElement("div",null,"ID：",JSON.parse(c[3].tokenJsonStr).nickname)),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"已绑定"))),a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(J.Hl,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"新浪微博"),a().createElement("div",null,"ID：",JSON.parse(c[1].tokenJsonStr).name)),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"寻找并邀请好友"),a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"已绑定")))))))};const rt=(0,r.memo)(nt),at=function(){return a().createElement(l.Routes,null,a().createElement(l.Route,{path:"/:uid",element:a().createElement(f,null)},a().createElement(l.Route,{index:!0,element:a().createElement(B,null)}),a().createElement(l.Route,{path:"Dynamic",element:a().createElement(re,null)}),a().createElement(l.Route,{path:"Follow",element:a().createElement(Ee,null)}),a().createElement(l.Route,{path:"Fans",element:a().createElement(Ne,null)}),a().createElement(l.Route,{path:"Fans",element:a().createElement(Ne,null)}),a().createElement(l.Route,{path:"Record",element:a().createElement(Oe,null)}),a().createElement(l.Route,{path:"Binding",element:a().createElement(rt,null)})),a().createElement(l.Route,{path:"Edit",element:a().createElement(tt,null)}))}}}]);
//# sourceMappingURL=User.js.map?version=adc8f0ac