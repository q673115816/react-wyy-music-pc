"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[323],{8148:(e,t,n)=>{n.r(t),n.d(t,{default:()=>He});var r=n(7363),a=n.n(r),l=n(6711),c=n(8690),i=(0,r.createContext)({profile:{}}),o=i.Provider,s=n(4719);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}var d=function(){var e=(0,l.useParams)().uid,t=(0,c.mI)({uid:e}),n=t.data;return t.isLoading?a().createElement(s.Z,null):a().createElement("div",{className:"overflow-auto h-full flex-auto"},a().createElement(o,{value:m({},n)},a().createElement(l.Outlet,null)))};const f=(0,r.memo)(d);var v=n(4837),p=n(6719),y=n(4184),E=n.n(y),h=n(976);function b(){return a().createElement("div",{className:"cartoon hb r"},a().createElement("div",{className:"ears"}),a().createElement("div",{className:"face r c"}),a().createElement("div",{className:"nose ha hb"}),a().createElement("div",{className:"forehead ha c"}),a().createElement("div",{className:"eyes r"}),a().createElement("div",{className:"pupil"}),a().createElement("div",{className:"pupil"}),a().createElement("div",{className:"smile"}),a().createElement("div",{className:"smile"}),a().createElement("div",{className:"snout ha hb"}),a().createElement("div",{className:"mouth ha hb"}),a().createElement("div",{className:"whiskers r"}))}var g=function(){return a().createElement("div",{className:"item"},a().createElement(l.Link,{to:"record"},a().createElement("div",{className:"cover relative border aspect-square"},a().createElement("div",{className:"absolute inset-0"},a().createElement(b,null)),a().createElement("button",{type:"button",className:"playArrow opacity-0 group-hover:opacity-100 transition-opacity duration-500 ui_themeColor absolute right-0 bottom-0 m-2 bg-white bg-opacity-90 rounded-full p-2"},a().createElement(p.IconPlayerPlay,{size:22,className:"fill-current"})))),a().createElement("div",{className:"footer mt-2 text-sm"},a().createElement(l.Link,{to:"record"},"听歌排行")))},N=function(e){var t=e.list,n=void 0===t?[]:t,r=(0,v.C)((function(e){return e.account})).profile,c=(0,l.useParams)().uid;return a().createElement("div",{className:"domUserDetail_list px-8 grid grid-cols-4 gap-5"},(null==r?void 0:r.userId)===Number(c)&&a().createElement(g,null),n.map((function(e){return a().createElement(h.Z,{item:e,key:e.id})})))};const x=(0,r.memo)(N);var w=n(8360),k=function(e){var t=e.list,n=void 0===t?[]:t;return a().createElement("div",null,n.map((function(e,t){return a().createElement("div",{key:e.id,className:E()("hover:bg-gray-100 pl-8 py-3 flex items-center",{"bg-gray-50":t%2==0})},a().createElement(l.Link,{to:"/playlist/music/".concat(e.id),className:"rounded overflow-hidden relative group"},a().createElement("img",{src:"".concat(e.coverImgUrl,"?param=60y60"),alt:""}),a().createElement("button",{type:"button",className:"absolute rounded-full bg-white bg-opacity-90 inset-0 flex-center m-auto w-6 h-6 ui_themeColor opacity-0 group-hover:opacity-100 transition-opacity duration-500"},a().createElement(p.IconPlayerPlay,{size:16,className:"fill-current"}))),a().createElement(l.Link,{to:"/playlist/music/".concat(e.id),className:"flex-auto w-0 px-3 truncate text-sm ui_text_black_hover"},e.name),a().createElement("span",{className:"px-3 count text-gray-400",style:{width:"".concat(1/7*100,"%")}},"歌曲：",e.trackCount),a().createElement("span",{className:"px-3 creator truncate text-gray-300",style:{width:"".concat(1/7*100,"%")}},"by",a().createElement(l.Link,{to:"/user/".concat(e.userId),className:"ui_text_gray_hover"},e.creator.nickname)),a().createElement("button",{type:"button",className:"px-3 subscribed flex items-center ui_text_gray_hover",style:{width:"".concat(1/7*100,"%")}},a().createElement(p.IconFolderPlus,{size:16}),e.subscribedCount),a().createElement("button",{type:"button",className:"px-3 playCount flex items-center ui_text_gray_hover",style:{width:"".concat(1/7*100,"%")}},a().createElement(p.IconPlayerPlay,{size:16}),(0,w.LU)(e.playCount)))})))};const _=(0,r.memo)(k);var S=function(){return a().createElement("div",null)};const C=(0,r.memo)(S);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=[["Grid","大图模式",p.IconLayoutGrid],["List","列表模式",p.IconLayoutList],["Column","图列模式",p.IconList]],U={Grid:x,List:_,Column:C},P=function(e){var t=e.list,n=void 0===t?[]:t,l=A((0,r.useState)("Grid"),2),c=l[0],i=l[1];return a().createElement("div",{className:"pb-10"},a().createElement("div",{className:"domUserDetail_headerBar flex items-center px-8 pb-4"},a().createElement("span",{className:"name text-base font-bold"},"歌单"),a().createElement("div",{className:"layouts ml-auto flex overflow-hidden rounded space-x-0.5"},j.map((function(e){var t=A(e,3),n=t[0],r=t[1],l=t[2];return a().createElement("button",{key:n,type:"button",className:E()("layout bg-gray-100 h-5 w-6 flex-center",c===n?"bg-gray-500 text-white":"hover:bg-gray-200"),onClick:function(){return i(n)},title:r},a().createElement(l,{size:16}))})))),(0,r.createElement)(U[c],{list:n}))};const L=(0,r.memo)(P);var O=function(){var e=(0,l.useParams)().uid,t=(0,c.bP)({uid:e}),n=t.data,r=t.isLoading,i=(null==n?void 0:n.playlist)||[],o=i.filter((function(t){return String(t.userId)===e})),u=i.filter((function(t){return String(t.userId)!==e}));return r?a().createElement("div",{className:"flex-center"},a().createElement(s.Z,null)):a().createElement("div",{className:"domUserDetail_main"},a().createElement(L,{list:o}),a().createElement(L,{list:u}))};const R=(0,r.memo)(O);var D=n(5666),z=n.n(D),T=n(2429),Z=n(6720);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}var J=function(){var e,t,n,o,s=(0,l.useParams)().uid,u=(n=(0,c.pA)(),o=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}}(n,o)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],m=(0,r.useContext)(i),d=m.profile,f=m.code,y=m.bindings,E=(0,v.C)((function(e){return e.common})).isLogin,h=(0,v.C)((function(e){return e.account})),b=(0,r.useMemo)((function(){return!!E&&String(h.profile.userId)===s}),[E]),g=(e=z().mark((function e(t){var n;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.followed,e.prev=1,e.next=4,u({id:t,t:!0===n?0:1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})),t=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){M(l,r,a,c,i,"next",e)}function i(e){M(l,r,a,c,i,"throw",e)}c(void 0)}))},function(e){return t.apply(this,arguments)});return f?a().createElement("div",{className:"domUserDetail_header flex p-8"},a().createElement("div",{className:"avatar w-44 h-44 rounded-full overflow-hidden flex-none"},a().createElement("img",{src:"".concat(null==d?void 0:d.avatarUrl,"?param=180y180"),alt:"",className:"w-full h-ull object-cover block"})),a().createElement("div",{className:"ml-5 flex-auto"},a().createElement("div",{className:"font-bold text-xl"},null==d?void 0:d.nickname),a().createElement("div",{className:"flex items-center py-2"},a().createElement("div",{className:"left flex-center"},11===(null==d?void 0:d.vipType)&&a().createElement(a().Fragment,null,a().createElement("a",{href:"https://music.163.com/#/member"},"黑胶会员")," "),(null==d?void 0:d.identify)&&a().createElement("span",{className:"authentication",title:d.identify.imageDesc},a().createElement("span",{className:"w-4 h-4 ml-1"},a().createElement("img",{className:"ui_containimg",src:d.identify.imageUrl,alt:""})),d.identify.imageDesc),a().createElement("a",{className:"w-8 h-4 flex-center rounded-full mr-2 bg-gray-200",href:"https://music.163.com/#/user/level"},"Lv",d.level),a().createElement(T.ZP,{gender:null==d?void 0:d.gender,size:16})),a().createElement("div",{className:"right ml-auto flex-center"},b?a().createElement(l.Link,{to:"edit",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center"},a().createElement(p.IconEdit,{size:18,stroke:1.5}),"  编辑个人信息"):a().createElement(a().Fragment,null,a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center"},a().createElement(p.IconMail,{size:20,stroke:1})," 发私信"),(null==d?void 0:d.followed)?a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:function(){return g(null==d?void 0:d.userId)}},a().createElement(p.IconCheck,{size:16}),"  已关注"):a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:function(){return g(null==d?void 0:d.userId)}},a().createElement(p.IconPlus,{size:16,style:{color:"#EC4141"}}),"  关注")))),a().createElement("hr",null),a().createElement("div",{className:"text-center divide-x flex mt-5"},a().createElement(l.Link,{to:"dynamic",className:"w-20"},a().createElement("div",{className:"text-base"},null==d?void 0:d.eventCount),a().createElement("div",null,"动态")),a().createElement(l.Link,{to:"follow",className:"w-20"},a().createElement("div",{className:"text-base"},null==d?void 0:d.follows),a().createElement("div",null,"关注")),a().createElement(l.Link,{to:"fans",className:"w-20"},a().createElement("div",{className:"text-base"},null==d?void 0:d.followeds),a().createElement("div",null,"粉丝"))),a().createElement("div",{className:"leading-6 mt-2 text-sm"},a().createElement("div",null,a().createElement("span",null,"社交网络："),null==y?void 0:y.map((function(e){if(e.url)return 2===e.type?a().createElement("a",{href:e.url,key:e.url},a().createElement(Z.Hl,{size:16,active:!0,key:e.url})):null}))),a().createElement("div",null,a().createElement("span",null,"个人介绍："),a().createElement("span",{className:"text-gray-400",style:{whiteSpace:"pre-wrap"}},(null==d?void 0:d.signature)||"暂无介绍"))))):null};const $=(0,r.memo)(J);var H=function(){var e=(0,v.C)((function(e){return e.common})).isLogin,t=(0,r.useContext)(i).code;return e?404===t?a().createElement("div",{className:"flex"},"用户不存在"):a().createElement("div",{className:"domUserDetail"},a().createElement($,null),a().createElement(R,null)):a().createElement("div",null,"查看个人信息请先登录")};const G=(0,r.memo)(H);var B=n(7794),Q=n(534),q=n(57);function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}var X=function(){var e,t,n=(0,l.useParams)().uid,o=void 0===n?"":n,u=K((0,q.x)([]),2),m=u[0],d=u[1],f=(0,r.useRef)(-1),v=(0,r.useContext)(i).profile,p=K((0,c.ne)(),2),y=p[0],E=(p[1].isLoading,(0,r.useRef)(!0)),h=(0,r.useRef)(null),b=(0,r.useRef)(null),g=(e=z().mark((function e(){var t,n,r,a;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.current){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,y({uid:o,lasttime:f.current});case 5:t=e.sent.data,n=t.events,r=t.more,a=t.lasttime,E.current=r,f.current=a,d((function(e){var t,r;(t=e).push.apply(t,function(e){if(Array.isArray(e))return Y(e)}(r=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||W(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})),t=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){V(l,r,a,c,i,"next",e)}function i(e){V(l,r,a,c,i,"throw",e)}c(void 0)}))},function(){return t.apply(this,arguments)});return(0,Q.Z)(g,h,b),a().createElement("div",{className:"h-full overflow-auto",ref:h},a().createElement("div",{className:"h1 ui_header"},"".concat(v.nickname,"的动态")),a().createElement("div",{className:"px-8"},m.length>0?a().createElement(B.Z,{list:m}):a().createElement("div",{className:"empty"},"暂无动态")),a().createElement("div",{ref:b},E.current&&a().createElement(s.Z,null)))};const ee=(0,r.memo)(X);var te=n(9266),ne=n(5583),re=n(4766);const ae=(0,r.memo)((function(e){var t,n=e.item,r=e.handleClick,c=e.handleLetter,i=e.isSelf;return a().createElement("div",{className:"item w-96 flex p-4 hover:bg-gray-50",key:n.userId},a().createElement(l.Link,{to:"/user/".concat(n.userId),className:"relative avatar w-24 h-24 rounded-full border flex-none"},a().createElement("img",{className:"rounded-full",src:"".concat(n.avatarUrl,"?param=100y100"),alt:""}),(null==n||null===(t=n.avatarDetail)||void 0===t?void 0:t.identityIconUrl)&&a().createElement("div",{className:"ico w-6 h-6 absolute right-0 bottom-0"},a().createElement("img",{src:n.avatarDetail.identityIconUrl,alt:""}))),a().createElement("div",{className:"content flex-auto w-0 pl-2"},a().createElement("div",{className:"contain mt-4"},a().createElement("div",{className:"left"},a().createElement(l.Link,{className:"nickname ui_text_black_hover truncate pr-3 w-56",to:"/user/".concat(n.userId)},n.nickname))),a().createElement("div",{className:"contain flex items-baseline"},a().createElement("div",{className:"truncate pr-3 text-gray-500 w-56"},n.signature),a().createElement("div",{className:"right flex-none"},function(e){var t=e.handleLetter,n=e.handleClick,r=e.id,l=e.name;switch(!0){case t&&e.isSelf:return a().createElement("button",{onClick:function(){return t(r,l)},type:"button",className:"follow border flex-center rounded-full w-16 h-6 hover:bg-gray-200"},a().createElement(p.IconPlus,{size:16,className:"text-red-500"})," 私信");case e.followed:return a().createElement("span",{className:"follow border text-gray-500 flex-center rounded-full w-16 h-6"},"已关注");default:return a().createElement("button",{onClick:function(){return n(r)},type:"button",className:"follow border flex-center rounded-full w-16 h-6 hover:bg-gray-200"},a().createElement(p.IconPlus,{size:16,className:"text-red-500"})," 关注")}}({handleLetter:c,handleClick:r,isSelf:i,followed:n.followed,id:n.userId,name:n.nickname}))),a().createElement("div",{className:"info divide-x text-gray-500 mt-1"},a().createElement("span",{className:"pr-6"}," 歌单：".concat(n.playlistCount)),a().createElement("span",{className:"pl-6"},"粉丝：".concat(n.followeds)))))}));var le=function(e){var t=e.list,n=void 0===t?[]:t,r=e.handleClick,l=e.handleLetter,c=e.isSelf,i=e.children;return a().createElement(a().Fragment,null,0===n.length?i[0]:a().createElement("div",{className:"flex flex-wrap justify-between"},n.map((function(e){return a().createElement(ae,{item:e,handleClick:r,isSelf:c,handleLetter:l,key:e.userId})}))),i[1])};const ce=(0,r.memo)(le);function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function se(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){oe(l,r,a,c,i,"next",e)}function i(e){oe(l,r,a,c,i,"throw",e)}c(void 0)}))}}function ue(e){throw e}function me(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||de(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}var fe=function(){var e,t,n,c=(0,r.useContext)(i).profile,o=(0,l.useParams)().uid,u=(0,v.T)(),m=(t=(0,q.x)([]),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}}(t,n)||de(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=m[0],f=m[1],p=(0,v.C)((function(e){return e.account})),y=(0,r.useMemo)((function(){return p.profile.userId===Number(o)}),[o]),E=(0,r.useRef)(null),h=(0,r.useRef)(null),b=(0,r.useRef)(0),g=(0,r.useRef)(!0),N=(e=se(z().mark((function e(){var t,n,r;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,te.qm)({uid:o,limit:30,offset:b.current});case 5:t=e.sent,n=t.follow,r=t.more,b.current+=30,g.current=r,f((function(e){return me(e).concat(me(n))})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])}))),function(){return e.apply(this,arguments)}),x=(0,r.useCallback)(function(){var e=se(z().mark((function e(t){var n;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,te.iQ)({id:t,t:1});case 3:n=null!==(n=e.sent)?n:ue(new TypeError("Cannot destructure undefined")),f((function(e){e[e.findIndex((function(e){return e.userId===t}))].followed=!0})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,Q.Z)(N,E,h),a().createElement("div",{className:"domUser_followlist h-full overflow-auto",ref:E},a().createElement("div",{className:"h1 domUser_subpage_header ui_header"},a().createElement(l.Link,{to:"./"},null==c?void 0:c.nickname),"的关注"),a().createElement("div",{className:""},a().createElement(ce,{isSelf:y,list:d,handleClick:x,handleLetter:function(e,t){u((0,ne.setPopupLetterToggle)()),u((0,re.setMsgPrivateHistory)({uid:e,nickname:t,showMsgPrivateHistory:!0}))}},a().createElement("div",{className:"empty"},"还没有关注")),a().createElement("div",{ref:h}),g.current&&a().createElement("div",{className:"flex-center"},a().createElement(s.Z,null))))};const ve=(0,r.memo)(fe);function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function Ee(e){throw e}var he=function(){var e,t,n,o,s=(0,l.useParams)().uid,u=(0,r.useContext)(i).profile,m=(n=(0,c.pA)(),o=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}}(n,o)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],d=(0,c.Ho)({uid:s}),f=d.data,v=(d.isLoading,(null==f?void 0:f.followeds)||[]),p=(0,r.useCallback)((e=z().mark((function e(t){var n;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({id:t,t:1});case 3:n=null!==(n=e.sent)?n:Ee(new TypeError("Cannot destructure undefined")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),t=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){ye(l,r,a,c,i,"next",e)}function i(e){ye(l,r,a,c,i,"throw",e)}c(void 0)}))},function(e){return t.apply(this,arguments)}),[s]);return a().createElement("div",{className:"domUser_followlist"},a().createElement("div",{className:"h1 ui_header"},a().createElement(l.Link,{to:"./"},u.nickname),"的粉丝"),a().createElement("div",{className:"domUser_followlist_main"},a().createElement(ce,{list:v,handleClick:p},a().createElement("div",{className:"empty"},"还没有粉丝"))))};const be=(0,r.memo)(he);var ge=n(7264),Ne=n(2837),xe=n(6129),we=n(2e3),ke=n(5854);function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Se(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ie=function(){var e=(0,l.useParams)().uid,t=(0,v.C)((function(e){return e.account})).profile;if((null==t?void 0:t.userId)!==Number(e))return a().createElement(l.Navigate,{to:"/"});var n,c,i=Ce((0,r.useState)(1),2),o=i[0],s=i[1],u=Ce((0,r.useState)([]),2),m=u[0],d=u[1],f=(n=z().mark((function t(){var n,r,a;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,te.Uz)({uid:e,type:o});case 3:n=t.sent,r=n.allData,a=n.weekData,d(1===o?a:r),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})),c=function(){var e=this,t=arguments;return new Promise((function(r,a){var l=n.apply(e,t);function c(e){Se(l,r,a,c,i,"next",e)}function i(e){Se(l,r,a,c,i,"throw",e)}c(void 0)}))},function(){return c.apply(this,arguments)});return(0,r.useEffect)((function(){f()}),[o,e]),a().createElement("div",{className:"h-full flex flex-col"},a().createElement("div",{className:"flex-none"},a().createElement("div",{className:"h1 ui_header"},"我的听歌排行"),a().createElement("div",{className:"px-8 pb-2 border-b space-x-8 text-sm"},a().createElement("button",{onClick:function(){return s(1)},type:"button",className:E()("domUser_record_nav_link",{"font-bold":1===o})},"最近一周"),a().createElement("button",{onClick:function(){return s(0)},type:"button",className:E()({"font-bold":0===o})},"所有时间"))),a().createElement("div",{className:"overflow-auto h-0 flex-auto domUser_record_main",style:{"--ui_grid_template":"36px / 24px 24px 24px 10fr 1fr"}},a().createElement("div",{className:"domUser_record_list"},m.map((function(e,t){var n=e.song,r=e.playCount;return a().createElement(ge.Z,{item:n,key:n.id,schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","下载"]]},a().createElement("div",{tabIndex:"2",className:E()("domUser_record_item focus:outline-none focus:bg-gray-200 items-center hover:bg-gray-100 ui_grid_template px-8 grid",t%2==1&&"bg-gray-50")},a().createElement("div",{className:"index text-gray-400"},a().createElement(Ne.Z,{id:n.id,index:t})),a().createElement("div",{className:"heart"},a().createElement(xe.Z,{id:n.id})),a().createElement("div",{className:"download"},a().createElement(we.Z,null)),a().createElement("div",{className:"name"},a().createElement(ke.Z,{item:n})),a().createElement("div",{className:"playCount text-gray-400"},r,"次")))})))))};const Ae=(0,r.memo)(Ie);var je=n(7980),Ue=n.n(je),Pe=n(1624),Le=n(7270);function Oe(){var e=(0,Pe.useSelector)((function(e){return e.mask})),t=e.dialogUploadAvatarVisibility,n=e.avatar;return t?(console.log(n),a().createElement(Le.Z,{id:"dialogUploadAvatar",title:"上传头像"},a().createElement("div",{className:"main"},a().createElement("div",{className:"content flex justify-center"},a().createElement("div",{className:"fullSize flex-center bg-black rounded overflow-hidden"},a().createElement("img",{className:"w-full h-full object-contain",src:n,alt:""})),a().createElement("div",{className:"aside ml-8"},a().createElement("div",{className:"bigSize border rounded w-24 h-24"},a().createElement("img",{src:n,alt:""})),a().createElement("div",{className:"text-gray-400 mt-1"},"大尺寸封面"),a().createElement("div",{className:"smallSize border rounded w-16 h-16"},a().createElement("img",{src:n,alt:""})),a().createElement("div",{className:"text-gray-400 mt-1"},"小尺寸封面"))),a().createElement("div",{className:"actions pb-4 pt-6 space-x-4 flex justify-center"},a().createElement("button",{type:"button",className:"flex-center border px-3 h-8 rounded-full"},"重新选择"),a().createElement("button",{type:"button",className:"flex-center text-white ui_theme_bg_color px-3 h-8 rounded-full"},"保持并关闭"))))):null}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e){var t,n,l=e.birthday,c=void 0===l?"":l,i=e.handleEdit,o=(0,r.useRef)((new Date).getFullYear()),s=(0,r.useRef)(new Date(c).getFullYear()),u=(0,r.useRef)(new Date(c).getMonth()),m=(0,r.useRef)(new Date(c).getDate()),d=(t=(0,r.useState)(),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],v=d[1],p=function(){i("birthday",new Date("".concat(s.current,"/").concat(u.current+1,"/").concat(m.current)).valueOf())};return(0,r.useEffect)((function(){!function(){switch(Number(u.current)){case 1:return void(s.current%4==0&&s.current%100!=0||s.current%400==0?v(29):v(28));case 0:case 2:case 4:case 6:case 7:case 9:case 11:return void v(31);default:v(30)}}()}),[u.current]),a().createElement(a().Fragment,null,a().createElement("select",{className:"select",value:s.current,onChange:function(e){s.current=e.target.value,u.current=0,m.current=1,p()}},Object.keys(Array(100).fill(0)).reverse().map((function(e){return a().createElement("option",{key:o.current-e,value:o.current-e},o.current-e,"年")}))),a().createElement("select",{className:"select",value:u.current,onChange:function(e){u.current=e.target.value,m.current=1,p()}},Object.keys(Array(12).fill(0)).map((function(e){return a().createElement("option",{key:e,value:e},Number(e)+1,"月")}))),a().createElement("select",{className:"select",value:m.current,onChange:function(e){m.current=e.target.value,p()}},Object.keys(Array(f).fill(0)).map((function(e){return a().createElement("option",{key:Number(e)+1,value:Number(e)+1},Number(e)+1,"日")}))))}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function Ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){Te(l,r,a,c,i,"next",e)}function i(e){Te(l,r,a,c,i,"throw",e)}c(void 0)}))}}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Me=(0,r.memo)((function(){var e,t=(0,l.useParams)().uid,n=(0,Pe.useDispatch)(),c=Fe((0,r.useState)(!0),2),i=c[0],o=c[1],u=Fe((0,r.useState)(),2),m=u[0],d=u[1],f=Fe((0,r.useState)(),2),v=f[0],p=f[1],y=Fe((0,r.useState)(""),2),h=y[0],b=(y[1],Fe((0,r.useState)(!0),2)),g=b[0],N=b[1],x=(e=Ze(z().mark((function e(){var n,r,a;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,te.um)({uid:t});case 3:if(n=e.sent,r=n.code,a=n.profile,200===r){e.next=8;break}return e.abrupt("return");case 8:d(a),p((function(){return Ue()(a,(function(){}))})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:return e.prev=15,o(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])}))),function(){return e.apply(this,arguments)}),w=function(){var e=Ze(z().mark((function e(){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={gender:v.gender,birthday:v.birthday,nickname:v.nickname,province:v.province,city:v.city,signature:v.signature},e.next=4,(0,te.of)(t);case 4:if(200===e.sent.code){e.next=7;break}return e.abrupt("return");case 7:N(!0),d(v),n((0,ne.setToast)("修改个人资料成功")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(e,t){p(Ue()((function(n){n[e]=t})))};return(0,r.useEffect)((function(){x()}),[t]),(0,r.useEffect)((function(){N(JSON.stringify(m)===JSON.stringify(v))}),[v]),i?a().createElement("div",{className:"flex-center w-full h-full"},a().createElement(s.Z,null)):a().createElement("div",{className:"domUserEdit"},a().createElement("div",{className:"h1 domUser_subpage_header ui_header"},"编辑个人信息"),a().createElement("div",{className:"domUserEdit_main"},a().createElement("div",{className:"left"},a().createElement("div",{className:"row"},a().createElement("div",{className:"key"},"昵称："),a().createElement("div",{className:"value"},a().createElement("input",{type:"text",value:v.nickname,className:"input",onChange:function(e){var t=e.target;return k("nickname",t.value)}}))),a().createElement("div",{className:"row"},a().createElement("div",{className:"key"},"介绍："),a().createElement("div",{className:"value"},a().createElement("div",{className:"signature"},a().createElement("textarea",{type:"text",value:v.signature,className:"textarea",onChange:function(e){var t=e.target;return k("signature",t.value)}}),a().createElement("div",{className:E()("signatureLength",{ui_red:h.length>300})},300-h.length)))),a().createElement("div",{className:"row"},a().createElement("div",{className:"key"},"性别："),a().createElement("div",{className:"value"},a().createElement("label",{htmlFor:"secret",className:"gender"},a().createElement("input",{type:"radio",className:"radio",name:"gender",id:"secret",checked:0===v.gender,onChange:function(){return k("gender",0)}}),a().createElement("i",{className:"ico flex-center"}),a().createElement("span",null,"保密")),a().createElement("label",{htmlFor:"male",className:"gender"},a().createElement("input",{type:"radio",className:"radio",name:"gender",id:"male",checked:1===v.gender,onChange:function(){return k("gender",1)}}),a().createElement("i",{className:"ico flex-center"}),a().createElement("span",null,"男")),a().createElement("label",{htmlFor:"famale",className:"gender"},a().createElement("input",{type:"radio",className:"radio",name:"gender",id:"famale",checked:2===v.gender,onChange:function(){return k("gender",2)}}),a().createElement("i",{className:"ico flex-center"}),a().createElement("span",null,"女")))),a().createElement("div",{className:"row"},a().createElement("div",{className:"key"},"生日："),a().createElement("div",{className:"value",style:{display:"flex",justifyContent:"space-between"}},a().createElement(De,{birthday:v.birthday,handleEdit:k}))),a().createElement("div",{className:"row"},a().createElement("div",{className:"key"},"地区："),a().createElement("div",{className:"value"},a().createElement("select",{name:"",id:"",className:"select"},a().createElement("option",{value:""})))),a().createElement("div",{className:"row"},a().createElement("div",{className:"key"}),a().createElement("div",{className:"value"},a().createElement("div",{className:"actions"},a().createElement("button",{type:"button",className:E()("ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full red",{disabled:g}),style:{marginRight:"2em"},disabled:g,onClick:w},"保 存"),a().createElement(l.Link,{to:"./",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"取 消"))))),a().createElement("div",{className:"right ml-20"},a().createElement("div",{className:"avatar border rounded overflow-hidden w-40 h-40"},a().createElement("img",{className:"",src:v.avatarUrl,alt:""})),a().createElement("label",{htmlFor:"avatar",className:"border cursor-pointer hover:bg-gray-50 flex-center h-8 m-auto mt-5 px-3 rounded-full update w-min whitespace-nowrap"},a().createElement("input",{onChange:function(e){var t=e.target,r=new FileReader,a=Fe(t.files,1)[0];a&&(r.readAsDataURL(a),r.onload=function(e){n((0,ne.setDialogUploadAvatarShow)({avatar:e.target.result}))})},type:"file",name:"",id:"avatar",hidden:!0,accept:"image/bmp,image/gif,image/jpg,image/svg,image/png,image/webp,image/ico,image/svgz,image/tif,image/jpeg,image/jfif,image/pjpeg,image/pjp,image/tiff,image/xbm"}),"修改头像"),a().createElement(Oe,null))))}));var Je=function(){var e=(0,l.useParams)().uid,t=(0,c.$w)({uid:e}),n=t.data,r=t.isLoading;console.log(n);var i=(null==n?void 0:n.bindings)||[],o=null==n?void 0:n.code;return r?a().createElement(s.Z,null):301===o?"登录查看":a().createElement(a().Fragment,null,a().createElement("div",{className:"h1 ui_header"},"绑定账号"),a().createElement("div",{className:"px-8"},a().createElement("div",{className:"domUser_binding_phone"},a().createElement("div",{className:"text-sm text-gray-500"},"注册账号"),a().createElement("div",{className:"domUser_binding_bar domUser_binding_box"},a().createElement("div",{className:"ico"},a().createElement(Z._i,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"手机"),a().createElement("div",null,"使用手机号注册：",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 11===e.length?e.replace(/(?<=\d{3})(\d{4})(?=\d{4})/,"****"):e}(JSON.parse(i[0].tokenJsonStr).cellphone),"   ",a().createElement("button",{type:"button",className:"ui_link"},"更换手机"))),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"修改密码")))),a().createElement("div",{className:"domUser_binding_three mt-10"},a().createElement("div",{className:"text-sm text-gray-500"},"其他登录方式"),a().createElement("div",{className:"domUser_binding_list"},a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(Z.Pl,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"网易邮箱账号")),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"修改密码"))),a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(Z.PT,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"微信"),a().createElement("div",null,"ID：",JSON.parse(i[4].tokenJsonStr).nickname)),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"已绑定"))),a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(Z.B3,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"QQ"),a().createElement("div",null,"ID：",JSON.parse(i[3].tokenJsonStr).nickname)),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"已绑定"))),a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(Z.Hl,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"新浪微博"),a().createElement("div",null,"ID：",JSON.parse(i[1].tokenJsonStr).name)),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"寻找并邀请好友"),a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"已绑定")))))))};const $e=(0,r.memo)(Je),He=function(){return a().createElement(l.Routes,null,a().createElement(l.Route,{path:"/:uid",element:a().createElement(f,null)},a().createElement(l.Route,{index:!0,element:a().createElement(G,null)}),a().createElement(l.Route,{path:"Dynamic",element:a().createElement(ee,null)}),a().createElement(l.Route,{path:"Follow",element:a().createElement(ve,null)}),a().createElement(l.Route,{path:"Fans",element:a().createElement(be,null)}),a().createElement(l.Route,{path:"Fans",element:a().createElement(be,null)}),a().createElement(l.Route,{path:"Record",element:a().createElement(Ae,null)}),a().createElement(l.Route,{path:"Edit",element:a().createElement(Me,null)}),a().createElement(l.Route,{path:"Binding",element:a().createElement($e,null)})))}}}]);
//# sourceMappingURL=User.js.map?version=4f46361d