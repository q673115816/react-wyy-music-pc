"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[323],{9521:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ge});var r=n(7363),a=n.n(r),l=n(6711),c=n(8690),o=(0,r.createContext)({profile:{}}),i=o.Provider,u=n(4719);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}var d=function(){var e=(0,l.useParams)().uid,t=(0,c.mI)({uid:e}),n=t.data;return t.isLoading?a().createElement(u.Z,null):a().createElement("div",{className:"overflow-auto h-full flex-auto"},a().createElement(i,{value:m({},n)},a().createElement(l.Outlet,null)))};const f=(0,r.memo)(d);var v=n(4837),p=n(6719),y=n(976);function E(){return a().createElement("div",{className:"cartoon hb r"},a().createElement("div",{className:"ears"}),a().createElement("div",{className:"face r c"}),a().createElement("div",{className:"nose ha hb"}),a().createElement("div",{className:"forehead ha c"}),a().createElement("div",{className:"eyes r"}),a().createElement("div",{className:"pupil"}),a().createElement("div",{className:"pupil"}),a().createElement("div",{className:"smile"}),a().createElement("div",{className:"smile"}),a().createElement("div",{className:"snout ha hb"}),a().createElement("div",{className:"mouth ha hb"}),a().createElement("div",{className:"whiskers r"}))}var h=function(){return a().createElement("div",{className:"item"},a().createElement(l.Link,{to:"record"},a().createElement("div",{className:"cover relative border aspect-square"},a().createElement("div",{className:"absolute inset-0"},a().createElement(E,null)),a().createElement("button",{type:"button",className:"playArrow opacity-0 group-hover:opacity-100 transition-opacity duration-500 ui_themeColor absolute right-0 bottom-0 m-2 bg-white bg-opacity-90 rounded-full p-2"},a().createElement(p.IconPlayerPlay,{size:22,className:"fill-current"})))),a().createElement("div",{className:"footer mt-2 text-sm"},a().createElement(l.Link,{to:"record"},"听歌排行")))},b=function(e){var t=e.list,n=void 0===t?[]:t,r=(0,v.C)((function(e){return e.account})).profile,c=(0,l.useParams)().uid;return a().createElement("div",{className:"domUserDetail_list px-8 grid grid-cols-4 gap-5"},(null==r?void 0:r.userId)===Number(c)&&a().createElement(h,null),n.map((function(e){return a().createElement(y.Z,{item:e,key:e.id})})))};const g=(0,r.memo)(b);var x=n(4184),N=n.n(x),w=n(8360),k=function(e){var t=e.list,n=void 0===t?[]:t;return a().createElement("div",null,n.map((function(e,t){return a().createElement("div",{key:e.id,className:N()("hover:bg-gray-100 pl-8 py-3 flex items-center",{"bg-gray-50":t%2==0})},a().createElement(l.Link,{to:"/playlist/music/".concat(e.id),className:"rounded overflow-hidden relative group"},a().createElement("img",{src:"".concat(e.coverImgUrl,"?param=60y60"),alt:""}),a().createElement("button",{type:"button",className:"absolute rounded-full bg-white bg-opacity-90 inset-0 flex-center m-auto w-6 h-6 ui_themeColor opacity-0 group-hover:opacity-100 transition-opacity duration-500"},a().createElement(p.IconPlayerPlay,{size:16,className:"fill-current"}))),a().createElement(l.Link,{to:"/playlist/music/".concat(e.id),className:"flex-auto w-0 px-3 truncate text-sm ui_text_black_hover"},e.name),a().createElement("span",{className:"px-3 count text-gray-400",style:{width:"".concat(1/7*100,"%")}},"歌曲：",e.trackCount),a().createElement("span",{className:"px-3 creator truncate text-gray-300",style:{width:"".concat(1/7*100,"%")}},"by",a().createElement(l.Link,{to:"/user/".concat(e.userId),className:"ui_text_gray_hover"},e.creator.nickname)),a().createElement("button",{type:"button",className:"px-3 subscribed flex items-center ui_text_gray_hover",style:{width:"".concat(1/7*100,"%")}},a().createElement(p.IconFolderPlus,{size:16}),e.subscribedCount),a().createElement("button",{type:"button",className:"px-3 playCount flex items-center ui_text_gray_hover",style:{width:"".concat(1/7*100,"%")}},a().createElement(p.IconPlayerPlay,{size:16}),(0,w.LU)(e.playCount)))})))};const _=(0,r.memo)(k);var S=function(){return a().createElement("div",null)};const I=(0,r.memo)(S);var C=["Grid","List","Column"],A=[["Grid","大图模式",p.IconLayoutGrid],["List","列表模式",p.IconLayoutList],["Column","图列模式",p.IconList]],j={Grid:g,List:_,Column:I},U=["创建的歌单","收藏的歌单","创建的播客","收藏的播客","创建的音乐专栏"],P=function(e){var t=e.list,n=void 0===t?[]:t,l=e.layout,c=void 0===l?"Grid":l;return a().createElement("div",{className:"pb-10"},(0,r.createElement)(j[c],{list:n}))};const L=(0,r.memo)(P);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=function(){var e=(0,l.useParams)().uid,t=(0,c.bP)({uid:e}),n=t.data,o=t.isLoading,i=R((0,r.useState)(U[0]),2),s=i[0],m=i[1],d=R((0,r.useState)(C[0]),2),f=d[0],v=d[1],p=(null==n?void 0:n.playlist)||[],y=p.filter((function(t){return String(t.userId)===e})),E=p.filter((function(t){return String(t.userId)!==e}));return o?a().createElement(u.Z,null):a().createElement("div",{className:"domUserDetail_main"},a().createElement("div",{className:"flex px-8 pb-4"},a().createElement("div",{className:"text-base flex gap-4"},U.map((function(e){return a().createElement("button",{className:N()(s===e&&"font-bold ui_underline"),onClick:function(){return m(e)},type:"button",key:e},e)}))),a().createElement("div",{className:"ml-auto flex overflow-hidden rounded space-x-0.5"},A.map((function(e){var t=R(e,3),n=t[0],r=t[1],l=t[2];return a().createElement("button",{key:n,type:"button",className:N()("layout bg-gray-100 h-5 w-6 flex-center",f===n?"bg-gray-500 text-white":"hover:bg-gray-200"),onClick:function(){return v(n)},title:r},a().createElement(l,{size:16}))})))),s===U[0]&&a().createElement(L,{list:y}),s===U[1]&&a().createElement(L,{list:E}))};const Z=(0,r.memo)(D);var T=n(5666),z=n.n(T),M=n(2429),F=n(6720);function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t,n,r,a,l,c){try{var o=e[l](c),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}var G=function(){var e,t,n,i,u=(0,l.useParams)().uid,s=(n=(0,c.pA)(),i=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return l}}(n,i)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],m=(0,r.useContext)(o),d=m.profile,f=m.code,y=m.bindings,E=(0,v.C)((function(e){return e.common})).isLogin,h=(0,v.C)((function(e){return e.account})),b=(0,r.useMemo)((function(){return!!E&&String(h.profile.userId)===u}),[E]),g=(e=z().mark((function e(t){var n;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.followed,e.prev=1,e.next=4,s({id:t,t:!0===n?0:1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})),t=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){$(l,r,a,c,o,"next",e)}function o(e){$(l,r,a,c,o,"throw",e)}c(void 0)}))},function(e){return t.apply(this,arguments)});return f?a().createElement("div",{className:"domUserDetail_header flex p-8"},a().createElement("div",{className:"avatar w-44 h-44 rounded-full overflow-hidden flex-none"},a().createElement("img",{src:"".concat(null==d?void 0:d.avatarUrl,"?param=180y180"),alt:"",className:"w-full h-ull object-cover block"})),a().createElement("div",{className:"ml-5 flex-auto"},a().createElement("div",{className:"font-bold text-xl"},null==d?void 0:d.nickname),a().createElement("div",{className:"flex items-center py-2"},a().createElement("div",{className:"left flex-center"},11===(null==d?void 0:d.vipType)&&a().createElement(a().Fragment,null,a().createElement("a",{href:"https://music.163.com/#/member"},"黑胶会员")," "),(null==d?void 0:d.identify)&&a().createElement("span",{className:"authentication",title:d.identify.imageDesc},a().createElement("span",{className:"w-4 h-4 ml-1"},a().createElement("img",{className:"ui_containimg",src:d.identify.imageUrl,alt:""})),d.identify.imageDesc),a().createElement("a",{className:"w-8 h-4 flex-center rounded-full mr-2 bg-gray-200",href:"https://music.163.com/#/user/level"},"Lv",d.level),a().createElement(M.ZP,{gender:null==d?void 0:d.gender,size:16})),a().createElement("div",{className:"right ml-auto flex-center"},b?a().createElement(l.Link,{to:"/user/edit",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center"},a().createElement(p.IconEdit,{size:18,stroke:1.5}),"  编辑个人信息"):a().createElement(a().Fragment,null,a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center"},a().createElement(p.IconMail,{size:20,stroke:1})," 发私信"),(null==d?void 0:d.followed)?a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:function(){return g(null==d?void 0:d.userId)}},a().createElement(p.IconCheck,{size:16}),"  已关注"):a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:function(){return g(null==d?void 0:d.userId)}},a().createElement(p.IconPlus,{size:16,style:{color:"#EC4141"}}),"  关注")))),a().createElement("hr",null),a().createElement("div",{className:"text-center divide-x flex mt-5"},a().createElement(l.Link,{to:"dynamic",className:"w-20"},a().createElement("div",{className:"text-base"},null==d?void 0:d.eventCount),a().createElement("div",null,"动态")),a().createElement(l.Link,{to:"follow",className:"w-20"},a().createElement("div",{className:"text-base"},null==d?void 0:d.follows),a().createElement("div",null,"关注")),a().createElement(l.Link,{to:"fans",className:"w-20"},a().createElement("div",{className:"text-base"},null==d?void 0:d.followeds),a().createElement("div",null,"粉丝"))),a().createElement("div",{className:"leading-6 mt-2 text-sm"},a().createElement("div",null,a().createElement("span",null,"社交网络："),null==y?void 0:y.map((function(e){if(e.url)return 2===e.type?a().createElement("a",{href:e.url,key:e.url},a().createElement(F.Hl,{size:16,active:!0,key:e.url})):null}))),a().createElement("div",null,a().createElement("span",null,"个人介绍："),a().createElement("span",{className:"text-gray-400",style:{whiteSpace:"pre-wrap"}},(null==d?void 0:d.signature)||"暂无介绍"))))):null};const H=(0,r.memo)(G);var Q=function(){var e=(0,v.C)((function(e){return e.common})).isLogin,t=(0,r.useContext)(o).code;return e?404===t?a().createElement("div",{className:"flex"},"用户不存在"):a().createElement("div",{className:"domUserDetail"},a().createElement(H,null),a().createElement(Z,null)):a().createElement("div",null,"查看个人信息请先登录")};const q=(0,r.memo)(Q);var B=n(7794),V=n(534),K=n(57);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t,n,r,a,l,c){try{var o=e[l](c),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return l}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}var te=function(){var e,t,n=(0,l.useParams)().uid,i=void 0===n?"":n,s=Y((0,K.x)([]),2),m=s[0],d=s[1],f=(0,r.useRef)(-1),v=(0,r.useContext)(o).profile,p=Y((0,c.ne)(),2),y=p[0],E=(p[1].isLoading,(0,r.useRef)(!0)),h=(0,r.useRef)(null),b=(0,r.useRef)(null),g=(e=z().mark((function e(){var t,n,r,a;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.current){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,y({uid:i,lasttime:f.current});case 5:t=e.sent.data,n=t.events,r=t.more,a=t.lasttime,E.current=r,f.current=a,d((function(e){var t,r;(t=e).push.apply(t,function(e){if(Array.isArray(e))return W(e)}(r=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||ee(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})),t=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){X(l,r,a,c,o,"next",e)}function o(e){X(l,r,a,c,o,"throw",e)}c(void 0)}))},function(){return t.apply(this,arguments)});return(0,V.Z)(g,h,b),a().createElement("div",{className:"h-full overflow-auto",ref:h},a().createElement("div",{className:"h1 ui_header"},"".concat(v.nickname,"的动态")),a().createElement("div",{className:"px-8"},m.length>0?a().createElement(B.Z,{list:m}):a().createElement("div",{className:"empty"},"暂无动态")),a().createElement("div",{ref:b},E.current&&a().createElement(u.Z,null)))};const ne=(0,r.memo)(te);var re=n(9266),ae=n(5583),le=n(4766);const ce=(0,r.memo)((function(e){var t,n=e.item,r=e.handleClick,c=e.handleLetter,o=e.isSelf;return a().createElement("div",{className:"item w-96 flex p-4 hover:bg-gray-50",key:n.userId},a().createElement(l.Link,{to:"/user/".concat(n.userId),className:"relative avatar w-24 h-24 rounded-full border flex-none"},a().createElement("img",{className:"rounded-full",src:"".concat(n.avatarUrl,"?param=100y100"),alt:""}),(null==n||null===(t=n.avatarDetail)||void 0===t?void 0:t.identityIconUrl)&&a().createElement("div",{className:"ico w-6 h-6 absolute right-0 bottom-0"},a().createElement("img",{src:n.avatarDetail.identityIconUrl,alt:""}))),a().createElement("div",{className:"content flex-auto w-0 pl-2"},a().createElement("div",{className:"contain mt-4"},a().createElement("div",{className:"left"},a().createElement(l.Link,{className:"nickname ui_text_black_hover truncate pr-3 w-56",to:"/user/".concat(n.userId)},n.nickname))),a().createElement("div",{className:"contain flex items-baseline"},a().createElement("div",{className:"truncate pr-3 text-gray-500 w-56"},n.signature),a().createElement("div",{className:"right flex-none"},function(e){var t=e.handleLetter,n=e.handleClick,r=e.id,l=e.name;switch(!0){case t&&e.isSelf:return a().createElement("button",{onClick:function(){return t(r,l)},type:"button",className:"follow border flex-center rounded-full w-16 h-6 hover:bg-gray-200"},a().createElement(p.IconPlus,{size:16,className:"text-red-500"})," 私信");case e.followed:return a().createElement("span",{className:"follow border text-gray-500 flex-center rounded-full w-16 h-6"},"已关注");default:return a().createElement("button",{onClick:function(){return n(r)},type:"button",className:"follow border flex-center rounded-full w-16 h-6 hover:bg-gray-200"},a().createElement(p.IconPlus,{size:16,className:"text-red-500"})," 关注")}}({handleLetter:c,handleClick:r,isSelf:o,followed:n.followed,id:n.userId,name:n.nickname}))),a().createElement("div",{className:"info divide-x text-gray-500 mt-1"},a().createElement("span",{className:"pr-6"}," 歌单：".concat(n.playlistCount)),a().createElement("span",{className:"pl-6"},"粉丝：".concat(n.followeds)))))}));var oe=function(e){var t=e.list,n=void 0===t?[]:t,r=e.handleClick,l=e.handleLetter,c=e.isSelf,o=e.children;return a().createElement(a().Fragment,null,0===n.length?o[0]:a().createElement("div",{className:"flex flex-wrap justify-between"},n.map((function(e){return a().createElement(ce,{item:e,handleClick:r,isSelf:c,handleLetter:l,key:e.userId})}))),o[1])};const ie=(0,r.memo)(oe);function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t,n,r,a,l,c){try{var o=e[l](c),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){se(l,r,a,c,o,"next",e)}function o(e){se(l,r,a,c,o,"throw",e)}c(void 0)}))}}function de(e){throw e}function fe(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}var pe=function(){var e,t,n,c=(0,r.useContext)(o).profile,i=(0,l.useParams)().uid,s=(0,v.T)(),m=(t=(0,K.x)([]),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return l}}(t,n)||ve(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=m[0],f=m[1],p=(0,v.C)((function(e){return e.account})),y=(0,r.useMemo)((function(){return p.profile.userId===Number(i)}),[i]),E=(0,r.useRef)(null),h=(0,r.useRef)(null),b=(0,r.useRef)(0),g=(0,r.useRef)(!0),x=(e=me(z().mark((function e(){var t,n,r;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,re.qm)({uid:i,limit:30,offset:b.current});case 5:t=e.sent,n=t.follow,r=t.more,b.current+=30,g.current=r,f((function(e){return fe(e).concat(fe(n))})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])}))),function(){return e.apply(this,arguments)}),N=(0,r.useCallback)(function(){var e=me(z().mark((function e(t){var n;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,re.iQ)({id:t,t:1});case 3:n=null!==(n=e.sent)?n:de(new TypeError("Cannot destructure undefined")),f((function(e){e[e.findIndex((function(e){return e.userId===t}))].followed=!0})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,V.Z)(x,E,h),a().createElement("div",{className:"domUser_followlist h-full overflow-auto",ref:E},a().createElement("div",{className:"h1 domUser_subpage_header ui_header"},a().createElement(l.Link,{to:"./"},null==c?void 0:c.nickname),"的关注"),a().createElement("div",{className:""},a().createElement(ie,{isSelf:y,list:d,handleClick:N,handleLetter:function(e,t){s((0,ae.setPopupLetterToggle)()),s((0,le.setMsgPrivateHistory)({uid:e,nickname:t,showMsgPrivateHistory:!0}))}},a().createElement("div",{className:"empty"},"还没有关注")),a().createElement("div",{ref:h}),g.current&&a().createElement("div",{className:"flex-center"},a().createElement(u.Z,null))))};const ye=(0,r.memo)(pe);function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function he(e,t,n,r,a,l,c){try{var o=e[l](c),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function be(e){throw e}var ge=function(){var e,t,n,i,u=(0,l.useParams)().uid,s=(0,r.useContext)(o).profile,m=(n=(0,c.pA)(),i=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return l}}(n,i)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],d=(0,c.Ho)({uid:u}),f=d.data,v=(d.isLoading,(null==f?void 0:f.followeds)||[]),p=(0,r.useCallback)((e=z().mark((function e(t){var n;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({id:t,t:1});case 3:n=null!==(n=e.sent)?n:be(new TypeError("Cannot destructure undefined")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),t=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){he(l,r,a,c,o,"next",e)}function o(e){he(l,r,a,c,o,"throw",e)}c(void 0)}))},function(e){return t.apply(this,arguments)}),[u]);return a().createElement("div",{className:"domUser_followlist"},a().createElement("div",{className:"h1 ui_header"},a().createElement(l.Link,{to:"./"},s.nickname),"的粉丝"),a().createElement("div",{className:"domUser_followlist_main"},a().createElement(ie,{list:v,handleClick:p},a().createElement("div",{className:"empty"},"还没有粉丝"))))};const xe=(0,r.memo)(ge);var Ne=n(7264),we=n(2837),ke=n(6129),_e=n(2e3),Se=n(5854);function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ce(e,t,n,r,a,l,c){try{var o=e[l](c),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var je=function(){var e=(0,l.useParams)().uid,t=(0,v.C)((function(e){return e.account})).profile;if((null==t?void 0:t.userId)!==Number(e))return a().createElement(l.Navigate,{to:"/"});var n,c,o=Ae((0,r.useState)(1),2),i=o[0],u=o[1],s=Ae((0,r.useState)([]),2),m=s[0],d=s[1],f=(n=z().mark((function t(){var n,r,a;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,re.Uz)({uid:e,type:i});case 3:n=t.sent,r=n.allData,a=n.weekData,d(1===i?a:r),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})),c=function(){var e=this,t=arguments;return new Promise((function(r,a){var l=n.apply(e,t);function c(e){Ce(l,r,a,c,o,"next",e)}function o(e){Ce(l,r,a,c,o,"throw",e)}c(void 0)}))},function(){return c.apply(this,arguments)});return(0,r.useEffect)((function(){f()}),[i,e]),a().createElement("div",{className:"h-full flex flex-col"},a().createElement("div",{className:"flex-none"},a().createElement("div",{className:"h1 ui_header"},"我的听歌排行"),a().createElement("div",{className:"px-8 pb-2 border-b space-x-8 text-sm"},a().createElement("button",{onClick:function(){return u(1)},type:"button",className:N()("domUser_record_nav_link",{"font-bold":1===i})},"最近一周"),a().createElement("button",{onClick:function(){return u(0)},type:"button",className:N()({"font-bold":0===i})},"所有时间"))),a().createElement("div",{className:"overflow-auto h-0 flex-auto domUser_record_main",style:{"--ui_grid_template":"36px / 24px 24px 24px 10fr 1fr"}},a().createElement("div",{className:"domUser_record_list"},m.map((function(e,t){var n=e.song,r=e.playCount;return a().createElement(Ne.Z,{item:n,key:n.id,schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","下载"]]},a().createElement("div",{tabIndex:"2",className:N()("domUser_record_item focus:outline-none focus:bg-gray-200 items-center hover:bg-gray-100 ui_grid_template px-8 grid",t%2==1&&"bg-gray-50")},a().createElement("div",{className:"index text-gray-400"},a().createElement(we.Z,{id:n.id,index:t})),a().createElement("div",{className:"heart"},a().createElement(ke.Z,{id:n.id})),a().createElement("div",{className:"download"},a().createElement(_e.Z,null)),a().createElement("div",{className:"name"},a().createElement(Se.Z,{item:n})),a().createElement("div",{className:"playCount text-gray-400"},r,"次")))})))))};const Ue=(0,r.memo)(je);var Pe=n(7270),Le=function(){var e=(0,v.C)((function(e){return e.mask})),t=e.dialogUploadAvatarVisibility,n=e.avatar,l=(0,r.useRef)(null),c=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=l.current;if(e){var t=e.width,r=e.height,a=e.getContext("2d"),c=new Image;c.src=n,c.onload=function(){a.drawImage(c,0,0,t,r)}}}),[n]),t?a().createElement(Pe.Z,{id:"dialogUploadAvatar",title:"上传头像"},a().createElement("div",{className:""},a().createElement("div",{className:"flex justify-center"},a().createElement("div",{className:"relative bg-black rounded overflow-hidden"},a().createElement("canvas",{className:"w-full h-full",width:224,height:224,ref:l}),a().createElement("canvas",{className:"absolute inset-0",ref:c})),a().createElement("div",{className:"ml-8"},a().createElement("div",{className:"border rounded w-24 h-24"},a().createElement("img",{src:n,alt:""})),a().createElement("div",{className:"text-gray-400 mt-1"},"大尺寸封面"),a().createElement("div",{className:"border rounded w-16 h-16"},a().createElement("img",{src:n,alt:""})),a().createElement("div",{className:"text-gray-400 mt-1"},"小尺寸封面"))),a().createElement("div",{className:"pb-4 pt-6 space-x-4 flex justify-center"},a().createElement("button",{type:"button",className:"flex-center border px-3 h-8 rounded-full"},"重新选择"),a().createElement("button",{type:"button",className:"flex-center text-white ui_theme_bg_color px-3 h-8 rounded-full"},"保持并关闭")))):null};const Oe=(0,r.memo)(Le);var Re=n(9163),De=n(6486);function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t,n,r,a,l,c){try{var o=e[l](c),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Me=function(){var e=(0,v.T)(),t=(0,Re.Z)(),n=(0,c.fF)(),l=n.data,o=n.isLoading;console.log(l);var i=ze((0,c.ti)(),2),s=i[0],m=(i[1].isLoading,(null==l?void 0:l.profile)||{}),d=ze((0,K.x)({}),2),f=d[0],p=d[1];(0,r.useEffect)((function(){o||p((0,De.cloneDeep)(m))}),[o]);var y,E=ze((0,r.useState)(!0),2),h=(E[0],E[1]);return y=z().mark((function e(){var n;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={gender:f.gender,birthday:f.birthday,nickname:f.nickname,province:f.province,city:f.city,signature:f.signature},e.next=4,s(n);case 4:if(200===e.sent.data.code){e.next=7;break}return e.abrupt("return");case 7:h(!0),t("修改个人资料成功"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=y.apply(e,t);function l(e){Te(a,n,r,l,c,"next",e)}function c(e){Te(a,n,r,l,c,"throw",e)}l(void 0)}))},(0,r.useEffect)((function(){h(JSON.stringify(m)===JSON.stringify(f))}),[f]),301===(null==l?void 0:l.code)?null:o?a().createElement("div",{className:"flex-center w-full h-full"},a().createElement(u.Z,null)):a().createElement("div",null,a().createElement("div",{className:"h1 ui_header"},"编辑个人信息"),a().createElement("div",{className:"flex px-8 py-5 gap-x-20"},a().createElement("div",{className:"flex flex-1 flex-col gap-5"}),a().createElement("div",null,a().createElement("div",{className:"border rounded overflow-hidden w-40 h-40"},a().createElement("img",{className:"",src:f.avatarUrl,alt:""})),a().createElement("label",{htmlFor:"avatar",className:"border cursor-pointer hover:bg-gray-50 flex-center h-8 m-auto mt-5 px-3 rounded-full update w-min whitespace-nowrap"},a().createElement("input",{onChange:function(t){var n=t.target,r=new FileReader,a=ze(n.files,1)[0];a&&(r.readAsDataURL(a),r.onload=function(t){e((0,ae.setDialogUploadAvatarShow)({avatar:t.target.result}))})},type:"file",name:"",id:"avatar",hidden:!0,accept:"image/bmp,image/gif,image/jpg,image/svg,image/png,image/webp,image/ico,image/svgz,image/tif,image/jpeg,image/jfif,image/pjpeg,image/pjp,image/tiff,image/xbm"}),"修改头像"),a().createElement(Oe,null))))};const Fe=(0,r.memo)(Me);var Je=function(){var e=(0,l.useParams)().uid,t=(0,c.$w)({uid:e}),n=t.data,r=t.isLoading;console.log(n);var o=(null==n?void 0:n.bindings)||[],i=null==n?void 0:n.code;return r?a().createElement(u.Z,null):301===i?"登录查看":a().createElement(a().Fragment,null,a().createElement("div",{className:"h1 ui_header"},"绑定账号"),a().createElement("div",{className:"px-8"},a().createElement("div",{className:"domUser_binding_phone"},a().createElement("div",{className:"text-sm text-gray-500"},"注册账号"),a().createElement("div",{className:"domUser_binding_bar domUser_binding_box"},a().createElement("div",{className:"ico"},a().createElement(F._i,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"手机"),a().createElement("div",null,"使用手机号注册：",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 11===e.length?e.replace(/(?<=\d{3})(\d{4})(?=\d{4})/,"****"):e}(JSON.parse(o[0].tokenJsonStr).cellphone),"   ",a().createElement("button",{type:"button",className:"ui_link"},"更换手机"))),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"修改密码")))),a().createElement("div",{className:"domUser_binding_three mt-10"},a().createElement("div",{className:"text-sm text-gray-500"},"其他登录方式"),a().createElement("div",{className:"domUser_binding_list"},a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(F.Pl,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"网易邮箱账号")),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"修改密码"))),a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(F.PT,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"微信"),a().createElement("div",null,"ID：",JSON.parse(o[4].tokenJsonStr).nickname)),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"已绑定"))),a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(F.B3,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"QQ"),a().createElement("div",null,"ID：",JSON.parse(o[3].tokenJsonStr).nickname)),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"已绑定"))),a().createElement("div",{className:"domUser_binding_bar domUser_binding_item"},a().createElement("div",{className:"ico"},a().createElement(F.Hl,{active:!0})),a().createElement("div",{className:"content"},a().createElement("div",{className:"name"},"新浪微博"),a().createElement("div",null,"ID：",JSON.parse(o[1].tokenJsonStr).name)),a().createElement("div",{className:"ml-auto"},a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"寻找并邀请好友"),a().createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"已绑定")))))))};const $e=(0,r.memo)(Je),Ge=function(){return a().createElement(l.Routes,null,a().createElement(l.Route,{path:"/:uid",element:a().createElement(f,null)},a().createElement(l.Route,{index:!0,element:a().createElement(q,null)}),a().createElement(l.Route,{path:"Dynamic",element:a().createElement(ne,null)}),a().createElement(l.Route,{path:"Follow",element:a().createElement(ye,null)}),a().createElement(l.Route,{path:"Fans",element:a().createElement(xe,null)}),a().createElement(l.Route,{path:"Fans",element:a().createElement(xe,null)}),a().createElement(l.Route,{path:"Record",element:a().createElement(Ue,null)}),a().createElement(l.Route,{path:"Binding",element:a().createElement($e,null)})),a().createElement(l.Route,{path:"Edit",element:a().createElement(Fe,null)}))}}}]);
//# sourceMappingURL=User.js.map?version=d4ff3b4a