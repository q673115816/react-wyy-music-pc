"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[288],{5779:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var n=a(7363),r=a.n(n),c=a(6711),l=a(2982),m=a(885),s=(a(7327),a(1539),a(2222),a(1249),a(7941),a(9859)),i=a(4184),o=a.n(i),d=(a(8309),a(6699),a(2023),a(7484)),u=a.n(d),v=a(6719),E=a(1999),p=a(7390),f=a(1495),y=a(1337),N=a(2446),g=a(8123),x=a(3850),b=function(e){var t=e.pop,a=void 0===t?0:t;return r().createElement("div",{className:"range w-20 h-1.5 rounded bg-gray-200"},r().createElement("div",{className:"h-full bg-gray-300 rounded",style:{width:"".concat(a,"%")}}))};const h=(0,n.memo)(b);var k=function(e){var t=e.songs,a=void 0===t?[]:t;return r().createElement(r().Fragment,null,r().createElement("div",{className:"songs_list",style:{"--ui_grid_template":"36px / 54px 24px 24px 37% 4fr 5fr 2fr 3fr"}},r().createElement("div",{className:"thead"},r().createElement("div",{className:"item grid items-center text-gray-400 ui_grid_template"},r().createElement("div",{className:"index"}),r().createElement("div",{className:"heart"}),r().createElement("div",{className:"download"}),r().createElement("div",{className:"name flex-auto px-2"},"音乐标题"),r().createElement("div",{className:"artist flex-none px-2"},"歌手"),r().createElement("div",{className:"album flex-none px-2"},"专辑"),r().createElement("div",{className:"duration flex-none px-2"},"时长"),r().createElement("div",{className:"pop flex-none px-2"},"热度"))),r().createElement("div",{className:"tbody"},a.map((function(e,t){return r().createElement(E.Z,{schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","下载"]],item:e,type:"song",key:e.id},r().createElement("div",{tabIndex:2,className:o()("item grid items-center hover:bg-gray-100 focus:bg-gray-200 focus:outline-none ui_grid_template",{"bg-gray-50":t%2==0})},r().createElement("div",{className:"index px-2"},r().createElement(p.Z,{index:t,id:e.id})),r().createElement("div",{className:"heart text-center"},r().createElement(f.Z,{id:e.id})),r().createElement("div",{className:"download text-center"},r().createElement(y.Z,null)),r().createElement("div",{className:"name px-2"},r().createElement(N.Z,{item:e})),r().createElement("div",{className:"artist flex-none px-2 truncate text-gray-400"},r().createElement(g.Z,{artists:e.ar})),r().createElement("div",{className:"album truncate flex-none px-2"},r().createElement(x.Z,{name:e.al.name,id:e.al.name})),r().createElement("div",{className:"duration text-gray-400 truncate flex-none px-2"},u()(e.dt).format("mm:ss")),r().createElement("div",{className:"pop"},r().createElement(h,{pop:e.pop}))))})))))};const _=(0,n.memo)(k);var C={"--grid-template-columns":"60px 6fr min-content"},Z={"--grid-template-columns":"60px 1fr 1fr"},w=a(4907),S=function(e){var t=e.videos,a=(void 0===t?[]:t).map((function(e){var t=e.type,a=e.title,n=e.coverUrl,r=e.playTime,c=e.creator;return{id:e.vid,type:t,title:a,creator:c,playCount:r,duration:e.durationms,cover:n}}));return r().createElement("div",{className:"videos_list py-5 px-10"},r().createElement(w.Z,{list:a}))};const j=(0,n.memo)(S);var L={"--grid-template-columns":"60px 6fr 2fr 5fr"};a(4916),a(5306),a(9600),a(7042);const I=function(e){var t=e.lyrics,a=void 0===t?[]:t,c=(0,n.useRef)(),l=(0,n.useState)(!1),s=(0,m.Z)(l,2),i=s[0],o=s[1];(0,n.useEffect)((function(){c.current=a.join("\n").replace(/<b>|<\/b>/gm,"")}),[a]);var d=function(){var e=document.createElement("textarea");e.setAttribute("readonly","readonly"),e.textContent=c.current,document.body.appendChild(e),e.select(),document.execCommand("copy")&&(document.execCommand("copy"),console.log("复制成功")),document.body.removeChild(e)};return r().createElement("div",{className:"lrc flex pb-2"},r().createElement("div",{className:"content w-2/3 px-2 text-gray-500"},a.slice(0,i?1/0:4).map((function(e,t){return r().createElement("div",{key:e+t,dangerouslySetInnerHTML:{__html:e}})}))),r().createElement("div",{className:"actions w-1/3 flex flex-col justify-between"},r().createElement("div",{className:"flex space-x-2.5"},r().createElement("button",{type:"button",className:"flex-center border border-gray-400 px-3 h-6 hover:bg-gray-300 rounded-full",onClick:function(){return o(!i)}},i?"收起":"展开","歌词"),r().createElement("button",{type:"button",className:"flex-center border border-gray-400 px-3 h-6 hover:bg-gray-300 rounded-full clip",onClick:d},"复制歌词")),i&&r().createElement("div",{className:"flex space-x-2.5"},r().createElement("button",{type:"button",className:"flex-center border border-gray-400 px-3 h-6 hover:bg-gray-300 rounded-full",onClick:function(){return o(!1)}},"收起歌词"),r().createElement("button",{type:"button",className:"flex-center border border-gray-400 px-3 h-6 hover:bg-gray-300 rounded-full clip",onClick:d},"复制歌词"))))};var R={"--grid-template-columns":"60px 5fr 2fr"},U=function(e){var t=e.djRadios,a=void 0===t?[]:t;return r().createElement("div",{className:"djRadios_list _list",style:R},a.map((function(e,t){return r().createElement("div",{className:o()("item grid items-center hover:bg-gray-100",{"bg-gray-50":t%2==0}),key:e.id},r().createElement(c.Link,{to:"/playlist/dj/".concat(e.id),className:"cover"},r().createElement("img",{className:"",src:"".concat(e.picUrl,"?param=60y60"),alt:""})),r().createElement("div",{className:"px-5"},r().createElement(c.Link,{to:"/playlist/dj/".concat(e.id),className:"name"},e.name)),r().createElement("div",{className:"dj text-gray-300"},"by  ",r().createElement(c.Link,{to:"/user/".concat(e.dj.userId),className:"ui_text_gray_hover"},e.dj.nickname)))})))};const z=(0,n.memo)(U);var M=a(5754),P={"--grid-template-columns":"60px 5fr 2fr"},T=function(e){var t=e.userprofiles,a=void 0===t?[]:t;return r().createElement("div",{className:"userprofiles_list _list",style:P},a.map((function(e,t){return r().createElement(c.Link,{to:"/user/".concat(e.userId),className:o()("item grid items-center hover:bg-gray-100",{"bg-gray-50":t%2==1}),key:e.userId},r().createElement("div",{className:"rounded-full overflow-hidden"},r().createElement("img",{src:"".concat(e.avatarUrl,"?param=60y60"),alt:""})),r().createElement("div",{className:"name px-5"},e.nickname," ",r().createElement(M.ZP,{size:16,gender:e.gender})),r().createElement("div",{className:"signature text-gray-400 ml-auto"},e.signature))})))};const O={单曲:{code:1,unit:"首",limit:100,Node:_,countName:"songCount"},歌手:{code:100,unit:"位",limit:20,Node:function(e){var t=e.artists,a=void 0===t?[]:t;return r().createElement("div",{className:"artists_list _list",style:C},a.map((function(e,t){return r().createElement("div",{className:o()("item relative grid items-center hover:bg-gray-100",{"bg-gray-50":t%2==1}),key:e.id},r().createElement(c.Link,{to:"/artist/".concat(e.id),className:"absolute inset-0"}),r().createElement("div",{className:"cover"},r().createElement("img",{className:"",src:"".concat(e.img1v1Url,"?param=60y60"),alt:""})),r().createElement("div",{className:"name px-2.5 text-sm"},e.name,e.alia&&r().createElement("span",{className:"text-gray-400"},"(",null==e?void 0:e.alias[0],")")),e.accountId&&r().createElement("span",{className:"account bg-red-500 w-4 h-4 rounded-full text-white flex-center"},r().createElement(v.IconUser,{size:12,stroke:3})))})))},countName:"artistCount"},专辑:{code:10,unit:"张",limit:20,Node:function(e){var t=e.albums,a=void 0===t?[]:t;return r().createElement("div",{className:"albums_list _list",style:Z},a.map((function(e,t){return r().createElement("div",{tabIndex:"2",className:o()("item grid items-center relative hover:bg-gray-100",{"bg-gray-50":t%2==1}),key:e.id},r().createElement(c.Link,{className:"absolute inset-0 z-0",to:"/playlist/album/".concat(e.id)}),r().createElement("div",{className:"cover"},r().createElement("img",{src:"".concat(e.picUrl,"?param=60y60"),alt:""})),r().createElement("div",{className:"name px-5 text-sm"},e.name,e.alias.length>0&&r().createElement("span",{className:"text-gray-400"},"（".concat(e.alias,"）"))),r().createElement("div",{className:"artist truncate"},r().createElement(c.Link,{to:"/artist/".concat(e.artist.id),className:"ui_text_gray_hover relative z-10"},e.artist.name,e.artist.alias.length>0&&r().createElement("span",{className:"text-gray-400"},"（".concat(e.artist.alias,"）")))))})))},countName:"albumCount"},视频:{code:1014,unit:"个",limit:24,Node:j,countName:"videoCount"},歌单:{code:1e3,unit:"个",limit:20,Node:function(e){var t=e.playlists,a=void 0===t?[]:t;return r().createElement("div",{className:"playlists_list _list",style:L},a.map((function(e,t){return r().createElement("div",{className:o()("item grid items-center relative hover:bg-gray-100",{"bg-gray-50":t%2==1}),key:e.id},r().createElement(c.Link,{className:"absolute inset-0 z-0",to:"/playlist/music/".concat(e.id)}),r().createElement("div",{className:"cover"},r().createElement("img",{className:"",src:"".concat(e.coverImgUrl,"?param=60y60"),alt:""})),r().createElement("div",{className:"name px-3"},e.name),r().createElement("div",{className:"trackCount text-gray-400"},e.trackCount,"首"),r().createElement("div",{className:"creator text-gray-300"},"by  ",r().createElement(c.Link,{to:"/user/".concat(e.creator.userId),className:"ui_text_black_hover relative z-10"},e.creator.nickname)))})))},countName:"playlistCount"},歌词:{code:1006,unit:"首",limit:20,Node:function(e){var t=e.songs,a=void 0===t?[]:t;return r().createElement("div",{className:"lyrics_list",style:{"--ui_grid_template":"36px / 54px 24px 24px 37% 4fr 5fr 2fr 3fr"}},r().createElement("div",{className:"thead"},r().createElement("div",{className:"item grid items-center text-gray-400 ui_grid_template"},r().createElement("div",{className:"index"}),r().createElement("div",{className:"heart"}),r().createElement("div",{className:"download"}),r().createElement("div",{className:"name"},"音乐标题"),r().createElement("div",{className:"artist"},"歌手"),r().createElement("div",{className:"album"},"专辑"),r().createElement("div",{className:"duration"},"时长"),r().createElement("div",{className:"text-gray-400"},"热度"))),r().createElement("div",{className:"tbody"},a.map((function(e,t){return r().createElement(E.Z,{schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","下载"]],item:e,type:"song",key:e.id},r().createElement("div",{tabIndex:"2",className:o()("item grid items-center hover:bg-gray-100 focus:outline-none focus:bg-gray-200 ui_grid_template",{"bg-gray-50":t%2==0})},r().createElement("div",{className:"index pr-2"},r().createElement(p.Z,{index:t,id:e.id})),r().createElement("div",{className:"heart"},r().createElement(f.Z,{id:e.id})),r().createElement("div",{className:"download"},r().createElement(y.Z,null)),r().createElement("div",{className:"name flex"},r().createElement(N.Z,{item:e})),r().createElement("div",{className:"artist truncate"},r().createElement(g.Z,{artists:e.ar})),r().createElement("div",{className:"album truncate"},r().createElement(x.Z,{name:e.al.name,id:e.al.id})),r().createElement("div",{className:"duration text-gray-400 truncate"},u()(e.dt).format("mm:ss")),r().createElement("div",{className:"pop"},r().createElement(h,{pop:e.pop})),r().createElement(I,{lyrics:e.lyrics})))}))))},countName:"songCount"},主播电台:{code:1009,unit:"个",limit:100,Node:z,countName:"djRadiosCount"},用户:{code:1002,unit:"位",limit:20,Node:(0,n.memo)(T),countName:"userprofileCount"}};var q=a(5219),V=a(4506),A=function(){var e,t=(0,c.useParams)(),a=t.keywords,i=void 0===a?"":a,d=t.type,u=void 0===d?"":d,v=(0,s.Z)("searchHistory",[]),E=(0,m.Z)(v,3),p=E[0],f=E[1],y=(E[2],(0,q.C)(V.searchSelector).count),N=void 0===y?0:y;(0,n.useEffect)((function(){var e=(null==p?void 0:p.filter((function(e){return e!==i})))||[];f([i].concat((0,l.Z)(e)))}),[i]);var g=(null===(e=O[u])||void 0===e?void 0:e.unit)||"";return r().createElement("div",{className:"domSearch overflow-auto max-h-full flex-auto"},r().createElement("div",{className:"p-8 pb-2.5 border-b"},r().createElement("div",{className:"font-bold text-base"},"找到",N,g),r().createElement("div",{className:"mt-5 space-x-4"},Object.keys(O).map((function(e){return r().createElement(c.NavLink,{key:e,to:e,className:function(e){var t=e.isActive;return o()("text-sm",t&&"font-bold")}},e)})))),r().createElement(c.Outlet,null))};const F=(0,n.memo)(A);var G=a(5861),H=a(7757),Q=a.n(H),B=a(8157),D=a(4499),J=a(7220).u.injectEndpoints({endpoints:function(e){return{getCloudSearch:e.mutation({query:function(e){return{url:"cloudSearch",method:"POST",body:e}}}),getSearchMultimatch:e.query({query:function(e){return{url:"search/multimatch",method:"POST",body:e}}})}}}),K=J.useGetCloudSearchMutation,W=(J.useGetSearchMultimatchQuery,function(){console.log("entry search");var e=(0,c.useParams)(),t=e.keywords,a=void 0===t?"":t,l=e.type,s=void 0===l?"":l,i=(0,q.T)(),o=(0,n.useState)(1),d=(0,m.Z)(o,2),u=d[0],v=d[1],E=(0,n.useState)({}),p=(0,m.Z)(E,2),f=p[0],y=p[1],N=(0,n.useState)(0),g=(0,m.Z)(N,2),x=g[0],b=g[1],h=O[s],k=h.code,_=h.limit,C=h.Node,Z=h.countName,w=(0,q.C)((function(e){return e.common})).searchValue,S=K(),j=(0,m.Z)(S,2),L=j[0],I=j[1].isLoading;(0,n.useEffect)((function(){i((0,V.setSearchCount)({count:x}))}),[x]),(0,n.useEffect)((function(){w||i((0,V.setSearchValue)({searchValue:a}))}),[]);var R=function(){var e=(0,G.Z)(Q().mark((function e(t){var n,r,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L({keywords:a,limit:_,type:k,offset:(t-1)*_});case 2:r=e.sent,c=(null==r||null===(n=r.data)||void 0===n?void 0:n.result)||{},y(c),b(c[Z]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){v(e),R(e)};return(0,n.useEffect)((function(){U(1)}),[a,s]),I?r().createElement("div",{className:"pt-48 flex-center"},r().createElement(B.Z,null)):r().createElement(r().Fragment,null,(0,n.createElement)(C,f),r().createElement(D.Z,{total:Math.ceil(x/_),page:u,func:U}))});const X=(0,n.memo)(W);var Y=function(){return r().createElement(c.Routes,null,r().createElement(c.Route,{path:":keywords",element:r().createElement(F,null)},r().createElement(c.Route,{path:":type",element:r().createElement(X,null)}),r().createElement(c.Route,{index:!0,element:r().createElement(c.Navigate,{to:"单曲",replace:!0})})))};const $=(0,n.memo)(Y)}}]);
//# sourceMappingURL=Search.js.map?version=a0a76a3b