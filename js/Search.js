"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[288],{6872:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var r=a(7363),n=a.n(r),c=a(6711),l=a(2982),m=a(885),s=(a(7327),a(1539),a(2222),a(9859)),i=function(){var e=(0,c.useParams)().keywords,t=void 0===e?"":e,a=(0,s.Z)("searchHistory",[]),i=(0,m.Z)(a,3),o=i[0],d=i[1];return i[2],(0,r.useEffect)((function(){var e=(null==o?void 0:o.filter((function(e){return e!==t})))||[];d([t].concat((0,l.Z)(e)))}),[t]),n().createElement(c.Outlet,null)};const o=(0,r.memo)(i);var d=a(4942),u=a(5861),v=(a(1249),a(7941),a(2526),a(5003),a(4747),a(9337),a(3321),a(9070),a(7757)),p=a.n(v),E=a(9428),g=a(4506),f=a(8157),y=a(4499),N=(a(8309),a(6699),a(2023),a(4184)),x=a.n(N),b=a(7484),h=a.n(b),k=a(6719),_=a(5721),w=a(7390),Z=a(1495),C=a(1337),j=a(2446),O=a(8123),S=a(3850);const D=(0,r.memo)((function(e){var t=e.pop,a=void 0===t?0:t;return n().createElement("div",{className:"range w-20 h-1.5 rounded bg-gray-200"},n().createElement("div",{className:"h-full bg-gray-300 rounded",style:{width:"".concat(a,"%")}}))}));var I={artist:function(e){var t,a=e.item;return n().createElement(c.Link,{to:"/artist/".concat(a.id),className:"item group h-20 flex items-center bg-gray-100 rounded overflow-hidden"},n().createElement("div",{className:"cover"},n().createElement("img",{className:"",src:"".concat(a.picUrl,"?param=80y80"),alt:""})),n().createElement("div",{className:"content px-2"},n().createElement("div",{className:"name text-sm"},"歌手：",a.name,(null===(t=a.alias)||void 0===t?void 0:t.length)>0&&n().createElement("span",{className:"text-gray-400"},"（".concat(a.alias,"）")))),n().createElement("div",{className:"ico text-gray-600 group-hover:text-black ml-auto mr-4"},n().createElement(k.IconChevronRight,{size:24,stroke:1})))},album:function(e){var t=e.item;return n().createElement(c.Link,{to:"/playlist/album/".concat(t.id),className:"item h-20 flex items-center bg-gray-100 rounded overflow-hidden"},n().createElement("div",{className:"cover"},n().createElement("img",{className:"",src:"".concat(t.blurPicUrl,"?param=80y80"),alt:""})),n().createElement("div",{className:"content px-2"},n().createElement("div",{className:"name text-sm"},t.name),n().createElement("div",{className:"subname"},t.artist.name)),n().createElement("div",{className:"ico text-gray-600 group-hover:text-black ml-auto mr-4"},n().createElement(k.IconChevronRight,{size:24,stroke:1})))}},L=function(e){var t=e.list,a=void 0===t?[]:t,r=Object.keys(I);return n().createElement("div",{className:"domSearch_multimatch border-b px-8 py-5"},n().createElement("div",{className:"title text-bold"},"最佳匹配"),n().createElement("div",{className:"list mt-5 flex space-x-6"},a.map((function(e){var t=(0,m.Z)(e,3),a=t[0],c=t[1],l=t[2];return r.includes(l)&&n().createElement(c,{item:a,key:l})}))))};const P=(0,r.memo)((function(e){var t,a=e.songs,r=void 0===a?[]:a,c=e.multimatch,l=void 0===c?{orders:[]}:c,m=null===(t=l.orders)||void 0===t?void 0:t.map((function(e){return[l[e][0],I[e],e]}));return n().createElement(n().Fragment,null,n().createElement(L,{list:m}),n().createElement("div",{className:"songs_list",style:{"--ui_grid_template":"36px / 54px 24px 24px 37% 4fr 5fr 2fr 3fr"}},n().createElement("div",{className:"thead"},n().createElement("div",{className:"item grid items-center text-gray-400 ui_grid_template"},n().createElement("div",{className:"index"}),n().createElement("div",{className:"heart"}),n().createElement("div",{className:"download"}),n().createElement("div",{className:"name flex-auto px-2"},"音乐标题"),n().createElement("div",{className:"artist flex-none px-2"},"歌手"),n().createElement("div",{className:"album flex-none px-2"},"专辑"),n().createElement("div",{className:"duration flex-none px-2"},"时长"),n().createElement("div",{className:"pop flex-none px-2"},"热度"))),n().createElement("div",{className:"tbody"},r.map((function(e,t){return n().createElement(_.Z,{schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","下载"]],item:e,type:"song",key:e.id},n().createElement("div",{tabIndex:2,className:x()("item grid items-center hover:bg-gray-100 focus:bg-gray-200 focus:outline-none ui_grid_template",{"bg-gray-50":t%2==0})},n().createElement("div",{className:"index pr-2"},n().createElement(w.Z,{index:t,id:e.id})),n().createElement("div",{className:"heart text-center"},n().createElement(Z.Z,{id:e.id})),n().createElement("div",{className:"download text-center"},n().createElement(C.Z,null)),n().createElement("div",{className:"name px-2"},n().createElement(j.Z,{item:e})),n().createElement("div",{className:"artist flex-none px-2 truncate text-gray-400"},n().createElement(O.Z,{artists:e.ar})),n().createElement("div",{className:"album truncate flex-none px-2"},n().createElement(S.Z,{name:e.al.name,id:e.al.name})),n().createElement("div",{className:"duration text-gray-400 truncate flex-none px-2"},h()(e.dt).format("mm:ss")),n().createElement("div",{className:"pop"},n().createElement(D,{pop:e.pop}))))})))))}));var R={"--grid-template-columns":"60px 6fr min-content"},U={"--grid-template-columns":"60px 1fr 1fr"},z=a(4907),T=function(e){var t=e.videos,a=(void 0===t?[]:t).map((function(e){var t=e.type,a=e.title,r=e.coverUrl,n=e.playTime,c=e.creator;return{id:e.vid,type:t,title:a,creator:c,playCount:n,duration:e.durationms,cover:r}}));return n().createElement("div",{className:"videos_list py-5 px-10"},n().createElement(z.Z,{list:a}))};const V=(0,r.memo)(T);var A={"--grid-template-columns":"60px 6fr 2fr 5fr"};a(4916),a(5306),a(9600),a(7042);const F=function(e){var t=e.lyrics,a=void 0===t?[]:t,c=(0,r.useRef)(),l=(0,r.useState)(!1),s=(0,m.Z)(l,2),i=s[0],o=s[1];(0,r.useEffect)((function(){c.current=a.join("\n").replace(/<b>|<\/b>/gm,"")}),[a]);var d=function(){var e=document.createElement("textarea");e.setAttribute("readonly","readonly"),e.textContent=c.current,document.body.appendChild(e),e.select(),document.execCommand("copy")&&(document.execCommand("copy"),console.log("复制成功")),document.body.removeChild(e)};return n().createElement("div",{className:"lrc flex pb-2"},n().createElement("div",{className:"content w-2/3 px-2 text-gray-500"},a.slice(0,i?1/0:4).map((function(e,t){return n().createElement("div",{key:e+t,dangerouslySetInnerHTML:{__html:e}})}))),n().createElement("div",{className:"actions w-1/3 flex flex-col justify-between"},n().createElement("div",{className:"flex space-x-2.5"},n().createElement("button",{type:"button",className:"flex-center border border-gray-400 px-3 h-6 hover:bg-gray-300 rounded-full",onClick:function(){return o(!i)}},i?"收起":"展开","歌词"),n().createElement("button",{type:"button",className:"flex-center border border-gray-400 px-3 h-6 hover:bg-gray-300 rounded-full clip",onClick:d},"复制歌词")),i&&n().createElement("div",{className:"flex space-x-2.5"},n().createElement("button",{type:"button",className:"flex-center border border-gray-400 px-3 h-6 hover:bg-gray-300 rounded-full",onClick:function(){return o(!1)}},"收起歌词"),n().createElement("button",{type:"button",className:"flex-center border border-gray-400 px-3 h-6 hover:bg-gray-300 rounded-full clip",onClick:d},"复制歌词"))))};var H={"--grid-template-columns":"60px 5fr 2fr"},M=function(e){var t=e.djRadios,a=void 0===t?[]:t;return n().createElement("div",{className:"djRadios_list _list",style:H},a.map((function(e,t){return n().createElement("div",{className:x()("item grid items-center hover:bg-gray-100",{"bg-gray-50":t%2==0}),key:e.id},n().createElement(c.Link,{to:"/playlist/dj/".concat(e.id),className:"cover"},n().createElement("img",{className:"",src:"".concat(e.picUrl,"?param=60y60"),alt:""})),n().createElement("div",{className:"px-5"},n().createElement(c.Link,{to:"/playlist/dj/".concat(e.id),className:"name"},e.name)),n().createElement("div",{className:"dj text-gray-300"},"by  ",n().createElement(c.Link,{to:"/user/".concat(e.dj.userId),className:"ui_text_gray_hover"},e.dj.nickname)))})))};const X=(0,r.memo)(M);var q=a(5754),B={"--grid-template-columns":"60px 5fr 2fr"},G=a(5219);function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var K={单曲:{code:1,unit:"首",limit:100,Dom:P,countName:"songCount"},歌手:{code:100,unit:"位",limit:20,Dom:function(e){var t=e.artists,a=void 0===t?[]:t;return n().createElement("div",{className:"artists_list _list",style:R},a.map((function(e,t){return n().createElement("div",{className:x()("item relative grid items-center hover:bg-gray-100",{"bg-gray-50":t%2==1}),key:e.id},n().createElement(c.Link,{to:"/artist/".concat(e.id),className:"absolute inset-0"}),n().createElement("div",{className:"cover"},n().createElement("img",{className:"",src:"".concat(e.img1v1Url,"?param=60y60"),alt:""})),n().createElement("div",{className:"name px-2.5 text-sm"},e.name,e.alia&&n().createElement("span",{className:"text-gray-400"},"(",null==e?void 0:e.alias[0],")")),e.accountId&&n().createElement("span",{className:"account bg-red-500 w-4 h-4 rounded-full text-white flex-center"},n().createElement(k.IconUser,{size:12,stroke:3})))})))},countName:"artistCount"},专辑:{code:10,unit:"张",limit:20,Dom:function(e){var t=e.albums,a=void 0===t?[]:t;return n().createElement("div",{className:"albums_list _list",style:U},a.map((function(e,t){return n().createElement("div",{tabIndex:"2",className:x()("item grid items-center relative hover:bg-gray-100",{"bg-gray-50":t%2==1}),key:e.id},n().createElement(c.Link,{className:"absolute inset-0 z-0",to:"/playlist/album/".concat(e.id)}),n().createElement("div",{className:"cover"},n().createElement("img",{src:"".concat(e.picUrl,"?param=60y60"),alt:""})),n().createElement("div",{className:"name px-5 text-sm"},e.name,e.alias.length>0&&n().createElement("span",{className:"text-gray-400"},"（".concat(e.alias,"）"))),n().createElement("div",{className:"artist truncate"},n().createElement(c.Link,{to:"/artist/".concat(e.artist.id),className:"ui_text_gray_hover relative z-10"},e.artist.name,e.artist.alias.length>0&&n().createElement("span",{className:"text-gray-400"},"（".concat(e.artist.alias,"）")))))})))},countName:"albumCount"},视频:{code:1014,unit:"个",limit:24,Dom:V,countName:"videoCount"},歌单:{code:1e3,unit:"个",limit:20,Dom:function(e){var t=e.playlists,a=void 0===t?[]:t;return n().createElement("div",{className:"playlists_list _list",style:A},a.map((function(e,t){return n().createElement("div",{className:x()("item grid items-center relative hover:bg-gray-100",{"bg-gray-50":t%2==1}),key:e.id},n().createElement(c.Link,{className:"absolute inset-0 z-0",to:"/playlist/music/".concat(e.id)}),n().createElement("div",{className:"cover"},n().createElement("img",{className:"",src:"".concat(e.coverImgUrl,"?param=60y60"),alt:""})),n().createElement("div",{className:"name px-3"},e.name),n().createElement("div",{className:"trackCount text-gray-400"},e.trackCount,"首"),n().createElement("div",{className:"creator text-gray-300"},"by  ",n().createElement(c.Link,{to:"/user/".concat(e.creator.userId),className:"ui_text_black_hover relative z-10"},e.creator.nickname)))})))},countName:"playlistCount"},歌词:{code:1006,unit:"首",limit:20,Dom:function(e){var t=e.songs,a=void 0===t?[]:t;return n().createElement("div",{className:"lyrics_list",style:{"--ui_grid_template":"36px / 54px 24px 24px 37% 4fr 5fr 2fr 3fr"}},n().createElement("div",{className:"thead"},n().createElement("div",{className:"item grid items-center text-gray-400 ui_grid_template"},n().createElement("div",{className:"index"}),n().createElement("div",{className:"heart"}),n().createElement("div",{className:"download"}),n().createElement("div",{className:"name"},"音乐标题"),n().createElement("div",{className:"artist"},"歌手"),n().createElement("div",{className:"album"},"专辑"),n().createElement("div",{className:"duration"},"时长"),n().createElement("div",{className:"text-gray-400"},"热度"))),n().createElement("div",{className:"tbody"},a.map((function(e,t){return n().createElement(_.Z,{schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","下载"]],item:e,type:"song",key:e.id},n().createElement("div",{tabIndex:"2",className:x()("item grid items-center hover:bg-gray-100 focus:outline-none focus:bg-gray-200 ui_grid_template",{"bg-gray-50":t%2==0})},n().createElement("div",{className:"index pr-2"},n().createElement(w.Z,{index:t,id:e.id})),n().createElement("div",{className:"heart"},n().createElement(Z.Z,{id:e.id})),n().createElement("div",{className:"download"},n().createElement(C.Z,null)),n().createElement("div",{className:"name flex"},n().createElement(j.Z,{item:e})),n().createElement("div",{className:"artist truncate"},n().createElement(O.Z,{artists:e.ar})),n().createElement("div",{className:"album truncate"},n().createElement(S.Z,{name:e.al.name,id:e.al.id})),n().createElement("div",{className:"duration text-gray-400 truncate"},h()(e.dt).format("mm:ss")),n().createElement("div",{className:"pop"},n().createElement(D,{pop:e.pop})),n().createElement(F,{lyrics:e.lyrics})))}))))},countName:"songCount"},主播电台:{code:1009,unit:"个",limit:100,Dom:X,countName:"djRadiosCount"},用户:{code:1002,unit:"位",limit:20,Dom:function(e){var t=e.userprofiles,a=void 0===t?[]:t;return n().createElement("div",{className:"userprofiles_list _list",style:B},a.map((function(e,t){return n().createElement(c.Link,{to:"/user/".concat(e.userId),className:x()("item grid items-center hover:bg-gray-100",{"bg-gray-50":t%2==1}),key:e.userId},n().createElement("div",{className:"cover"},n().createElement("img",{src:"".concat(e.avatarUrl,"?param=60y60"),alt:""})),n().createElement("div",{className:"name px-5"},e.nickname," ",n().createElement(q.ZP,{size:16,gender:e.gender})),n().createElement("div",{className:"signature text-gray-400 ml-auto"},e.signature))})))},countName:"userprofileCount"}},Q=function(){console.log("entry search");var e=(0,c.useParams)(),t=e.keywords,a=e.type,l=(0,G.T)(),s=(0,r.useState)({}),i=(0,m.Z)(s,2),o=i[0],v=i[1],N=(0,r.useState)(0),b=(0,m.Z)(N,2),h=b[0],k=b[1],_=(0,r.useState)({}),w=(0,m.Z)(_,2),Z=w[0],C=w[1],j=(0,r.useState)(1),O=(0,m.Z)(j,2),S=O[0],D=O[1],I=(0,r.useState)(!0),L=(0,m.Z)(I,2),P=L[0],R=L[1],U=K[a],z=U.code,T=U.unit,V=U.limit,A=U.Dom,F=U.countName,H=(0,G.C)((function(e){return e.common})).searchValue,M=function(){var e=(0,u.Z)(p().mark((function e(){var r,n,c,l,m;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,(0,E.Zb)({keywords:t,limit:V,type:z,offset:(S-1)*V});case 4:if(r=e.sent,n=r.result,c=n[F],"单曲"!==a){e.next=14;break}return e.next=10,(0,E.cX)({keywords:t});case 10:l=e.sent,m=l.result,C(void 0===m?{}:m);case 14:k(c),v(n),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:R(!1);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){H||l((0,g.setSearchValue)({searchValue:t}))}),[]),(0,r.useEffect)((function(){D(1)}),[t,a]),(0,r.useEffect)((function(){M()}),[t,a,S]),n().createElement("div",{className:"domSearch overflow-auto max-h-full flex-auto"},n().createElement("div",{className:"domSearch_header p-8 pb-2.5 border-b"},n().createElement("div",{className:"font-bold text-base"},"找到",h||0,T),n().createElement("div",{className:"domSearch_nav mt-5 space-x-4"},Object.keys(K).map((function(e){return n().createElement(c.NavLink,{key:e,to:"/search/".concat(t,"/").concat(e),className:function(e){var t=e.isActive;return x()("text-lighter text-sm",t&&"font-bold")}},e)})))),n().createElement("div",{className:"domSearch_main"},P?n().createElement("div",{className:"pt-48 flex-center"},n().createElement(f.Z,null)):n().createElement(n().Fragment,null,n().createElement(A,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){(0,d.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({multimatch:Z},o)),n().createElement(y.Z,{total:Math.ceil(h/V),page:S,func:D}))))};const W=(0,r.memo)(Q);var Y=function(){return n().createElement(c.Routes,null,n().createElement(c.Route,{path:":keywords",element:n().createElement(o,null)},n().createElement(c.Route,{path:":type",element:n().createElement(W,null)}),n().createElement(c.Route,{index:!0,element:n().createElement(c.Navigate,{to:"单曲",replace:!0})})))};const $=(0,r.memo)(Y)}}]);
//# sourceMappingURL=Search.js.map?version=25871aff