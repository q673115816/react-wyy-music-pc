{"version":3,"file":"js/DJ-Category.js?version=8ac3623a","mappings":"kNAAA,iB,41BAMA,IAEMA,EAAa,WACjB,I,QAAsBC,GAAAA,EAAAA,EAAAA,aAAdC,EAAcD,EAAdC,KAAMC,EAAQF,EAARE,IACUC,G,GAAAA,EAAAA,EAAAA,UAAS,I,EAAG,E,oiBAA7BC,EAAiBD,EAAY,GAAvBE,EAAWF,EAAY,GAC9BG,GAAYC,EAAAA,EAAAA,QAAO,MACnBC,GAAcD,EAAAA,EAAAA,QAAO,MACrBE,GAASF,EAAAA,EAAAA,QAAO,GAEhBG,G,EAAa,uB,IAEPC,E,2FAAmBC,EAAAA,EAAAA,IAAc,CACvCC,OAAQX,EACRY,MAbM,GAcNL,OAAQA,EAAOM,U,OAHX,EAAU,OAARJ,SAKRF,EAAOM,SAhBC,GAiBRV,GAAQ,SAACW,G,OAAS,EAAIA,GAAAA,OAAM,EAAGL,O,gDAE/BM,QAAQC,IAAI,EAAD,I,oRASf,OANAC,EAAAA,EAAAA,YAAU,WACRd,EAAQ,IACRI,EAAOM,QAAU,IAEhB,CAACb,KACJkB,EAAAA,EAAAA,GAAYV,EAAYJ,EAAWE,GAEjC,kBAACa,MAAG,CAACC,UAAU,uBAAuBC,IAAKjB,GACzC,kBAACe,MAAG,CAACC,UAAU,gBAAgBrB,GAC/B,kBAACoB,MAAG,CAACC,UAAU,+BACZlB,EAAKoB,KAAI,SAACC,G,OACT,kBAACC,EAAAA,KAAI,CAACC,IAAKF,EAAKG,GAAIC,GAAI,gBAAwB,OAARJ,EAAKG,IAAMN,UAAU,QAC3D,kBAACD,MAAG,CAACC,UAAU,uCACb,kBAACQ,MAAG,CACFC,QAAU,OACVT,UAAY,gBACZU,IAAK,GAAe,OAAZP,EAAKQ,OAAO,kBACpBC,IAAI,MAGR,kBAACb,MAAG,CAACC,UAAU,2BACb,kBAACD,MAAG,CAACC,UAAU,+BAA+BG,EAAKU,MACnD,kBAACd,MAAG,CAACC,UAAU,sBAAsBG,EAAKW,UAC1C,kBAACf,MAAG,CAACC,UAAU,sBAAqB,MAElC,kBAACe,OAAI,KAAEZ,EAAKa,cAAoB,OAEhC,kBAACD,OAAI,KAAEZ,EAAKc,iBAMtB,kBAAClB,MAAG,CAACE,IAAKf,EAAac,UAAU,eAC/B,kBAACkB,EAAAA,EAAO,SAMhB,SAAeC,EAAAA,EAAAA,MAAK1C,GCzDpB,EANe,W,OACb,kBAAC2C,EAAAA,OAAM,KACL,kBAACC,EAAAA,MAAK,CAACC,KAAO,aAAaC,QAAS,kBAAC9C,EAAU","sources":["webpack://@wyy/web/./src/features/DJ-Category/DJCategory.tsx","webpack://@wyy/web/./src/features/DJ-Category/Router.tsx"],"sourcesContent":["import React, { memo, useEffect, useRef, useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { apiDjRadioHot } from \"@/api\";\nimport useInfinite from \"@/hooks/useInfinite\";\nimport Loading from \"@/components/Loading\";\n\nconst limit = 40;\n\nconst DJCategory = () => {\n  const { type, rid } = useParams();\n  const [data, setData] = useState([]);\n  const DomScroll = useRef(null);\n  const DomObserver = useRef(null);\n  const offset = useRef(0);\n\n  const handleInit = async () => {\n    try {\n      const { djRadios } = await apiDjRadioHot({\n        cateId: rid,\n        limit,\n        offset: offset.current,\n      });\n      offset.current += limit;\n      setData((prev) => [...prev, ...djRadios]);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  useEffect(() => {\n    setData([]);\n    offset.current = 0;\n    // handleInit();\n  }, [rid]);\n  useInfinite(handleInit, DomScroll, DomObserver);\n  return (\n    <div className=\"overflow-auto h-full\" ref={DomScroll}>\n      <div className=\"ui_header h1\">{type}</div>\n      <div className=\"grid grid-cols-2 gap-5 px-8\">\n        {data.map((item) => (\n          <Link key={item.id} to={`/playlist/dj/${item.id}`} className=\"flex\">\n            <div className=\"w-32 rounded overflow-hidden border\">\n              <img\n                loading={`lazy`}\n                className={`aspect-square`}\n                src={`${item.picUrl}?param=200y200`}\n                alt=\"\"\n              />\n            </div>\n            <div className=\"flex-auto w-0 px-2 pt-8\">\n              <div className=\"ui_text_black_hover text-sm\">{item.name}</div>\n              <div className=\"text-gray-400 mt-4\">{item.rcmdtext}</div>\n              <div className=\"text-gray-400 mt-2\">\n                节目：\n                <span>{item.programCount}</span>\n                ，订阅：\n                <span>{item.subCount}</span>\n              </div>\n            </div>\n          </Link>\n        ))}\n      </div>\n      <div ref={DomObserver} className=\"flex-center\">\n        <Loading />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(DJCategory);\n","import React from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\n\nimport DJCategory from \"./DJCategory\";\n\nconst router = () => (\n  <Routes>\n    <Route path={`:type/:rid`} element={<DJCategory />} />\n  </Routes>\n);\n\nexport default router;\n"],"names":["DJCategory","useParams","type","rid","useState","data","setData","DomScroll","useRef","DomObserver","offset","handleInit","djRadios","apiDjRadioHot","cateId","limit","current","prev","console","log","useEffect","useInfinite","div","className","ref","map","item","Link","key","id","to","img","loading","src","picUrl","alt","name","rcmdtext","span","programCount","subCount","Loading","memo","Routes","Route","path","element"],"sourceRoot":""}