{"version":3,"file":"js/DJ-Category.js?version=29872b78","mappings":"gQAMMA,EAAa,WACjB,OAAsBC,EAAAA,EAAAA,aAAdC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,IACd,GAAwBC,EAAAA,EAAAA,UAAS,IAAjC,eAAOC,EAAP,KAAaC,EAAb,KACMC,GAAYC,EAAAA,EAAAA,UACZC,GAAcD,EAAAA,EAAAA,UACdE,GAASF,EAAAA,EAAAA,QAAO,GAGhBG,EAAU,mCAAG,gHAEYC,EAAAA,EAAAA,IAAc,CACvCC,OAAQV,EACRW,MANQ,GAORJ,OAAQA,EAAOK,UALF,gBAEPC,EAFO,EAEPA,SAKRN,EAAOK,SATG,GAUVT,GAAQ,SAACW,GAAD,wBAAcA,IAAd,OAAuBD,OARhB,gDAUfE,QAAQC,IAAR,MAVe,yDAAH,qDAmBhB,OANAC,EAAAA,EAAAA,YAAU,WACRd,EAAQ,IACRI,EAAOK,QAAU,IAEhB,CAACZ,KACJkB,EAAAA,EAAAA,GAAYV,EAAYJ,EAAWE,GAEjC,yBAAKa,UAAU,uBAAuBC,IAAKhB,GACzC,yBAAKe,UAAU,gBAAgBpB,GAC/B,yBAAKoB,UAAU,+BACZjB,EAAKmB,KAAI,SAACC,GAAD,OACR,kBAAC,EAAAC,KAAD,CAAMC,IAAKF,EAAKG,GAAIC,GAAE,uBAAkBJ,EAAKG,IAAMN,UAAU,QAC3D,yBAAKA,UAAU,uCACb,yBACEQ,QAAO,OACPR,UAAS,sBACTS,IAAG,UAAKN,EAAKO,OAAV,kBACHC,IAAI,MAGR,yBAAKX,UAAU,2BACb,yBAAKA,UAAU,+BAA+BG,EAAKS,MACnD,yBAAKZ,UAAU,sBAAsBG,EAAKU,UAC1C,yBAAKb,UAAU,sBAAf,MAEE,8BAAOG,EAAKW,cAFd,OAIE,8BAAOX,EAAKY,iBAMtB,yBAAKd,IAAKd,EAAaa,UAAU,eAC/B,kBAACgB,EAAA,EAAD,SAMR,SAAeC,EAAAA,EAAAA,MAAKvC,GCxDpB,EANe,kBACb,kBAAC,EAAAwC,OAAD,KACE,kBAAC,EAAAC,MAAD,CAAOC,KAAI,aAAgBC,QAAS,kBAAC,EAAD","sources":["webpack://wyy/./src/features/DJ-Category/DJCategory.tsx","webpack://wyy/./src/features/DJ-Category/Router.tsx"],"sourcesContent":["import React, { memo, useEffect, useRef, useState } from \"react\";\nimport { Link, Route, Routes, useParams } from \"react-router-dom\";\nimport { apiDjRadioHot } from \"@/api\";\nimport useInfinite from \"@/hooks/useInfinite\";\nimport Loading from \"@/components/Loading\";\n\nconst DJCategory = () => {\n  const { type, rid } = useParams();\n  const [data, setData] = useState([]);\n  const DomScroll = useRef();\n  const DomObserver = useRef();\n  const offset = useRef(0);\n  const limit = 40;\n\n  const handleInit = async () => {\n    try {\n      const { djRadios } = await apiDjRadioHot({\n        cateId: rid,\n        limit,\n        offset: offset.current,\n      });\n      offset.current += limit;\n      setData((prev) => [...prev, ...djRadios]);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  useEffect(() => {\n    setData([]);\n    offset.current = 0;\n    // handleInit();\n  }, [rid]);\n  useInfinite(handleInit, DomScroll, DomObserver);\n  return (\n    <div className=\"overflow-auto h-full\" ref={DomScroll}>\n      <div className=\"ui_header h1\">{type}</div>\n      <div className=\"grid grid-cols-2 gap-5 px-8\">\n        {data.map((item) => (\n          <Link key={item.id} to={`/playlist/dj/${item.id}`} className=\"flex\">\n            <div className=\"w-32 rounded overflow-hidden border\">\n              <img\n                loading={`lazy`}\n                className={`ui_aspect-ratio-1/1`}\n                src={`${item.picUrl}?param=200y200`}\n                alt=\"\"\n              />\n            </div>\n            <div className=\"flex-auto w-0 px-2 pt-8\">\n              <div className=\"ui_text_black_hover text-sm\">{item.name}</div>\n              <div className=\"text-gray-400 mt-4\">{item.rcmdtext}</div>\n              <div className=\"text-gray-400 mt-2\">\n                节目：\n                <span>{item.programCount}</span>\n                ，订阅：\n                <span>{item.subCount}</span>\n              </div>\n            </div>\n          </Link>\n        ))}\n      </div>\n      <div ref={DomObserver} className=\"flex-center\">\n        <Loading />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(DJCategory);\n","import React from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\n\nimport DJCategory from \"./DJCategory\";\n\nconst router = () => (\n  <Routes>\n    <Route path={`:type/:rid`} element={<DJCategory />} />\n  </Routes>\n);\n\nexport default router;\n"],"names":["DJCategory","useParams","type","rid","useState","data","setData","DomScroll","useRef","DomObserver","offset","handleInit","apiDjRadioHot","cateId","limit","current","djRadios","prev","console","log","useEffect","useInfinite","className","ref","map","item","Link","key","id","to","loading","src","picUrl","alt","name","rcmdtext","programCount","subCount","Loading","memo","Routes","Route","path","element"],"sourceRoot":""}