"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[9],{825:(e,t,a)=>{a.r(t),a.d(t,{default:()=>W});var n=a(7363),r=a.n(n),l=a(6711),s=a(885),i=(a(1249),a(4184)),c=a.n(i),m=a(6719),o=(a(8309),a(7484)),u=a.n(o),d=function(e){var t=e.hotAlbums,a=void 0===t?[]:t;return r().createElement("div",{className:"grid grid-cols-4 p-8 gap-x-20 gap-y-5"},a.map((function(e){return r().createElement("div",{className:"item",key:e.id},r().createElement("div",{className:"cover rounded overflow-hidden relative group"},r().createElement(l.Link,{to:"/playlist/album/".concat(e.id)},r().createElement("img",{className:"",src:"".concat(e.picUrl,"?param=200y200"),alt:""})),r().createElement("button",{type:"button",className:"absolute inset-0 ui_themeColor flex-center m-auto w-10 h-10 rounded-full bg-white bg-opacity-90 opacity-0 group-hover:opacity-100 transition-opacity duration-500"},r().createElement(m.IconPlayerPlay,{size:20,className:"fill-current"}))),r().createElement("div",{className:"name text-sm mt-2"},r().createElement(l.Link,{to:"/playlist/album/".concat(e.id),className:"ui_ellipse"},r().createElement("span",{className:"ui_text_black_hover"},e.name),e.alias.map((function(e){return r().createElement("span",{className:"text-gray-500",key:e},"（".concat(e,"）"))})))),r().createElement("div",{className:"text-gray-400 mt-2"},u()(e.publishTime).format("YYYY-MM-DD")))})))};const v=(0,n.memo)(d);var f=function(e){var t=e.hotAlbums,a=void 0===t?[]:t;return r().createElement("div",{className:"list pt-4"},a.map((function(e,t){var a;return r().createElement("div",{className:c()("list_item pl-5 flex items-center h-20 hover:bg-gray-100",{"bg-gray-50":t%2==0}),key:e.id},r().createElement(l.Link,{className:"cover border rounded flex-none w-14 h-14",to:"/playlist/album/".concat(e.id)},r().createElement("img",{className:"ui_containimg",src:"".concat(e.picUrl,"?param=100y100"),alt:""})),r().createElement(l.Link,{className:"name truncate px-2.5",to:"/playlist/album/".concat(e.id)},e.name," ",(null===(a=e.alias)||void 0===a?void 0:a.length)>0&&r().createElement("span",{className:"text-gray-400"},"(",e.alias.map((function(e){return e})),")")),r().createElement("span",{className:"size text-gray-400"},e.size,"首"),r().createElement("span",{className:"publishTime text-gray-400"},"发行时间：",u()(e.publishTime).format("YYYY-MM-DD")))})))};const p=(0,n.memo)(f);a(7042),a(3112),a(2222);var E=a(7285),x=a(1495),y=a(7220).u.injectEndpoints({endpoints:function(e){return{getArtistDetail:e.query({query:function(e){return{url:"artist/detail",method:"POST",body:e}}}),postArtistSub:e.mutation({query:function(e){return{url:"artist/sub",method:"POST",body:e}}}),getSimiArtist:e.query({query:function(e){return{url:"simi/artist",method:"POST",body:e}}}),getArtistAlbum:e.query({query:function(e){return{url:"artist/album",method:"POST",body:e}}}),getArtistTopSong:e.query({query:function(e){return{url:"artist/top/song",method:"POST",body:e}}}),getArtistDesc:e.query({query:function(e){return{url:"artist/desc",method:"POST",body:e}}}),getArtistMV:e.mutation({query:function(e){return{url:"artist/mv",method:"POST",body:e}}})}}}),b=y.useGetArtistDetailQuery,N=y.useGetSimiArtistQuery,g=y.useGetArtistAlbumQuery,h=y.useGetArtistTopSongQuery,k=y.useGetArtistDescQuery,A=y.useGetArtistMVMutation,_=y.usePostArtistSubMutation,w=function(){var e=(0,l.useParams)().id,t=void 0===e?"":e;console.log("artist_column");var a=(0,n.useState)(10),i=(0,s.Z)(a,2),o=i[0],d=i[1],v=h({id:t}).data,f=(null==v?void 0:v.songs)||[];return r().createElement("div",{className:"column p-8"},r().createElement("div",{className:"column_item"},r().createElement("div",{className:"cover"},r().createElement("div",{className:"Top50 flex-none bg-black bg-opacity-50 flex-center flex-col font-bold rounded w-full h-full text-white"},r().createElement("div",{className:"text-4xl"},"TOP"),r().createElement("div",{className:"text-6xl"},"50"))),r().createElement("div",{className:"aside flex-auto ml-20 w-0"},r().createElement("div",{className:"flex"},r().createElement("span",{className:"font-bold text-base"},"热门50首"),r().createElement("div",{className:"flex items-center"},r().createElement("button",{type:"button",className:"flex-none border rounded-full flex-center mx-3 p-1"},r().createElement(m.IconPlayerPlay,{size:10,className:"fill-current"})),r().createElement("span",{className:"text-gray-300"},"|"),r().createElement("button",{type:"button",className:"mx-3"},r().createElement(m.IconFolderPlus,{size:20,stroke:1})))),r().createElement("div",{className:"list mt-2"},f.slice(0,o).map((function(e,t){return r().createElement("div",{className:c()("item hover:bg-gray-100 focus:outline-none focus:bg-gray-200",{"bg-gray-50":t%2==0}),tabIndex:2,key:e.id},r().createElement("div",{className:"index flex-none text-right text-gray-400"},String(t+1).padStart(2,"0")),r().createElement("div",{className:"heart flex-none text-center"},r().createElement(x.Z,{id:e.id})),r().createElement("div",{className:"download flex-none text-center"},r().createElement("button",{type:"button",className:"text-gray-500 hover:text-black"},r().createElement(m.IconDownload,{size:16,stroke:1}))),r().createElement("div",{className:"name flex-auto flex flex-auto min-w-0 px-2.5"},r().createElement("span",{className:"truncate",title:"".concat(e.name,"(").concat(e.alia.map((function(e){return e})),")")},e.name," ",r().createElement("span",{className:"text-gray-400"},e.alia.map((function(e){return e})))),r().createElement(E.Z,{item:e,className:"flex-none"})),r().createElement("div",{className:"duration text-gray-400 flex-none"},u()(e.dt).format("mm:ss")))})),10===o&&f.length>10&&r().createElement("button",{type:"button",className:"seeMore",onClick:function(){return d(50)}},"查看全部",f.length,"首 >")))))};const S=(0,n.memo)(w);var P=a(9859),Z=a(8157),L=[["Grid",m.IconLayoutGrid],["List",m.IconList],["Column",m.IconLayout]],z={Grid:v,List:p,Column:S};const T=(0,n.memo)((function(){var e=(0,l.useParams)().id,t=void 0===e?"":e,a=(0,P.Z)("layout",L[0][0]),i=(0,s.Z)(a,3),m=i[0],o=void 0===m?"Grid":m,u=i[1],d=(i[2],g({id:t})),v=d.data,f=d.isLoading,p=(null==v?void 0:v.hotAlbums)||[];return null==v||v.more,f?r().createElement("div",{className:"flex-center"},r().createElement(Z.Z,null)):r().createElement("div",{className:"domArtist_section relative"},r().createElement("div",{className:"absolute right-8 bottom-full actions ml-auto space-x-0.5 flex rounded-sm overflow-hidden"},L.map((function(e){var t=(0,s.Z)(e,2),a=t[0],n=t[1];return r().createElement("button",{key:a,type:"button",className:c()("px-1.5 py-0.5 bg-gray-200","handle",a===o&&"bg-gray-400 text-white"),onClick:function(){return u(a)}},r().createElement(n,{size:14,stroke:1}))}))),r().createElement("div",{className:"domArtist_section_layout"},(0,n.createElement)(z[o],{hotAlbums:p,id:t})))}));var M=a(2982),q=a(5861),C=a(7757),D=a.n(C),I=a(4716),G=a(4907),O=a(57);const Y=(0,n.memo)((function(){var e=(0,l.useParams)().id,t=void 0===e?"":e,a=(0,O.x)([]),i=(0,s.Z)(a,2),c=i[0],m=i[1],o=A(),u=(0,s.Z)(o,2),d=u[0],v=u[1].isLoading,f=(0,n.useRef)(!0),p=(0,n.useRef)(0),E=(0,n.useRef)(null),x=(0,n.useRef)(null),y=function(){var e=(0,q.Z)(D().mark((function e(){var a,n,r,l;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,d({id:t,limit:24,offset:p.current});case 5:a=e.sent,n=a.data,p.current+=24,r=(null==n?void 0:n.mvs)||[],l=(null==n?void 0:n.hasMore)||!1,f.current=l,m((function(e){e.push.apply(e,(0,M.Z)(r.map((function(e){var t=e.id,a=e.imgurl,n=e.duration,r=e.name;return{id:t,duration:n,playCount:e.playCount,cover:a,title:r,type:"0"}}))))})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,I.Z)(y,E,x),r().createElement("div",{className:"domArtist_section p-8"},r().createElement(G.Z,{list:c}),r().createElement("div",{ref:x,className:"flex-center"},v&&r().createElement(Z.Z,null)))})),R=(0,n.memo)((function(){var e,t=(0,l.useParams)().id,a=k({id:void 0===t?"":t}),n=a.data;return a.isLoading?r().createElement("div",{className:"flex-center"},r().createElement(Z.Z,null)):r().createElement("div",{className:"domArtist_section p-8 leading-8 text-sm select-text"},r().createElement("div",{className:"domArtist_subtitle font-bold"},"简介"),r().createElement("div",{className:"domArtist_article text-gray-500 indent-8"},null==n?void 0:n.briefDesc),r().createElement("br",null),r().createElement("br",null),null==n||null===(e=n.introduction)||void 0===e?void 0:e.map((function(e){return r().createElement("div",{key:e.ti,className:"select-text"},r().createElement("div",{className:"domArtist_subtitle font-bold"},e.ti),r().createElement("div",{className:"domArtist_article text-gray-500 whitespace-pre-line"},e.txt))})))}));var V=function(){var e=(0,l.useParams)().id,t=N({id:void 0===e?"":e}),a=t.data;if(t.isLoading)return r().createElement("div",{className:"flex justify-center pt-12"},r().createElement(Z.Z,null));var n=(null==a?void 0:a.artists)||[];return 0===n.length?r().createElement("div",{className:"text-center text-gray-400 text-sm pt-16"},"没有相似歌手"):r().createElement("div",{className:"domArtist_section p-8"},r().createElement("div",{className:"grid grid-cols-5 gap-5"},n.map((function(e){return r().createElement("div",{className:"item",key:e.id},r().createElement("div",{className:"cover rounded overflow-hidden border"},r().createElement(l.Link,{to:"/artist/".concat(e.id),className:""},r().createElement("img",{loading:"lazy",className:"aspect-square",src:"".concat(e.picUrl,"?param=200y200"),alt:""}))),r().createElement("div",{className:"footer text-sm mt-2"},r().createElement(l.Link,{to:"/artist/".concat(e.id),className:""},e.name)))}))))};const Q=(0,n.memo)(V);a(9826),a(1539),a(9653);var j=a(7419),F=a(5326),U=a(5219);const B=(0,n.memo)((function(){var e,t,a,i,c,o,u,d=(0,l.useParams)().id,v=void 0===d?"":d,f=(0,U.C)((function(e){return e.account})).artistSublist,p=(0,n.useMemo)((function(){return f.find((function(e){return e.id===Number(v)}))}),[f,v]),E=(0,U.T)(),x=_(),y=(0,s.Z)(x,2),N=y[0],g=(y[1].isLoading,b({id:v}).data),h=(null==g?void 0:g.data)||{},k=function(){var e=(0,q.Z)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N({id:v,t:1});case 3:E((0,j.setToast)("收藏成功！")),(0,F.r)(E),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,q.Z)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=4;break}E((0,j.setDialogUnSubscriptionShow)({artistId:v})),e.next=6;break;case 4:return e.next=6,k();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r().createElement("div",{className:"domArtist_header flex p-8"},r().createElement("div",{className:"w-44 h-44 border overflow-hidden rounded"},r().createElement("img",{src:"".concat(null===(e=h.artist)||void 0===e?void 0:e.cover,"?param=200y200"),alt:""})),r().createElement("div",{className:"content flex-auto px-5"},r().createElement("div",{className:"name h1 select-text"},null===(t=h.artist)||void 0===t?void 0:t.name),r().createElement("div",{className:"enname my-3 select-text"},null===(a=h.alias)||void 0===a?void 0:a.map((function(e){return e}))),r().createElement("div",{className:"actions mt-3 flex space-x-2"},r().createElement("button",{onClick:A,type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex items-center text-sm"},p?r().createElement(r().Fragment,null,r().createElement(m.IconCheckbox,{size:20,stroke:1}),"已收藏"):r().createElement(r().Fragment,null,r().createElement(m.IconFolderPlus,{size:20,stroke:1}),"收藏")),h.user&&r().createElement(l.Link,{to:"/user/".concat(null===(i=h.user)||void 0===i?void 0:i.userId),className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex items-center text-sm"},"个人主页")),r().createElement("div",{className:"info mt-5 space-x-5"},r().createElement("span",{className:"size"},"单曲数:",null==h||null===(c=h.artist)||void 0===c?void 0:c.musicSize),r().createElement("span",{className:"size"},"专辑数:",null===(o=h.artist)||void 0===o?void 0:o.albumSize),r().createElement("span",{className:"size"},"MV数:",null===(u=h.artist)||void 0===u?void 0:u.mvSize))))}));var H=[["专辑","Album"],["MV","MV"],["歌手详情","Detail"],["相似歌手","Similarity"]],J={Album:T,MV:Y,Detail:R,Similarity:Q};const K=(0,n.memo)((function(){var e=(0,n.useState)(H[0][1]),t=(0,s.Z)(e,2),a=t[0],l=t[1];return r().createElement("div",{className:"domArtist overflow-auto max-h-full flex-auto"},r().createElement(B,null),r().createElement("div",{className:"domArtist_main"},r().createElement("div",{className:"domArtist_nav flex mx-8"},r().createElement("div",{className:"flex space-x-4 text-sm"},H.map((function(e){var t=(0,s.Z)(e,2),n=t[0],i=t[1];return r().createElement("button",{key:i,onClick:function(){return l(i)},type:"button",className:c()("domArtist_nav_link",a===i&&"font-bold ui_underline")},n)}))),r().createElement("div",{className:"domArtist_album_layout relative ml-auto"})),(0,n.createElement)(J[a])))})),W=function(){return r().createElement(l.Routes,null,r().createElement(l.Route,{path:":id",element:r().createElement(K,null)}))}}}]);
//# sourceMappingURL=Artist.js.map?version=7861e178