"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[9],{1274:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ie});var n=r(7363),a=r.n(n),l=r(6711),i=r(4184),o=r.n(i),c=r(6719),s=r(7484),u=r.n(s),m=function(e){var t=e.hotAlbums,r=void 0===t?[]:t;return a().createElement("div",{className:"grid grid-cols-4 p-8 gap-x-20 gap-y-5"},r.map((function(e){return a().createElement("div",{className:"item",key:e.id},a().createElement("div",{className:"cover rounded overflow-hidden relative group"},a().createElement(l.Link,{to:"/playlist/album/".concat(e.id)},a().createElement("img",{className:"",src:"".concat(e.picUrl,"?param=200y200"),alt:""})),a().createElement("button",{type:"button",className:"absolute inset-0 ui_themeColor flex-center m-auto w-10 h-10 rounded-full bg-white bg-opacity-90 opacity-0 group-hover:opacity-100 transition-opacity duration-500"},a().createElement(c.IconPlayerPlay,{size:20,className:"fill-current"}))),a().createElement("div",{className:"name text-sm mt-2"},a().createElement(l.Link,{to:"/playlist/album/".concat(e.id),className:"ui_ellipse"},a().createElement("span",{className:"ui_text_black_hover"},e.name),e.alias.map((function(e){return a().createElement("span",{className:"text-gray-500",key:e},"（".concat(e,"）"))})))),a().createElement("div",{className:"text-gray-400 mt-2"},u()(e.publishTime).format("YYYY-MM-DD")))})))};const d=(0,n.memo)(m);var f=function(e){var t=e.hotAlbums,r=void 0===t?[]:t;return a().createElement("div",{className:"list pt-4"},r.map((function(e,t){var r;return a().createElement("div",{className:o()("list_item pl-5 flex items-center h-20 hover:bg-gray-100",{"bg-gray-50":t%2==0}),key:e.id},a().createElement(l.Link,{className:"cover border rounded flex-none w-14 h-14",to:"/playlist/album/".concat(e.id)},a().createElement("img",{className:"ui_containimg",src:"".concat(e.picUrl,"?param=100y100"),alt:""})),a().createElement(l.Link,{className:"name truncate px-2.5",to:"/playlist/album/".concat(e.id)},e.name," ",(null===(r=e.alias)||void 0===r?void 0:r.length)>0&&a().createElement("span",{className:"text-gray-400"},"(",e.alias.map((function(e){return e})),")")),a().createElement("span",{className:"size text-gray-400"},e.size,"首"),a().createElement("span",{className:"publishTime text-gray-400"},"发行时间：",u()(e.publishTime).format("YYYY-MM-DD")))})))};const v=(0,n.memo)(f);var y=r(623),p=r(6129),b=r(6910).u.injectEndpoints({endpoints:function(e){return{getArtistDetail:e.query({query:function(e){return{url:"artist/detail",method:"POST",body:e}}}),postArtistSub:e.mutation({query:function(e){return{url:"artist/sub",method:"POST",body:e}}}),getSimiArtist:e.query({query:function(e){return{url:"simi/artist",method:"POST",body:e}}}),getArtistAlbum:e.query({query:function(e){return{url:"artist/album",method:"POST",body:e}}}),getArtistTopSong:e.query({query:function(e){return{url:"artist/top/song",method:"POST",body:e}}}),getArtistDesc:e.query({query:function(e){return{url:"artist/desc",method:"POST",body:e}}}),getArtistMV:e.mutation({query:function(e){return{url:"artist/mv",method:"POST",body:e}}})}}}),h=b.useGetArtistDetailQuery,E=b.useGetSimiArtistQuery,x=b.useGetArtistAlbumQuery,g=b.useGetArtistTopSongQuery,N=b.useGetArtistDescQuery,A=b.useGetArtistMVMutation,w=b.usePostArtistSubMutation;function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(){var e=(0,l.useParams)().id,t=void 0===e?"":e;console.log("artist_column");var r,i,s=(r=(0,n.useState)(10),i=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return l}}(r,i)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=s[0],d=s[1],f=g({id:t}).data,v=(null==f?void 0:f.songs)||[];return a().createElement("div",{className:"column p-8"},a().createElement("div",{className:"column_item"},a().createElement("div",{className:"cover"},a().createElement("div",{className:"Top50 flex-none bg-black bg-opacity-50 flex-center flex-col font-bold rounded w-full h-full text-white"},a().createElement("div",{className:"text-4xl"},"TOP"),a().createElement("div",{className:"text-6xl"},"50"))),a().createElement("div",{className:"aside flex-auto ml-20 w-0"},a().createElement("div",{className:"flex"},a().createElement("span",{className:"font-bold text-base"},"热门50首"),a().createElement("div",{className:"flex items-center"},a().createElement("button",{type:"button",className:"flex-none border rounded-full flex-center mx-3 p-1"},a().createElement(c.IconPlayerPlay,{size:10,className:"fill-current"})),a().createElement("span",{className:"text-gray-300"},"|"),a().createElement("button",{type:"button",className:"mx-3"},a().createElement(c.IconFolderPlus,{size:20,stroke:1})))),a().createElement("div",{className:"list mt-2"},v.slice(0,m).map((function(e,t){return a().createElement("div",{className:o()("item hover:bg-gray-100 focus:outline-none focus:bg-gray-200",{"bg-gray-50":t%2==0}),tabIndex:2,key:e.id},a().createElement("div",{className:"index flex-none text-right text-gray-400"},String(t+1).padStart(2,"0")),a().createElement("div",{className:"heart flex-none text-center"},a().createElement(p.Z,{id:e.id})),a().createElement("div",{className:"download flex-none text-center"},a().createElement("button",{type:"button",className:"text-gray-500 hover:text-black"},a().createElement(c.IconDownload,{size:16,stroke:1}))),a().createElement("div",{className:"name flex-auto flex flex-auto min-w-0 px-2.5"},a().createElement("span",{className:"truncate",title:"".concat(e.name,"(").concat(e.alia.map((function(e){return e})),")")},e.name," ",a().createElement("span",{className:"text-gray-400"},e.alia.map((function(e){return e})))),a().createElement(y.Z,{item:e,className:"flex-none"})),a().createElement("div",{className:"duration text-gray-400 flex-none"},u()(e.dt).format("mm:ss")))})),10===m&&v.length>10&&a().createElement("button",{type:"button",className:"seeMore",onClick:function(){return d(50)}},"查看全部",v.length,"首 >")))))};const I=(0,n.memo)(k);var _=r(30),P=r(4719);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M=[["Grid",c.IconLayoutGrid],["List",c.IconList],["Column",c.IconLayout]],C={Grid:d,List:v,Column:I};const O=(0,n.memo)((function(){var e=(0,l.useParams)().id,t=void 0===e?"":e,r=j((0,_.Z)("layout",M[0][0]),3),i=r[0],c=void 0===i?"Grid":i,s=r[1],u=(r[2],x({id:t})),m=u.data,d=u.isLoading,f=(null==m?void 0:m.hotAlbums)||[];return null==m||m.more,d?a().createElement("div",{className:"flex-center"},a().createElement(P.Z,null)):a().createElement("div",{className:"domArtist_section relative"},a().createElement("div",{className:"absolute right-8 bottom-full actions ml-auto space-x-0.5 flex rounded-sm overflow-hidden"},M.map((function(e){var t=j(e,2),r=t[0],n=t[1];return a().createElement("button",{key:r,type:"button",className:o()("px-1.5 py-0.5 bg-gray-200","handle",r===c&&"bg-gray-400 text-white"),onClick:function(){return s(r)}},a().createElement(n,{size:14,stroke:1}))}))),a().createElement("div",{className:"domArtist_section_layout"},(0,n.createElement)(C[c],{hotAlbums:f,id:t})))}));var L=r(5666),z=r.n(L),q=r(534),D=r(9227),G=r(57);function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t,r,n,a,l,i){try{var o=e[l](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return l}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(e,t):void 0}}const V=(0,n.memo)((function(){var e,t,r=(0,l.useParams)().id,i=void 0===r?"":r,o=Y((0,G.x)([]),2),c=o[0],s=o[1],u=Y(A(),2),m=u[0],d=u[1].isLoading,f=(0,n.useRef)(!0),v=(0,n.useRef)(0),y=(0,n.useRef)(null),p=(0,n.useRef)(null),b=(e=z().mark((function e(){var t,r,n;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,m({id:i,limit:24,offset:v.current});case 5:t=e.sent.data,v.current+=24,r=(null==t?void 0:t.mvs)||[],n=(null==t?void 0:t.hasMore)||!1,f.current=n,s((function(e){var t,n;(t=e).push.apply(t,function(e){if(Array.isArray(e))return U(e)}(n=r.map((function(e){var t=e.id,r=e.imgurl,n=e.duration,a=e.name;return{id:t,duration:n,playCount:e.playCount,cover:r,title:a,type:"0"}})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||R(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})),t=function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function i(e){Z(l,n,a,i,o,"next",e)}function o(e){Z(l,n,a,i,o,"throw",e)}i(void 0)}))},function(){return t.apply(this,arguments)});return(0,q.Z)(b,y,p),a().createElement("div",{className:"domArtist_section p-8"},a().createElement(D.Z,{list:c}),a().createElement("div",{ref:p,className:"flex-center"},d&&a().createElement(P.Z,null)))})),Q=(0,n.memo)((function(){var e,t=(0,l.useParams)().id,r=N({id:void 0===t?"":t}),n=r.data;return r.isLoading?a().createElement("div",{className:"flex-center"},a().createElement(P.Z,null)):a().createElement("div",{className:"domArtist_section p-8 leading-8 text-sm select-text"},a().createElement("div",{className:"domArtist_subtitle font-bold"},"简介"),a().createElement("div",{className:"domArtist_article text-gray-500 indent-8"},null==n?void 0:n.briefDesc),a().createElement("br",null),a().createElement("br",null),null==n||null===(e=n.introduction)||void 0===e?void 0:e.map((function(e){return a().createElement("div",{key:e.ti,className:"select-text"},a().createElement("div",{className:"domArtist_subtitle font-bold"},e.ti),a().createElement("div",{className:"domArtist_article text-gray-500 whitespace-pre-line"},e.txt))})))}));var $=function(){var e=(0,l.useParams)().id,t=E({id:void 0===e?"":e}),r=t.data;if(t.isLoading)return a().createElement("div",{className:"flex justify-center pt-12"},a().createElement(P.Z,null));var n=(null==r?void 0:r.artists)||[];return 0===n.length?a().createElement("div",{className:"text-center text-gray-400 text-sm pt-16"},"没有相似歌手"):a().createElement("div",{className:"domArtist_section p-8"},a().createElement("div",{className:"grid grid-cols-5 gap-5"},n.map((function(e){return a().createElement("div",{className:"item",key:e.id},a().createElement("div",{className:"cover rounded overflow-hidden border"},a().createElement(l.Link,{to:"/artist/".concat(e.id),className:""},a().createElement("img",{loading:"lazy",className:"aspect-square",src:"".concat(e.picUrl,"?param=200y200"),alt:""}))),a().createElement("div",{className:"footer text-sm mt-2"},a().createElement(l.Link,{to:"/artist/".concat(e.id),className:""},e.name)))}))))};const F=(0,n.memo)($);var B=r(5583),H=r(6489),J=r(4837);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t,r,n,a,l,i){try{var o=e[l](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}function X(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function i(e){W(l,n,a,i,o,"next",e)}function o(e){W(l,n,a,i,o,"throw",e)}i(void 0)}))}}const ee=(0,n.memo)((function(){var e,t,r,i,o,s,u,m,d,f,v=(0,l.useParams)().id,y=void 0===v?"":v,p=(0,J.C)((function(e){return e.account})).artistSublist,b=(0,n.useMemo)((function(){return p.find((function(e){return e.id===Number(y)}))}),[p,y]),E=(0,J.T)(),x=(d=w(),f=2,function(e){if(Array.isArray(e))return e}(d)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return l}}(d,f)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}(d,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=x[0],N=(x[1].isLoading,h({id:y}).data),A=(null==N?void 0:N.data)||{},S=(m=X(z().mark((function e(){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g({id:y,t:1});case 3:E((0,B.setToast)("收藏成功！")),(0,H.r)(E),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(){return m.apply(this,arguments)}),k=function(){var e=X(z().mark((function e(){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=4;break}E((0,B.setDialogUnSubscriptionShow)({artistId:y})),e.next=6;break;case 4:return e.next=6,S();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a().createElement("div",{className:"domArtist_header flex p-8"},a().createElement("div",{className:"w-44 h-44 border overflow-hidden rounded"},a().createElement("img",{src:"".concat(null===(e=A.artist)||void 0===e?void 0:e.cover,"?param=200y200"),alt:""})),a().createElement("div",{className:"content flex-auto px-5"},a().createElement("div",{className:"name h1 select-text"},null===(t=A.artist)||void 0===t?void 0:t.name),a().createElement("div",{className:"enname my-3 select-text"},null===(r=A.alias)||void 0===r?void 0:r.map((function(e){return e}))),a().createElement("div",{className:"actions mt-3 flex space-x-2"},a().createElement("button",{onClick:k,type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex items-center text-sm"},b?a().createElement(a().Fragment,null,a().createElement(c.IconCheckbox,{size:20,stroke:1}),"已收藏"):a().createElement(a().Fragment,null,a().createElement(c.IconFolderPlus,{size:20,stroke:1}),"收藏")),A.user&&a().createElement(l.Link,{to:"/user/".concat(null===(i=A.user)||void 0===i?void 0:i.userId),className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex items-center text-sm"},"个人主页")),a().createElement("div",{className:"info mt-5 space-x-5"},a().createElement("span",{className:"size"},"单曲数:",null==A||null===(o=A.artist)||void 0===o?void 0:o.musicSize),a().createElement("span",{className:"size"},"专辑数:",null===(s=A.artist)||void 0===s?void 0:s.albumSize),a().createElement("span",{className:"size"},"MV数:",null===(u=A.artist)||void 0===u?void 0:u.mvSize))))}));function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ne=[["专辑","Album"],["MV","MV"],["歌手详情","Detail"],["相似歌手","Similarity"]],ae={Album:O,MV:V,Detail:Q,Similarity:F};const le=(0,n.memo)((function(){var e=re((0,n.useState)(ne[0][1]),2),t=e[0],r=e[1];return a().createElement("div",{className:"domArtist overflow-auto max-h-full flex-auto"},a().createElement(ee,null),a().createElement("div",{className:"domArtist_main"},a().createElement("div",{className:"domArtist_nav flex mx-8"},a().createElement("div",{className:"flex space-x-4 text-sm"},ne.map((function(e){var n=re(e,2),l=n[0],i=n[1];return a().createElement("button",{key:i,onClick:function(){return r(i)},type:"button",className:o()("domArtist_nav_link",t===i&&"font-bold ui_underline")},l)}))),a().createElement("div",{className:"domArtist_album_layout relative ml-auto"})),(0,n.createElement)(ae[t])))})),ie=function(){return a().createElement(l.Routes,null,a().createElement(l.Route,{path:":id",element:a().createElement(le,null)}))}}}]);
//# sourceMappingURL=Artist.js.map?version=233ebd71