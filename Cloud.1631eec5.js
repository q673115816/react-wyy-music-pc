"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[7413],{40248:(e,t,a)=>{a.r(t),a(47941),a(82526),a(57327),a(38880),a(54747),a(49337);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(59713),r=(0,l.Z)(n),c=a(48926),u=(0,l.Z)(c),d=a(63038),s=(0,l.Z)(d),i=a(87757),o=(0,l.Z)(i);a(61874),a(9653),a(68309),a(56977),a(21249),a(74916);var m=a(87363),f=(0,l.Z)(m),p=a(94184),v=(0,l.Z)(p),E=a(27484),y=(0,l.Z)(E),b=a(61290),g=(0,l.Z)(b),N=a(63233),h=a(67317),x=(0,l.Z)(h),S=a(64615),k=(0,l.Z)(S),_=a(88293),w=(0,l.Z)(_),O=a(49736),j=(0,l.Z)(O),Z=a(48769),z=(0,l.Z)(Z),C=a(22387),P=(0,l.Z)(C),M=a(16719);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F=function(e,t,a){return String(e[a.code]).localeCompare(String(t[a.code]),"zh-CN")*a.type},Y=[["音乐标题","songName",F],["歌手","artist",F],["专辑","album",F],["格式","",F],["大小","fileSize",function(e,t,a){return(Number.parseFloat(e[a.code])-Number.parseFloat(t[a.code]))*a.type}],["上传时间","addTime",function(e,t,a){return(e[a.code]-t[a.code])*a.type}]];exports.default=(0,m.memo)((function(){var e=(0,m.useState)(!1),t=(0,s.default)(e,2),a=t[0],l=t[1],n=(0,m.useState)(""),r=(0,s.default)(n,2),c=r[0],d=r[1],i=(0,m.useState)([]),p=(0,s.default)(i,2),E=p[0],b=p[1],h=(0,m.useState)(0),S=(0,s.default)(h,2),_=(S[0],S[1]),O=(0,m.useState)(""),Z=(0,s.default)(O,2),C=Z[0],I=Z[1],F=(0,m.useState)(""),T=(0,s.default)(F,2),B=T[0],G=T[1],U=(0,m.useState)({name:"上传时间",type:-1,code:"addTime",callback:function(e,t,a){return(e[a.code]-t[a.code])*a.type}}),V=(0,s.default)(U,2),L=V[0],R=V[1],$=function(){var e=(0,u.default)(o.default.mark((function e(){var t,a,l,n,r,c,u,d,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,N.apiUserCloud)({limit:100});case 3:t=e.sent,a=t.data,l=void 0===a?[]:a,n=t.count,r=void 0===n?0:n,c=t.maxSize,u=void 0===c?0:c,d=t.size,s=void 0===d?0:d,b(l),_(r),I(u),G(s),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){$()}),[]),f.default.createElement("div",{className:"domManage overflow-auto h-full"},f.default.createElement("div",{className:"domManage_header ui_header"},f.default.createElement("span",{className:"domManage_header_title h1"},"我的音乐云盘")),f.default.createElement("div",{className:"domCloud_info py-2.5 px-8"},f.default.createElement("span",null,"云盘容量")," ",f.default.createElement("div",{className:"ui_process",style:{"--ratio":B/C||0}})," ",f.default.createElement("span",{className:"num"},(B/1024/1024/1024).toFixed(2),"G/",C/1024/1024/1024,"G")," ",f.default.createElement("span",{className:"ml-8"},"歌曲永久保存，随时随地多端畅听")," ",f.default.createElement("a",{href:"https://music.163.com/#/store/product/detail?id=34001",className:"ui_link"},"扩容")),f.default.createElement("div",{className:"ui_headerBar border-b"},f.default.createElement("div",{className:"left space-x-2"},f.default.createElement(j.default,null),f.default.createElement("button",{type:"button",className:"flex-center ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},f.default.createElement(M.IconPlus,{size:20}),"  上传音乐")),f.default.createElement("div",{className:"right"},f.default.createElement(g.default,{search:c,setSearch:d,placeholder:"搜索我的音乐云盘"}))),f.default.createElement("div",{className:"overflow-auto max-h-full flex-auto",style:{paddingLeft:30,paddingRight:20}},f.default.createElement("div",{className:"domManage_table",style:{"--ui_grid_template":"36px / 30px 30px 8fr 3fr 3fr 2fr 2fr 4fr"}},f.default.createElement("div",{className:"thead"},f.default.createElement("div",{className:"tr grid ui_grid_template items-center"},f.default.createElement("div",null),f.default.createElement("div",null),Y.map((function(e){var t=(0,s.default)(e,3),a=t[0],l=t[1],n=t[2];return f.default.createElement("div",{key:a,className:(0,v.default)("cell px-1","th",{on:a===L.name}),onClick:function(){return function(e){if(L.name!==e.name)return R(D(D({},e),{},{type:1}));switch(L.type){case-1:return R({name:"",code:"",callback:function(e,t){return 0},type:0});case 1:return R(D(D({},e),{},{type:-1}));default:return R(D(D({},e),{},{type:1}))}}({item:a,code:l,callback:n})}},a,f.default.createElement("span",{className:"sort"},function(e,t){return t.name!==e?f.default.createElement(M.IconSwitchVertical,{size:14,color:"#f00",stroke:1}):-1===t.type?f.default.createElement(M.IconCaretDown,{size:20,stroke:0,fill:"#000"}):1===t.type?f.default.createElement(M.IconCaretUp,{size:12,stroke:0,fill:"#000"}):0===t.type?f.default.createElement(M.IconSwitchVertical,{size:14,color:"#f00",stroke:1}):void 0}(a,L)))})))),f.default.createElement("div",{className:"tbody"},E.map((function(e,t){var a,l,n,r,c,u,d;return f.default.createElement(x.default,{type:"song",item:e,schema:[["播放","下一首播放"],["收藏到歌单","分享","下载"],["删除"]],key:e.songId},f.default.createElement("div",{className:(0,v.default)("tr grid ui_grid_template items-center hover:bg-gray-100 focus:outline-none focus:bg-gray-200",t%2==0&&"bg-gray-50"),tabIndex:"2"},f.default.createElement("div",{className:"cell px-1 index text-gray-400"},f.default.createElement(k.default,{index:t,id:e.songId})),f.default.createElement("div",{className:"cell px-1 download"},f.default.createElement(w.default,null)),f.default.createElement("div",{className:"cell px-1 name truncate",title:e.songName+(null===(a=e.simpleSong)||void 0===a||null===(l=a.tns)||void 0===l?void 0:l.length)>0?"（".concat(null===(n=e.simpleSong)||void 0===n?void 0:n.tns,"）"):""},e.songName,(null===(r=e.simpleSong)||void 0===r||null===(c=r.tns)||void 0===c?void 0:c.length)>0&&f.default.createElement("span",{className:"text-gray-500"},"（".concat(e.simpleSong.tns,"）"))),f.default.createElement(z.default,{className:"px-1",artists:e.simpleSong.ar}),f.default.createElement(P.default,{className:"px-1",name:e.album,id:null===(u=e.simpleSong)||void 0===u||null===(d=u.al)||void 0===d?void 0:d.id}),f.default.createElement("div",{className:"cell px-1 truncate uppercase"},/(?<=\.)(\w*)$/.exec(e.fileName)[0]),f.default.createElement("div",{className:"cell px-1 truncate"},(e.fileSize/1024/1024).toFixed(1),"MB"),f.default.createElement("div",{className:"cell px-1 truncate text-gray-400"},(0,y.default)(e.addTime).format("YYYY-MM-DD"))))}))))),f.default.createElement("div",{className:"domManage_dialog",style:{display:a?"":"none"}},f.default.createElement("button",{type:"button",className:"close",onClick:function(){l(!a)}},"×"),f.default.createElement("div",{className:"title"},"选择本地音乐文件夹"),f.default.createElement("div",{className:"tips"},"将自动扫描您勾选的目录，文件增删实时同步。"),f.default.createElement("ul",null,f.default.createElement("li",null,f.default.createElement("span",{className:"checkbox"},f.default.createElement("input",{type:"text"}),f.default.createElement("i",{className:"material-icons"},"checkbox")),"暂时没法做")),f.default.createElement("div",{className:"actions"},f.default.createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full red"},"确认"),f.default.createElement("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full"},"添加文件"))))}))}}]);