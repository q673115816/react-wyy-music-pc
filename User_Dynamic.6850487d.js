"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[5451],{75935:(e,t,a)=>{a.r(t);var r=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var n=a(319),u=(0,r.Z)(n),l=a(48926),c=(0,r.Z)(l),s=a(63038),f=(0,r.Z)(s);a(92222);var d=a(87757),i=(0,r.Z)(d),o=a(87363),m=(0,r.Z)(o),p=a(63233),v=a(664),h=(0,r.Z)(v),E=a(99709),k=(0,r.Z)(E),x=a(74849),w=(0,r.Z)(x);exports.default=(0,o.memo)((function(e){var t=e.uid,a=(0,o.useState)([]),r=(0,f.default)(a,2),n=r[0],l=r[1],s=(0,o.useRef)(-1),d=(0,o.useState)({}),v=(0,f.default)(d,2),E=v[0],x=v[1],y=(0,o.useRef)(!0),b=(0,o.useRef)(),Z=(0,o.useRef)(),_=function(){var e=(0,c.default)(i.default.mark((function e(){var a,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.apiUserDetail)({uid:t});case 3:a=e.sent,r=a.profile,x(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,c.default)(i.default.mark((function e(){var a,r,n,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.current){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,(0,p.apiUserEvent)({uid:t,lasttime:s.current});case 5:a=e.sent,r=a.events,n=a.more,c=a.lasttime,y.current=n,s.current=c,l((function(e){return[].concat((0,u.default)(e),(0,u.default)(r))})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,k.default)(N,b,Z),(0,o.useEffect)((function(){n.length>0&&l([]),_()}),[t]),m.default.createElement("div",{className:"h-full overflow-auto",ref:b},m.default.createElement("div",{className:"h1 domUser_subpage_header ui_header"},"".concat(E.nickname,"的动态")),m.default.createElement("div",{className:"domUser_dynamic_main"},m.default.createElement("div",{className:"list px-8"},n.length>0?m.default.createElement(h.default,{list:n}):m.default.createElement("div",{className:"empty"},"暂无动态")),m.default.createElement("div",{ref:Z}),y.current&&m.default.createElement("div",{className:"flex-center"},m.default.createElement(w.default,null))))}))}}]);