(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[2147],{4622:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(6814),c=n(7329),u=n(2137),a=n(4699),s=n(7757),o=n.n(s),l=(n(9653),n(2222),n(4553),n(3804)),i=n.n(l),f=n(6866),m=n(847),p=n(4584),d=n.n(p),v=n(4),h=n(4210),w=n(5325),k=n(4849),x=n(9709),Z=n(397);const b=(0,l.memo)((function(e){var t=e.uid;console.log("user_follow");var n=(0,w.useDispatch)(),s=(0,l.useState)({}),p=(0,a.Z)(s,2),b=p[0],E=p[1],y=(0,l.useState)([]),_=(0,a.Z)(y,2),g=_[0],N=_[1],C=(0,w.useSelector)((function(e){return e.account})),R=(0,l.useMemo)((function(){return C.profile.userId===Number(t)}),[t]),S=(0,l.useRef)(),I=(0,l.useRef)(),U=(0,l.useRef)(0),L=(0,l.useRef)(!0),M=function(){var e=(0,u.Z)(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.um)({uid:t});case 3:n=e.sent,r=n.profile,E(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,u.Z)(o().mark((function e(){var n,r,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,f.qm)({uid:t,limit:30,offset:U.current});case 5:n=e.sent,r=n.follow,u=n.more,U.current+=30,L.current=u,N((function(e){return[].concat((0,c.Z)(e),(0,c.Z)(r))})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),q=(0,l.useCallback)(function(){var e=(0,u.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.iQ)({id:t,t:1});case 3:n=e.sent,(0,r.Z)(n),N(d()((function(e){e[e.findIndex((function(e){return e.userId===t}))].followed=!0}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,l.useEffect)((function(){M()}),[]),(0,x.Z)(Q,S,I),i().createElement("div",{className:"domUser_followlist h-full overflow-auto",ref:S},i().createElement("div",{className:"h1 domUser_subpage_header ui_header"},i().createElement(m.Link,{to:"./"},b.nickname),"的关注"),i().createElement("div",{className:"domUser_followlist_main"},i().createElement(Z.Z,{isSelf:R,list:g,handleClick:q,handleLetter:function(e,t){n((0,v.QW)()),n((0,h.d)({uid:e,nickname:t,showMsgPrivateHistory:!0}))}},i().createElement("div",{className:"empty"},"还没有关注")),i().createElement("div",{ref:I}),L.current&&i().createElement("div",{className:"flex-center"},i().createElement(k.Z,null))))}))}}]);