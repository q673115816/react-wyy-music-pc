"use strict";(this.webpackChunkwyy=this.webpackChunkwyy||[]).push([[2995],{3396:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var r=a(48926),n=(0,l.Z)(r),u=a(63038),c=(0,l.Z)(u),s=a(87757),o=(0,l.Z)(s),d=a(87363),f=(0,l.Z)(d),i=a(63233),m=a(74849),v=(0,l.Z)(m),p=a(90443),h=(0,l.Z)(p),g=a(66711),E=a(12720),y=(0,l.Z)(E);a(87098);var b=a(65223),w=a(1343),x=a(1609),N=(0,l.Z)(x),k=a(68399),S=(0,l.Z)(k),Z=a(41897),_=(0,l.Z)(Z);exports.default=(0,d.memo)((function(){var e=(0,w.useAppDispatch)(),t=(0,g.useHistory)().listen,a=(0,w.useAppSelector)((function(e){return e.audio})).currentSong,l=(0,w.useAppSelector)((function(e){return e.lrc})).lyricVisibility,r=(0,d.useState)(!0),u=(0,c.default)(r,2),s=u[0],m=u[1],p=(0,d.useState)([]),E=(0,c.default)(p,2),x=E[0],k=E[1],Z=(0,d.useState)({}),j=(0,c.default)(Z,2),z=j[0],A=j[1],M=(0,d.useState)(1),P=(0,c.default)(M,2),I=P[0],O=P[1],C=function(){var e=(0,n.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.apiCommentMusic)({id:a.id,limit:20,offset:20*(I-1)});case 3:t=e.sent,A(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,n.default)(o.default.mark((function e(){var t,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.apiSimiSong)({id:a.id});case 3:t=e.sent,l=t.songs,k(l),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,n.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return e.next=4,L();case 4:m(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){l&&(s?T():C())}),[l,I,a.id]),(0,d.useEffect)((function(){return t((function(t){e((0,b.setLyricHide)())}))}),[]),l?f.default.createElement("div",{id:"lrc",className:"absolute inset-x-0 z-10 overflow-hidden"},f.default.createElement("div",{className:"w-full h-full bg-white overflow-auto transform"},f.default.createElement("div",{className:"lrc_inner m-auto",style:{width:888}},f.default.createElement("div",{className:"lrc_header flex justify-between"},f.default.createElement(N.default,null),f.default.createElement(S.default,null),f.default.createElement(_.default,{simiSong:x,loading:s})),f.default.createElement("div",{className:"lrc_main mt-14 flex justify-center"},f.default.createElement("div",{style:{width:556}},s?f.default.createElement("div",{className:"flex justify-center"},f.default.createElement(v.default,null)):f.default.createElement(f.default.Fragment,null,f.default.createElement(y.default,{comments:z,more:a.id,type:"song"}),f.default.createElement(h.default,{total:Math.ceil(z.total/20),page:I,func:O}))))))):null}))},68399:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var r=a(63038),n=(0,l.Z)(r);a(34553),a(21249),a(73210),a(68309);var u=a(87363),c=(0,l.Z)(u),s=a(66711),o=a(1343),d=a(94184),f=(0,l.Z)(d),i=(0,u.memo)((function(){var e=(0,o.useAppSelector)((function(e){return e.audio})).currentTime,t=(0,o.useAppSelector)((function(e){return e.lrc})).lrcList,a=(0,u.useRef)(null),l=(0,u.useRef)(null),r=(0,u.useState)(0),s=(0,n.default)(r,2),d=s[0],i=s[1];return(0,u.useEffect)((function(){i(t.findIndex((function(t){return t.time>e}))-1)}),[e]),(0,u.useEffect)((function(){a.current.scrollTop=0}),[t]),(0,u.useEffect)((function(){null!=l&&l.current&&(a.current.scrollTop=l.current.offsetTop-a.current.clientHeight/2)}),[d]),c.default.createElement("div",{style:{scrollBehavior:"smooth"},className:"whitespace-pre-line select-text text-center text-gray-500 space-y-2 overflow-auto overscroll-contain h-full pt-36",ref:a},t.length?t.map((function(e,t){var a=e.time,r=e.word;return c.default.createElement("div",{ref:d===t?l:null,key:a,className:(0,f.default)("leading-5",d===t&&"font-bold text-black")},r.trim()," ")})):c.default.createElement("div",null,"纯音乐，请您欣赏"))}));exports.default=(0,u.memo)((function(){var e=(0,o.useAppSelector)((function(e){return e.audio})).currentSong;return c.default.createElement("div",{className:"center overflow-auto pt-5",style:{width:300}},c.default.createElement("div",{className:"text-2xl text-center"},e.name),c.default.createElement("div",{className:"flex justify-center mt-2 whitespace-nowrap"},c.default.createElement("div",{className:"truncate"},e.ar.map((function(e){return c.default.createElement(s.Link,{key:e.id,to:"/artist/".concat(e.id),className:"ui_text_gray_hover"},e.name)}))),"  -  ",c.default.createElement("div",{className:"truncate"},c.default.createElement(s.Link,{to:"/playlist/album/".concat(e.al.id),className:"ui_text_gray_hover"},e.al.name))),c.default.createElement("div",{className:"relative"},c.default.createElement("div",{className:"relative mt-8",style:{height:330}},c.default.createElement(i,null)),c.default.createElement("div",{className:"absolute pointer-events-none left-0 right-0 top-0 h-6 bg-gradient-to-b from-white to-transparent"}),c.default.createElement("div",{className:"absolute pointer-events-none left-0 right-0 bottom-0 h-6 bg-gradient-to-t from-white to-transparent"})))}))},1609:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var r=a(87363),n=(0,l.Z)(r),u=a(16719),c=a(87653),s=(0,l.Z)(c),o=a(94184),d=(0,l.Z)(o),f=a(1343);exports.default=(0,r.memo)((function(){var e=(0,f.useAppSelector)((function(e){return e.audio})).currentSong,t=(0,f.useAppSelector)((function(e){return e.audio})).running;return n.default.createElement("div",{className:"left"},n.default.createElement("div",{className:"relative"},n.default.createElement("div",{id:"stylus",className:"mt-16 mb-10 relative m-auto w-min duration-500 transition-transform z-10",style:t?{transform:"rotate(40deg)"}:{}},n.default.createElement("div",{className:"point shadow relative transform -translate-y-1/2 rounded-full bg-gray-300 w-5 h-5 border-8 border-white bg-white",style:{zIndex:2}}),n.default.createElement("div",{className:"handle absolute top-0 left-1/2 shadow bg-white h-2 w-20 origin-top-left",style:{transform:"rotate(45deg) translate(0, -50%)",zIndex:1}},n.default.createElement("div",{className:" absolute left-full bg-white shadow w-12 h-2 origin-top-left",style:{transform:"rotate(-45deg) translate(-10%, 0)"}},n.default.createElement("div",{className:"shadow w-4 h-4 absolute left-full -top-1 bg-white"})))),n.default.createElement("div",{className:" rounded-full bg-gray-300 p-2.5 w-64 h-64"},n.default.createElement("div",{className:(0,d.default)("flex-center rounded-full p-9",{on:t}),id:"record"},n.default.createElement("img",{className:"rounded-full border-8 border-black",src:e.al.picUrl,alt:""})))),n.default.createElement("div",{className:"flex mt-4 justify-between"},n.default.createElement(s.default,{stroke:"2",id:e.id,size:24,className:"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200"}),n.default.createElement("button",{type:"button",className:"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200"},n.default.createElement(u.IconFolderPlus,{size:24,stroke:1})),n.default.createElement("button",{type:"button",className:"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200"},n.default.createElement(u.IconCloudDownload,{size:24,stroke:1})),n.default.createElement("button",{type:"button",className:"w-10 h-10 flex-center rounded-full bg-gray-100 hover:bg-gray-200"},n.default.createElement(u.IconShare,{size:24,stroke:1}))))}))},41897:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0}),a(21249),a(68309);var r=a(87363),n=(0,l.Z)(r),u=a(74849),c=(0,l.Z)(u);exports.default=(0,r.memo)((function(e){var t=e.simiSong,a=void 0===t?[]:t,l=e.loading,r=void 0!==l&&l;return n.default.createElement("div",{className:"right flex-none mt-28 h-72 overflow-auto",style:{width:244}},r?n.default.createElement("div",{className:"flex justify-center"},n.default.createElement(c.default,null)):n.default.createElement("div",{className:"pb-4 relative"},n.default.createElement("div",null,"播放来源：..."),n.default.createElement("div",{className:"font-bold py-3 text-sm"},"包含这首歌的歌单"),n.default.createElement("div",null),n.default.createElement("div",{className:"font-bold py-3 text-sm"},"相似歌曲"),n.default.createElement("div",null,a.map((function(e){return n.default.createElement("button",{key:e.id,type:"button",className:"flex text-left w-full rounded hover:bg-gray-100 p-1.5 h-10"},n.default.createElement("div",{className:"rounded relative overflow-hidden"},n.default.createElement("img",{src:"".concat(e.album.picUrl,"?param=30y30"),alt:""})),n.default.createElement("div",{className:"w-0 flex-auto px-2 py-1 text-gray-600"},n.default.createElement("div",{className:"truncate"},e.name,n.default.createElement("span",{className:"text-gray-500"},e.alias),"  -  ",e.artists.map((function(e){return e.name})))))}))),n.default.createElement("div",{className:"absolute pointer-events-none left-0 right-0 bottom-0 h-16 bg-gradient-to-t from-white to-transparent"})))}))},5913:(e,t,a)=>{a.r(t);var l=a(29604);Object.defineProperty(t,"__esModule",{value:!0});var r=a(3396);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(0,l.Z)(r).default}})},87098:(e,t,a)=>{a.r(t)}}]);