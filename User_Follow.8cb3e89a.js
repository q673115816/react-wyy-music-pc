(self.webpackChunkwyy=self.webpackChunkwyy||[]).push([[416],{7205:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var r=n(6814),u=n(7329),c=n(2137),a=n(9351),s=n(7757),o=n.n(s),l=(n(9653),n(2222),n(4553),n(3804)),i=n.n(l),f=n(6955),m=n(847),p=n(8172),d=n(9703),v=n(8748),h=n(5325),w=n(8556),k=n(9301),Z=n(6229);const x=(0,l.memo)((function(e){var t=e.uid;console.log("user_follow");var n=(0,h.useDispatch)(),s=(0,l.useState)({}),x=(0,a.Z)(s,2),b=x[0],y=x[1],E=(0,l.useState)([]),_=(0,a.Z)(E,2),g=_[0],N=_[1],C=(0,h.useSelector)((function(e){return e.account})),R=(0,l.useMemo)((function(){return C.profile.userId===Number(t)}),[t]),S=(0,l.useRef)(),I=(0,l.useRef)(),U=(0,l.useRef)(0),L=(0,l.useRef)(!0),M=function(){var e=(0,c.Z)(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.um)({uid:t});case 3:n=e.sent,r=n.profile,y(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,c.Z)(o().mark((function e(){var n,r,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,f.qm)({uid:t,limit:30,offset:U.current});case 5:n=e.sent,r=n.follow,c=n.more,U.current+=30,L.current=c,N((function(e){return[].concat((0,u.Z)(e),(0,u.Z)(r))})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),Q=(0,l.useCallback)(function(){var e=(0,c.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.iQ)({id:t,t:1});case 3:n=e.sent,(0,r.Z)(n),N((0,p.ZP)((function(e){e[e.findIndex((function(e){return e.userId===t}))].followed=!0}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,l.useEffect)((function(){M()}),[]),(0,k.Z)(P,S,I),i().createElement("div",{className:"domUser_followlist h-full overflow-auto",ref:S},i().createElement("div",{className:"h1 domUser_subpage_header ui_header"},i().createElement(m.Link,{to:"./"},b.nickname),"的关注"),i().createElement("div",{className:"domUser_followlist_main"},i().createElement(Z.Z,{isSelf:R,list:g,handleClick:Q,handleLetter:function(e,t){n((0,d.QW)()),n((0,v.d)({uid:e,nickname:t,showMsgPrivateHistory:!0}))}},i().createElement("div",{className:"empty"},"还没有关注"),i().createElement("div",{div:!0,ref:I},i().createElement(w.Z,null)))))}))}}]);