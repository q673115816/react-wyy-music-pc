{"version":3,"file":"Components_Playlist.70411acf.js","mappings":"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","sources":["webpack://wyy/./src/components/Letter/Home.tsx","webpack://wyy/./src/components/Letter/List.tsx","webpack://wyy/./src/components/Letter/Message.tsx","webpack://wyy/./src/components/Letter/index.ts","webpack://wyy/./src/components/Playlist/index.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { setMsgPrivateHistory } from '@/reducers/letter/slice';\nimport DomList from './List';\nimport DomMessage from './Message';\nimport './style.scss';\nimport {useAppDispatch, useAppSelector} from \"@/reducers/hooks\";\n\nexport default () => {\n  const { showMsgPrivateHistory } = useAppSelector(({ letter }) => letter);\n  const { popupStatus } = useAppSelector(({ mask }) => mask);\n  const dispatch = useAppDispatch();\n\n  useEffect(() => () => {\n    dispatch(setMsgPrivateHistory({\n      showMsgPrivateHistory: false,\n    }));\n  }, []);\n  if (popupStatus !== 'letter') return null;\n  return (\n    <div id=\"privateLetter\" className=\"flex flex-col absolute z-40\">\n      {\n        showMsgPrivateHistory\n          ? <DomMessage />\n          : <DomList />\n      }\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport dayjs from 'dayjs';\nimport { Link } from 'react-router-dom';\nimport classNames from 'classnames';\nimport {\n  apiMsgPrivate,\n  apiMsgComments,\n  apiMsgForwards,\n  apiMsgNotices,\n} from '@/api';\nimport { setMsgPrivateHistory } from '@/reducers/letter/slice';\nimport { setMsgPrivate } from '@/reducers/common/slice';\nimport {useAppDispatch, useAppSelector} from \"@/reducers/hooks\";\n\nconst BuildList = {\n  song: (msg) => (\n    <span>\n      单曲：「\n      {msg.song.name}\n      {\n        msg.song.alias.length > 0\n        && (\n          <span className=\"text-gray-400\">\n            {`（${msg.song.alias.join(',')}）`}\n          </span>\n        )\n      }\n      」\n    </span>\n  ),\n  album: (msg) => (\n    <span>\n      专辑：「\n      {msg.album.name}\n      」\n    </span>\n  ),\n  topic: (msg) => (\n    <span>\n      专栏文章：「\n      {msg.topic.title}\n      」\n    </span>\n  ),\n  promotionUrl: (msg) => (\n    <span>\n      {msg.promotionUrl.text}\n      ：「\n      {msg.msg}\n      」\n    </span>\n  ),\n  picInfo: () => '[图片]',\n};\n\nconst BuildTransLastMsg = (msg = {}) => {\n  const keys = ['song', 'album', 'topic', 'promotionUrl', 'picInfo'];\n  for (const key of keys) {\n    if (msg[key]) return BuildList[key](msg);\n  }\n  return msg.msg;\n};\n\nconst navs = [\n  '私信',\n  '评论',\n  '@我',\n  '通知',\n];\n\nexport default () => {\n  const dispatch = useAppDispatch();\n  const {\n    isLogin, newMsgCount, msgs = [], comments = [], forwards = [], notices = [],\n  } = useAppSelector(({ common }) => common);\n  const [data, setData] = useState([]);\n  const [active, setActive] = useState('私信');\n\n  // 刷新数据\n  const handlePrivateInit = async (fn) => {\n    try {\n      const {\n        // newMsgCount,\n        msgs,\n        comments,\n        forwards,\n        notices,\n      } = await fn();\n      dispatch(setMsgPrivate({\n        msgs,\n        // newMsgCount,\n        comments,\n        forwards,\n        notices,\n      }));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleChangeNav = (active) => {\n    setActive(active);\n    if (active === '私信') {\n      handlePrivateInit(apiMsgPrivate);\n      setData(msgs);\n    } else if (active === '评论') {\n      handlePrivateInit(apiMsgComments);\n      setData(comments);\n    } else if (active === '@我') {\n      handlePrivateInit(apiMsgForwards);\n      setData(forwards);\n    } else if (active === '通知') {\n      handlePrivateInit(apiMsgNotices);\n      setData(notices);\n    }\n  };\n\n  useEffect(() => {\n    // handlePrivateInit(apiMsgPrivate);\n    handleChangeNav(active);\n  }, []);\n  const handleSeeMsgPrivateHistory = async (uid, nickname) => {\n    dispatch(setMsgPrivateHistory({\n      uid,\n      nickname,\n      showMsgPrivateHistory: true,\n    }));\n  };\n\n  return (\n    <>\n      <div className=\"header flex items-baseline p-6 pb-b\">\n        <span className=\"title text-lg\">消息</span>\n        {\n          isLogin\n            ? <button type=\"button\" className=\"clear text-sm font-bold ml-auto ui_link\">一键已读</button>\n            : <span className=\"clear text-sm font-bold ml-auto ui_disabled\">一键已读</span>\n        }\n      </div>\n      <div className=\"nav flex-none flex m-auto w-min rounded-full border\">\n        {\n          navs.map((nav) => (\n            <button\n              onClick={() => handleChangeNav(nav)}\n              type=\"button\"\n              key={nav}\n              className={classNames('nav_link relative w-20 h-8 rounded-full', active === nav ? 'bg-gray-400 text-white' : 'hover:bg-gray-200')}\n            >\n              {nav}\n              {\n                nav === '私信' && <span className=\"lt_ico border border-white rounded-full leading-tight px-1 absolute top-0 right-0 bg-red-500 transform translate-x-1/2 -translate-y-1/2 z-10\">{newMsgCount}</span>\n              }\n            </button>\n          ))\n        }\n      </div>\n      <div className=\"list mt-3 overflow-auto max-h-full flex-auto\">\n        {data.length > 0 ? data.map((item) => (\n          <div className=\"item flex pr-4 pt-4 hover:bg-gray-100\" key={item.fromUser.userId}>\n            <div className=\"w-4 flex-center h-8\">\n              {item.newMsgCount > 0\n                && <i className=\"rounded-full w-1.5 h-1.5 bg-red-500\" />}\n            </div>\n            <Link to={`/user/${item.fromUser.userId}`} className=\"avatar w-8 h-8 relative flex-none\">\n              <img className=\"rounded-full\" src={item.fromUser.avatarUrl} alt=\"\" />\n              <i className=\"ico absolute right-0 bottom-0 w-3.5 h-3.5\">\n                <img\n                  className=\"ui_containimg\"\n                  src={item.fromUser.avatarDetail?.identityIconUrl}\n                  alt=\"\"\n                />\n              </i>\n            </Link>\n            <button\n              type=\"button\"\n              className=\"content border-b pb-3 flex-auto text-left ml-2.5 w-0\"\n              onClick={() => handleSeeMsgPrivateHistory(\n                item.fromUser.userId,\n                item.fromUser.nickname,\n              )}\n            >\n              <div className=\"top flex\">\n                <span className=\"ui_link\">\n                  {item.fromUser.nickname}\n                </span>\n                <span className=\"time ml-auto text-gray-400\">\n                  {dayjs(item.lastMsgTime).format('YYYY年MM月DD日')}\n                </span>\n              </div>\n              <div className=\"bottom truncate\">\n                {BuildTransLastMsg(JSON.parse(item.lastMsg))}\n              </div>\n            </button>\n          </div>\n        ))\n          : (\n            <div className=\"empty\">\n              暂无\n              {active}\n              内容\n            </div>\n          )}\n      </div>\n    </>\n  );\n};\n","import React, {\n  useEffect, useRef, useState,\n} from 'react';\nimport dayjs from 'dayjs';\nimport { transTextEmoji } from '@/common/faces';\nimport { apiSendText, apiMsgPrivateHistory } from '@/api';\nimport { setMsgPrivateHistory } from '@/reducers/letter/slice';\nimport { wordLength } from '@/common/utils';\nimport { Link } from 'react-router-dom';\nimport {\n  IconChevronLeft, IconPhoto, IconMoodSmile, IconPlayerPlay,\n} from '@tabler/icons';\nimport EmojiFaces from '@/components/EmojiFaces';\nimport Write from '@/components/Write';\nimport {useAppDispatch, useAppSelector} from \"@/reducers/hooks\";\n\nconst DomSong = ({ msg = {} }) => (\n  <button type=\"button\" className=\"share w-56 flex rounded p-2 bg-gray-50 mt-2\">\n    <div className=\"avatar flex-none w-10 h-10 rounded relative overflow-hidden\">\n      <img src={`${msg.song.album.picUrl}?param=100y100`} alt=\"\" />\n      <i className=\"absolute inset-0 m-auto w-6 h-6 bg-white bg-opacity-90 flex-center rounded-full ui_themeColor\">\n        <IconPlayerPlay size={14} className=\"fill-current\" />\n      </i>\n    </div>\n    <div className=\"content flex-auto w-0 pl-2.5 text-left\">\n      <div className=\"name truncate\">\n        {msg.song.name}\n        {msg.song.alias.length > 0\n          && (\n            <span className=\"text-gray-400\">\n              {`（${msg.song.alias.join(',')}）`}\n            </span>\n          )}\n      </div>\n      <div className=\"text-gray-400 artist truncate\">\n        {msg.song.artists.map((artist, index) => (\n          <span key={artist.name}>\n            {index > 0 && ' / '}\n            {artist.name}\n          </span>\n        ))}\n      </div>\n    </div>\n  </button>\n);\nconst DomAlbum = ({ msg = {} }) => (\n  <Link\n    to={`/playlist/album/${msg.album.id}`}\n    className=\"share flex rounded p-2 bg-gray-50 mt-2 w-56\"\n  >\n    <button\n      type=\"button\"\n      className=\"avatar flex-none w-10 h-10 rounded relative overflow-hidden group\"\n    >\n      <img src={`${msg.album.picUrl}?param=100y100`} alt=\"\" />\n      <i className=\"absolute opacity-0 group-hover:opacity-100 inset-0 m-auto w-6 h-6 bg-white bg-opacity-90 flex-center rounded-full ui_themeColor\">\n        <IconPlayerPlay\n          size={14}\n          className=\"fill-current\"\n        />\n      </i>\n    </button>\n    <div className=\"content flex-auto w-0 pl-2.5 text-left\">\n      <div className=\"name truncate\">\n        {msg.album.name}\n        {msg.album.alias.length > 0\n          && (\n            <span className=\"text-gray-400\">\n              {`（${msg.album.alias.join(',')}）`}\n            </span>\n          )}\n      </div>\n      <div className=\"text-gray-400 artist truncate\">\n        {msg.album.artist.name}\n      </div>\n    </div>\n  </Link>\n);\n\nconst DomCircle = ({ msg = {} }) => (\n  <div>云圈</div>\n);\n\nconst DomPromotion = ({ msg = {} }) => (\n  <a href={msg.promotion.url} className=\"embed\">\n    <div className=\"cover\">\n      <img className=\"\" src={msg.promotion.coverUrl} alt=\"\" />\n    </div>\n    <div className=\"promotion text-gray-400\">\n      {msg.promotion.title}\n    </div>\n  </a>\n);\n\nconst DomImage = ({ msg = {} }) => (\n  <div className=\"img\">\n    <img src={msg.picInfo.picUrl} className=\"\" alt=\"\" />\n  </div>\n);\n\nconst DomMsg = ({ msg = {} }) => transTextEmoji(msg.msg);\n\nconst DomContent = ({ msg = {} }) => {\n  const { type } = msg;\n  if (type === 16) return <DomImage msg={msg} />;\n  return (\n    <>\n      {transTextEmoji(msg.msg)}\n      {type === 1 && <DomSong msg={msg} />}\n      {type === 2 && <DomAlbum msg={msg} />}\n    </>\n  );\n};\n\nconst DomMsgLeft = ({ msg = {} }) => (\n  <div className=\"flex\">\n    <div className=\"w-60 flex\">\n      <div className=\"rounded-lg rounded-tl-none bg-blue-50 p-3 select-text\">\n        <DomContent msg={msg} />\n      </div>\n    </div>\n  </div>\n);\n\nconst DomMsgRight = ({ msg = {} }) => (\n  <div className=\"flex\">\n    <div className=\"ml-auto w-60 flex\">\n      <div className=\"ml-auto rounded-lg rounded-br-none bg-blue-50 p-3 select-text\">\n        <DomContent msg={msg} />\n      </div>\n    </div>\n  </div>\n);\n\nexport default () => {\n  const dispatch = useAppDispatch();\n  const history = useRef();\n\n  const {\n    uid, hint, nickname, privatMsgs,\n  } = useAppSelector(({ letter }) => letter);\n\n  const { profile } = useAppSelector(({ account }) => account);\n\n  const [visibility, setVisibility] = useState(false);\n  const [value, setValue] = useState('');\n  // const [privatMsgs, setPrivateMsgs] = useState([]);\n\n  const clickface = (face) => {\n    setValue(value + face);\n  };\n\n  const handleGetMsgPrivateHistory = async () => {\n    try {\n      const { hint, msgs = [] } = await apiMsgPrivateHistory({ uid });\n      // setPrivateMsgs(msgs.reverse());\n      dispatch(setMsgPrivateHistory({\n        hint,\n        privatMsgs: msgs.reverse(),\n      }));\n      history.current.scrollTo(0, history.current.scrollHeight);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleSend = async () => {\n    try {\n      const { newMsgs = [] } = await apiSendText({\n        user_ids: uid,\n        msg: value,\n      });\n      dispatch(setMsgPrivateHistory({\n        privatMsgs: newMsgs.reverse(),\n      }));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleSubmit = () => {\n    const length = wordLength(value);\n    if (length <= 200) {\n      handleSend();\n      setValue('');\n    } else {\n      console.log('to long');\n    }\n  };\n\n  useEffect(() => {\n    handleGetMsgPrivateHistory();\n  }, [uid]);\n\n  return (\n    <>\n      <div className=\"topbar relative text-center text-sm flex-center\" style={{ height: 50 }}>\n        <button\n          type=\"button\"\n          className=\"back absolute inset-y-0 left-0 p-2.5 flex-center ui_text_gray_hover\"\n          onClick={() => dispatch(setMsgPrivateHistory({ showMsgPrivateHistory: false }))}\n        >\n          <IconChevronLeft size={22} />\n        </button>\n        <span>{nickname}</span>\n      </div>\n      <div className=\"history overflow-auto max-h-full flex-auto px-5\" ref={history}>\n        {\n          privatMsgs\n            .map((item) => (\n              <div className=\"item mt-5\" key={item.id}>\n                <div className=\"time text-gray-400\">\n                  {dayjs(item.time).format('YYYY年MM月DD日 HH:mm')}\n                </div>\n                {item.toUser.userId === profile.userId\n                  ? (\n                    <div className=\"msg flex justify-start\">\n                      <div className=\"avatar flex-none mr-4 rounded-full overflow-hidden w-8 h-8\">\n                        <img\n                          className=\"\"\n                          src={item.fromUser.avatarUrl}\n                          alt=\"\"\n                        />\n                      </div>\n                      <DomMsgLeft msg={JSON.parse(item.msg)} />\n                    </div>\n                  )\n                  : <DomMsgRight msg={JSON.parse(item.msg)} />}\n              </div>\n            ))\n        }\n        {hint && <div className=\"hint\">{hint}</div>}\n      </div>\n      <div className=\"feedback p-3\">\n        <Write {...{\n          value, setValue, length: 200, placeholder: `回复 ${nickname}`,\n        }}\n        />\n        <div className=\"actions flex mt-2.5\">\n          <div className=\"left relative\">\n            {\n              visibility\n              && (\n                <div className=\"-translate-x-3 -translate-y-1/2 absolute faces right-full top-1/2 transform\">\n                  <EmojiFaces {...{ handleHide: () => setVisibility(false), clickface }} />\n                </div>\n              )\n            }\n            <button type=\"button\" className=\"action\" onClick={() => setVisibility(!visibility)}>\n              <IconMoodSmile size={24} stroke={1.4} />\n            </button>\n            <button type=\"button\" className=\"action\">\n              <IconPhoto size={24} stroke={1.4} />\n            </button>\n          </div>\n          <button type=\"button\" className=\"ml-auto border px-4 h-8 rounded-full\" onClick={handleSubmit}>\n            发送\n          </button>\n        </div>\n      </div>\n    </>\n  );\n};\n","export {default} from './Home'\n","import React, { memo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport dayjs from 'dayjs';\nimport { Link } from 'react-router-dom';\nimport {\n  IconFolderPlus,\n  IconLink,\n  IconPlayerPlay,\n  IconPlayerPause,\n} from '@tabler/icons';\nimport { setAudioPlaylistClear } from '@/reducers/audio/slice';\nimport { setPopupPlaylistToggle } from '@/reducers/mask/slice';\nimport DomName from '@/components/Table/Name';\nimport DomMenuCreate from '@/components/MenuCreate';\nimport './style.scss';\n\nconst Empty = () => {\n  const dispatch = useDispatch();\n  return (\n    <div className=\"empty w-min m-auto pt-20 whitespace-nowrap\">\n      <div className=\"text-gray-400 text-sm text\">\n        您还没添加任何歌曲！\n      </div>\n      <div className=\"text-gray-400 mt-6\">\n        去首页\n        <Link\n          to=\"/\"\n          className=\"ui_text_black_hover underline\"\n          onClick={() => dispatch(setPopupPlaylistToggle({}))}\n        >\n          发现音乐\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nconst DomList = ({ list = [], currentId }) => {\n  if (list.length === 0) return <Empty />;\n  const { running } = useSelector(({ audio }) => audio);\n  return (\n    <div>\n      {\n        list.map((item, index) => (\n          <DomMenuCreate\n            schema={[\n              ['评论',\n                '播放'],\n              ['收藏到歌单',\n                '分享',\n                '复制链接',\n                '不感兴趣',\n                '下载'],\n            ]}\n            type=\"song\"\n            item={item}\n            key={item.id}\n            tabIndex=\"2\"\n            className={classNames('flex items-center hover:bg-gray-100 focus:bg-gray-200 focus:outline-none h-9 group ', { 'bg-gray-50': index % 2 === 1, ui_themeColor: item.id === currentId })}\n          >\n            <div className=\"w-6 flex-center flex-none\">\n              {item.id === currentId\n                && (running ? <IconPlayerPlay className=\"fill-current ui_themeColor\" size={12} />\n                  : <IconPlayerPause size={12} className=\"fill-current ui_themeColor\" stroke={1} />)\n              }\n            </div>\n            <div className=\"name flex-auto w-0\">\n              <DomName item={item} />\n            </div>\n            <div className=\"w-24 px-1 flex-none truncate text-gray-500 group-hover:text-black\">\n              {item.ar.map((artist, index) => (\n                <span key={artist.id}>\n                  {index > 0 && ' / '}\n                  <Link to={`/artist/${artist.id}`}>\n                    {artist.name}\n                  </Link>\n                </span>\n              ))}\n            </div>\n            <div className=\"w-8 px-1 flex-none\">\n              <Link to=\"/\">\n                <IconLink size={16} stroke={1} />\n              </Link>\n            </div>\n            <div className=\"w-16 px-1 flex-none text-gray-300 group-hover:text-black\">\n              {dayjs(item.dt).format('mm:ss')}\n            </div>\n          </DomMenuCreate>\n        ))\n      }\n    </div>\n  );\n};\n\nexport default memo(() => {\n  const dispatch = useDispatch();\n  const { popupStatus } = useSelector(({ mask }) => mask);\n  const { playlist, currentSong } = useSelector(({ audio }) => audio);\n  const handleClear = () => {\n    if (playlist.length === 0) return false;\n    return dispatch(setAudioPlaylistClear());\n  };\n  if (popupStatus !== 'playlist') return null;\n  return (\n    <div id=\"playlist\" className=\"absolute right-0 shadow bg-white z-40 flex flex-col\">\n      <div className=\"px-5 flex-none\">\n        <div className=\"py-4\">\n          <div className=\"h1\">当前播放</div>\n        </div>\n        <div className=\"actions flex items-center pb-2.5 border-b\">\n          <span className=\"text-gray-400\">\n            {`总${playlist.length}首`}\n          </span>\n          <div className=\"right ml-auto flex divide-x\">\n            <button\n              type=\"button\"\n              className={classNames('action px-5 flex-center', { 'text-gray-300': playlist.length === 0 })}\n            >\n              <IconFolderPlus size={20} stroke={1} />\n              收藏全部\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleClear}\n              className={classNames('action px-5 flex-center', { 'text-gray-300': playlist.length === 0 })}\n            >\n              清空列表\n            </button>\n          </div>\n        </div>\n      </div>\n      <div className=\"overflow-auto h-full flex-auto\">\n        <DomList\n          list={playlist}\n          currentId={currentSong.id}\n        />\n      </div>\n    </div>\n  );\n});\n"],"names":["showMsgPrivateHistory","useAppSelector","letter","popupStatus","mask","dispatch","useAppDispatch","useEffect","setMsgPrivateHistory","id","className","BuildList","song","msg","name","alias","length","join","album","topic","title","promotionUrl","text","picInfo","navs","common","isLogin","newMsgCount","msgs","comments","forwards","notices","useState","data","setData","active","setActive","handlePrivateInit","fn","setMsgPrivate","console","log","handleChangeNav","apiMsgPrivate","apiMsgComments","apiMsgForwards","apiMsgNotices","handleSeeMsgPrivateHistory","uid","nickname","type","map","nav","onClick","key","item","fromUser","userId","Link","to","src","avatarUrl","alt","avatarDetail","identityIconUrl","lastMsgTime","format","BuildTransLastMsg","JSON","parse","lastMsg","DomSong","picUrl","IconPlayerPlay","size","artists","artist","index","DomAlbum","DomImage","DomContent","transTextEmoji","DomMsgLeft","DomMsgRight","history","useRef","hint","privatMsgs","profile","account","visibility","setVisibility","value","setValue","handleGetMsgPrivateHistory","apiMsgPrivateHistory","reverse","current","scrollTo","scrollHeight","handleSend","apiSendText","user_ids","newMsgs","style","height","IconChevronLeft","ref","time","toUser","placeholder","handleHide","clickface","face","IconMoodSmile","stroke","IconPhoto","wordLength","default","Empty","useDispatch","setPopupPlaylistToggle","DomList","list","currentId","running","useSelector","audio","schema","tabIndex","ui_themeColor","IconPlayerPause","ar","IconLink","dt","memo","playlist","currentSong","IconFolderPlus","setAudioPlaylistClear"],"sourceRoot":""}