{"version":3,"file":"download.worker.4b8647bb.worker.js","mappings":"mBAAA,SAASA,EAAkBC,EAAQC,GACjC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CACrC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,ICN9BO,KAApB,IA+CMC,EAAU,IA9CVC,WAGJ,aCJa,IAA8BH,EAAKI,GCAnC,SAAyBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,qCFER,SCJkCH,EDGzB,UCHoBJ,EDI7B,uBCFZF,OAAOC,eDEK,KCFeC,EAAK,CAC9BI,MAAOA,EACPT,YAAY,EACZC,cAAc,EACdC,UAAU,IDFA,KCKRG,GAAOI,EFCA,IAAsBE,EAAaE,E,OAAbF,E,GAAaE,E,mBCDhD,SAAKC,GAAa,WAEhBC,KAAKC,KAAO,IAAIC,eAChBF,KAAKC,KAAKE,KAAK,MAAOJ,GAGtBC,KAAKC,KAAKG,aAAe,OACzBJ,KAAKC,KAAKI,iBAAiB,YAAY,YAAuB,IACtDC,EADsD,EAApBC,OAAoB,EAAZC,MAEhDC,QAAQC,IAAI,WAAZ,UAAsC,IAAXJ,EAA3B,MACAf,KAAKoB,YAAY,CAAEC,SAAU,WAAYN,SAAAA,OAG3CN,KAAKC,KAAKI,iBAAiB,oBAAoB,WAEd,IAAzB,EAAKJ,KAAKY,YAAyC,MAArB,EAAKZ,KAAKa,SAG9CvB,KAAKoB,YAAY,CACfC,SAAU,QACVG,MAAO,MACPC,SAAU,EAAKf,KAAKe,WAKtBzB,KAAK0B,YAEPjB,KAAKC,KAAKA,S,mBAGZ,WACEQ,QAAQC,IAAI,SACZV,KAAKC,KAAKiB,QACV3B,KAAK0B,aDhCStC,EAAkBiB,EAAYuB,UAAWrB,G,ECVrDL,IAgDNF,KAAKc,iBAAiB,WAAW,SAACe,GAChC,MAAwBA,EAAIC,KAApBC,EAAR,EAAQA,OAAQvB,EAAhB,EAAgBA,IAChBP,EAAQ8B,GAAQvB,O","sources":["webpack://wyy/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://wyy/./src/pages/Player/Download/download.worker.ts","webpack://wyy/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://wyy/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"],"sourcesContent":["function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","const ctx: Worker = self as any\nclass Module {\n  send: any\n  targetOrigin: string = 'player'\n  constructor() {\n    // this.url = null;\n    // this.send = null;\n  }\n\n  init(url: string) {\n    // this.url = url;\n    this.send = new XMLHttpRequest();\n    this.send.open('GET', url);\n\n    // this.send.setRequestHeader('Content-Type', 'blob');\n    this.send.responseType = 'blob';\n    this.send.addEventListener('progress', ({ loaded, total }) => {\n      const progress = loaded / total;\n      console.log('progress', `${progress * 100}%`);\n      self.postMessage({ callback: 'progress', progress });\n      // setDownloadProcess(progress);\n    });\n    this.send.addEventListener('readystatechange', () => {\n      // console.log(this.send);\n      if (!(this.send.readyState === 4 && this.send.status === 200)) return;\n      // console.log('finish', this.send.response);\n      // setDownloadState('已缓存');\n      self.postMessage({\n        callback: 'state',\n        state: '已缓存',\n        response: this.send.response,\n      });\n      // RefAjax.current = null;\n      // handleCreateFile();\n      // this.create();\n      self.close();\n    });\n    this.send.send();\n  }\n\n  abort() {\n    console.log('终止下载！');\n    this.send.abort();\n    self.close();\n  }\n}\n\nconst methods = new Module();\n\nself.addEventListener('message', (req) => {\n  const { method, url } = req.data;\n  methods[method](url);\n});\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","self","methods","Module","value","instance","Constructor","TypeError","protoProps","url","this","send","XMLHttpRequest","open","responseType","addEventListener","progress","loaded","total","console","log","postMessage","callback","readyState","status","state","response","close","abort","prototype","req","data","method"],"sourceRoot":""}