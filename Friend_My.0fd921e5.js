(self.webpackChunkwyy=self.webpackChunkwyy||[]).push([[465],{5887:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var n=a(2137),c=a(9351),r=a(7757),l=a.n(r),m=(a(8309),a(1249),a(3804)),s=a.n(m),o=a(5325),i=a(847),u=a(6955),d=a(3650),v=a(5200),f=a(898),E=a(7647),p=a(9301),N=a(8556),x=(a(9600),a(7042),a(7484)),h=a.n(x),g=a(8593),y=a(4184),b=a.n(y);const _=(0,m.memo)((function(e){var t=e.comment;return s().createElement("div",{className:"flex py-4 px-3",key:t.commentId},s().createElement(i.Link,{to:"/user/".concat(t.user.userId),className:"avatar w-10 h-10 rounded-full border flex-none"},s().createElement("img",{className:"rounded-full w-full h-full",src:"".concat(t.user.avatarUrl,"?param=40y40"),alt:""})),s().createElement("div",{className:"commentContent pl-3 select-text"},s().createElement("div",{className:""},s().createElement(i.Link,{to:"/user/".concat(t.user.userId),className:"ui_link"},"".concat(t.user.nickname,"：")),(0,g.j)(t.content)),t.beReplied.length>0&&s().createElement("div",{className:"bg-white p-2.5 mt-2.5"},s().createElement(i.Link,{to:"/user/".concat(t.beReplied[0].user.userId),className:"ui_link"},t.beReplied[0].user.nickname,"："),(0,g.j)(t.beReplied[0].content)),s().createElement("div",{className:"mt-2"},s().createElement("span",{className:"text-gray-300"},h()(t.time).format("YYYY年MM月DD日 HH:mm:ss")))))}));var k={18:"分享单曲",36:"分享歌手"},w=function(e){var t=e.item;return t?s().createElement(i.Link,{to:"/artist/".concat(t.id),className:"mt-2 flex items-center p-2 h-14 rounded bg-gray-100 hover:bg-gray-200"},s().createElement("div",{className:"w-10 h-10 rounded"},s().createElement("img",{src:t.img80x80,className:"rounded w-full h-full object-cover",alt:""})),s().createElement("div",{className:"px-3"},"歌手：".concat(t.name))):null},I=function(e){var t=e.item;return t?s().createElement("button",{type:"button",className:"song bg-gray-100 hover:bg-gray-200 flex w-full mt-2 rounded p-2.5"},s().createElement("div",{className:"cover relative overflow-hidden rounded"},s().createElement("img",{className:"rounded w-10 h-10",src:"".concat(t.album.blurPicUrl,"?param=40y40"),alt:""}),s().createElement("div",{className:"ico flex-center absolute inset-0 m-auto bg-white rounded-full w-6 h-6 ui_themeColor"},s().createElement(v.IconPlayerPlay,{size:14,className:"fill-current"}))),s().createElement("div",{className:"aside text-left px-3"},s().createElement("div",{className:"name"},t.name),s().createElement("div",{className:"artist truncate mt-1"},t.artists.map((function(e){return e.name})).join(" / ")))):null},C=function(e){var t=e.item;if(!t)return null;var a=t.length;return 8===a&&(a="even"),1===a?s().createElement("div",{className:"pics grid gap-1 mt-2.5 pic_1"},s().createElement("div",{className:"img"},s().createElement("img",{src:t[0].originUrl,className:"max-h-full max-w-full object-cover rounded-lg",alt:""}))):s().createElement("div",{className:b()("pics grid gap-1 mt-2.5","pic_".concat(a))},t.map((function(e){return s().createElement("div",{key:e.originUrl,className:"img relative rounded-lg overflow-hidden ui_aspect-ratio-1/1"},s().createElement("div",{className:"absolute inset-0"},s().createElement("img",{src:e.originUrl,className:"w-full object-cover h-full",alt:""})),e.width/e.height<.75&&s().createElement("div",{className:" absolute bottom-0 right-0 mx-1 my-2 border leading-tight text-white border-current px-1 rounded-full"},"长图"))})))};const L=function(e){var t,a=e.item,n=void 0===a?{}:a,c=e.handleGetComment,r=e.actThreadId,l=JSON.parse(n.json),m=(0,o.useSelector)((function(e){return e.friend})),u=m.comments,d=m.hotComments;return 33===n.type?s().createElement("div",{className:"py-5 px-12"},s().createElement("div",{className:"relative rounded-xl overflow-hidden"},s().createElement("img",{src:l.coverPCUrl,alt:""}),s().createElement("div",{className:"absolute border-b border-opacity-20 border-t border-white flex-center h-20 inset-0 m-auto text-center text-white w-min whitespace-nowrap"},s().createElement("div",{className:"text-xl"},"#".concat(l.title,"#")),s().createElement("div",{className:"-translate-y-1/2 absolute top-full transform"},"".concat(l.participateCount,"参与"))))):s().createElement("div",{className:"item py-5 flex"},s().createElement(i.Link,{to:"/user/".concat(n.user.userId),className:"avatar flex-none w-10 h-10"},s().createElement("img",{className:"rounded-full",src:"".concat(n.user.avatarUrl,"?param=40y40"),alt:""})),s().createElement("div",{className:"content ml-2.5 flex-auto"},s().createElement("div",{className:"name"},s().createElement(i.Link,{className:"ui_link",to:"/user/".concat(n.user.userId)},n.user.nickname)," ",s().createElement("span",{className:"text-gray-500"},k[n.type])),s().createElement("div",{className:"time mt-2"},s().createElement(i.Link,{to:"/comment/event/".concat(n.id),className:"ui_text_gray_hover"},h()(n.showTime).format("MM月DD日 HH:mm"))),s().createElement("div",{className:"article"},s().createElement("div",{className:"text whitespace-pre-line text-sm mt-2.5"},l.msg&&(0,g.j)(l.msg)),s().createElement(w,{item:l.resource}),s().createElement(I,{item:l.song}),s().createElement(C,{item:n.pics}),s().createElement("div",{className:"info flex mt-2.5"},s().createElement("div",{className:"left text-gray-400"},(null==n||null===(t=n.rcmdInfo)||void 0===t?void 0:t.reason)&&"--".concat(n.rcmdInfo.reason)),s().createElement("div",{className:"right ml-auto divide-x flex"},s().createElement("div",{className:"px-3"},s().createElement("button",{type:"button",className:"action ui_text_gray_hover flex-center"},s().createElement(v.IconThumbUp,{size:16}),n.info.likedCount>0&&"(".concat(n.info.likedCount,")"))),s().createElement("div",{className:"px-3"},s().createElement("button",{type:"button",className:"action ui_text_gray_hover flex-center"},s().createElement(v.IconShare,{size:16})," ",n.info.shareCount>0&&"(".concat(n.info.shareCount,")"))),s().createElement("div",{className:"px-3"},s().createElement("button",{type:"button",className:"action ui_text_gray_hover flex-center",onClick:function(){return c(n.info.threadId)}},s().createElement(v.IconMessage,{size:16})," ",n.info.commentCount>0&&"(".concat(n.info.commentCount,")"))),s().createElement("div",{className:"px-3"},s().createElement("button",{type:"button",className:"action ui_text_gray_hover flex-center"},s().createElement(v.IconDots,{size:16}))))),n.info.threadId===r&&s().createElement("div",{className:"comment bg-gray-50 mt-3 rounded"},s().createElement("div",{className:"write p-3"},s().createElement("div",{className:"help flex"},s().createElement("div",{className:"flex space-x-2"},s().createElement("button",{type:"button",className:"ui_text_black_hover"},s().createElement(v.IconMoodSmile,{size:20})),s().createElement("button",{type:"button",className:"ui_text_black_hover"},s().createElement(v.IconAt,{size:20})),s().createElement("button",{type:"button",className:"ui_text_black_hover"},s().createElement(v.IconHash,{size:20}))),s().createElement("button",{className:"ml-auto border px-4 py-1 rounded-full hover:bg-gray-100",type:"button"},"评论"))),d.length>0&&s().createElement(s().Fragment,null,s().createElement("div",{className:"text-sm px-3 text-gray-500 font-bold"},"精彩评论"),s().createElement("div",{className:"divide-y"},d.slice(0,10).map((function(e){return s().createElement(_,{key:e.commentId,comment:e})})))),s().createElement("div",{className:"text-sm px-3 text-gray-500 font-bold"},"最新评论","(".concat(u.length,")")),s().createElement("div",{className:"divide-y"},u.slice(0,10).map((function(e){return s().createElement(_,{key:e.commentId,comment:e})})))))))},z=(0,m.memo)((function(){console.log("friend");var e=(0,o.useSelector)((function(e){return e.account})).profile,t=(0,o.useSelector)((function(e){return e.friend})),a=t.hot,r=void 0===a?[]:a,x=t.event,h=void 0===x?[]:x,g=(0,o.useDispatch)(),y=(0,m.useRef)(),b=(0,m.useRef)(),_=(0,m.useRef)(-1),k=(0,m.useState)(""),w=(0,c.Z)(k,2),I=w[0],C=w[1],z=function(){var e=(0,n.Z)(l().mark((function e(){var t,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.oy)({limit:5});case 3:t=e.sent,a=t.hot,g((n={hot:a},{type:d.oE,payload:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}var n}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,n.Z)(l().mark((function e(){var t,a,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.Nz)({lasttime:_.current});case 3:t=e.sent,a=t.event,n=t.lasttime,_.current=n,g((c={event:a},{type:d.Eo,payload:c})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}var c}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,n.Z)(l().mark((function e(t){var a,n,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I!==t){e.next=3;break}return C(""),e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,u.PG)({threadId:t});case 6:a=e.sent,n=a.comments,c=a.hotComments,C(t),g((r={comments:n,hotComments:c},{type:d.Wz,payload:r})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}var r}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){g({type:d.bM}),z()}),[]),(0,p.Z)(U,y,b),s().createElement("div",{className:"domFriend h-full overflow-auto",ref:y},s().createElement("div",{className:"flex divide-x"},s().createElement("div",{className:"domFriend_left relative flex-auto"},s().createElement("div",{className:"domFriend_header h-14 px-8 flex items-center sticky top-0 z-10 bg-white"},s().createElement("span",{className:"h1"},"动态"),s().createElement("button",{type:"button",className:"flex ml-auto items-center ui_theme_bg_color text-white h-6 px-3 rounded-full"},s().createElement(v.IconPlus,{size:12,stroke:5}),"写动态")),s().createElement("div",{className:"domFriend_content"},s().createElement("div",{className:"domFriend_dynamic px-8 divide-y"},h.map((function(e){return s().createElement(L,{actThreadId:I,key:e.id,item:e,handleGetComment:F})}))),s().createElement("div",{className:"flex-center",ref:b},0===h.length?s().createElement("div",{className:"empty text-center text-gray-400 pt-48"},"暂无动态"):s().createElement(N.Z,null)))),s().createElement("div",{className:"domFriend_right flex-none",style:{width:250}},s().createElement("div",{className:"domFriend_user"},e.userId?s().createElement("div",{className:"logined h-40 pt-8 bg-gray-100"},s().createElement("div",{className:"top flex px-5 items-start"},s().createElement(i.Link,{to:"/user/".concat(e.userId),className:"avatar w-12 h-12 rounded-full overflow-hidden"},s().createElement("img",{className:"",src:"".concat(e.avatarUrl,"?param=100y100"),alt:""})),s().createElement("div",{className:"flex-center"},s().createElement(i.Link,{to:"/user/".concat(e.userId),className:"nickname ml-2.5"},e.nickname)," ",s().createElement(E.ZP,{gender:e.gender,size:14}))),s().createElement("div",{className:"infos flex divide-x text-center mt-4"},s().createElement(i.Link,{to:"/user/".concat(e.userId,"/dynamic"),className:"info flex-1 ui_text_black_hover"},s().createElement("div",{className:"num text-xl"},e.eventCount),s().createElement("div",{className:"string"},"动态")),s().createElement(i.Link,{to:"/user/".concat(e.userId,"/follow"),className:"info flex-1 ui_text_black_hover"},s().createElement("div",{className:"num text-xl"},e.follows),s().createElement("div",{className:"string"},"关注")),s().createElement(i.Link,{to:"/user/".concat(e.userId,"/fans"),className:"info flex-1 ui_text_black_hover"},s().createElement("div",{className:"num text-xl"},e.followeds),s().createElement("div",{className:"string"},"粉丝")))):s().createElement("div",{className:"nologin px-5"},s().createElement("div",{style:{height:170}}),s().createElement("div",{className:"tips text-center text-gray-500"},"登录网易云音乐，可以享受无限收藏的乐趣，并且无限同步到手机"),s().createElement("button",{type:"button",className:"login ui_theme_bg_color text-white w-full h-10 mt-4",onClick:function(){return g((0,f.a6)(!0))}},"立即登录"))),s().createElement("div",{className:"domFriend_hotTopic mt-5"},s().createElement("div",{className:"header flex px-5 mb-2.5"},s().createElement("span",{className:"font-bold"},"热门话题"),s().createElement(i.Link,{className:"text-gray-400 ml-auto",to:"/friend/hotTopic"},"更多 >")),s().createElement("div",{className:"list"},r.map((function(e){return s().createElement(i.Link,{to:"/friend/".concat(e.actId),key:e.actId,className:"item py-1 pl-5 flex hover:bg-gray-100"},s().createElement("div",{className:"cover w-10 h-10"},s().createElement("img",{className:"rounded",src:"".concat(e.sharePicUrl,"?param=50y50"),alt:""})),s().createElement("div",{className:"content px-2"},s().createElement("div",{className:"title"},"#".concat(e.title,"#")),s().createElement("div",{className:"participateCount text-gray-300"},"".concat(e.participateCount,"人参与"))))})))))))}))}}]);