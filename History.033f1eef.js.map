{"version":3,"file":"History.033f1eef.js","mappings":"2KAAA,e,aACA,W,aAEA,W,aACA,SACA,e,aAIA,W,aACA,W,aACA,W,aACA,W,aACA,W,aACA,W,aACA,WACA,UAVAA,EAAAA,QAAMC,OAAOC,EAAAA,SACbF,EAAAA,QAAMG,OAAO,SAWb,IAAMC,EAAW,SAAC,GAAD,QAAGC,QAAAA,OAAH,MAAa,GAAb,SACf,+BAAKC,UAAU,OAAOC,MAAO,CAAE,qBAAsB,4BACnD,+BAAKD,UAAU,QACb,+BAAKA,UAAU,SACb,+BAAKA,UAAU,wCACb,+BAAKA,UAAU,UACf,+BAAKA,UAAU,2BAAf,QACA,+BAAKA,UAAU,6BAAf,MACA,+BAAKA,UAAU,+BAAf,UAGJ,+BAAKA,UAAU,SAEXD,EAAQG,KAAI,SAACC,EAAMC,GAAP,OACV,wBAAC,UAAD,CACEC,OAAQ,CACN,CAAC,KACC,KACA,SACF,CAAC,QACC,KACA,OACA,OACA,OAEJC,KAAK,OACLH,KAAMA,EACNI,IAAKJ,EAAKK,GACVC,SAAS,IACTT,WAAW,aAAW,gGAAiG,CAAE,aAAcI,EAAQ,GAAM,KAErJ,gDACE,+BAAKJ,UAAU,yBACb,wBAAC,UAAD,CAASI,MAAOA,KAElB,wBAAC,UAAD,CAASD,KAAMA,EAAMH,UAAU,SAC/B,wBAAC,UAAD,CAAWU,QAASP,EAAKQ,GAAIX,UAAU,SACvC,+BAAKA,UAAU,yCACZ,aAAMG,EAAKS,UAAUC,oB,iBAWzB,IAAAC,OAAK,YAClB,eACA,IAAMC,GAAW,IAAAC,kBACTjB,GAAY,IAAAkB,iBAAe,qBAAGC,SAA9BnB,QACFoB,GAAkB,IAAAC,cAAY,WAClC,GAAuB,IAAnBrB,EAAQsB,OAAc,OAAO,EACjCN,GAAS,IAAAO,2BACR,CAACvB,IACJ,OACE,+BAAKC,UAAU,6CACb,+BAAKA,UAAU,oBACb,+BAAKA,UAAU,0BACb,+BAAKA,UAAU,MAAf,QADF,MAIE,+BAAKA,UAAU,iBAAf,WACOD,EAAQsB,OADf,MAGA,kCACEE,QAASJ,EACTb,KAAK,SACLN,WAAW,aAAW,kBAAsC,IAAnBD,EAAQsB,OAAe,gBAAkB,YAHpF,SAKF,wBAAC,UAAD,CAAcG,SAAUzB,KAGxBA,EAAQsB,OAAS,EACjB,wBAACvB,EAAD,CAAUC,QAASA,IACjB,+BAAKC,UAAU,mCAAf,kB,uLC/FFyB","sources":["webpack://wyy/./src/pages/History/History.tsx","webpack://wyy/./src/pages/History/index.ts"],"sourcesContent":["import React, { memo, useCallback } from 'react';\nimport classNames from 'classnames';\n\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/zh-cn'\nimport relativeTime from 'dayjs/plugin/relativeTime'\ndayjs.extend(relativeTime)\ndayjs.locale('zh-cn')\n\nimport useLoginStatus from '@/hooks/useLoginStatus';\nimport DomRank from '@/components/Table/Rank';\nimport DomGroupPlay from '@/components/GroupPlay';\nimport DomName from '@/components/Table/Name';\nimport DomArtist from '@/components/Table/Artists';\nimport DomMenuCreate from '@/components/MenuCreate';\nimport { setAudioHistoryClear } from '@/reducers/audio/slice'\nimport {useAppDispatch, useAppSelector} from \"@/reducers/hooks\";\n\nconst DomTable = ({ history = []}) => (\n  <div className=\"pb-8\" style={{ '--ui_grid_template': '36px / 54px 45% 5fr 3fr' }}>\n    <div className=\"list\">\n      <div className=\"thead\">\n        <div className=\"item grid leading-8 ui_grid_template\">\n          <div className=\"index\" />\n          <div className=\"name text-gray-500 px-2\">音乐标题</div>\n          <div className=\"artist text-gray-500 px-2\">歌手</div>\n          <div className=\"duration text-gray-500 px-2\">播放时间</div>\n        </div>\n      </div>\n      <div className=\"tbody\">\n        {\n          history.map((item, index) => (\n            <DomMenuCreate\n              schema={[\n                ['评论',\n                  '播放',\n                  '下一首播放'],\n                ['收藏到歌单',\n                  '分享',\n                  '复制链接',\n                  '不感兴趣',\n                  '下载'],\n              ]}\n              type=\"song\"\n              item={item}\n              key={item.id}\n              tabIndex=\"2\"\n              className={classNames('grid h-9 items-center hover:bg-gray-100 focus:bg-gray-200 focus:outline-none ui_grid_template', { 'bg-gray-50': index % 2 === 0 })}\n            >\n              <>\n                <div className=\"index pr-3 text-right\">\n                  <DomRank index={index} />\n                </div>\n                <DomName item={item} className=\"px-2\" />\n                <DomArtist artists={item.ar} className=\"px-2\" />\n                <div className=\"duration text-gray-400 truncate px-2\">\n                  {dayjs(item.lastTime).fromNow()}\n                </div>\n              </>\n            </DomMenuCreate>\n          ))\n        }\n      </div>\n    </div>\n  </div>\n)\n\nexport default memo(() => {\n  useLoginStatus();\n  const dispatch = useAppDispatch()\n  const { history } = useAppSelector(({ audio }) => audio)\n  const memoHandleClear = useCallback(() => {\n    if (history.length === 0) return false\n    dispatch(setAudioHistoryClear())\n  }, [history])\n  return (\n    <div className=\"w-full overflow-auto max-h-full flex-auto\">\n      <div className=\"px-8 pb-2.5 pt-6\">\n        <div className=\"flex items-center pb-8\">\n          <div className=\"h1\">最近播放</div>\n          &nbsp;\n          &nbsp;\n          <div className=\"text-gray-400\">\n            {`共${history.length}首`}\n          </div>\n          <button\n            onClick={memoHandleClear}\n            type=\"button\"\n            className={classNames(\"ml-auto text-sm\", history.length === 0 ? 'text-gray-300' : 'ui_link')}>清空列表</button>\n        </div>\n        <DomGroupPlay playlist={history} />\n      </div>\n      {\n        history.length > 0 ?\n        <DomTable history={history}/>\n        : <div className=\"text-center pt-40 text-gray-400\">你还没播放任何音乐</div>\n      }\n    </div>\n  );\n});\n","export {default} from './History'\n"],"names":["dayjs","extend","relativeTime","locale","DomTable","history","className","style","map","item","index","schema","type","key","id","tabIndex","artists","ar","lastTime","fromNow","memo","dispatch","useAppDispatch","useAppSelector","audio","memoHandleClear","useCallback","length","setAudioHistoryClear","onClick","playlist","default"],"sourceRoot":""}