System.register(["./react-legacy.b3bc90c5.js","./index-legacy.25d39d6e.js","./qrcode.react-legacy.685a2ddb.js","./react-router-legacy.d596e264.js","./react-use-legacy.7a8b73b2.js","./@tabler/icons-legacy.fad3c136.js","./react-router-dom-legacy.b2b146ac.js","./lodash-legacy.4434829e.js","./react-dom-legacy.c211300b.js","./react-redux-legacy.4210a093.js","./immer-legacy.c24b5c0e.js","./redux-persist-legacy.76732867.js","./axios-legacy.6d9fa2e4.js","./classnames-legacy.82f93ed6.js","./rxjs-legacy.3f182ee1.js","./react-transition-group-legacy.16b3096a.js","./color-legacy.6099eccf.js","./dayjs-legacy.7dd3aa6c.js"],(function(e,a){"use strict";var t,s,l,c,i,r,o,n,d,m,h,u,p,x,g,f,y,v,N,j,b,w,_,S,C,M,z,D;return{setters:[e=>{t=e.r},e=>{s=e.q,l=e.L,c=e.C,i=e.r,r=e.v,o=e.w,n=e.x,d=e.E,m=e.y,h=e.z,u=e.B,p=e.D,x=e.P,g=e.F,f=e.G,y=e.I,v=e.J,N=e.K,j=e.N},e=>{b=e.j,w=e.a},e=>{_=e.g,S=e.h,C=e.i},e=>{M=e.s},e=>{z=e.n},e=>{D=e.L},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const a=t.exports.memo((({index:e,setHasMore:a})=>{const{id:i}=_(),r=t.exports.useRef(null),o=M(r,{root:null,rootMargin:"0px",threshold:1}),[n,{data:d,isSuccess:m,isFetching:h,isUninitialized:u}]=s();return t.exports.useEffect((()=>{u&&o&&o.intersectionRatio>0&&n({id:i,type:0,limit:20,offset:20*e})}),[o]),t.exports.useEffect((()=>{d?.hasMore&&a()}),[d]),b("div",{ref:r,children:m?d.hotComments.map((e=>b(c,{item:e},e.commentId))):b("div",{className:"flex-center py-4",children:b(l,{})})})})),E=t.exports.memo((()=>{const[e,s]=t.exports.useState([!1]),l=t.exports.useCallback((()=>{s((e=>[...e,!1]))}),[]);return w("div",{className:"px-8 py-5 overflow-auto max-h-full flex-auto",children:[b("div",{className:"h1",children:"精彩评论"}),b("div",{className:"",children:e.map(((e,t)=>b(a,{index:t,setHasMore:l},t)))})]})})),F={song:i,video:r,mv:o},L=t.exports.memo((()=>{const{id:e,type:a}=_(),{data:t,isFetching:s,isSuccess:c}=F[a]({ids:e});if(s)return b(l,{});const i=t.songs[0];return c?w("div",{className:"flex",children:[w("div",{className:"cover h-20 rounded overflow-hidden relative",children:[b("img",{loading:"lazy",className:"h-full",src:i.al.picUrl,alt:""}),b("div",{className:"ico absolute inset-0 m-auto flex-center w-8 h-8 ui_themeColor rounded-full bg-white bg-opacity-90",children:b(z,{size:16,className:"fill-current"})})]}),w("div",{className:"content px-6 py-2",children:[w("div",{className:"title text-lg",children:[i.name,b("span",{className:"text-gray-500",children:i.alia.length>0&&`(${i.alia})`})]}),w("div",{className:"info text-gray-500 mt-2 space-x-5",children:[w("span",{children:["专辑：",b(D,{className:"ui_text_gray_hover",to:`/playlist/album/${i.al.id}`,children:i.al?.name})]}),w("span",{children:["歌手：",i.ar.map(((e,a)=>w("span",{children:[a>0&&" / ",b(D,{className:"ui_text_gray_hover",to:`/artist/${e.id}`,children:e.name})]},e.id)))]})]})]})]}):void 0})),$={song:{apiDetail:({id:e})=>g({ids:e}),comment:f},mv:{apiDetail:y,comment:v,header:()=>b("div",{})},video:{apiDetail:N,comment:j}},q=t.exports.memo((()=>{console.log("comment");const{id:e,type:a}=_();t.exports.useState("");const[s,c]=t.exports.useState(1),{data:i,isLoading:r}=$[a].comment({id:e,offset:20*(s-1),limit:n});return r?b("div",{className:"w-full h-full flex-center",children:b(l,{})}):w("div",{className:"domComment overflow-auto px-8 py-5 h-full",children:[b(L,{}),w("div",{className:"mt-4",children:[b(d,{}),w("div",{className:"flex mt-2",children:[w("div",{className:"flex space-x-2",children:[b(m,{}),b(h,{}),b(u,{})]}),b("button",{type:"button",className:"flex-center border px-4 h-8 text-sm hover:bg-gray-100 rounded-full ml-auto",children:"评论"})]})]}),w("div",{className:"mt-8",children:[b(p,{comments:i,more:e,type:a}),b(x,{total:Math.ceil(i.total/n),page:s,func:c})]})]})}));e("default",(()=>b(S,{children:w(C,{path:":type/:id",children:[b(C,{index:!0,element:b(q,{})}),b(C,{path:"hot",element:b(E,{})})]})})))}}}));
