!function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],c=!0,o=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(l){o=!0,a=l}finally{try{c||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./react-legacy.5bc0222d.js","./index-legacy.bac44489.js","./qrcode.react-legacy.ee127fcc.js","./react-router-dom-legacy.6d5f4357.js","./react-use-legacy.ca2e3428.js","./@tabler/icons-legacy.73539865.js","./lodash-legacy.ec9d3690.js","./react-dom-legacy.6bc53cf2.js","./react-redux-legacy.02b527b1.js","./immer-legacy.c38810dc.js","./axios-legacy.0865bd99.js","./store-legacy.6aaf7648.js","./react-slick-legacy.6091e657.js","./react-transition-group-legacy.0b5c4cd7.js"],(function(n){"use strict";var r,a,i,c,o,l,s,u,d,f,m,h,y,p,v,g,x,b,N,j,S,w,A,I,_,C;return{setters:[function(e){r=e.r},function(e){a=e.w,i=e.L,c=e.C,o=e.x,l=e.y,s=e.E,u=e.z,d=e.B,f=e.D,m=e.F,h=e.P,y=e.G,p=e.I,v=e.J,g=e.K,x=e.N,b=e.O},function(e){N=e.j,j=e.a},function(e){S=e.b,w=e.L,A=e.R,I=e.c},function(e){_=e.q},function(e){C=e.D},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var M=r.exports.memo((function(e){var n=e.index,o=e.setHasMore,l=S().id,s=r.exports.useRef(null),u=_(s,{root:null,rootMargin:"0px",threshold:1}),d=t(a(),2),f=d[0],m=d[1],h=m.data,y=m.isSuccess,p=(m.isFetching,m.isUninitialized);return r.exports.useEffect((function(){p&&u&&u.intersectionRatio>0&&f({id:l,type:0,limit:20,offset:20*n})}),[u]),r.exports.useEffect((function(){null!=h&&h.hasMore&&o()}),[h]),N("div",{ref:s,children:y?h.hotComments.map((function(e){return N(c,{item:e},e.commentId)})):N("div",{className:"flex-center py-4",children:N(i,{})})})})),D=r.exports.memo((function(){var n=t(r.exports.useState([!1]),2),a=n[0],i=n[1],c=r.exports.useCallback((function(){i((function(t){return[].concat(e(t),[!1])}))}),[]);return j("div",{className:"px-8 py-5 overflow-auto max-h-full flex-auto",children:[N("div",{className:"h1",children:"精彩评论"}),N("div",{className:"",children:a.map((function(e,t){return N(M,{index:t,setHasMore:c},t)}))})]})})),E=r.exports.memo((function(){var e,t=S(),n=t.id,r=(t.type,o({ids:n})),a=r.data,c=r.isFetching,l=r.isSuccess;if(c)return N(i,{});var s=a.songs[0];return l?j("div",{className:"flex",children:[j("div",{className:"cover h-20 rounded overflow-hidden relative",children:[N("img",{loading:"lazy",className:"h-full",src:s.al.picUrl,alt:""}),N("div",{className:"ico absolute inset-0 m-auto flex-center w-8 h-8 ui_themeColor rounded-full bg-white bg-opacity-90",children:N(C,{size:16,className:"fill-current"})})]}),j("div",{className:"content px-6 py-2",children:[j("div",{className:"title text-lg",children:[s.name,N("span",{className:"text-gray-500",children:s.alia.length>0&&"(".concat(s.alia,")")})]}),j("div",{className:"info text-gray-500 mt-2 space-x-5",children:[j("span",{children:["专辑：",N(w,{className:"ui_text_gray_hover",to:"/playlist/album/".concat(s.al.id),children:null===(e=s.al)||void 0===e?void 0:e.name})]}),j("span",{children:["歌手：",s.ar.map((function(e,t){return j("span",{children:[t>0&&" / ",N(w,{className:"ui_text_gray_hover",to:"/artist/".concat(e.id),children:e.name})]},e.id)}))]})]})]})]}):void 0})),z={song:{apiDetail:function(e){var t=e.id;return y({ids:t})},comment:p},mv:{apiDetail:v,comment:g,header:function(){return N("div",{})}},video:{apiDetail:x,comment:b}},F=r.exports.memo((function(){console.log("comment");var e=S(),n=e.id,a=e.type;r.exports.useState("");var c=t(r.exports.useState(1),2),o=c[0],y=c[1],p=z[a].comment({id:n,offset:20*(o-1),limit:l}),v=p.data;return p.isLoading?N("div",{className:"w-full h-full flex-center",children:N(i,{})}):j("div",{className:"domComment overflow-auto px-8 py-5 h-full",children:[N(E,{}),j("div",{className:"mt-4",children:[N(s,{}),j("div",{className:"flex mt-2",children:[j("div",{className:"flex space-x-2",children:[N(u,{}),N(d,{}),N(f,{})]}),N("button",{type:"button",className:"flex-center border px-4 h-8 text-sm hover:bg-gray-100 rounded-full ml-auto",children:"评论"})]})]}),j("div",{className:"mt-8",children:[N(m,{comments:v,more:n,type:a}),N(h,{total:Math.ceil(v.total/l),page:o,func:y})]})]})}));n("default",(function(){return N(A,{children:j(I,{path:":type/:id",children:[N(I,{index:!0,element:N(F,{})}),N(I,{path:"hot",element:N(D,{})})]})})}))}}}))}();
