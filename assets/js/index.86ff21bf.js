import{r as a}from"./react.0a2f695e.js";import{aq as y,H as N,ar as F,as as B}from"./@tabler/icons.d755a6ec.js";import{aq as D,L as x,m as g,ac as b,u as k,ar as L,as as $,at as _,au as R}from"./index.ba361b16.js";import{L as o}from"./react-router-dom.256d9b78.js";import{G as T}from"./Gender.aca5fa5b.js";import{j as e,a as t,F as I}from"./qrcode.react.84002e4a.js";import{D as E}from"./index.67868817.js";import{t as w}from"./react-use.fd5829ae.js";import{e as C,R as z,f as u,N as G}from"./react-router.d1bb31aa.js";import{a as p}from"./classnames.9558900f.js";import"./lodash.f41ef0b4.js";import"./react-dom.d348259d.js";import"./react-redux.49573eed.js";import"./immer.76e704b2.js";import"./redux-persist.b0b12bc5.js";import"./axios.8a0dc616.js";import"./rxjs.22301260.js";import"./react-transition-group.2770fa82.js";import"./color.a5f8aeb5.js";import"./dayjs.6fdda85a.js";import"./history.9736f6f1.js";const q=({limit:s})=>{const{data:i,isLoading:c}=D({limit:s}),l=(i==null?void 0:i.hot)||[];return c?e(x,{}):e("div",{className:"list",children:l.map(r=>t(o,{to:`/friend/${r.actId}`,className:"py-1 pl-5 flex hover:bg-gray-100",children:[e("div",{className:"cover w-8 h-8 flex-none",children:e("img",{className:"rounded",src:`${r.sharePicUrl}?param=50y50`,alt:""})}),t("div",{className:"content px-2 flex-auto w-0",children:[t("div",{className:"title flex items-center",children:["#",e("span",{className:"truncate",children:r.title}),"#"]}),e("div",{className:"participateCount text-gray-300",children:`${r.participateCount}\u4EBA\u53C2\u4E0E`})]})]},r.actId))})},v=a.exports.memo(q),S=()=>{const{profile:s}=g(b),i=k();return t("div",{className:"flex-none",style:{width:250},children:[e("div",{className:"",children:s.userId?t("div",{className:"py-8 bg-gray-100",children:[t("div",{className:"top flex gap-2 px-5 items-start",children:[e(o,{to:`/user/${s.userId}`,className:"avatar w-12 h-12 rounded-full overflow-hidden flex-none",children:e("img",{className:"",src:`${s.avatarUrl}?param=100y100`,alt:""})}),t("div",{className:"flex-1 w-0",children:[t("div",{className:"",children:[e(o,{to:`/user/${s.userId}`,children:s.nickname}),"\xA0",e(T,{gender:s.gender,size:14})]}),e("div",{className:"break-all text-gray-500 truncate",children:s.signature})]})]}),t("div",{className:"infos flex divide-x text-center mt-4",children:[t(o,{to:`/user/${s.userId}/dynamic`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:s.eventCount}),e("div",{className:"string",children:"\u52A8\u6001"})]}),t(o,{to:`/user/${s.userId}/follow`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:s.follows}),e("div",{className:"string",children:"\u5173\u6CE8"})]}),t(o,{to:`/user/${s.userId}/fans`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:s.followeds}),e("div",{className:"string",children:"\u7C89\u4E1D"})]})]})]}):t("div",{className:"nologin px-5",children:[e("div",{style:{height:170}}),e("div",{className:"tips text-center text-gray-500",children:"\u767B\u5F55\u7F51\u6613\u4E91\u97F3\u4E50\uFF0C\u53EF\u4EE5\u4EAB\u53D7\u65E0\u9650\u6536\u85CF\u7684\u4E50\u8DA3\uFF0C\u5E76\u4E14\u65E0\u9650\u540C\u6B65\u5230\u624B\u673A"}),e("button",{type:"button",className:"ui_theme_bg_color text-white w-full h-10 mt-4 rounded-full",onClick:()=>i(L()),children:"\u7ACB\u5373\u767B\u5F55"})]})}),t("div",{className:"mt-5",children:[t("div",{className:"flex px-5 mb-2.5",children:[e("span",{className:"font-bold",children:"\u70ED\u95E8\u8BDD\u9898"}),e(o,{className:"text-gray-400 ml-auto",to:"/friend/top",children:"\u66F4\u591A >"})]}),e(v,{limit:5})]}),e("div",{className:"mt-8",children:t("div",{className:"flex px-5 mb-2.5",children:[e("span",{className:"font-bold",children:"\u8BA4\u8BC6\u7684\u4EBA"}),e(o,{className:"text-gray-400 ml-auto",to:"/friend/acquaintance",children:"\u66F4\u591A >"})]})}),e("div",{className:"mt-8",children:e("div",{className:"flex px-5 mb-2.5",children:e("span",{className:"font-bold",children:"\u6DFB\u52A0\u5173\u6CE8"})})})]})},U=a.exports.memo(S),j=({lasttime:s,setLasttime:i})=>{var f;const c=a.exports.useRef(null),l=w(c,{root:null,rootMargin:"0px",threshold:1}),[r,{data:n,isSuccess:d,isFetching:m,isUninitialized:h,isLoading:A}]=$();return a.exports.useEffect(()=>{h&&l&&l.intersectionRatio>0&&r({lasttime:s})},[l]),e("div",{ref:c,children:A?e("div",{className:"flex-center py-4",children:e(x,{})}):((f=n==null?void 0:n.event)==null?void 0:f.length)>0&&e(E,{list:(n==null?void 0:n.event)||[]})})},P=a.exports.memo(j),Q=()=>{const[s,i]=a.exports.useState([0]),{isLogin:c}=g(b),l=a.exports.useCallback(r=>{i(n=>[...n,r])},[]);return e("div",{className:"h-full overflow-auto",children:t("div",{className:"flex divide-x min-h-full",children:[t("div",{className:"relative flex-1 w-0",children:[t("div",{className:"h-14 px-8 flex items-center sticky top-0 z-10 bg-white",children:[e("span",{className:"h1",children:"\u52A8\u6001"}),t("button",{type:"button",className:"flex-center ml-4 ui_theme_bg_color text-sm text-white h-8 px-4 rounded-full",children:[e(y,{size:20,stroke:1}),"\u53D1\u52A8\u6001"]})]}),e("div",{className:"domFriend_content",children:c?e("div",{className:"px-8",children:s.map(r=>e(P,{lasttime:r,setLasttime:l},r))}):e("div",{className:"empty text-center text-gray-400 pt-48",children:"\u6682\u65E0\u52A8\u6001"})})]}),e(U,{})]})})},H=a.exports.memo(Q),M=()=>{var d;const{id:s=""}=C(),i=a.exports.useRef(null),c=w(i,{root:void 0,rootMargin:"0px",threshold:1}),{data:l,isLoading:r}=_({actid:s}),n=(l==null?void 0:l.act)||{};return r?null:t(I,{children:[t("div",{style:{display:c&&c.intersectionRatio<1?void 0:"none"},className:"sticky top-0 border-b flex justify-end py-2 z-10 bg-white gap-3 inset-x-0 px-5",children:[t("button",{type:"button",className:"border rounded-full flex-center px-4 py-1 text-sm hover:bg-gray-50 text-red-500",children:[e(y,{}),"\u7ACB\u5373\u53C2\u4E0E"]}),t("button",{type:"button",className:"border rounded-full flex-center px-4 py-1 text-sm hover:bg-gray-50",children:[e(N,{}),"\u5206\u4EAB"]}),e("button",{type:"button",className:"border rounded-full flex-center px-4 py-1 text-sm hover:bg-gray-50",children:e(F,{})})]}),t("div",{className:"border-b px-8",ref:i,children:[t("div",{className:"rounded overflow-hidden border relative",children:[e("img",{src:n.coverPCUrl,loading:"lazy",className:"h-56 object-cover block",alt:""}),t("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex-center flex-col",children:[t("div",{style:{minWidth:210},className:"relative max-w-sm min-w- border-t border-b border-white border-opacity-60 py-6 text-white text-xl flex-center text-center flex-col ",children:[t("div",{className:"flex",children:["#",e("span",{className:"truncate",children:n.title}),"#"]}),e("span",{className:"absolute inset-x-0 text-xs whitespace-nowrap top-full transform -translate-y-1/2",children:`${n.participateCount}\u4EBA\u53C2\u4E0E`})]}),t("button",{type:"button",className:"bg-white flex-center h-9 mt-4 w-52 rounded text-red-500 bg-opacity-90 hover:bg-opacity-100",children:[e(B,{size:16}),"\u7ACB\u5373\u53C2\u4E0E"]})]}),e("button",{type:"button",className:"absolute m-4 w-8 h-8 flex-center top-0 right-0 border text-white border-gray-500 rounded-full bg-black bg-opacity-50",children:e(N,{size:24,stroke:1})})]}),e("ul",{className:"pb-8 text-sm text-gray-500 leading-6",children:(d=n.text)==null?void 0:d.map((m,h)=>e("li",{children:m},h))})]})]})},O=a.exports.memo(M),K=({actid:s})=>{const{data:i,isLoading:c}=R({actid:s}),l=(i==null?void 0:i.events)||[];return c?e(x,{}):e(E,{list:l})},V=a.exports.memo(K),W=()=>{const{id:s=""}=C();return t("div",{className:"flex divide-x h-full overflow-auto",id:"\u52A8\u6001",children:[e("div",{className:"flex-auto w-0 relative",children:t("div",{className:"pt-4",children:[e(O,{}),t("div",{className:"px-8",children:[e("div",{className:"text-gray-500 mt-4 text-sm",children:"\u70ED\u95E8\u52A8\u6001"}),e(V,{actid:s})]})]})}),t("div",{className:"flex-none",style:{width:230},children:[e("div",{className:"p-4 text-sm text-gray-700",children:"\u63A8\u8350\u8BDD\u9898"}),e(v,{limit:10})]})]})},J=a.exports.memo(W),X=a.exports.memo(function(){const[i,c]=a.exports.useState("day"),[l,r]=a.exports.useState([]),n=async()=>{r([{title:"\u4F60\u7684\u604B\u7231\u4EBA\u683C\u662F\u4EC0\u4E48",count:916},{title:"\u4F60\u7684\u604B\u7231\u4EBA\u683C\u662F\u4EC0\u4E48",count:916}])};return a.exports.useEffect(()=>{n()},[i]),e("div",{className:" h-full overflow-auto",children:t("div",{className:"flex divide-x",children:[t("div",{className:"flex-auto w-0",children:[t("div",{className:"h-16 px-8 flex items-center",children:[e("span",{className:"text-lg font-bold",children:"\u8BDD\u9898\u98D9\u5347\u699C"}),t("div",{className:"ml-auto space-x-3 text-gray-300",children:[e("button",{type:"button",onClick:()=>c("day"),className:p("hover:text-gray-700",i==="day"&&"text-gray-700"),children:"24\u5C0F\u65F6"}),e("span",{children:"|"}),e("button",{type:"button",onClick:()=>c("week"),className:p("hover:text-gray-700",i==="week"&&"text-gray-700"),children:"7\u5929"})]})]}),e("div",{children:l.map((d,m)=>t("div",{className:p("flex items-center h-20 hover:bg-gray-100",m%2===1&&"bg-gray-50"),children:[e("div",{className:"w-16 flex-center text-sm ",children:m+1}),e("div",{className:"w-14 h-14",children:e("img",{src:"",alt:""})}),t("div",{children:[e("div",{className:"text-lg",children:d.title}),t("div",{className:"text-gray-300",children:[d.count,"\u4EBA\u53C2\u4E0E"]})]})]},m))})]}),t("div",{className:"domFriend_right flex-none",style:{width:230},children:[e("div",{className:"p-4 text-sm text-gray-700",children:"\u63A8\u8350\u8BDD\u9898"}),e(v,{limit:10})]})]})})}),Y=a.exports.memo(function(){return t("div",{className:"",children:[e("div",{className:"text-xl p-8 font-bold",children:"\u5BFB\u627E\u5E76\u9080\u8BF7\u597D\u53CB"}),t("div",{className:"px-8",children:[t("div",{className:"space-x-2 text-gray-500",children:[e("button",{type:"button",children:"\u5DF2\u67091\u4F4D\u597D\u53CB\u52A0\u5165"}),e("span",{children:"|"}),e("button",{type:"button",children:"\u9080\u8BF7\u53E6\u59163\u4F4D\u597D\u53CB\u52A0\u5165"})]}),e("div",{children:"TODO"})]})]})}),Z=()=>e("div",{}),ee=a.exports.memo(Z),te=()=>t(z,{children:[e(u,{index:!0,element:e(H,{})}),e(u,{path:"top",element:e(X,{})}),e(u,{path:"Acquaintance",element:e(Y,{})}),e(u,{path:":id",element:e(J,{})}),t(u,{path:"redirect",children:[e(u,{index:!0,element:e(G,{to:"..",replace:!0})}),e(u,{path:"keywords",element:e(ee,{})})]})]}),we=te;export{we as default};
