System.register(["./react-legacy.b3bc90c5.js","./index-legacy.f0e0849a.js","./qrcode.react-legacy.685a2ddb.js","./react-router-dom-legacy.2933718f.js","./@tabler/icons-legacy.42c83e77.js","./Item-legacy.8df3a3bd.js","./react-slick-legacy.d6ab9305.js","./Gender-legacy.c0c828f4.js","./index-legacy.20666c60.js","./react-use-legacy.21ff61d7.js","./useInfinite-legacy.b5d5e5d0.js","./Rank-legacy.b42313da.js","./Download-legacy.c09fd937.js","./lodash-legacy.4434829e.js","./rxjs-legacy.1bb14dba.js","./react-dom-legacy.c211300b.js","./react-redux-legacy.b70b910a.js","./immer-legacy.c38810dc.js","./axios-legacy.6d9fa2e4.js","./store-legacy.0145af8a.js","./react-transition-group-legacy.b5e58023.js","./PlaylistAsyncReplace-legacy.f9986a49.js"],(function(e,a){"use strict";var i,t,r,l,s,n,c,o,d,m,h,u,p,b,v,g,f,x,y,w,N,k,_,z,C,j,U,I,S,L,D,M,$,E,R,F,X,Y,J,O,A,G,q,P,H,Q,T,B,K,V,W,Z,ee,ae,ie,te,re,le,se,ne,ce,oe,de,me,he,ue,pe=document.createElement("style");return pe.innerHTML='.domUser .empty{color:#999;padding-top:100px;text-align:center}.authentication{background-color:#fde4e2;border-radius:8px;color:#ed4036;display:-webkit-box;display:-ms-flexbox;display:flex;height:16px;line-height:16px;margin-right:.5em;padding-right:6px}.cartoon{background:var(--gray);height:var(--size);left:50%;overflow:hidden;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:var(--size)}.cartoon div{-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute}.b{border:calc(var(--size)*1/80) solid #000}.r{border-radius:100%}.c{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ha:after,.hb:before{content:"";display:block;position:absolute}.cartoon{--white:#ebeced;--gray:#8e9194;--dark:#636365;--black:#222020;--rainbow1:#c7cce1;--rainbow2:#ffc215;--rainbow3:#d8df20;--rainbow4:#06b6a2;--rainbow5:#1f86c8;--rainbow6:#aa59a2;--rainbow7:#f37a69;--time:2s;--size:150px}.face{background:var(--black);height:67%;top:51.75%;width:69%}.eyes{background:var(--white);-webkit-box-shadow:calc(var(--size)*25.5/80) 0 var(--white),0 calc(var(--size)*11.5/80) 0 calc(var(--size)*-1.5/80) var(--dark),calc(var(--size)*25.5/80) calc(var(--size)*11.5/80) 0 calc(var(--size)*-1.5/80) var(--dark),0 0 0 calc(var(--size)*2.75/80) var(--gray),calc(var(--size)*25.5/80) 0 0 calc(var(--size)*2.75/80) var(--gray),0 0 0 calc(var(--size)*5.5/80) var(--black),calc(var(--size)*25.5/80) 0 0 calc(var(--size)*5.5/80) var(--black);box-shadow:calc(var(--size)*25.5/80) 0 var(--white),0 calc(var(--size)*11.5/80) 0 calc(var(--size)*-1.5/80) var(--dark),calc(var(--size)*25.5/80) calc(var(--size)*11.5/80) 0 calc(var(--size)*-1.5/80) var(--dark),0 0 0 calc(var(--size)*2.75/80) var(--gray),calc(var(--size)*25.5/80) 0 0 calc(var(--size)*2.75/80) var(--gray),0 0 0 calc(var(--size)*5.5/80) var(--black),calc(var(--size)*25.5/80) 0 0 calc(var(--size)*5.5/80) var(--black);-webkit-clip-path:polygon(-200% -100%,400% -100%,400% 148%,-200% 148%);clip-path:polygon(-200% -100%,400% -100%,400% 148%,-200% 148%);height:14.5%;left:26.75%;top:36%;width:14.5%}@-webkit-keyframes iris{0%,to{color:var(--rainbow1)}14.25%{color:var(--rainbow2)}28.5%{color:var(--rainbow3)}42.75%{color:var(--rainbow4)}57%{color:var(--rainbow5)}71.25%{color:var(--rainbow6)}85.5%{color:var(--rainbow7)}}@keyframes iris{0%,to{color:var(--rainbow1)}14.25%{color:var(--rainbow2)}28.5%{color:var(--rainbow3)}42.75%{color:var(--rainbow4)}57%{color:var(--rainbow5)}71.25%{color:var(--rainbow6)}85.5%{color:var(--rainbow7)}}.pupil{-webkit-animation:iris var(--time) steps(7) infinite;animation:iris var(--time) steps(7) infinite;background:#000;border-radius:0 50%;-webkit-box-shadow:inset 0 0 0 calc(var(--size)*4/80),calc(var(--size)*18.5/80) calc(var(--size)*-18.5/80);box-shadow:inset 0 0 0 calc(var(--size)*4/80),calc(var(--size)*18.5/80) calc(var(--size)*-18.5/80);-webkit-box-shadow:inset calc(var(--size)*-4/80) calc(var(--size)*4/80) 0 calc(var(--size)*-3/80),inset calc(var(--size)*4/80) calc(var(--size)*-4/80) 0 calc(var(--size)*-3/80);box-shadow:inset calc(var(--size)*-4/80) calc(var(--size)*4/80) 0 calc(var(--size)*-3/80),inset calc(var(--size)*4/80) calc(var(--size)*-4/80) 0 calc(var(--size)*-3/80);height:9.5%;left:29.25%;top:38.25%;-webkit-transform:rotate(45deg);transform:rotate(45deg);width:9.5%}.pupil+.pupil{left:61.75%}.mouth{height:40%;left:29%;top:64%;width:42%}@-webkit-keyframes rainbow{0%{background-position:0 0}to{background-position:calc(var(--size)*24.5/80) 0}}@keyframes rainbow{0%{background-position:0 0}to{background-position:calc(var(--size)*24.5/80) 0}}.mouth:before{-webkit-animation:rainbow var(--time) steps(7) infinite;animation:rainbow var(--time) steps(7) infinite;background-image:-webkit-gradient(linear,left top,right top,color-stop(0,var(--rainbow1)),color-stop(0,var(--rainbow2)),color-stop(0,var(--rainbow3)),color-stop(0,var(--rainbow4)),color-stop(0,var(--rainbow5)),color-stop(0,var(--rainbow6)),color-stop(0,var(--rainbow7)));background-image:linear-gradient(to right,var(--rainbow1) 0 calc(var(--size)*3.5/80),var(--rainbow2) 0 calc(var(--size)*7/80),var(--rainbow3) 0 calc(var(--size)*10.5/80),var(--rainbow4) 0 calc(var(--size)*14/80),var(--rainbow5) 0 calc(var(--size)*17.5/80),var(--rainbow6) 0 calc(var(--size)*21/80),var(--rainbow7) 0);background-position:calc(var(--size)*3.5/80) 0;background-repeat:repeat-x;background-size:100% 100%;height:100%;left:50%;top:0;-webkit-transform:translate(-50%);transform:translate(-50%);width:calc(var(--size)*24.5/80)}.mouth:after{background-image:linear-gradient(60deg,transparent 60%,var(--black) 0),linear-gradient(-60deg,transparent 60%,var(--black) 0);background-position:-4.16666% calc(var(--size)*-.001/80),-50% calc(var(--size)*-.001/80);background-size:8.333% 103%,8.333% 103%;height:8.3%;left:0;top:0;width:100%}.forehead{-webkit-box-shadow:inset 0 calc(var(--size)*-15.75/80) var(--dark);box-shadow:inset 0 calc(var(--size)*-15.75/80) var(--dark);height:27.5%;overflow:hidden;top:38.5%;width:30%}.forehead:after{background:var(--dark);border-radius:50%;height:100%;top:-85%;width:100%}.ears{background-image:linear-gradient(to right,var(--black) 6%,transparent 0 94%,var(--black) 0),linear-gradient(209deg,transparent 52%,var(--black) 0 58.5%,var(--dark) 0),linear-gradient(-209deg,transparent 52%,var(--black) 0 58.5%,var(--dark) 0);background-position:0 100%;background-repeat:repeat-x;background-size:100% 90%,100% 100%,100% 100%;border-radius:calc(var(--size)*1.5/80);height:33%;top:19%;width:69%}.ears,.snout{left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.snout{aclip-path:polygon(2% 0,98% 0,98% 100%,2% 100%);background:var(--white);border-radius:15% 15% calc(var(--size)*100/80) calc(var(--size)*100/80);height:10%;top:62.5%;width:45%}.snout:after,.snout:before{border-radius:50%;-webkit-box-shadow:calc(var(--size)*-1/80) calc(var(--size)*-1/80) var(--gray);box-shadow:calc(var(--size)*-1/80) calc(var(--size)*-1/80) var(--gray);height:20%;left:0;width:5%}.snout:before{-webkit-box-shadow:calc(var(--size)*1/80) calc(var(--size)*-1/80) var(--gray);box-shadow:calc(var(--size)*1/80) calc(var(--size)*-1/80) var(--gray);left:auto;right:0}.smile{background:var(--gray);border-radius:calc(var(--size)*100/80) calc(var(--size)*100/80) 0 0;height:5%;left:22%;top:60%;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);width:10%}.smile+.smile{left:auto;right:22%;-webkit-transform:scaleX(-1) rotate(-45deg);transform:scaleX(-1) rotate(-45deg)}.whiskers{-webkit-box-shadow:inset 0 0 0 calc(var(--size)*4/80),calc(var(--size)*2/80) calc(var(--size)*2.5/80),calc(var(--size)*-2/80) calc(var(--size)*2.5/80),calc(var(--size)*11.25/80) 0,calc(var(--size)*9.25/80) calc(var(--size)*2.5/80),calc(var(--size)*13.25/80) calc(var(--size)*2.5/80);box-shadow:inset 0 0 0 calc(var(--size)*4/80),calc(var(--size)*2/80) calc(var(--size)*2.5/80),calc(var(--size)*-2/80) calc(var(--size)*2.5/80),calc(var(--size)*11.25/80) 0,calc(var(--size)*9.25/80) calc(var(--size)*2.5/80),calc(var(--size)*13.25/80) calc(var(--size)*2.5/80);color:var(--black);height:1.5%;left:42.25%;top:56.5%;width:1.5%}.nose{background:var(--white);-webkit-clip-path:polygon(0 50%,33% 0,67% 0,100% 50%);clip-path:polygon(0 50%,33% 0,67% 0,100% 50%);height:20%;overflow:hidden;top:52.5%;width:28%}.nose,.nose:after{left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.nose:after{background:var(--black);border-radius:50%;height:40%;top:-28%;width:40%}.nose:before{background:var(--gray);border-radius:0 0 calc(var(--size)*3/80) calc(var(--size)*3/80);-webkit-box-shadow:calc(var(--size)*13.75/80) 0 var(--gray);box-shadow:calc(var(--size)*13.75/80) 0 var(--gray);height:51%;left:-10%;top:0;width:59%}._gender_1gcsl_1{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;line-height:30px}._gender_1gcsl_1 [type=radio]:checked+._ico_1gcsl_6{border-color:var(--theme-color)}._gender_1gcsl_1 [type=radio]:checked+._ico_1gcsl_6:before{opacity:1}._ico_1gcsl_6{border:1px solid #d0d0d0;height:18px;margin-right:.5em;width:18px}._ico_1gcsl_6:before{background-color:var(--theme-color);border-radius:50%;content:"";height:12px;opacity:0;width:12px}.domUser_binding_bar{-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:70px;padding:0 20px}.domUser_binding_bar,.domUser_binding_bar .content{display:-webkit-box;display:-ms-flexbox;display:flex}.domUser_binding_bar .content{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-pack:center;-ms-flex-pack:center;color:#636364;-ms-flex-direction:column;flex-direction:column;justify-content:center;margin-left:10px}.domUser_binding_bar .content .name{font-size:14px;margin-bottom:.5em}.domUser_binding_box{background-color:#f5f5f7;margin-top:10px}.domUser_binding_list{border-top:1px solid #e0e0e0;margin-top:10px}.domUser_binding_item{border-bottom:1px dashed #e0e0e0}\n',document.head.appendChild(pe),{setters:[e=>{i=e.r},e=>{t=e.b6,r=e.L,l=e.t,s=e.b7,n=e.b8,c=e.n,o=e.ae,d=e.b9,m=e.ba,h=e.u,u=e.i,p=e.bb,b=e.bc,v=e.bd,g=e.be,f=e.bf,x=e.bg,y=e.M,w=e.H,N=e.Y,k=e.d,_=e.bh,z=e.aa,C=e.a,j=e.bi,U=e.bj,I=e.bk,S=e.bl,L=e.bm,D=e.bn,M=e.bo,$=e.bp},e=>{E=e.j,R=e.a,F=e.F},e=>{X=e.b,Y=e.O,J=e.L,O=e.d,A=e.R,G=e.c},e=>{q=e.p,P=e.q,H=e.ai,Q=e.ay,T=e.ab,B=e.aq,K=e.P,V=e.t,W=e.ak},e=>{Z=e.I},e=>{ee=e.c},e=>{ae=e.G},e=>{ie=e.D},e=>{te=e.s,re=e.m},e=>{le=e.u},e=>{se=e.R},e=>{ne=e.D},e=>{ce=e.l},e=>{oe=e.f,de=e.g,me=e.m,he=e.t,ue=e.c},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const a=i.exports.createContext({profile:{}}),{Provider:pe}=a,be=i.exports.memo((()=>{const{uid:e}=X(),{data:a,isLoading:i}=t({uid:e});return console.log("data",a),i?E(r,{}):E("div",{className:"overflow-auto h-full flex-auto",children:E(pe,{value:{...a},children:E(Y,{})})})})),ve=i.exports.memo((({list:e=[],children:a})=>R("div",{className:"domUserDetail_list px-8 grid grid-cols-4 gap-5",children:[a,e.map((e=>E(Z,{item:e},e.id)))]}))),ge=i.exports.memo((({list:e=[]})=>E("div",{children:e.map(((e,a)=>R("div",{className:ee("hover:bg-gray-100 pl-8 py-3 flex items-center",{"bg-gray-50":a%2==0}),children:[R(J,{to:`/playlist/music/${e.id}`,className:"rounded overflow-hidden relative group",children:[E("img",{src:`${e.coverImgUrl}?param=60y60`,alt:""}),E("button",{type:"button",className:"absolute rounded-full bg-white bg-opacity-90 inset-0 flex-center m-auto w-6 h-6 ui_themeColor opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:E(q,{size:16,className:"fill-current"})})]}),E(J,{to:`/playlist/music/${e.id}`,className:"flex-auto w-0 px-3 truncate text-sm ui_text_black_hover",children:e.name}),R("span",{className:"px-3 count text-gray-400",style:{width:1/7*100+"%"},children:["歌曲：",e.trackCount]}),R("span",{className:"px-3 creator truncate text-gray-300",style:{width:1/7*100+"%"},children:["by",E(J,{to:`/user/${e.userId}`,className:"ui_text_gray_hover",children:e.creator.nickname})]}),R("button",{type:"button",className:"px-3 subscribed flex items-center ui_text_gray_hover",style:{width:1/7*100+"%"},children:[E(P,{size:16}),e.subscribedCount]}),R("button",{type:"button",className:"px-3 playCount flex items-center ui_text_gray_hover",style:{width:1/7*100+"%"},children:[E(q,{size:16}),l(e.playCount)]})]},e.id)))}))),fe=i.exports.memo((()=>E("div",{}))),xe=["Grid","List","Column"],ye=[["Grid","大图模式",H],["List","列表模式",Q],["Column","图列模式",T]],we={Grid:ve,List:ge,Column:fe},Ne=["创建的歌单","收藏的歌单","创建的播客","收藏的播客","创建的音乐专栏"],ke=i.exports.memo((({list:e=[],layout:a="Grid",children:t})=>E("div",{className:"pb-10",children:i.exports.createElement(we[a],{list:e,children:t})}))),_e=()=>R("div",{className:"cartoon hb r",children:[E("div",{className:"ears"}),E("div",{className:"face r c"}),E("div",{className:"nose ha hb"}),E("div",{className:"forehead ha c"}),E("div",{className:"eyes r"}),E("div",{className:"pupil"}),E("div",{className:"pupil"}),E("div",{className:"smile"}),E("div",{className:"smile"}),E("div",{className:"snout ha hb"}),E("div",{className:"mouth ha hb"}),E("div",{className:"whiskers r"})]}),ze=i.exports.memo((()=>R("div",{className:"item",children:[E(J,{to:"record",children:R("div",{className:"cover relative border aspect-square",children:[E("div",{className:"absolute inset-0",children:E(_e,{})}),E("button",{type:"button",className:"playArrow opacity-0 group-hover:opacity-100 transition-opacity duration-500 ui_themeColor absolute right-0 bottom-0 m-2 bg-white bg-opacity-90 rounded-full p-2",children:E(q,{size:22,className:"fill-current"})})]})}),E("div",{className:"footer mt-2 text-sm",children:E(J,{to:"record",children:"听歌排行"})})]}))),Ce=i.exports.memo((()=>{const{uid:e}=X(),{data:a,isLoading:t}=s({uid:e}),[l,n]=i.exports.useState(Ne[0]),[c,o]=i.exports.useState(xe[0]),d=a?.playlist||[],m=d.filter((a=>String(a.userId)===e)),h=d.filter((a=>String(a.userId)!==e));return t?E(r,{}):R("div",{className:"",children:[R("div",{className:"flex px-8 pb-4",children:[E("div",{className:"text-base flex gap-4",children:Ne.map((e=>E("button",{className:ee(l===e&&"font-bold ui_underline"),onClick:()=>n(e),type:"button",children:e},e)))}),E("div",{className:"ml-auto flex overflow-hidden rounded space-x-0.5",children:ye.map((([e,a,i])=>E("button",{type:"button",className:ee("layout bg-gray-100 h-5 w-6 flex-center",c===e?"bg-gray-500 text-white":"hover:bg-gray-200"),onClick:()=>o(e),title:a,children:E(i,{size:16})},e)))})]}),l===Ne[0]&&E(ke,{list:m,children:E(ze,{})}),l===Ne[1]&&E(ke,{list:h})]})})),je=i.exports.memo((()=>{const{uid:e}=X(),[t]=n(),{profile:r,code:l,bindings:s,level:m}=i.exports.useContext(a),{isLogin:h}=c(o),u=c(o),p=i.exports.useMemo((()=>!!h&&String(u.profile.userId)===e),[h]),b=async e=>{const{followed:a}=r;try{await t({id:e,t:!0===a?0:1})}catch(i){console.log(i)}};return l?R("div",{className:"flex p-8",children:[E("div",{className:"avatar w-44 h-44 rounded-full overflow-hidden flex-none",children:E("img",{src:`${r?.avatarUrl}?param=180y180`,alt:"",className:"w-full h-ull object-cover block"})}),R("div",{className:"ml-5 flex-auto",children:[E("div",{className:"font-bold text-xl",children:r?.nickname}),R("div",{className:"flex items-center py-2",children:[R("div",{className:"left flex-center",children:[11===r?.vipType&&R(F,{children:[E("a",{href:"https://music.163.com/#/member",children:"黑胶会员"})," "]}),r?.identify&&R("span",{className:"authentication",title:r.identify.imageDesc,children:[E("span",{className:"w-4 h-4 ml-1",children:E("img",{className:"ui_containimg",src:r.identify.imageUrl,alt:""})}),r.identify.imageDesc]}),R("a",{className:"w-8 h-4 flex-center rounded-full mr-2 bg-gray-200",href:"https://music.163.com/#/user/level",children:["Lv",m]}),E(ae,{gender:r?.gender,size:16})]}),E("div",{className:"right ml-auto flex-center",children:p?R(J,{to:"/user/edit",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",children:[E(B,{size:18,stroke:1.5}),"  编辑个人信息"]}):R(F,{children:[R("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",children:[E(K,{size:20,stroke:1})," 发私信"]}),R("button",r?.followed?{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:()=>b(r?.userId),children:[E(V,{size:16}),"  已关注"]}:{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full flex-center",onClick:()=>b(r?.userId),children:[E(W,{size:16,style:{color:"#EC4141"}}),"  关注"]})]})})]}),E("hr",{}),R("div",{className:"divide-x flex mt-5",children:[R(J,{to:"dynamic",className:"pr-8 text-center",children:[E("div",{className:"text-lg",children:r?.eventCount}),E("div",{children:"动态"})]}),R(J,{to:"follow",className:"px-8",children:[E("div",{className:"text-lg",children:r?.follows}),E("div",{children:"关注"})]}),R(J,{to:"fans",className:"pl-8",children:[E("div",{className:"text-lg",children:r?.followeds}),E("div",{children:"粉丝"})]})]}),R("div",{className:"leading-6 mt-2 text-sm",children:[R("div",{children:[E("span",{children:"社交网络："}),s?.map((e=>{if(e.url)return 2===e.type?E("a",{href:e.url,children:E(d,{size:16,active:!0},e.url)},e.url):null}))]}),R("div",{children:[E("span",{children:"个人介绍："}),E("span",{className:"text-gray-400 break-all whitespace-pre-line",children:r?.signature||"暂无介绍"})]})]})]})]}):null})),Ue=i.exports.memo((()=>{const{isLogin:e}=c(o),t=i.exports.useContext(a);return e?404===t.code?E("div",{className:"flex",children:"用户不存在"}):R("div",{className:"",children:[E(je,{}),E(Ce,{})]}):E("div",{children:"查看个人信息请先登录"})})),Ie=i.exports.memo((({lasttime:e,setList:a})=>{const{uid:t=""}=X(),[l,{isLoading:s,isSuccess:n,data:c,isUninitialized:o}]=m(),d=i.exports.useRef(null),h=te(d,{root:null,rootMargin:"0px",threshold:1});return i.exports.useEffect((()=>{o&&h&&h.intersectionRatio>0&&(async()=>{const{data:i}=await l({uid:t,lasttime:e});i.more&&a((e=>[...e,i.lasttime])),0===i.size&&a([])})()}),[h]),E("div",{ref:d,children:n?E(ie,{list:c.events}):E("div",{className:"flex-center py-4",children:E(r,{})})})})),Se=i.exports.memo((()=>{const{profile:e}=i.exports.useContext(a),[t,r]=i.exports.useState([-1]);return R("div",{className:"h-full overflow-auto",children:[E("div",{className:"h1 ui_header",children:`${e.nickname}的动态`}),E("div",{className:"px-8",children:0===t.length?E("div",{className:"empty",children:"暂无动态"}):t.map(((e,a)=>E(Ie,{lasttime:e,setList:r},e)))})]})})),Le=({handleLetter:e,handleClick:a,isSelf:i,id:t,name:r,followed:l})=>{switch(!0){case e&&i:return R("button",{onClick:()=>e(t,r),type:"button",className:"follow border flex-center rounded-full w-16 h-6 hover:bg-gray-200",children:[E(W,{size:16,className:"text-red-500"})," 私信"]});case l:return E("span",{className:"follow border text-gray-500 flex-center rounded-full w-16 h-6",children:"已关注"});default:return R("button",{onClick:()=>a(t),type:"button",className:"follow border flex-center rounded-full w-16 h-6 hover:bg-gray-200",children:[E(W,{size:16,className:"text-red-500"})," 关注"]})}},De=i.exports.memo((({item:e,handleClick:a,handleLetter:i,isSelf:t})=>R("div",{className:"item w-96 flex p-4 hover:bg-gray-50",children:[R(J,{to:`/user/${e.userId}`,className:"relative avatar w-24 h-24 rounded-full border flex-none",children:[E("img",{className:"rounded-full",src:`${e.avatarUrl}?param=100y100`,alt:""}),e?.avatarDetail?.identityIconUrl&&E("div",{className:"ico w-6 h-6 absolute right-0 bottom-0",children:E("img",{src:e.avatarDetail.identityIconUrl,alt:""})})]}),R("div",{className:"content flex-auto w-0 pl-2",children:[E("div",{className:"contain mt-4",children:E("div",{className:"left",children:E(J,{className:"nickname ui_text_black_hover truncate pr-3 w-56",to:`/user/${e.userId}`,children:e.nickname})})}),R("div",{className:"contain flex items-baseline",children:[E("div",{className:"truncate pr-3 text-gray-500 w-56",children:e.signature}),E("div",{className:"right flex-none",children:Le({handleLetter:i,handleClick:a,isSelf:t,followed:e.followed,id:e.userId,name:e.nickname})})]}),R("div",{className:"info divide-x text-gray-500 mt-1",children:[E("span",{className:"pr-6",children:` 歌单：${e.playlistCount}`}),E("span",{className:"pl-6",children:`粉丝：${e.followeds}`})]})]})]},e.userId))),Me=i.exports.memo((({list:e=[],handleClick:a,handleLetter:i,isSelf:t,children:r})=>R(F,{children:[0===e.length?r[0]:E("div",{className:"flex flex-wrap justify-between",children:e.map((e=>E(De,{item:e,handleClick:a,isSelf:t,handleLetter:i},e.userId)))}),r[1]]}))),$e=i.exports.memo((()=>{const{profile:e}=i.exports.useContext(a),{uid:t}=X(),l=h(),[s,n]=u([]),d=c(o),m=i.exports.useMemo((()=>d.profile.userId===Number(t)),[t]),f=i.exports.useRef(null),x=i.exports.useRef(null),y=i.exports.useRef(0),w=i.exports.useRef(!0),N=i.exports.useCallback((async e=>{try{const{}=await p({id:e,t:1});n((a=>{a[a.findIndex((a=>a.userId===e))].followed=!0}))}catch(a){console.log(a)}}),[]);return le((async()=>{if(w.current)try{const{follow:e,more:a}=await b({uid:t,limit:30,offset:y.current});y.current+=30,w.current=a,n((a=>[...a,...e]))}catch(e){console.log(e)}}),f,x),R("div",{className:"h-full overflow-auto",ref:f,children:[R("div",{className:"h1 ui_header",children:[E(J,{to:"./",children:e?.nickname}),"的关注"]}),R("div",{className:"",children:[E(Me,{isSelf:m,list:s,handleClick:N,handleLetter:(e,a)=>{l(v()),l(g({uid:e,nickname:a,showMsgPrivateHistory:!0}))},children:E("div",{className:"empty",children:"还没有关注"})}),E("div",{ref:x}),w.current&&E("div",{className:"flex-center",children:E(r,{})})]})]})})),Ee=i.exports.memo((()=>{const{uid:e}=X(),{profile:t}=i.exports.useContext(a),[r]=n(),{data:l,isLoading:s}=f({uid:e}),c=l?.followeds||[],o=i.exports.useCallback((async e=>{try{const{}=await r({id:e,t:1})}catch(a){console.log(a)}}),[e]);return R("div",{className:"domUser_followlist",children:[R("div",{className:"h1 ui_header",children:[E(J,{to:"./",children:t.nickname}),"的粉丝"]}),E("div",{className:"domUser_followlist_main",children:E(Me,{list:c,handleClick:o,children:E("div",{className:"empty",children:"还没有粉丝"})})})]})})),Re=i.exports.memo((({type:e,uid:a})=>{const{data:i,isFetching:t}=x({uid:a,type:e}),l=(1===e?i?.weekData:i?.allData)||[];return t?E(r,{}):E("div",{className:"overflow-auto h-0 flex-auto domUser_record_main",style:{"--ui_grid_template":"36px / 24px 24px 24px 10fr 1fr"},children:E("div",{className:"domUser_record_list",children:l.map((({song:e,playCount:a},i)=>E(y,{item:e,schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","下载"]],children:R("div",{tabIndex:2,className:ee("domUser_record_item focus:outline-none focus:bg-gray-200 items-center hover:bg-gray-100 ui_grid_template px-8 grid",i%2==1&&"bg-gray-50"),children:[E("div",{className:"index text-gray-400",children:E(se,{id:e.id,index:i})}),E("div",{className:"heart",children:E(w,{id:e.id})}),E("div",{className:"download",children:E(ne,{})}),E("div",{className:"name",children:E(N,{item:e})}),R("div",{className:"playCount text-gray-400",children:[a,"次"]})]})},e.id)))})})})),Fe=i.exports.memo((()=>{const{uid:e}=X(),[a,t]=i.exports.useState(1);return R("div",{className:"h-full flex flex-col",children:[R("div",{className:"flex-none",children:[E("div",{className:"h1 ui_header",children:"我的听歌排行"}),R("div",{className:"flex px-8 pb-2 border-b gap-x-8 text-sm",children:[E("button",{onClick:()=>t(1),type:"button",className:ee("domUser_record_nav_link",{"font-bold":1===a}),children:"最近一周"}),E("button",{onClick:()=>t(0),type:"button",className:ee({"font-bold":0===a}),children:"所有时间"})]})]}),E(Re,{type:a,uid:e})]})})),Xe=i.exports.memo((({children:e,value:a,onChange:i})=>E("select",{className:"h-8 px-1.5 rounded border",value:a,onChange:i,children:e}))),Ye=(new Date).getFullYear(),Je=i.exports.memo((({birthday:e=Date.now(),handleEdit:a})=>{const t=i.exports.useMemo((()=>k(e).year()),[e]),r=i.exports.useMemo((()=>k(e).month()),[e]),l=i.exports.useMemo((()=>k(e).date()),[e]),s=({year:e,month:i,date:t})=>{a("birthday",new Date(`${e}/${i}/${t}`).valueOf())};return R("div",{className:"grid grid-cols-3 gap-3",children:[E(Xe,{value:t,onChange:e=>{s({year:e.target.value,month:1,date:1})},children:Array(100).fill(0).map(((e,a)=>R("option",{value:Ye+a-99,children:[Ye+a-99,"年"]},Ye+a-99)))}),E(Xe,{value:r,onChange:e=>{s({year:t,month:e.target.value,date:1})},children:Array(12).fill(0).map(((e,a)=>R("option",{value:a,children:[a+1,"月"]},a)))}),E(Xe,{value:l,onChange:e=>{s({year:t,month:r,date:e.target.value})},children:Array(k(e).daysInMonth()).fill(0).map(((e,a)=>R("option",{value:a+1,children:[a+1,"日"]},a+1)))})]})})),Oe=[{id:1,name:"直辖市",cities:{11e4:"北京市",12e4:"天津市",31e4:"上海市",5e5:"重庆市"}},{id:2,name:"特别行政区",cities:{81e4:"香港",82e4:"澳门"}},{id:13e4,name:"河北省",alias:"河北",type:0,cities:{130100:"石家庄市",130200:"唐山市",130300:"秦皇岛市",130400:"邯郸市",130500:"邢台市",130600:"保定市",130700:"张家口市",130800:"承德市",130900:"沧州市",131e3:"廊坊市",131100:"衡水市"}},{id:14e4,name:"山西省",alias:"山西",type:0,cities:{140100:"太原市",140200:"大同市",140300:"阳泉市",140400:"长治市",140500:"晋城市",140600:"朔州市",140700:"晋中市",140800:"运城市",140900:"忻州市",141e3:"临汾市",141100:"吕梁市"}},{id:15e4,name:"内蒙古",alias:null,type:0,cities:{150100:"呼和浩特市",150200:"包头市",150300:"乌海市",150400:"赤峰市",150500:"通辽市",150600:"鄂尔多斯市",150700:"呼伦贝尔市",150800:"巴彦淖尔市",150900:"乌兰察布市",152200:"兴安盟",152500:"锡林郭勒盟",152900:"阿拉善盟"}},{id:21e4,name:"辽宁省",alias:"辽宁",type:0,cities:{210100:"沈阳市",210200:"大连市",210300:"鞍山市",210400:"抚顺市",210500:"本溪市",210600:"丹东市",210700:"锦州市",210800:"营口市",210900:"阜新市",211e3:"辽阳市",211100:"盘锦市",211200:"铁岭市",211300:"朝阳市",211400:"葫芦岛市"}},{id:22e4,name:"吉林省",alias:"吉林",type:0,cities:{220100:"长春市",220200:"吉林市",220300:"四平市",220400:"辽源市",220500:"通化市",220600:"白山市",220700:"松原市",220800:"白城市",222400:"延边朝鲜族自治州"}},{id:23e4,name:"黑龙江省",alias:"黑龙江",type:0,cities:{230100:"哈尔滨市",230200:"齐齐哈尔市",230300:"鸡西市",230400:"鹤岗市",230500:"双鸭山市",230600:"大庆市",230700:"伊春市",230800:"佳木斯市",230900:"七台河市",231e3:"牡丹江市",231100:"黑河市",231200:"绥化市",232700:"大兴安岭地区"}},{id:32e4,name:"江苏省",alias:"江苏",type:0,cities:{320100:"南京市",320200:"无锡市",320300:"徐州市",320400:"常州市",320500:"苏州市",320600:"南通市",320700:"连云港市",320800:"淮安市",320900:"盐城市",321e3:"扬州市",321100:"镇江市",321200:"泰州市",321300:"宿迁市"}},{id:33e4,name:"浙江省",alias:"浙江",type:0,cities:{330100:"杭州市",330200:"宁波市",330300:"温州市",330400:"嘉兴市",330500:"湖州市",330600:"绍兴市",330700:"金华市",330800:"衢州市",330900:"舟山市",331e3:"台州市",331100:"丽水市"}},{id:34e4,name:"安徽省",alias:"安徽",type:0,cities:{340100:"合肥市",340200:"芜湖市",340300:"蚌埠市",340400:"淮南市",340500:"马鞍山市",340600:"淮北市",340700:"铜陵市",340800:"安庆市",341e3:"黄山市",341100:"滁州市",341200:"阜阳市",341300:"宿州市",341500:"六安市",341600:"亳州市",341700:"池州市",341800:"宣城市"}},{id:35e4,name:"福建省",alias:"福建",type:0,cities:{350100:"福州市",350200:"厦门市",350300:"莆田市",350400:"三明市",350500:"泉州市",350600:"漳州市",350700:"南平市",350800:"龙岩市",350900:"宁德市"}},{id:36e4,name:"江西省",alias:"江西",type:0,cities:{360100:"南昌市",360200:"景德镇市",360300:"萍乡市",360400:"九江市",360500:"新余市",360600:"鹰潭市",360700:"赣州市",360800:"吉安市",360900:"宜春市",361e3:"抚州市",361100:"上饶市"}},{id:37e4,name:"山东省",alias:"山东",type:0,cities:{370100:"济南市",370200:"青岛市",370300:"淄博市",370400:"枣庄市",370500:"东营市",370600:"烟台市",370700:"潍坊市",370800:"济宁市",370900:"泰安市",371e3:"威海市",371100:"日照市",371200:"莱芜市",371300:"临沂市",371400:"德州市",371500:"聊城市",371600:"滨州市",371700:"菏泽市"}},{id:41e4,name:"河南省",alias:"河南",type:0,cities:{410100:"郑州市",410200:"开封市",410300:"洛阳市",410400:"平顶山市",410500:"安阳市",410600:"鹤壁市",410700:"新乡市",410800:"焦作市",410900:"濮阳市",411e3:"许昌市",411100:"漯河市",411200:"三门峡市",411300:"南阳市",411400:"商丘市",411500:"信阳市",411600:"周口市",411700:"驻马店市",419001:"济源市"}},{id:42e4,name:"湖北省",alias:"湖北",type:0,cities:{420100:"武汉市",420200:"黄石市",420300:"十堰市",420500:"宜昌市",420600:"襄阳市",420700:"鄂州市",420800:"荆门市",420900:"孝感市",421e3:"荆州市",421100:"黄冈市",421200:"咸宁市",421300:"随州市",422800:"恩施土家族苗族自治州",429004:"仙桃市",429005:"潜江市",429006:"天门市",429021:"神农架林区"}},{id:43e4,name:"湖南省",alias:"湖南",type:0,cities:{430100:"长沙市",430200:"株洲市",430300:"湘潭市",430400:"衡阳市",430500:"邵阳市",430600:"岳阳市",430700:"常德市",430800:"张家界市",430900:"益阳市",431e3:"郴州市",431100:"永州市",431200:"怀化市",431300:"娄底市",433100:"湘西土家族苗族自治州"}},{id:44e4,name:"广东省",alias:"广东",type:0,cities:{440100:"广州市",440200:"韶关市",440300:"深圳市",440400:"珠海市",440500:"汕头市",440600:"佛山市",440700:"江门市",440800:"湛江市",440900:"茂名市",441200:"肇庆市",441300:"惠州市",441400:"梅州市",441500:"汕尾市",441600:"河源市",441700:"阳江市",441800:"清远市",441900:"东莞市",442e3:"中山市",445100:"潮州市",445200:"揭阳市",445300:"云浮市"}},{id:45e4,name:"广西",alias:null,type:0,cities:{450100:"南宁市",450200:"柳州市",450300:"桂林市",450400:"梧州市",450500:"北海市",450600:"防城港市",450700:"钦州市",450800:"贵港市",450900:"玉林市",451e3:"百色市",451100:"贺州市",451200:"河池市",451300:"来宾市",451400:"崇左市"}},{id:46e4,name:"海南省",alias:"海南",type:0,cities:{460100:"海口市",460200:"三亚市",460300:"三沙市",460400:"儋州市",469001:"五指山市",469002:"琼海市",469005:"文昌市",469006:"万宁市",469007:"东方市",469021:"定安县",469022:"屯昌县",469023:"澄迈县",469024:"临高县",469025:"白沙黎族自治县",469026:"昌江黎族自治县",469027:"乐东黎族自治县",469028:"陵水黎族自治县",469029:"保亭黎族苗族自治县",469030:"琼中黎族苗族自治县"}},{id:51e4,name:"四川省",alias:"四川",type:0,cities:{510100:"成都市",510300:"自贡市",510400:"攀枝花市",510500:"泸州市",510600:"德阳市",510700:"绵阳市",510800:"广元市",510900:"遂宁市",511e3:"内江市",511100:"乐山市",511300:"南充市",511400:"眉山市",511500:"宜宾市",511600:"广安市",511700:"达州市",511800:"雅安市",511900:"巴中市",512e3:"资阳市",513200:"阿坝藏族羌族自治州",513300:"甘孜藏族自治州",513400:"凉山彝族自治州"}},{id:52e4,name:"贵州省",alias:"贵州",type:0,cities:{520100:"贵阳市",520200:"六盘水市",520300:"遵义市",520400:"安顺市",520500:"毕节市",520600:"铜仁市",522300:"黔西南布依族苗族自治州",522600:"黔东南苗族侗族自治州",522700:"黔南布依族苗族自治州"}},{id:53e4,name:"云南省",alias:"云南",type:0,cities:{530100:"昆明市",530300:"曲靖市",530400:"玉溪市",530500:"保山市",530600:"昭通市",530700:"丽江市",530800:"普洱市",530900:"临沧市",532300:"楚雄彝族自治州",532500:"红河哈尼族彝族自治州",532600:"文山壮族苗族自治州",532800:"西双版纳傣族自治州",532900:"大理白族自治州",533100:"德宏傣族景颇族自治州",533300:"怒江傈僳族自治州",533400:"迪庆藏族自治州"}},{id:54e4,name:"西藏",alias:null,type:0,cities:{540100:"拉萨市",540200:"日喀则市",540300:"昌都市",540400:"林芝市",540500:"山南市",540600:"那曲市",542500:"阿里地区"}},{id:61e4,name:"陕西省",alias:"陕西",type:0,cities:{610100:"西安市",610200:"铜川市",610300:"宝鸡市",610400:"咸阳市",610500:"渭南市",610600:"延安市",610700:"汉中市",610800:"榆林市",610900:"安康市",611e3:"商洛市"}},{id:62e4,name:"甘肃省",alias:"甘肃",type:0,cities:{620100:"兰州市",620200:"嘉峪关市",620300:"金昌市",620400:"白银市",620500:"天水市",620600:"武威市",620700:"张掖市",620800:"平凉市",620900:"酒泉市",621e3:"庆阳市",621100:"定西市",621200:"陇南市",622900:"临夏回族自治州",623e3:"甘南藏族自治州"}},{id:63e4,name:"青海省",alias:"青海",type:0,cities:{630100:"西宁市",630200:"海东市",632200:"海北藏族自治州",632300:"黄南藏族自治州",632500:"海南藏族自治州",632600:"果洛藏族自治州",632700:"玉树藏族自治州",632800:"海西蒙古族藏族自治州"}},{id:64e4,name:"宁夏",alias:null,type:0,cities:{640100:"银川市",640200:"石嘴山市",640300:"吴忠市",640400:"固原市",640500:"中卫市"}},{id:65e4,name:"新疆",alias:null,type:0,cities:{650100:"乌鲁木齐市",650200:"克拉玛依市",650400:"吐鲁番市",650500:"哈密市",652300:"昌吉回族自治州",652700:"博尔塔拉蒙古自治州",652800:"巴音郭楞蒙古自治州",652900:"阿克苏地区",653e3:"克孜勒苏柯尔克孜自治州",653100:"喀什地区",653200:"和田地区",654e3:"伊犁哈萨克自治州",654200:"塔城地区",654300:"阿勒泰地区",659001:"石河子市",659002:"阿拉尔市",659003:"图木舒克市",659004:"五家渠市",659005:"北屯市",659006:"铁门关市",659007:"双河市",659008:"可克达拉市",659009:"昆玉市"}},{id:71e4,name:"台湾省",alias:"台湾",type:0,cities:{710100:"台北市",710200:"高雄市",710300:"基隆市",710400:"台中市",710500:"台南市",710600:"新竹市",710700:"嘉义市",710900:"台北县",711e3:"宜兰县",711100:"桃园县",711200:"新竹县",711300:"苗栗县",711400:"台中县",711500:"彰化县",711600:"南投县",711700:"云林县",711800:"嘉义县",711900:"台南县",712e3:"高雄县",712100:"屏东县",712200:"澎湖县",712300:"台东县",712400:"花莲县"}},{id:1e6,name:"海外",alias:"海外",type:3,cities:{1000100:"阿尔及利亚",1000200:"阿根廷",1000300:"阿联酋",1000400:"埃及",1000500:"爱尔兰",1000600:"奥地利",1000700:"澳大利亚",1000800:"巴哈马",1000900:"巴基斯坦",1001e3:"巴西",1001100:"白俄罗斯",1001200:"比利时",1001300:"冰岛",1001400:"波兰",1001500:"玻利维亚",1001600:"伯利兹",1001700:"朝鲜",1001800:"丹麦",1001900:"德国",1002e3:"俄罗斯",1002100:"厄瓜多尔",1002200:"法国",1002300:"菲律宾",1002400:"芬兰",1002500:"哥伦比亚",1002600:"古巴",1002700:"关岛",1002800:"哈萨克斯坦",1002900:"韩国",1003e3:"荷兰",1003100:"加拿大",1003200:"加纳",1003300:"柬埔寨",1003400:"捷克",1003500:"卡塔尔",1003600:"科威特",1003700:"克罗地亚",1003800:"肯尼亚",1003900:"老挝",1004e3:"卢森堡",1004100:"罗马尼亚",1004200:"马尔代夫",1004300:"马来西亚",1004400:"美国",1004500:"蒙古",1004600:"孟加拉",1004700:"秘鲁",1004800:"缅甸",1004900:"摩洛哥",1005e3:"墨西哥",1005100:"南非",1005200:"尼日利亚",1005300:"挪威",1005400:"葡萄牙",1005500:"日本",1005600:"瑞典",1005700:"瑞士",1005800:"沙特阿拉伯",1005900:"斯里兰卡",1006e3:"苏丹",1006100:"泰国",1006200:"坦桑尼亚",1006300:"土耳其",1006400:"委内瑞拉",1006500:"乌克兰",1006600:"西班牙",1006700:"希腊",1006800:"新加坡",1006900:"新西兰",1007e3:"匈牙利",1007100:"伊拉克",1007200:"伊朗",1007300:"以色列",1007400:"意大利",1007500:"印度",1007600:"印度尼西亚",1007700:"英国",1007800:"越南",1007900:"智利",101e4:"其他"}}],Ae=i.exports.memo((({city:e,province:a,handleEdit:t})=>{const r=i.exports.useMemo((()=>Oe.find((({id:e})=>e===a))?.cities||{}),[a]),l=i.exports.useCallback((({target:e})=>{t("province",Number(e.value))}),[]),s=i.exports.useCallback((({target:e})=>{t("city",Number(e.value))}),[]);return R("div",{className:"grid gap-2 grid-cols-3",children:[E(Xe,{value:a,onChange:l,children:Oe.map((({id:e,name:a})=>E("option",{value:e,children:a},e)))}),E(Xe,{value:e,onChange:s,children:Object.entries(r).map((([e,a])=>E("option",{value:e,children:a},e)))})]})})),Ge=i.exports.memo((({text:e="",children:a})=>R("div",{className:"flex",children:[E("div",{className:"leading-8 w-12",children:e?`${e}：`:""}),E("div",{className:"flex-1",children:a})]}))),qe="_gender_1gcsl_1",Pe="_ico_1gcsl_6",He=["保密","男","女"],Qe=i.exports.memo((({gender:e,handleEdit:a})=>E("div",{className:"flex gap-4",children:He.map(((i,t)=>R("label",{htmlFor:i,className:qe,children:[E("input",{type:"radio",className:"hidden",name:"gender",id:i,checked:e===t,onChange:()=>a("gender",t)}),E("i",{className:ee(Pe,"relative rounded-full flex-center")}),E("span",{children:i})]},i)))}))),Te=i.exports.memo((({width:e,height:a,left:t,top:r,size:l,ratio:s,img:n})=>{const c=i.exports.useRef(null);return i.exports.useEffect((()=>{const{width:i,height:l}=c.current;c.current.getContext("2d").drawImage(n,t/s,r/s,e/s,a/s,0,0,i,l)}),[e,a,t,r]),E("canvas",{className:"border rounded",width:l,height:l,ref:c})})),Be=224,Ke=i.exports.memo((({handleUpload:e,file:a})=>{const[t,r]=i.exports.useState(),[l,s]=re({width:Be,height:Be}),[n,{isLoading:c}]=_(),o=(e=100,a=1)=>({size:e,ratio:a,max:e,width:e,height:e,left:l().width/2-e/2,top:l().height/2-e/2}),[d,m]=re(o()),h=i.exports.useRef(null),u=i.exports.useRef(null),p=i.exports.useMemo((()=>{const e=new Image;return e.src=t,e.onload=a=>{const{width:i,height:t}=e,r=Math.max(i,t);let l=Math.min(i,t);const n=Math.min(1,Be/r);n<1&&(l*=n),s({width:n*i,height:n*t}),m(o(l,n))},e}),[t]);return i.exports.useEffect((()=>{const e=new FileReader;e.readAsDataURL(a),e.onload=e=>{r(e.target.result)}}),[a]),i.exports.useEffect((()=>{const e=(()=>{const e=h.current;if(!e)return{unsubscribe:()=>{}};const a=oe(e,"mousedown"),i=oe(document,"mousemove"),t=oe(document,"mouseup");return a.pipe(de((a=>a.target===e)),me((e=>({startX:e.clientX,startY:e.clientY,left:d().left,top:d().top}))),me((({startX:e,startY:a,left:r,top:s})=>i.pipe(he(t),me((i=>({left:ce.exports.clamp(r+i.clientX-e,0,l().width-d().width),top:ce.exports.clamp(s+i.clientY-a,0,l().height-d().height)})))))),ue()).subscribe({next:e=>{m(e)}})})(),a=(()=>{const e=u.current;if(!e)return{unsubscribe:()=>null};const a=oe(e,"mousedown"),i=oe(document,"mousemove"),t=oe(document,"mouseup");return a.pipe(me((e=>({startX:e.clientX,startY:e.clientY,width:d().width,height:d().height}))),me((({startX:e,startY:a,width:r,height:s})=>i.pipe(he(t),me((i=>{const t=ce.exports.clamp(r+i.clientX-e,16,l().width-d().left),n=ce.exports.clamp(s+i.clientY-a,16,l().height-d().top),c=Math.min(t,n);return{width:c,height:c}}))))),ue()).subscribe({next:e=>{m(e)}})})();return()=>{e.unsubscribe(),a.unsubscribe()}}),[]),E(z,{title:"上传头像",children:R("div",{className:"",children:[R("div",{className:"flex justify-center",children:[R("div",{className:"bg-black rounded overflow-hidden",children:[a.size>5242880&&E("span",{className:"text-red-500",children:"请选择不超过5M的图片"}),R("div",{className:"relative",style:{height:Be,width:Be},children:[E("img",{className:"object-scale-down w-full h-full",src:t,alt:""}),E("div",{className:"absolute inset-0 m-auto",style:{...l()},children:E("div",{ref:h,className:"border border-dashed absolute cursor-move border-green-400",style:{...d()},children:E("div",{ref:u,className:"absolute bottom-0 right-0 w-2 h-2 cursor-se-resize bg-black"})})})]})]}),R("div",{className:"ml-8",children:[E(Te,{...d(),size:100,img:p}),E("div",{className:"text-gray-400 mt-1",children:"大尺寸封面"}),E(Te,{...d(),size:64,img:p}),E("div",{className:"text-gray-400 mt-1",children:"小尺寸封面"})]})]}),R("div",{className:"pb-4 pt-6 gap-x-4 flex justify-center",children:[R("label",{htmlFor:"re_avatar",className:"flex-center border px-3 h-8 rounded-full hover:bg-gray-50 cursor-pointer",children:["重新选择",E("input",{onChange:e,type:"file",id:"re_avatar",hidden:!0,accept:"image/*"})]}),E("button",{type:"button",className:"flex-center text-white ui_theme_bg_color px-3 h-8 rounded-full",onClick:async()=>{const e=new FormData,{ratio:i,width:t,left:r,top:l}=d();e.append("imgFile",a),e.append("imgSize",t/i|0),e.append("imgX",r/i|0),e.append("imgY",l/i|0);try{const{data:a}=await n(e)}catch(s){console.log(s)}},children:"保持并关闭"})]})]})})})),Ve=i.exports.memo((()=>{const[e,a]=i.exports.useState(),t=({target:e})=>{a(e.files?.[0])};return R(F,{children:[R("label",{htmlFor:"avatar",className:"border cursor-pointer hover:bg-gray-50 flex-center h-8 m-auto mt-5 px-3 rounded-full update w-min whitespace-nowrap",children:[E("input",{onChange:t,type:"file",id:"avatar",hidden:!0,accept:"image/*"}),"修改头像"]}),e&&E(Ke,{handleUpload:t,file:e})]})})),We=i.exports.memo((()=>{const e=C(),{data:a,isLoading:t,isSuccess:l}=j(),[s,{isLoading:n}]=U(),c=a?.profile||{},[o,d]=u({nickname:"",signature:"",gender:0,birthday:0,province:0,city:0});i.exports.useEffect((()=>{l&&d(c)}),[l]);const[m,h]=i.exports.useState(!0),p=(e,a)=>{d((i=>{i[e]=a}))};return i.exports.useEffect((()=>{h(JSON.stringify(c)===JSON.stringify(o))}),[o]),301===a?.code?null:t?E("div",{className:"flex-center w-full h-full",children:E(r,{})}):R("div",{children:[E("div",{className:"h1 ui_header",children:"编辑个人信息"}),R("div",{className:"flex px-8 py-5 gap-x-20",children:[R("div",{className:"flex flex-1 flex-col gap-5",children:[R(Ge,{text:"昵称",children:[E("div",{className:"value",children:E("input",{type:"text",value:o.nickname,className:"h-8 block w-full px-2.5 border rounded",onInput:({target:e})=>p("nickname",e.value)})}),o.nickname.length>30&&E("div",{className:"text-red-800 mt-2",children:"昵称为4-30个字，且不包含除-和_以外的特殊字符"})]}),E(Ge,{text:"介绍",children:E("div",{className:"border flex-1",children:R("div",{className:"signature rounded flex flex-col items-end",children:[E("textarea",{value:o.signature,className:"w-full outline-0 py-1 px-2.5 border-0 h-12 resize-none",onInput:({target:e})=>p("signature",e.value)}),E("div",{className:ee("p-1",{ui_red:o?.signature?.length>300}),children:300-o?.signature?.length})]})})}),E(Ge,{text:"性别",children:E(Qe,{gender:o.gender,handleEdit:p})}),E(Ge,{text:"生日",children:E(Je,{birthday:o.birthday,handleEdit:p})}),E(Ge,{text:"地区",children:E(Ae,{province:o.province,city:o.city,handleEdit:p})}),E(Ge,{children:E("div",{className:"value mt-5",children:R("div",{className:"actions flex gap-5 text-sm",children:[E("button",{type:"button",className:ee("flex-center border px-3 h-8 rounded-full ui_theme_bg_color text-white",m&&"opacity-60"),disabled:m,onClick:async()=>{try{const a={gender:o.gender,birthday:o.birthday,nickname:o.nickname,province:o.province,city:o.city,signature:o.signature},{data:i}=await s(a);200===i.code?(h(!0),e("修改个人资料成功")):400===i.code&&e(i.message)}catch(a){console.log(a)}},children:"保 存"}),E(J,{to:`/user/${c.userId}`,className:"flex-center border px-3 h-8 rounded-full",children:"取 消"})]})})})]}),R("div",{children:[E("div",{className:"border rounded overflow-hidden w-40 h-40",children:E("img",{className:"w-full",src:o.avatarUrl,alt:""})}),E(Ve,{})]})]})]})})),Ze=(e="")=>11===e.length?e.replace(/(?<=\d{3})(\d{4})(?=\d{4})/,"****"):e,ea=i.exports.memo((()=>{const{uid:e}=X(),{data:a,isLoading:i}=I({uid:e});console.log(a);const t=a?.bindings||[],l=a?.code;return i?E(r,{}):301===l?"登录查看":R(F,{children:[E("div",{className:"h1 ui_header",children:"绑定账号"}),R("div",{className:"px-8",children:[R("div",{className:"domUser_binding_phone",children:[E("div",{className:"text-sm text-gray-500",children:"注册账号"}),R("div",{className:"domUser_binding_bar domUser_binding_box",children:[E("div",{className:"ico",children:E(S,{active:!0})}),R("div",{className:"content",children:[E("div",{className:"name",children:"手机"}),R("div",{children:["使用手机号注册：",Ze(JSON.parse(t[0].tokenJsonStr).cellphone),"   ",E("button",{type:"button",className:"ui_link",children:"更换手机"})]})]}),E("div",{className:"ml-auto",children:E("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full",children:"修改密码"})})]})]}),R("div",{className:"domUser_binding_three mt-10",children:[E("div",{className:"text-sm text-gray-500",children:"其他登录方式"}),R("div",{className:"domUser_binding_list",children:[R("div",{className:"domUser_binding_bar domUser_binding_item",children:[E("div",{className:"ico",children:E(L,{active:!0})}),E("div",{className:"content",children:E("div",{className:"name",children:"网易邮箱账号"})}),E("div",{className:"ml-auto",children:E("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full",children:"修改密码"})})]}),R("div",{className:"domUser_binding_bar domUser_binding_item",children:[E("div",{className:"ico",children:E(D,{active:!0})}),R("div",{className:"content",children:[E("div",{className:"name",children:"微信"}),R("div",{children:["ID：",JSON.parse(t[4].tokenJsonStr).nickname]})]}),E("div",{className:"ml-auto",children:E("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full",children:"已绑定"})})]}),R("div",{className:"domUser_binding_bar domUser_binding_item",children:[E("div",{className:"ico",children:E(M,{active:!0})}),R("div",{className:"content",children:[E("div",{className:"name",children:"QQ"}),R("div",{children:["ID：",JSON.parse(t[3].tokenJsonStr).nickname]})]}),E("div",{className:"ml-auto",children:E("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full",children:"已绑定"})})]}),R("div",{className:"domUser_binding_bar domUser_binding_item",children:[E("div",{className:"ico",children:E(d,{active:!0})}),R("div",{className:"content",children:[E("div",{className:"name",children:"新浪微博"}),R("div",{children:["ID：",JSON.parse(t[1].tokenJsonStr).name]})]}),R("div",{className:"ml-auto",children:[E("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full",children:"寻找并邀请好友"}),E("button",{type:"button",className:"ui_btn inline-flex items-center justify-center border px-3 h-8 rounded-full",children:"已绑定"})]})]})]})]})]})]})})),aa=i.exports.memo((()=>{const{isLogin:e,profile:a}=c(o);return e?E(O,{to:a.userId,replace:!0}):null})),ia=i.exports.memo((()=>{const{keywords:e=""}=X(),{isLoading:a,data:i}=$({type:1002,keywords:e,limit:1,offset:0});if(a)return E(r,{});const t=i.result.userprofiles||[];return E(O,{to:`/user/${t[0].userId}`,replace:!0})}));e("default",(()=>R(A,{children:[E(G,{index:!0,element:E(aa,{})}),R(G,{path:"/:uid",element:E(be,{}),children:[E(G,{index:!0,element:E(Ue,{})}),E(G,{path:"Dynamic",element:E(Se,{})}),E(G,{path:"Follow",element:E($e,{})}),E(G,{path:"Fans",element:E(Ee,{})}),E(G,{path:"Fans",element:E(Ee,{})}),E(G,{path:"Record",element:E(Fe,{})}),E(G,{path:"Binding",element:E(ea,{})})]}),E(G,{path:"Edit",element:E(We,{})}),R(G,{path:"redirect",children:[E(G,{index:!0,element:E(O,{to:"/",replace:!0})}),E(G,{path:":keywords",element:E(ia,{})})]})]})))}}}));
