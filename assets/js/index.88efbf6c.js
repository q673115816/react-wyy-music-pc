import{r as l}from"./react.4f2eb426.js";import{av as b,aw as E,M as w}from"./@tabler/icons.85b9b193.js";import{u as D}from"./useInfinite.cea0ff5d.js";import{G as C,L as p,v as A,u as B,a3 as F,i as T}from"./index.3e068c77.js";import{D as v}from"./index.f5799314.js";import{L as o,b as f,R as _,c as m}from"./react-router-dom.b907a3a9.js";import{G as k}from"./Gender.8a87bf6f.js";import{j as e,a as s}from"./qrcode.react.d8dda151.js";import{c as h}from"./react-slick.a7487162.js";import"./lodash.7c73e2e6.js";import"./react-dom.fe9fde37.js";import"./react-redux.64459660.js";import"./immer.98e49ab6.js";import"./axios.1ece621b.js";import"./store.e6a9b03b.js";import"./react-transition-group.99d8e67f.js";import"./react-use.9c5a79ae.js";import"./PicsViewer.ecf4d0cb.js";const $=C.injectEndpoints({endpoints:a=>({getHotTopic:a.query({query:t=>({url:"hot/topic",method:"POST",body:t})}),getTopicDetail:a.query({query:t=>({url:"topic/detail",method:"POST",body:t})}),getEvent:a.mutation({query:t=>({url:"event",method:"POST",body:t})}),getTopicDetailEventHot:a.query({query:t=>({url:"topic/detail/event/hot",method:"POST",body:t})})})}),{useGetHotTopicQuery:I,useGetTopicDetailQuery:L,useGetEventMutation:q,useGetTopicDetailEventHotQuery:P}=$,S=({limit:a})=>{const{data:t,isLoading:r}=I({limit:a}),i=(t==null?void 0:t.hot)||[];return r?e(p,{}):e("div",{className:"list",children:i.map(c=>s(o,{to:`/friend/${c.actId}`,className:"py-1 pl-5 flex hover:bg-gray-100",children:[e("div",{className:"cover w-8 h-8 flex-none",children:e("img",{className:"rounded",src:`${c.sharePicUrl}?param=50y50`,alt:""})}),s("div",{className:"content px-2 flex-auto w-0",children:[s("div",{className:"title flex items-center",children:["#",e("span",{className:"truncate",children:c.title}),"#"]}),e("div",{className:"participateCount text-gray-300",children:`${c.participateCount}\u4EBA\u53C2\u4E0E`})]})]},c.actId))})},x=l.exports.memo(S),G=l.exports.memo(function(){const{profile:t}=A(({account:i})=>i),r=B();return s("div",{className:"flex-none",style:{width:250},children:[e("div",{className:"",children:t.userId?s("div",{className:"h-40 pt-8 bg-gray-100",children:[s("div",{className:"top flex gap-2 px-5 items-start",children:[e(o,{to:`/user/${t.userId}`,className:"avatar w-12 h-12 rounded-full overflow-hidden",children:e("img",{className:"",src:`${t.avatarUrl}?param=100y100`,alt:""})}),s("div",{children:[s("div",{className:"flex-center",children:[e(o,{to:`/user/${t.userId}`,children:t.nickname}),"\xA0",e(k,{gender:t.gender,size:14})]}),e("div",{className:"text-gray-500",children:t.signature})]})]}),s("div",{className:"infos flex divide-x text-center mt-4",children:[s(o,{to:`/user/${t.userId}/dynamic`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:t.eventCount}),e("div",{className:"string",children:"\u52A8\u6001"})]}),s(o,{to:`/user/${t.userId}/follow`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:t.follows}),e("div",{className:"string",children:"\u5173\u6CE8"})]}),s(o,{to:`/user/${t.userId}/fans`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:t.followeds}),e("div",{className:"string",children:"\u7C89\u4E1D"})]})]})]}):s("div",{className:"nologin px-5",children:[e("div",{style:{height:170}}),e("div",{className:"tips text-center text-gray-500",children:"\u767B\u5F55\u7F51\u6613\u4E91\u97F3\u4E50\uFF0C\u53EF\u4EE5\u4EAB\u53D7\u65E0\u9650\u6536\u85CF\u7684\u4E50\u8DA3\uFF0C\u5E76\u4E14\u65E0\u9650\u540C\u6B65\u5230\u624B\u673A"}),e("button",{type:"button",className:"ui_theme_bg_color text-white w-full h-10 mt-4 rounded-full",onClick:()=>r(F()),children:"\u7ACB\u5373\u767B\u5F55"})]})}),s("div",{className:"mt-5",children:[s("div",{className:"flex px-5 mb-2.5",children:[e("span",{className:"font-bold",children:"\u70ED\u95E8\u8BDD\u9898"}),e(o,{className:"text-gray-400 ml-auto",to:"/friend/top",children:"\u66F4\u591A >"})]}),e(x,{limit:5})]}),e("div",{className:"mt-8",children:s("div",{className:"flex px-5 mb-2.5",children:[e("span",{className:"font-bold",children:"\u8BA4\u8BC6\u7684\u4EBA"}),e(o,{className:"text-gray-400 ml-auto",to:"/friend/acquaintance",children:"\u66F4\u591A >"})]})}),e("div",{className:"mt-8",children:e("div",{className:"flex px-5 mb-2.5",children:e("span",{className:"font-bold",children:"\u6DFB\u52A0\u5173\u6CE8"})})})]})}),O=()=>{const[a,t]=T([]),[r]=q(),i=l.exports.useRef(null),c=l.exports.useRef(null),u=l.exports.useRef(-1),d=async()=>{try{const n=await r({lasttime:u.current}),N=n.data.lasttime,y=n.data.event;u.current=N,t(g=>{g.push(...y)})}catch(n){console.log(n)}};return l.exports.useEffect(()=>{t([])},[]),D(d,i,c),e("div",{className:"h-full overflow-auto",ref:i,children:s("div",{className:"flex divide-x min-h-full",children:[s("div",{className:"relative flex-auto",children:[s("div",{className:"h-14 px-8 flex items-center sticky top-0 z-10 bg-white",children:[e("span",{className:"h1",children:"\u52A8\u6001"}),s("button",{type:"button",className:"flex-center ml-4 ui_theme_bg_color text-sm text-white h-8 px-4 rounded-full",children:[e(b,{size:20,stroke:1}),"\u53D1\u52A8\u6001"]})]}),s("div",{className:"domFriend_content",children:[e("div",{className:"px-8",children:e(v,{list:a})}),e("div",{className:"flex-center",ref:c,children:a.length===0?e("div",{className:"empty text-center text-gray-400 pt-48",children:"\u6682\u65E0\u52A8\u6001"}):e(p,{})})]})]}),e(G,{})]})})},R=l.exports.memo(O),z=()=>{var c;const{id:a}=f(),{data:t,isLoading:r}=L({actid:a}),i=(t==null?void 0:t.act)||{};return r?null:s("div",{className:"border-b",children:[s("div",{className:"rounded overflow-hidden border relative",children:[e("img",{src:i.coverPCUrl,loading:"lazy",className:"h-56 object-cover block",alt:""}),s("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex-center flex-col",children:[s("div",{style:{minWidth:210},className:"relative max-w-sm min-w- border-t border-b border-white border-opacity-60 py-6 text-white text-xl flex-center text-center flex-col ",children:[s("div",{className:"flex",children:["#",e("span",{className:"truncate",children:i.title}),"#"]}),e("span",{className:"absolute inset-x-0 text-xs whitespace-nowrap top-full transform -translate-y-1/2",children:`${i.participateCount}\u4EBA\u53C2\u4E0E`})]}),s("button",{type:"button",className:"bg-white flex-center h-9 mt-4 w-52 rounded text-red-500 bg-opacity-90 hover:bg-opacity-100",children:[e(E,{size:16}),"\u7ACB\u5373\u53C2\u4E0E"]})]}),e("button",{type:"button",className:"absolute m-4 w-8 h-8 flex-center top-0 right-0 border text-white border-current rounded-full bg-black bg-opacity-50",children:e(w,{size:24,stroke:1})})]}),e("ul",{className:"pb-8 text-sm text-gray-500 leading-6",children:(c=i.text)==null?void 0:c.map((u,d)=>e("li",{children:u},d))})]})},j=l.exports.memo(z),H=({actid:a})=>{const{data:t,isLoading:r}=P({actid:a}),i=(t==null?void 0:t.events)||[];return r?e(p,{}):e(v,{list:i})},Q=l.exports.memo(H),U=l.exports.memo(function(){const{id:t=""}=f();return e("div",{className:"h-full overflow-auto",children:s("div",{className:"flex divide-x",children:[e("div",{className:"flex-auto w-0",children:s("div",{className:"px-8 pt-4",children:[e(j,{}),e("div",{className:"text-gray-500 mt-4 text-sm",children:"\u70ED\u95E8\u52A8\u6001"}),e(Q,{actid:t})]})}),s("div",{className:"flex-none",style:{width:230},children:[e("div",{className:"p-4 text-sm text-gray-700",children:"\u63A8\u8350\u8BDD\u9898"}),e(x,{limit:10})]})]})})}),M=l.exports.memo(function(){const[t,r]=l.exports.useState("day"),[i,c]=l.exports.useState([]),u=async()=>{c([{title:"\u4F60\u7684\u604B\u7231\u4EBA\u683C\u662F\u4EC0\u4E48",count:916},{title:"\u4F60\u7684\u604B\u7231\u4EBA\u683C\u662F\u4EC0\u4E48",count:916}])};return l.exports.useEffect(()=>{u()},[t]),e("div",{className:" h-full overflow-auto",children:s("div",{className:"flex divide-x",children:[s("div",{className:"flex-auto w-0",children:[s("div",{className:"h-16 px-8 flex items-center",children:[e("span",{className:"text-lg font-bold",children:"\u8BDD\u9898\u98D9\u5347\u699C"}),s("div",{className:"ml-auto space-x-3 text-gray-300",children:[e("button",{type:"button",onClick:()=>r("day"),className:h("hover:text-gray-700",t==="day"&&"text-gray-700"),children:"24\u5C0F\u65F6"}),e("span",{children:"|"}),e("button",{type:"button",onClick:()=>r("week"),className:h("hover:text-gray-700",t==="week"&&"text-gray-700"),children:"7\u5929"})]})]}),e("div",{children:i.map((d,n)=>s("div",{className:h("flex items-center h-20 hover:bg-gray-100",n%2===1&&"bg-gray-50"),children:[e("div",{className:"w-16 flex-center text-sm ",children:n+1}),e("div",{className:"w-14 h-14",children:e("img",{src:"",alt:""})}),s("div",{children:[e("div",{className:"text-lg",children:d.title}),s("div",{className:"text-gray-300",children:[d.count,"\u4EBA\u53C2\u4E0E"]})]})]},n))})]}),s("div",{className:"domFriend_right flex-none",style:{width:230},children:[e("div",{className:"p-4 text-sm text-gray-700",children:"\u63A8\u8350\u8BDD\u9898"}),e(x,{limit:10})]})]})})}),V=l.exports.memo(function(){return s("div",{className:"",children:[e("div",{className:"text-xl p-8 font-bold",children:"\u5BFB\u627E\u5E76\u9080\u8BF7\u597D\u53CB"}),s("div",{className:"px-8",children:[s("div",{className:"space-x-2 text-gray-500",children:[e("button",{type:"button",children:"\u5DF2\u67091\u4F4D\u597D\u53CB\u52A0\u5165"}),e("span",{children:"|"}),e("button",{type:"button",children:"\u9080\u8BF7\u53E6\u59163\u4F4D\u597D\u53CB\u52A0\u5165"})]}),e("div",{children:"TODO"})]})]})}),W=()=>s(_,{children:[e(m,{index:!0,element:e(R,{})}),e(m,{path:"top",element:e(M,{})}),e(m,{path:"Acquaintance",element:e(V,{})}),e(m,{path:":id",element:e(U,{})})]}),he=W;export{he as default};
