import{r as l}from"./react.23cc8478.js";import{av as b,aw as E,M as w}from"./@tabler/icons.e4cd39cf.js";import{u as D}from"./useInfinite.10280005.js";import{G as C,L as p,v as A,u as B,a3 as F,i as T}from"./index.4d07a06b.js";import{D as v}from"./index.37daa3ce.js";import{L as u,b as f,R as _,c as m}from"./react-router-dom.1e37ceed.js";import{G as k}from"./Gender.6fe7be53.js";import{j as e,a}from"./qrcode.react.5dc2fa92.js";import{c as h}from"./react-slick.9a6761a2.js";import"./react-dom.c88e72d8.js";import"./react-redux.9d317390.js";import"./immer.36a28300.js";import"./axios.96312ac8.js";import"./lodash.d03d4659.js";import"./store.57d764e6.js";import"./react-transition-group.2d7b5c33.js";import"./react-use.a9b69494.js";import"./PicsViewer.446d1fc9.js";const $=C.injectEndpoints({endpoints:s=>({getHotTopic:s.query({query:t=>({url:"hot/topic",method:"POST",body:t})}),getTopicDetail:s.query({query:t=>({url:"topic/detail",method:"POST",body:t})}),getEvent:s.mutation({query:t=>({url:"event",method:"POST",body:t})}),getTopicDetailEventHot:s.query({query:t=>({url:"topic/detail/event/hot",method:"POST",body:t})})})}),{useGetHotTopicQuery:I,useGetTopicDetailQuery:L,useGetEventMutation:q,useGetTopicDetailEventHotQuery:P}=$,S=({limit:s})=>{const{data:t,isLoading:c}=I({limit:s}),i=(t==null?void 0:t.hot)||[];return c?e(p,{}):e("div",{className:"list",children:i.map(r=>a(u,{to:`/friend/${r.actId}`,className:"py-1 pl-5 flex hover:bg-gray-100",children:[e("div",{className:"cover w-8 h-8 flex-none",children:e("img",{className:"rounded",src:`${r.sharePicUrl}?param=50y50`,alt:""})}),a("div",{className:"content px-2 flex-auto w-0",children:[a("div",{className:"title flex items-center",children:["#",e("span",{className:"truncate",children:r.title}),"#"]}),e("div",{className:"participateCount text-gray-300",children:`${r.participateCount}\u4EBA\u53C2\u4E0E`})]})]},r.actId))})};var x=l.exports.memo(S),G=l.exports.memo(function(){const{profile:t}=A(({account:i})=>i),c=B();return a("div",{className:"flex-none",style:{width:250},children:[e("div",{className:"",children:t.userId?a("div",{className:"h-40 pt-8 bg-gray-100",children:[a("div",{className:"top flex gap-2 px-5 items-start",children:[e(u,{to:`/user/${t.userId}`,className:"avatar w-12 h-12 rounded-full overflow-hidden",children:e("img",{className:"",src:`${t.avatarUrl}?param=100y100`,alt:""})}),a("div",{children:[a("div",{className:"flex-center",children:[e(u,{to:`/user/${t.userId}`,children:t.nickname}),"\xA0",e(k,{gender:t.gender,size:14})]}),e("div",{className:"text-gray-500",children:t.signature})]})]}),a("div",{className:"infos flex divide-x text-center mt-4",children:[a(u,{to:`/user/${t.userId}/dynamic`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:t.eventCount}),e("div",{className:"string",children:"\u52A8\u6001"})]}),a(u,{to:`/user/${t.userId}/follow`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:t.follows}),e("div",{className:"string",children:"\u5173\u6CE8"})]}),a(u,{to:`/user/${t.userId}/fans`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:t.followeds}),e("div",{className:"string",children:"\u7C89\u4E1D"})]})]})]}):a("div",{className:"nologin px-5",children:[e("div",{style:{height:170}}),e("div",{className:"tips text-center text-gray-500",children:"\u767B\u5F55\u7F51\u6613\u4E91\u97F3\u4E50\uFF0C\u53EF\u4EE5\u4EAB\u53D7\u65E0\u9650\u6536\u85CF\u7684\u4E50\u8DA3\uFF0C\u5E76\u4E14\u65E0\u9650\u540C\u6B65\u5230\u624B\u673A"}),e("button",{type:"button",className:"ui_theme_bg_color text-white w-full h-10 mt-4 rounded-full",onClick:()=>c(F()),children:"\u7ACB\u5373\u767B\u5F55"})]})}),a("div",{className:"mt-5",children:[a("div",{className:"flex px-5 mb-2.5",children:[e("span",{className:"font-bold",children:"\u70ED\u95E8\u8BDD\u9898"}),e(u,{className:"text-gray-400 ml-auto",to:"/friend/top",children:"\u66F4\u591A >"})]}),e(x,{limit:5})]}),e("div",{className:"mt-8",children:a("div",{className:"flex px-5 mb-2.5",children:[e("span",{className:"font-bold",children:"\u8BA4\u8BC6\u7684\u4EBA"}),e(u,{className:"text-gray-400 ml-auto",to:"/friend/acquaintance",children:"\u66F4\u591A >"})]})}),e("div",{className:"mt-8",children:e("div",{className:"flex px-5 mb-2.5",children:e("span",{className:"font-bold",children:"\u6DFB\u52A0\u5173\u6CE8"})})})]})});const O=()=>{const[s,t]=T([]),[c]=q(),i=l.exports.useRef(null),r=l.exports.useRef(null),o=l.exports.useRef(-1),d=async()=>{try{const n=await c({lasttime:o.current}),N=n.data.lasttime,y=n.data.event;o.current=N,t(g=>{g.push(...y)})}catch(n){console.log(n)}};return l.exports.useEffect(()=>{t([])},[]),D(d,i,r),e("div",{className:"h-full overflow-auto",ref:i,children:a("div",{className:"flex divide-x min-h-full",children:[a("div",{className:"relative flex-auto",children:[a("div",{className:"h-14 px-8 flex items-center sticky top-0 z-10 bg-white",children:[e("span",{className:"h1",children:"\u52A8\u6001"}),a("button",{type:"button",className:"flex-center ml-4 ui_theme_bg_color text-sm text-white h-8 px-4 rounded-full",children:[e(b,{size:20,stroke:1}),"\u53D1\u52A8\u6001"]})]}),a("div",{className:"domFriend_content",children:[e("div",{className:"px-8",children:e(v,{list:s})}),e("div",{className:"flex-center",ref:r,children:s.length===0?e("div",{className:"empty text-center text-gray-400 pt-48",children:"\u6682\u65E0\u52A8\u6001"}):e(p,{})})]})]}),e(G,{})]})})};var R=l.exports.memo(O);const z=()=>{var r;const{id:s}=f(),{data:t,isLoading:c}=L({actid:s}),i=(t==null?void 0:t.act)||{};return c?null:a("div",{className:"border-b",children:[a("div",{className:"rounded overflow-hidden border relative",children:[e("img",{src:i.coverPCUrl,loading:"lazy",className:"h-56 object-cover block",alt:""}),a("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex-center flex-col",children:[a("div",{style:{minWidth:210},className:"relative max-w-sm min-w- border-t border-b border-white border-opacity-60 py-6 text-white text-xl flex-center text-center flex-col ",children:[a("div",{className:"flex",children:["#",e("span",{className:"truncate",children:i.title}),"#"]}),e("span",{className:"absolute inset-x-0 text-xs whitespace-nowrap top-full transform -translate-y-1/2",children:`${i.participateCount}\u4EBA\u53C2\u4E0E`})]}),a("button",{type:"button",className:"bg-white flex-center h-9 mt-4 w-52 rounded text-red-500 bg-opacity-90 hover:bg-opacity-100",children:[e(E,{size:16}),"\u7ACB\u5373\u53C2\u4E0E"]})]}),e("button",{type:"button",className:"absolute m-4 w-8 h-8 flex-center top-0 right-0 border text-white border-current rounded-full bg-black bg-opacity-50",children:e(w,{size:24,stroke:1})})]}),e("ul",{className:"pb-8 text-sm text-gray-500 leading-6",children:(r=i.text)==null?void 0:r.map((o,d)=>e("li",{children:o},d))})]})};var j=l.exports.memo(z);const H=({actid:s})=>{const{data:t,isLoading:c}=P({actid:s}),i=(t==null?void 0:t.events)||[];return c?e(p,{}):e(v,{list:i})};var Q=l.exports.memo(H),U=l.exports.memo(function(){const{id:t=""}=f();return e("div",{className:"h-full overflow-auto",children:a("div",{className:"flex divide-x",children:[e("div",{className:"flex-auto w-0",children:a("div",{className:"px-8 pt-4",children:[e(j,{}),e("div",{className:"text-gray-500 mt-4 text-sm",children:"\u70ED\u95E8\u52A8\u6001"}),e(Q,{actid:t})]})}),a("div",{className:"flex-none",style:{width:230},children:[e("div",{className:"p-4 text-sm text-gray-700",children:"\u63A8\u8350\u8BDD\u9898"}),e(x,{limit:10})]})]})})}),M=l.exports.memo(function(){const[t,c]=l.exports.useState("day"),[i,r]=l.exports.useState([]),o=async()=>{r([{title:"\u4F60\u7684\u604B\u7231\u4EBA\u683C\u662F\u4EC0\u4E48",count:916},{title:"\u4F60\u7684\u604B\u7231\u4EBA\u683C\u662F\u4EC0\u4E48",count:916}])};return l.exports.useEffect(()=>{o()},[t]),e("div",{className:" h-full overflow-auto",children:a("div",{className:"flex divide-x",children:[a("div",{className:"flex-auto w-0",children:[a("div",{className:"h-16 px-8 flex items-center",children:[e("span",{className:"text-lg font-bold",children:"\u8BDD\u9898\u98D9\u5347\u699C"}),a("div",{className:"ml-auto space-x-3 text-gray-300",children:[e("button",{type:"button",onClick:()=>c("day"),className:h("hover:text-gray-700",t==="day"&&"text-gray-700"),children:"24\u5C0F\u65F6"}),e("span",{children:"|"}),e("button",{type:"button",onClick:()=>c("week"),className:h("hover:text-gray-700",t==="week"&&"text-gray-700"),children:"7\u5929"})]})]}),e("div",{children:i.map((d,n)=>a("div",{className:h("flex items-center h-20 hover:bg-gray-100",n%2===1&&"bg-gray-50"),children:[e("div",{className:"w-16 flex-center text-sm ",children:n+1}),e("div",{className:"w-14 h-14",children:e("img",{src:"",alt:""})}),a("div",{children:[e("div",{className:"text-lg",children:d.title}),a("div",{className:"text-gray-300",children:[d.count,"\u4EBA\u53C2\u4E0E"]})]})]},n))})]}),a("div",{className:"domFriend_right flex-none",style:{width:230},children:[e("div",{className:"p-4 text-sm text-gray-700",children:"\u63A8\u8350\u8BDD\u9898"}),e(x,{limit:10})]})]})})}),V=l.exports.memo(function(){return a("div",{className:"",children:[e("div",{className:"text-xl p-8 font-bold",children:"\u5BFB\u627E\u5E76\u9080\u8BF7\u597D\u53CB"}),a("div",{className:"px-8",children:[a("div",{className:"space-x-2 text-gray-500",children:[e("button",{type:"button",children:"\u5DF2\u67091\u4F4D\u597D\u53CB\u52A0\u5165"}),e("span",{children:"|"}),e("button",{type:"button",children:"\u9080\u8BF7\u53E6\u59163\u4F4D\u597D\u53CB\u52A0\u5165"})]}),e("div",{children:"TODO"})]})]})});const W=()=>a(_,{children:[e(m,{index:!0,element:e(R,{})}),e(m,{path:"top",element:e(M,{})}),e(m,{path:"Acquaintance",element:e(V,{})}),e(m,{path:":id",element:e(U,{})})]});var he=W;export{he as default};
