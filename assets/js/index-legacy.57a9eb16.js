System.register(["./react-legacy.b3bc90c5.js","./react-slick-legacy.d6ab9305.js","./react-router-dom-legacy.19b1ca15.js","./qrcode.react-legacy.364768f0.js","./index-legacy.6910300d.js","./react-dom-legacy.c211300b.js","./@tabler/icons-legacy.0988c887.js","./lodash-legacy.4434829e.js","./react-redux-legacy.b5ffdb65.js","./immer-legacy.c38810dc.js","./axios-legacy.36e845a7.js","./rxjs-legacy.2bb8d16b.js","./react-use-legacy.4afe0951.js","./store-legacy.0145af8a.js","./react-transition-group-legacy.3b11e6a0.js"],(function(e,a){"use strict";var r,t,s,c,l,n,i,o,d,m,u,g,h,x,y,p,b,f;return{setters:[e=>{r=e.r},e=>{t=e.c},e=>{s=e.N,c=e.O,l=e.L,n=e.b,i=e.e,o=e.d},e=>{d=e.a,m=e.j},e=>{u=e.d,g=e.b2,h=e.b3},e=>{x=e.r},e=>{y=e.ax,p=e.z,b=e.aw,f=e.p},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const a=[["节目榜","program"],["新晋电台榜","now"],["热门电台榜","hot"]],v=r.exports.memo((()=>d("div",{className:"h-full overflow-auto pt-8",children:[m("div",{className:"m-auto w-min flex rounded-full border",children:a.map((([e,a])=>m(s,{to:a,className:({isActive:e})=>t("flex-center w-28 h-8 rounded-full text-center",e?"text-white bg-gray-200":"hover:bg-gray-100"),children:e},e)))}),m(c,{})]}))),N=r.exports.memo((({lastRank:e,rank:a})=>{switch(!0){case-1===e:return m("div",{className:"text-green-500",children:"new"});case e-a<0:return d("div",{className:"flex-center text-gray-500",children:[m(b,{size:10,className:"text-blue-500"}),-e+a]});case e-a==0:return d("div",{className:"flex-center text-gray-500",children:[m(p,{size:10}),"0"]});case e-a>0:return d("div",{className:"flex-center text-gray-500",children:[m(y,{size:10,className:"text-red-500"}),e-a]});default:return m("div",{})}})),w=r.exports.memo((({item:e,index:a,maxScore:r})=>d("div",{tabIndex:2,className:t("item h-20 flex items-center hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",{"bg-gray-50":a%2==0}),children:[d("div",{className:"index w-16 flex flex-col items-center justify-center",children:[m("div",{className:t("font-bold text-sm",{"text-red-500":a<3,"text-gray-400":a>2}),children:a+1}),m("div",{children:m(N,{lastRank:e.lastRank,rank:e.rank})})]}),d("button",{type:"button",className:"w-14 -14 relative",children:[m("img",{src:`${e.coverUrl}?param=60y60`,className:"rounded",alt:""}),m("i",{className:"ico ui_themeColor absolute inset-0 flex-center rounded-full w-6 h-6 m-auto bg-white bg-opacity-90",children:m(f,{size:16,className:"fill-current"})})]}),m("div",{className:"name flex-auto truncate px-2",children:e.name}),m("div",{className:"radio flex-auto truncate px-2",children:m(l,{className:"ui_text_gray_hover",to:`/playlist/dj/${e.userId}`,children:e.userName})}),m("div",{className:"w-24 px-2",children:m(l,{to:"/",className:"ui_text_gray_hover border border-current",children:e.category})}),m("div",{className:"w-24 px-2",children:m("div",{className:"rounded bg-gray-300 overflow-hidden h-2",children:m("div",{className:"h-full bg-gray-500 w-0",style:{width:e.score/r*100+"%"}})})})]},e.id))),j={false:({lastRank:e,rank:a,score:r,program:{id:t,name:s,coverUrl:c,radio:{name:l,id:n,category:i}}})=>({id:t,name:s,lastRank:e,rank:a,coverUrl:c,score:r,userName:l,userId:n,category:i}),true:({id:e,name:a,lastRank:r,rank:t,picUrl:s,score:c,dj:{nickname:l,userId:n},category:i})=>({id:e,name:a,lastRank:r,rank:t,coverUrl:s,score:c,userName:l,userId:n,category:i})},k=r.exports.memo((()=>{const{type:e}=n(),[a,t]=r.exports.useState([]),[s,c]=r.exports.useState(),l=r.exports.useMemo((()=>"program"!==e),[e]),i=r.exports.useMemo((()=>a[0]?.score??0),[a]);return r.exports.useEffect((()=>{(async a=>{try{const{toplist:r,updateTime:s}=a?await g({type:e}):await h();x.exports.unstable_batchedUpdates((()=>{t(r.map(j[a])),c(s)}))}catch(r){console.log(r)}})(l)}),[e,l]),d("div",{className:"pt-8 relative",children:[d("div",{className:"absolute flex-center bottom-full transform -translate-y-1/2 right-8 text-gray-400",children:["最近更新：",s&&u(s).format("MM月DD日"),d("div",{className:"relative ui_group",children:[m("span",{className:"block flex-center  border rounded-full w-4 h-4 flex-none",children:"?"}),m("div",{className:"absolute text-gray-500 top-6 right-0 shadow rounded p-4 w-48 border hidden ui_group-hover:block bg-white",children:"选取云音乐中7天内发布的热度最高的节目，热度由节目播放、赞、分享数量总和计算"})]})]}),m("div",{className:"list",children:a.map(((e,a)=>m(w,{item:e,index:a,maxScore:i},e.id)))})]})}));e("default",r.exports.memo((()=>i([{path:"/",element:m(v,{}),children:[{index:!0,element:m(o,{to:"program",replace:!0})},{path:":type",element:m(k,{}),children:[]}]}]))))}}}));
