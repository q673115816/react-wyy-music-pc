System.register(["./react-legacy.b3bc90c5.js","./classnames-legacy.82f93ed6.js","./index-legacy.4991b0df.js","./@tabler/icons-legacy.70165014.js","./react-router-dom-legacy.dc65b224.js","./dayjs-legacy.7dd3aa6c.js","./qrcode.react-legacy.685a2ddb.js","./react-router-legacy.33ca2ceb.js","./Rank-legacy.2b1e91fd.js","./Download-legacy.d6d317ad.js","./Album-legacy.ab0960a8.js","./Gender-legacy.c0c828f4.js","./index-legacy.1a569294.js","./lodash-legacy.4434829e.js","./react-dom-legacy.c211300b.js","./react-redux-legacy.c7a29beb.js","./immer-legacy.c24b5c0e.js","./redux-persist-legacy.af414400.js","./axios-legacy.6d9fa2e4.js","./rxjs-legacy.4711c62e.js","./react-use-legacy.597098f4.js","./react-transition-group-legacy.16b3096a.js","./color-legacy.6099eccf.js"],(function(e,a){"use strict";var s,l,t,r,c,i,n,d,o,m,p,u,h,x,g,y,f,b,v,N,j,w,k,C,$,_,D,z,I,S,P,L,M,Y,E,G,O,R,T,A,U;return{setters:[e=>{s=e.r},e=>{l=e.a},e=>{t=e.a,r=e.aG,c=e.aH,i=e.t,n=e.M,d=e.H,o=e.W,m=e.A,p=e.aI,u=e.aJ,h=e.E,x=e.y,g=e.z,y=e.B,f=e.L,b=e.D,v=e.aK,N=e.P,j=e.aL,w=e.aM,k=e.aN},e=>{C=e.W,$=e.R,_=e.Y,D=e.w,z=e.Q,I=e.a1},e=>{S=e.L},e=>{P=e.d},e=>{L=e.a,M=e.j},e=>{Y=e.f,E=e.g,G=e.h},e=>{O=e.R},e=>{R=e.D},e=>{T=e.A},e=>{A=e.G},e=>{U=e.G},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const a=s.exports.memo((({tags:e=[]})=>0===e.length?null:L("div",{className:"tags",children:[M("span",{children:"标签："}),e.map(((e,a)=>L("span",{children:[a>0&&" / ",M(S,{to:`/home/playlist/${e}`,className:"tag ui_link",children:e})]},e)))]}))),H=s.exports.memo((({description:e=""})=>{if(!e)return null;const[a,t]=s.exports.useState(!1),r=e.match(/^.*$/gm);return M("div",{className:"relative pr-5",children:L("div",{className:"whitespace-pre-line leading-6",children:["简介：",M("span",{className:l("text-gray-500 select-text",!a&&"truncate inline-block max-w-xs align-bottom"),children:a?e:r?.[0]}),M("button",{type:"button",onClick:()=>t(!a),className:"absolute top-0 right-0 text-gray-500",children:M(a?C:$,{size:16,className:"fill-current"})})]})})})),W=s.exports.memo((({data:e={},children:s})=>{const l=t(),{id:n=""}=Y(),[d]=r();return L("div",{className:"p-8 flex items-start",children:[M("div",{className:"border rounded overflow-hidden flex-none w-92 h-92",children:M("img",{loading:"lazy",className:"w-full h-full",src:`${e.playlist.coverImgUrl}?param=200y200`,alt:""})}),L("div",{className:"info flex-auto w-0 ml-5",children:[L("div",{className:"name leading-tight",children:[M("span",{className:"whitespace-nowrap text-red-500 border border-current p-0.5 rounded mr-2 align-bottom inline-block",children:"歌单"}),M("span",{className:"h1 select-text",children:e.playlist.name||"我喜欢的音乐"})]}),L("div",{className:"creator flex items-center mt-2",children:[M(S,{to:`/user/${e.playlist.creator?.userId}`,className:"w-6 h-6 rounded-full overflow-hidden mr-2",children:M("img",{className:"",src:`${e.playlist.creator?.avatarUrl}?param=50y50`,alt:""})}),M(S,{to:`/user/${e.playlist.creator?.userId}`,className:"nickname ui_link mr-2",children:e.playlist.creator?.nickname}),L("span",{className:"text-gray-500",children:[P(e.playlist.createTime||Date.now()).format("YYYY-MM-DD"),"创建"]})]}),L("div",{className:"actions flex space-x-2 mt-2",children:[s,L("button",{onClick:()=>(async e=>{try{const{code:a}=await d({t:e?2:1,id:n});200===a&&l(e?"取消收藏成功！":"收藏成功！")}catch(a){console.log(a)}})(e.playlist.subscribed),type:"button",className:"flex-center text-sm border px-3 h-8 rounded-full hover:bg-gray-50",children:[e.playlist.subscribed?M(_,{size:20,stroke:1}):M(D,{size:20,stroke:1})," ",e.playlist.subscribed?"已收藏":"收藏",`(${c(e.playlist.subscribedCount)})`]}),L("button",{type:"button",className:"flex-center text-sm border px-3 h-8 rounded-full hover:bg-gray-50",children:[M(z,{size:20,stroke:1}),"  分享",`(${c(e.playlist.shareCount)})`]}),L("button",{type:"button",className:"flex-center text-sm border px-3 h-8 rounded-full hover:bg-gray-50",children:[M(I,{size:20,stroke:1}),"  下载全部"]})]}),L("div",{className:"flex flex-col gap-y-1 mt-3",children:[M(a,{tags:e.playlist.tags}),L("div",{children:[L("span",{className:"mr-3",children:["歌曲：",M("span",{className:"text-gray-500",children:e.playlist.trackCount})]}),L("span",{children:["播放：",M("span",{className:"text-gray-500",children:i(e.playlist.playCount)})]})]}),M(H,{description:e.playlist.description})]})]})]})})),q=s.exports.memo((({songs:e=[]})=>e.length?L("div",{style:{"--ui_grid_template":"36px / 30px 30px 30px 36% 4fr 6fr 2fr"},className:"mt-4",children:[L("div",{className:"grid ui_grid_template pl-8",children:[M("div",{}),M("div",{}),M("div",{}),M("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"音乐标题"}),M("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"歌手"}),M("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"专辑"}),M("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"时长"})]}),e.map(((e,a)=>M(n,{schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","不感兴趣","下载"]],type:"song",item:e,children:L("div",{tabIndex:2,className:l("grid items-center focus:outline-none focus:bg-gray-200 hover:bg-gray-100 ui_grid_template pl-8",a%2==0&&"bg-gray-50"),children:[M("div",{className:"px-1",children:M(O,{index:a,id:e.id})}),M("div",{className:"px-1",children:M(d,{id:e.id})}),M("div",{className:"px-1",children:M(R,{})}),M(o,{className:"px-1",item:e}),M(m,{className:"px-1",artists:e.ar}),M(T,{className:"px-1",name:e.al.name,id:e.al.id}),M("div",{className:"text-gray-500 px-1",children:P(e.dt).format("mm:ss")})]})},e.id)))]}):M("div",{className:"pt-16 text-center text-sm text-gray-400",children:"暂无音乐"}))),B=s.exports.memo((()=>{const e=t(),a=s.exports.useRef(null),{id:l=0}=Y(),{data:r,isLoading:c}=p({id:l}),[i,{isLoading:n}]=u(),d=s.exports.useCallback((async()=>{if(a.current){a.current.value||e("写些东西吧，内容不能为空哦!");try{await i({id:l,t:1,type:2,content:a.current.value})}catch(s){console.log(s)}}}),[]);return L("div",{className:"px-8",children:[L("div",{className:"pt-10 pb-10",children:[M(h,{ref:a,max:140,placeholder:""}),L("div",{className:"flex mt-2",children:[L("div",{className:"flex gap-2",children:[M(x,{element:a}),M(g,{element:a}),M(y,{element:a})]}),M("button",{onClick:d,type:"button",className:"ml-auto flex-center text-sm border px-4 h-8 rounded-full hover:bg-gray-50",children:"评论"})]})]}),c?M(f,{}):M(b,{comments:r,type:0,more:l})]})})),J=s.exports.memo((()=>{const{id:e=""}=Y(),[a,l]=s.exports.useState(1),{data:t,isLoading:r}=v({id:e,limit:60,offset:60*(a-1)});return r?M("div",{className:"flex-center pt-32",children:M(f,{})}):L("div",{className:"px-8",children:[M("div",{className:"domPlaylistDetail_subscribers flex justify-between flex-wrap",children:t?.subscribers.map((e=>L("div",{className:"item flex mt-6 w-80 ",children:[M(S,{to:`/user/${e.userId}`,className:"avatar w-24 h-24 border rounded-full overflow-hidden",children:M("img",{loading:"lazy",src:`${e.avatarUrl}?param=100y100`,alt:""})}),L("div",{className:"ml-2 flex-auto w-0 flex flex-col justify-center",children:[L("div",{className:"text-sm flex items-center",children:[M(S,{to:`/user/${e.userId}`,children:e.nickname})," ",M(A,{gender:e.gender,size:16})]}),M("div",{className:"mt-2 truncate",children:e.signature})]})]},e.userId)))}),M(N,{total:Math.ceil(t?.total/60),page:a,func:l})]})})),K=[["歌曲列表","Playlist"],["评论","Comments"],["收藏者","Subscribers"]],Q={Playlist:q,Comments:B,Subscribers:J},F=s.exports.memo((()=>{const{id:e=""}=Y(),[a,t]=s.exports.useState(K[0][1]),[r,{data:c}]=j(),[i,{data:n,isSuccess:d}]=w();return s.exports.useEffect((()=>{(async()=>{const{data:a}=await r({id:e});await i({ids:a.playlist.trackIds.map((({id:e})=>e)).join(",")})})()}),[e]),d?L("div",{className:"overflow-auto h-full",children:[M(W,{data:c,children:M(U,{playlist:n.songs})}),L("div",{className:"mt-4",children:[M("div",{className:"space-x-4 flex items-baseline px-8",children:K.map((([e,s])=>L("button",{type:"button",className:l("text-sm",a===s&&"font-bold text-lg ui_underline"),onClick:()=>t(s),children:[e,"评论"===e&&`(${c.playlist.commentCount})`]},e)))}),M("div",{children:s.exports.createElement(Q[a],{songs:n.songs})})]})]}):M("div",{className:"w-full h-full flex-center",children:M(f,{})})})),V=s.exports.memo((({id:e})=>(s.exports.useEffect((()=>{(async()=>{try{const{}=await k({rid:e})}catch(a){console.log(a)}})()}),[]),L("div",{className:"domPlaylistDetail",children:[M("div",{className:"domPlaylistDetail_header"}),M("div",{className:"domPlaylistDetail_main",children:"TODO"})]})))),X=()=>(s.exports.useState(0),M("div",{children:"TOTO"}));e("default",s.exports.memo((()=>L(E,{children:[M(G,{path:"music/:id",element:M(F,{})}),M(G,{path:"dj/:id",element:M(V,{})}),M(G,{path:"album/:id",element:M(X,{})})]}))))}}}));
