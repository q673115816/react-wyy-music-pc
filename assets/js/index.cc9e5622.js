import{r}from"./react.0a2f695e.js";import{d as B,aJ as F,t as w,M as k,H as P,Y as $,A as S,a as E,aK as L,aL as I,aM as _,L as N,F as j,P as R,aN as z,i as M,aO as T,ap as O,G as Y,aP as G}from"./index.8e41b511.js";import{c as v}from"./react-slick.d01d63b2.js";import{D as H}from"./index.044411f0.js";import{W as U,e as q,Y as J,q as K,N as Q,a1 as W}from"./@tabler/icons.780b6b0a.js";import{L as x,b as C,R as X,c as g}from"./react-router-dom.150e83ea.js";import{a,j as e}from"./qrcode.react.f1612489.js";import{R as Z}from"./Rank.238a8015.js";import{D as V}from"./Download.3c2ebe16.js";import{A as ee}from"./Album.e7b504ed.js";import{G as se}from"./Gender.caceaba2.js";import"./lodash.f41ef0b4.js";import"./react-dom.d348259d.js";import"./react-redux.b59bc728.js";import"./immer.9a3c9cc9.js";import"./axios.fa0829fd.js";import"./rxjs.50ac82b8.js";import"./react-use.c8ecd018.js";import"./store.066dccc1.js";import"./react-transition-group.2ea66e59.js";const te=({tags:s=[]})=>s.length===0?null:a("div",{className:"tags",children:[e("span",{children:"\u6807\u7B7E\uFF1A"}),s.map((t,l)=>a("span",{children:[l>0&&" / ",e(x,{to:`/home/playlist/${t}`,className:"tag ui_link",children:t})]},t))]}),ae=r.exports.memo(te),re=({description:s=""})=>{if(!s)return null;const[t,l]=r.exports.useState(!1),o=s.match(/^.*$/gm);return e("div",{className:"relative pr-5",children:a("div",{className:"whitespace-pre-line leading-6",children:["\u7B80\u4ECB\uFF1A",e("span",{className:v("text-gray-500 select-text",!t&&"truncate inline-block max-w-xs align-bottom"),children:t?s:o==null?void 0:o[0]}),e("button",{type:"button",onClick:()=>l(!t),className:"absolute top-0 right-0 text-gray-500",children:t?e(U,{size:16,className:"fill-current"}):e(q,{size:16,className:"fill-current"})})]})})},le=r.exports.memo(re),ne=({data:s={},handleSub:t,songs:l})=>{var o,n,u,m;return a("div",{className:"p-8 flex items-start",children:[e("div",{className:"border rounded overflow-hidden flex-none w-92 h-92",children:e("img",{loading:"lazy",className:"w-full h-full",src:`${s.playlist.coverImgUrl}?param=200y200`,alt:""})}),a("div",{className:"info flex-auto w-0 ml-5",children:[a("div",{className:"name leading-tight",children:[e("span",{className:"whitespace-nowrap text-red-500 border border-current p-0.5 rounded mr-2 align-bottom inline-block",children:"\u6B4C\u5355"}),e("span",{className:"h1 select-text",children:s.playlist.name||"\u6211\u559C\u6B22\u7684\u97F3\u4E50"})]}),a("div",{className:"creator flex items-center mt-2",children:[e(x,{to:`/user/${(o=s.playlist.creator)==null?void 0:o.userId}`,className:"w-6 h-6 rounded-full overflow-hidden mr-2",children:e("img",{className:"",src:`${(n=s.playlist.creator)==null?void 0:n.avatarUrl}?param=50y50`,alt:""})}),e(x,{to:`/user/${(u=s.playlist.creator)==null?void 0:u.userId}`,className:"nickname ui_link mr-2",children:(m=s.playlist.creator)==null?void 0:m.nickname}),a("span",{className:"text-gray-500",children:[B(s.playlist.createTime||Date.now()).format("YYYY-MM-DD"),"\u521B\u5EFA"]})]}),a("div",{className:"actions flex space-x-2 mt-2",children:[e(H,{playlist:l}),a("button",{onClick:()=>t(s.playlist.subscribed),type:"button",className:"flex-center text-sm border px-3 h-8 rounded-full hover:bg-gray-50",children:[s.playlist.subscribed?e(J,{size:20,stroke:1}):e(K,{size:20,stroke:1}),"\xA0",s.playlist.subscribed?"\u5DF2\u6536\u85CF":"\u6536\u85CF",`(${F(s.playlist.subscribedCount)})`]}),a("button",{type:"button",className:"flex-center text-sm border px-3 h-8 rounded-full hover:bg-gray-50",children:[e(Q,{size:20,stroke:1}),"\xA0 \u5206\u4EAB",`(${F(s.playlist.shareCount)})`]}),a("button",{type:"button",className:"flex-center text-sm border px-3 h-8 rounded-full hover:bg-gray-50",children:[e(W,{size:20,stroke:1}),"\xA0 \u4E0B\u8F7D\u5168\u90E8"]})]}),a("div",{className:"flex flex-col gap-y-1 mt-3",children:[e(ae,{tags:s.playlist.tags}),a("div",{children:[a("span",{className:"mr-3",children:["\u6B4C\u66F2\uFF1A",e("span",{className:"text-gray-500",children:s.playlist.trackCount})]}),a("span",{children:["\u64AD\u653E\uFF1A",e("span",{className:"text-gray-500",children:w(s.playlist.playCount)})]})]}),e(le,{description:s.playlist.description})]})]})]})},ie=r.exports.memo(ne),ce=({songs:s=[]})=>s.length?a("div",{style:{"--ui_grid_template":"36px / 30px 30px 30px 36% 4fr 6fr 2fr"},className:"mt-4",children:[a("div",{className:"grid ui_grid_template pl-8",children:[e("div",{}),e("div",{}),e("div",{}),e("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"\u97F3\u4E50\u6807\u9898"}),e("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"\u6B4C\u624B"}),e("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"\u4E13\u8F91"}),e("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"\u65F6\u957F"})]}),s.map((t,l)=>e(k,{schema:[["\u8BC4\u8BBA","\u64AD\u653E","\u4E0B\u4E00\u9996\u64AD\u653E"],["\u6536\u85CF\u5230\u6B4C\u5355","\u5206\u4EAB","\u590D\u5236\u94FE\u63A5","\u4E0D\u611F\u5174\u8DA3","\u4E0B\u8F7D"]],type:"song",item:t,children:a("div",{tabIndex:2,className:v("grid items-center focus:outline-none focus:bg-gray-200 hover:bg-gray-100 ui_grid_template pl-8",l%2===0&&"bg-gray-50"),children:[e("div",{className:"px-1",children:e(Z,{index:l,id:t.id})}),e("div",{className:"px-1",children:e(P,{id:t.id})}),e("div",{className:"px-1",children:e(V,{})}),e($,{className:"px-1",item:t}),e(S,{className:"px-1",artists:t.ar}),e(ee,{className:"px-1",name:t.al.name,id:t.al.id}),e("div",{className:"text-gray-500 px-1",children:B(t.dt).format("mm:ss")})]})},t.id))]}):e("div",{className:"pt-16 text-center text-sm text-gray-400",children:"\u6682\u65E0\u97F3\u4E50"}),oe=r.exports.memo(ce),ue=()=>{const s=E(),t=r.exports.useRef(null),{id:l=0}=C(),{data:o,isLoading:n}=L({id:l}),[u,{isLoading:m}]=I(),p=r.exports.useCallback(()=>{},[]),h=r.exports.useCallback(async()=>{if(!!t.current){t.current.value||s("\u5199\u4E9B\u4E1C\u897F\u5427\uFF0C\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A\u54E6!");try{const i=await u({id:l,t:1,type:2,content:t.current.value})}catch(i){console.log(i)}}},[]);return a("div",{className:"px-8",children:[a("div",{className:"pt-10 pb-10",children:[e(_,{ref:t,max:140,placeholder:"",onChange:p}),e("div",{className:"flex justify-end mt-2",children:e("button",{onClick:h,type:"button",className:"flex-center text-sm border px-4 h-8 rounded-full hover:bg-gray-50",children:"\u8BC4\u8BBA"})})]}),n?e(N,{}):e(j,{comments:o,type:0,more:l})]})},me=r.exports.memo(ue),b=60,de=r.exports.memo(function(){const{id:t}=C(),[l,o]=r.exports.useState(1),[n,u]=r.exports.useState({}),[m,p]=r.exports.useState(!0),h=async()=>{const{subscribers:i,total:f}=await z({id:t,limit:b,offset:(l-1)*b});u({subscribers:i,total:f}),p(!1)};return r.exports.useEffect(()=>{h()},[]),m?e("div",{className:"flex-center pt-32",children:e(N,{})}):a("div",{className:"px-8",children:[e("div",{className:"domPlaylistDetail_subscribers flex justify-between flex-wrap",children:n==null?void 0:n.subscribers.map(i=>a("div",{className:"item flex mt-6 w-80 ",children:[e(x,{to:`/user/${i.userId}`,className:"avatar w-24 h-24 border rounded-full overflow-hidden",children:e("img",{loading:"lazy",src:`${i.avatarUrl}?param=100y100`,alt:""})}),a("div",{className:"ml-2 flex-auto w-0 flex flex-col justify-center",children:[a("div",{className:"text-sm flex items-center",children:[e(x,{to:`/user/${i.userId}`,children:i.nickname}),"\xA0",e(se,{gender:i.gender,size:16})]}),e("div",{className:"mt-2 truncate",children:i.signature})]})]},i.userId))}),e(R,{total:Math.ceil((n==null?void 0:n.total)/b),page:l,func:o})]})}),D=[["\u6B4C\u66F2\u5217\u8868","Playlist"],["\u8BC4\u8BBA","Comments"],["\u6536\u85CF\u8005","Subscribers"]],pe={Playlist:oe,Comments:me,Subscribers:de},he=()=>{const{id:s}=C(),t=E(),[l,o]=r.exports.useState(!0),[n,u]=r.exports.useState([]),[m,p]=M({}),[h,i]=r.exports.useState(D[0][1]),f=async()=>{try{const c=await O({id:s});if(p(c),c.playlist.trackCount>0){const{songs:d}=await Y({ids:c.playlist.trackIds.map(({id:y})=>y).join(",")});u(d)}o(!1)}catch(c){console.log(c)}},A=r.exports.useCallback(async c=>{try{const{code:d}=await T({t:c?2:1,id:s});d===200&&(t(c?"\u53D6\u6D88\u6536\u85CF\u6210\u529F\uFF01":"\u6536\u85CF\u6210\u529F\uFF01"),p(y=>{y.playlist.subscribed=!c}))}catch(d){console.log(d)}},[s]);return r.exports.useEffect(()=>{f()},[s]),l?e("div",{className:"w-full h-full flex-center",children:e(N,{})}):a("div",{className:"overflow-auto h-full",children:[e(ie,{data:m,handleSub:A,songs:n}),a("div",{className:"mt-4",children:[e("div",{className:"space-x-4 flex items-baseline px-8",children:D.map(([c,d])=>a("button",{type:"button",className:v("text-sm",h===d&&"font-bold text-lg ui_underline"),onClick:()=>i(d),children:[c,c==="\u8BC4\u8BBA"&&`(${m.playlist.commentCount})`]},c))}),e("div",{children:r.exports.createElement(pe[h],{songs:n})})]})]})},xe=r.exports.memo(he),fe=r.exports.memo(({id:s})=>{const t=async()=>{try{const{}=await G({rid:s})}catch(l){console.log(l)}};return r.exports.useEffect(()=>{t()},[]),a("div",{className:"domPlaylistDetail",children:[e("div",{className:"domPlaylistDetail_header"}),e("div",{className:"domPlaylistDetail_main",children:"TODO"})]})}),ye=()=>(r.exports.useState(0),e("div",{children:"TOTO"})),ge=()=>a(X,{children:[e(g,{path:"music/:id",element:e(xe,{})}),e(g,{path:"dj/:id",element:e(fe,{})}),e(g,{path:"album/:id",element:e(ye,{})})]}),Me=r.exports.memo(ge);export{Me as default};
