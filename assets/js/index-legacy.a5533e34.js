!function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(l){c=!0,a=l}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./react-legacy.5bc0222d.js","./index-legacy.a9b72936.js","./qrcode.react-legacy.ee127fcc.js","./react-router-dom-legacy.6d5f4357.js","./react-use-legacy.bb7aad2b.js","./@tabler/icons-legacy.529bdd34.js","./lodash-legacy.ec9d3690.js","./react-dom-legacy.6bc53cf2.js","./react-redux-legacy.02b527b1.js","./immer-legacy.c38810dc.js","./axios-legacy.0865bd99.js","./store-legacy.6aaf7648.js","./react-slick-legacy.6091e657.js","./react-transition-group-legacy.0b5c4cd7.js"],(function(n){"use strict";var r,a,i,o,c,l,s,u,d,f,m,h,y,p,v,g,x,b,N,j,S,w,A,I,_,C,M,D;return{setters:[function(e){r=e.r},function(e){a=e.r,i=e.L,o=e.C,c=e.v,l=e.w,s=e.x,u=e.y,d=e.E,f=e.z,m=e.B,h=e.D,y=e.F,p=e.P,v=e.G,g=e.I,x=e.J,b=e.K,N=e.N,j=e.O},function(e){S=e.j,w=e.a},function(e){A=e.b,I=e.L,_=e.R,C=e.c},function(e){M=e.q},function(e){D=e.D},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var E=r.exports.memo((function(e){var n=e.index,c=e.setHasMore,l=A().id,s=r.exports.useRef(null),u=M(s,{root:null,rootMargin:"0px",threshold:1}),d=t(a(),2),f=d[0],m=d[1],h=m.data,y=m.isSuccess,p=(m.isFetching,m.isUninitialized);return r.exports.useEffect((function(){p&&u&&u.intersectionRatio>0&&f({id:l,type:0,limit:20,offset:20*n})}),[u]),r.exports.useEffect((function(){null!=h&&h.hasMore&&c()}),[h]),S("div",{ref:s,children:y?h.hotComments.map((function(e){return S(o,{item:e},e.commentId)})):S("div",{className:"flex-center py-4",children:S(i,{})})})})),z=r.exports.memo((function(){var n=t(r.exports.useState([!1]),2),a=n[0],i=n[1],o=r.exports.useCallback((function(){i((function(t){return[].concat(e(t),[!1])}))}),[]);return w("div",{className:"px-8 py-5 overflow-auto max-h-full flex-auto",children:[S("div",{className:"h1",children:"精彩评论"}),S("div",{className:"",children:a.map((function(e,t){return S(E,{index:t,setHasMore:o},t)}))})]})})),F={song:c,video:l,mv:s},L=r.exports.memo((function(){var e,t=A(),n=t.id,r=t.type,a=F[r]({ids:n}),o=a.data,c=a.isFetching,l=a.isSuccess;if(c)return S(i,{});var s=o.songs[0];return l?w("div",{className:"flex",children:[w("div",{className:"cover h-20 rounded overflow-hidden relative",children:[S("img",{loading:"lazy",className:"h-full",src:s.al.picUrl,alt:""}),S("div",{className:"ico absolute inset-0 m-auto flex-center w-8 h-8 ui_themeColor rounded-full bg-white bg-opacity-90",children:S(D,{size:16,className:"fill-current"})})]}),w("div",{className:"content px-6 py-2",children:[w("div",{className:"title text-lg",children:[s.name,S("span",{className:"text-gray-500",children:s.alia.length>0&&"(".concat(s.alia,")")})]}),w("div",{className:"info text-gray-500 mt-2 space-x-5",children:[w("span",{children:["专辑：",S(I,{className:"ui_text_gray_hover",to:"/playlist/album/".concat(s.al.id),children:null===(e=s.al)||void 0===e?void 0:e.name})]}),w("span",{children:["歌手：",s.ar.map((function(e,t){return w("span",{children:[t>0&&" / ",S(I,{className:"ui_text_gray_hover",to:"/artist/".concat(e.id),children:e.name})]},e.id)}))]})]})]})]}):void 0})),O={song:{apiDetail:function(e){var t=e.id;return v({ids:t})},comment:g},mv:{apiDetail:x,comment:b,header:function(){return S("div",{})}},video:{apiDetail:N,comment:j}},R=r.exports.memo((function(){console.log("comment");var e=A(),n=e.id,a=e.type;r.exports.useState("");var o=t(r.exports.useState(1),2),c=o[0],l=o[1],s=O[a].comment({id:n,offset:20*(c-1),limit:u}),v=s.data;return s.isLoading?S("div",{className:"w-full h-full flex-center",children:S(i,{})}):w("div",{className:"domComment overflow-auto px-8 py-5 h-full",children:[S(L,{}),w("div",{className:"mt-4",children:[S(d,{}),w("div",{className:"flex mt-2",children:[w("div",{className:"flex space-x-2",children:[S(f,{}),S(m,{}),S(h,{})]}),S("button",{type:"button",className:"flex-center border px-4 h-8 text-sm hover:bg-gray-100 rounded-full ml-auto",children:"评论"})]})]}),w("div",{className:"mt-8",children:[S(y,{comments:v,more:n,type:a}),S(p,{total:Math.ceil(v.total/u),page:c,func:l})]})]})}));n("default",(function(){return S(_,{children:w(C,{path:":type/:id",children:[S(C,{index:!0,element:S(R,{})}),S(C,{path:"hot",element:S(z,{})})]})})}))}}}))}();
