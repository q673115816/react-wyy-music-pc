import{r as l}from"./react.0a2f695e.js";import{as as N,A as f,at as w,au as A}from"./@tabler/icons.cd9e2e0f.js";import{u as C}from"./useInfinite.22451543.js";import{as as D,L as x,n as B,ae as F,u as k,at as $,i as _,au as L,av as R,aw as I}from"./index.42788119.js";import{D as b}from"./index.3f8d6549.js";import{L as u,b as y,R as T,c as m,d as G}from"./react-router-dom.e523476b.js";import{G as z}from"./Gender.caceaba2.js";import{j as e,a as t,F as q}from"./qrcode.react.f1612489.js";import{q as j}from"./react-use.00d6ab88.js";import{c as p}from"./react-slick.d01d63b2.js";import"./lodash.f41ef0b4.js";import"./react-dom.d348259d.js";import"./react-redux.4077531f.js";import"./immer.9a3c9cc9.js";import"./axios.fa0829fd.js";import"./rxjs.3ac7d22f.js";import"./store.066dccc1.js";import"./react-transition-group.2ea66e59.js";const S=({limit:s})=>{const{data:a,isLoading:n}=D({limit:s}),r=(a==null?void 0:a.hot)||[];return n?e(x,{}):e("div",{className:"list",children:r.map(i=>t(u,{to:`/friend/${i.actId}`,className:"py-1 pl-5 flex hover:bg-gray-100",children:[e("div",{className:"cover w-8 h-8 flex-none",children:e("img",{className:"rounded",src:`${i.sharePicUrl}?param=50y50`,alt:""})}),t("div",{className:"content px-2 flex-auto w-0",children:[t("div",{className:"title flex items-center",children:["#",e("span",{className:"truncate",children:i.title}),"#"]}),e("div",{className:"participateCount text-gray-300",children:`${i.participateCount}\u4EBA\u53C2\u4E0E`})]})]},i.actId))})},v=l.exports.memo(S),O=()=>{const{profile:s}=B(F),a=k();return t("div",{className:"flex-none",style:{width:250},children:[e("div",{className:"",children:s.userId?t("div",{className:"h-40 pt-8 bg-gray-100",children:[t("div",{className:"top flex gap-2 px-5 items-start",children:[e(u,{to:`/user/${s.userId}`,className:"avatar w-12 h-12 rounded-full overflow-hidden flex-none",children:e("img",{className:"",src:`${s.avatarUrl}?param=100y100`,alt:""})}),t("div",{className:"flex-1 w-0",children:[t("div",{className:"",children:[e(u,{to:`/user/${s.userId}`,children:s.nickname}),"\xA0",e(z,{gender:s.gender,size:14})]}),e("div",{className:"text-gray-500 truncate",children:s.signature})]})]}),t("div",{className:"infos flex divide-x text-center mt-4",children:[t(u,{to:`/user/${s.userId}/dynamic`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:s.eventCount}),e("div",{className:"string",children:"\u52A8\u6001"})]}),t(u,{to:`/user/${s.userId}/follow`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:s.follows}),e("div",{className:"string",children:"\u5173\u6CE8"})]}),t(u,{to:`/user/${s.userId}/fans`,className:"info flex-1 ui_text_black_hover",children:[e("div",{className:"num text-xl",children:s.followeds}),e("div",{className:"string",children:"\u7C89\u4E1D"})]})]})]}):t("div",{className:"nologin px-5",children:[e("div",{style:{height:170}}),e("div",{className:"tips text-center text-gray-500",children:"\u767B\u5F55\u7F51\u6613\u4E91\u97F3\u4E50\uFF0C\u53EF\u4EE5\u4EAB\u53D7\u65E0\u9650\u6536\u85CF\u7684\u4E50\u8DA3\uFF0C\u5E76\u4E14\u65E0\u9650\u540C\u6B65\u5230\u624B\u673A"}),e("button",{type:"button",className:"ui_theme_bg_color text-white w-full h-10 mt-4 rounded-full",onClick:()=>a($()),children:"\u7ACB\u5373\u767B\u5F55"})]})}),t("div",{className:"mt-5",children:[t("div",{className:"flex px-5 mb-2.5",children:[e("span",{className:"font-bold",children:"\u70ED\u95E8\u8BDD\u9898"}),e(u,{className:"text-gray-400 ml-auto",to:"/friend/top",children:"\u66F4\u591A >"})]}),e(v,{limit:5})]}),e("div",{className:"mt-8",children:t("div",{className:"flex px-5 mb-2.5",children:[e("span",{className:"font-bold",children:"\u8BA4\u8BC6\u7684\u4EBA"}),e(u,{className:"text-gray-400 ml-auto",to:"/friend/acquaintance",children:"\u66F4\u591A >"})]})}),e("div",{className:"mt-8",children:e("div",{className:"flex px-5 mb-2.5",children:e("span",{className:"font-bold",children:"\u6DFB\u52A0\u5173\u6CE8"})})})]})},P=l.exports.memo(O),Q=()=>{const[s,a]=_([]),[n]=L(),r=l.exports.useRef(null),i=l.exports.useRef(null),o=l.exports.useRef(-1),d=async()=>{try{const c=await n({lasttime:o.current}),h=c.data.lasttime,g=c.data.event;o.current=h,a(E=>{E.push(...g)})}catch(c){console.log(c)}};return l.exports.useEffect(()=>{a([])},[]),C(d,r,i),e("div",{className:"h-full overflow-auto",ref:r,children:t("div",{className:"flex divide-x min-h-full",children:[t("div",{className:"relative flex-1 w-0",children:[t("div",{className:"h-14 px-8 flex items-center sticky top-0 z-10 bg-white",children:[e("span",{className:"h1",children:"\u52A8\u6001"}),t("button",{type:"button",className:"flex-center ml-4 ui_theme_bg_color text-sm text-white h-8 px-4 rounded-full",children:[e(N,{size:20,stroke:1}),"\u53D1\u52A8\u6001"]})]}),t("div",{className:"domFriend_content",children:[e("div",{className:"px-8",children:e(b,{list:s})}),e("div",{className:"flex-center",ref:i,children:s.length===0?e("div",{className:"empty text-center text-gray-400 pt-48",children:"\u6682\u65E0\u52A8\u6001"}):e(x,{})})]})]}),e(P,{})]})})},U=l.exports.memo(Q),H=()=>{var d;const{id:s=""}=y(),a=l.exports.useRef(null),n=j(a,{root:void 0,rootMargin:"0px",threshold:1}),{data:r,isLoading:i}=R({actid:s}),o=(r==null?void 0:r.act)||{};return i?null:t(q,{children:[t("div",{style:{display:n&&n.intersectionRatio<1?void 0:"none"},className:"sticky top-0 border-b flex justify-end py-2 z-10 bg-white gap-3 inset-x-0 px-5",children:[t("button",{type:"button",className:"border rounded-full flex-center px-4 py-1 text-sm hover:bg-gray-50 text-red-500",children:[e(N,{}),"\u7ACB\u5373\u53C2\u4E0E"]}),t("button",{type:"button",className:"border rounded-full flex-center px-4 py-1 text-sm hover:bg-gray-50",children:[e(f,{}),"\u5206\u4EAB"]}),e("button",{type:"button",className:"border rounded-full flex-center px-4 py-1 text-sm hover:bg-gray-50",children:e(w,{})})]}),t("div",{className:"border-b px-8",ref:a,children:[t("div",{className:"rounded overflow-hidden border relative",children:[e("img",{src:o.coverPCUrl,loading:"lazy",className:"h-56 object-cover block",alt:""}),t("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex-center flex-col",children:[t("div",{style:{minWidth:210},className:"relative max-w-sm min-w- border-t border-b border-white border-opacity-60 py-6 text-white text-xl flex-center text-center flex-col ",children:[t("div",{className:"flex",children:["#",e("span",{className:"truncate",children:o.title}),"#"]}),e("span",{className:"absolute inset-x-0 text-xs whitespace-nowrap top-full transform -translate-y-1/2",children:`${o.participateCount}\u4EBA\u53C2\u4E0E`})]}),t("button",{type:"button",className:"bg-white flex-center h-9 mt-4 w-52 rounded text-red-500 bg-opacity-90 hover:bg-opacity-100",children:[e(A,{size:16}),"\u7ACB\u5373\u53C2\u4E0E"]})]}),e("button",{type:"button",className:"absolute m-4 w-8 h-8 flex-center top-0 right-0 border text-white border-gray-500 rounded-full bg-black bg-opacity-50",children:e(f,{size:24,stroke:1})})]}),e("ul",{className:"pb-8 text-sm text-gray-500 leading-6",children:(d=o.text)==null?void 0:d.map((c,h)=>e("li",{children:c},h))})]})]})},M=l.exports.memo(H),J=({actid:s})=>{const{data:a,isLoading:n}=I({actid:s}),r=(a==null?void 0:a.events)||[];return n?e(x,{}):e(b,{list:r})},V=l.exports.memo(J),W=()=>{const{id:s=""}=y();return t("div",{className:"flex divide-x h-full overflow-auto",id:"\u52A8\u6001",children:[e("div",{className:"flex-auto w-0 relative",children:t("div",{className:"pt-4",children:[e(M,{}),t("div",{className:"px-8",children:[e("div",{className:"text-gray-500 mt-4 text-sm",children:"\u70ED\u95E8\u52A8\u6001"}),e(V,{actid:s})]})]})}),t("div",{className:"flex-none",style:{width:230},children:[e("div",{className:"p-4 text-sm text-gray-700",children:"\u63A8\u8350\u8BDD\u9898"}),e(v,{limit:10})]})]})},K=l.exports.memo(W),X=l.exports.memo(function(){const[a,n]=l.exports.useState("day"),[r,i]=l.exports.useState([]),o=async()=>{i([{title:"\u4F60\u7684\u604B\u7231\u4EBA\u683C\u662F\u4EC0\u4E48",count:916},{title:"\u4F60\u7684\u604B\u7231\u4EBA\u683C\u662F\u4EC0\u4E48",count:916}])};return l.exports.useEffect(()=>{o()},[a]),e("div",{className:" h-full overflow-auto",children:t("div",{className:"flex divide-x",children:[t("div",{className:"flex-auto w-0",children:[t("div",{className:"h-16 px-8 flex items-center",children:[e("span",{className:"text-lg font-bold",children:"\u8BDD\u9898\u98D9\u5347\u699C"}),t("div",{className:"ml-auto space-x-3 text-gray-300",children:[e("button",{type:"button",onClick:()=>n("day"),className:p("hover:text-gray-700",a==="day"&&"text-gray-700"),children:"24\u5C0F\u65F6"}),e("span",{children:"|"}),e("button",{type:"button",onClick:()=>n("week"),className:p("hover:text-gray-700",a==="week"&&"text-gray-700"),children:"7\u5929"})]})]}),e("div",{children:r.map((d,c)=>t("div",{className:p("flex items-center h-20 hover:bg-gray-100",c%2===1&&"bg-gray-50"),children:[e("div",{className:"w-16 flex-center text-sm ",children:c+1}),e("div",{className:"w-14 h-14",children:e("img",{src:"",alt:""})}),t("div",{children:[e("div",{className:"text-lg",children:d.title}),t("div",{className:"text-gray-300",children:[d.count,"\u4EBA\u53C2\u4E0E"]})]})]},c))})]}),t("div",{className:"domFriend_right flex-none",style:{width:230},children:[e("div",{className:"p-4 text-sm text-gray-700",children:"\u63A8\u8350\u8BDD\u9898"}),e(v,{limit:10})]})]})})}),Y=l.exports.memo(function(){return t("div",{className:"",children:[e("div",{className:"text-xl p-8 font-bold",children:"\u5BFB\u627E\u5E76\u9080\u8BF7\u597D\u53CB"}),t("div",{className:"px-8",children:[t("div",{className:"space-x-2 text-gray-500",children:[e("button",{type:"button",children:"\u5DF2\u67091\u4F4D\u597D\u53CB\u52A0\u5165"}),e("span",{children:"|"}),e("button",{type:"button",children:"\u9080\u8BF7\u53E6\u59163\u4F4D\u597D\u53CB\u52A0\u5165"})]}),e("div",{children:"TODO"})]})]})}),Z=()=>e("div",{}),ee=l.exports.memo(Z),te=()=>t(T,{children:[e(m,{index:!0,element:e(U,{})}),e(m,{path:"top",element:e(X,{})}),e(m,{path:"Acquaintance",element:e(Y,{})}),e(m,{path:":id",element:e(K,{})}),t(m,{path:"redirect",children:[e(m,{index:!0,element:e(G,{to:"..",replace:!0})}),e(m,{path:"keywords",element:e(ee,{})})]})]}),ye=te;export{ye as default};
