import{r as u}from"./react.0a2f695e.js";import{L as A}from"./react-router-dom.4c2558a9.js";import{a as R}from"./classnames.9558900f.js";import{aE as M,L as w}from"./index.69b67b1f.js";import{G as V}from"./Home.83463fbb.js";import{j as e,a as m}from"./qrcode.react.84002e4a.js";import{s as j,v as d}from"./react-use.a66bca5d.js";import{g as C,h as G}from"./react-router.ac7babc5.js";import"./lodash.f41ef0b4.js";import"./react-dom.d348259d.js";import"./react-redux.49573eed.js";import"./immer.76e704b2.js";import"./redux-persist.a688a4f3.js";import"./axios.556b107a.js";import"./@tabler/icons.03a18234.js";import"./rxjs.b1f49213.js";import"./react-transition-group.5a807b1e.js";import"./color.a5f8aeb5.js";import"./dayjs.6fdda85a.js";const S=[["area","\u5730\u533A",["\u5168\u90E8","\u5185\u5730","\u6E2F\u53F0","\u6B27\u7F8E","\u97E9\u56FD","\u65E5\u672C"]],["type","\u7C7B\u578B",["\u5168\u90E8","\u5B98\u65B9\u7248","\u539F\u58F0","\u73B0\u573A\u7248","\u7F51\u6613\u51FA\u54C1"]],["order","\u6392\u5E8F",["\u4E0A\u5347\u6700\u5FEB","\u6700\u70ED","\u6700\u65B0"]]],f={area:"\u5168\u90E8",type:"\u5168\u90E8",order:"\u4E0A\u5347\u6700\u5FEB"},h=24,_=({area:t,type:o,order:a,index:l,setHasMore:p})=>{const n=u.exports.useRef(null),c=j(n,{root:null,rootMargin:"0px",threshold:1}),[r,{isUninitialized:s,isLoading:x,data:i}]=M();return u.exports.useEffect(()=>{s&&c&&c.intersectionRatio>0&&r({area:t,type:o,order:a,limit:h,offset:l*h})},[c]),u.exports.useEffect(()=>{i!=null&&i.hasMore&&p()},[i]),e("div",{ref:n,children:x?e("div",{className:"flex-center py-4",children:e(w,{})}):e(V,{list:i==null?void 0:i.data.map(({id:E,name:v,cover:y,playCount:N,duration:F,artists:B})=>({type:0,playCount:N,id:E,cover:y,duration:F,title:v,creator:B.map(({id:L,name:g})=>({userId:L,userName:g}))}))})})},$=u.exports.memo(_),b=()=>{const t=d("area")||f.area,o=d("type")||f.type,a=d("order")||f.order,l={area:t,type:o,order:a},[p,n]=u.exports.useState([]),c=u.exports.useCallback(()=>{n(r=>[...r,t+o+a])},[t,o,a]);return u.exports.useEffect(()=>{n([t+o+a])},[t,o,a]),m("div",{className:"overflow-auto h-full",children:[e("div",{className:"ui_header",children:e("span",{className:"h1 cursor-pointer",children:"\u5168\u90E8MV"})}),m("div",{className:"px-8 flex-auto",children:[S.map(r=>m("div",{className:"flex my-2.5",children:[m("div",{className:"flex-none",children:[r[1],":"]}),e("div",{className:"flex divide-x",children:r[2].map(s=>e("div",{className:"w-20 flex-center",children:e(A,{to:`/mv-all?${new URLSearchParams(Object.assign({},l,{[r[0]]:s}))}`,className:R("rounded-full leading-5 px-3 whitespace-nowrap",s===l[r[0]]?"bg-red-50 text-red-500":"ui_text_gray_hover"),children:s})},s))})]},r[1])),e("div",{className:"py-1",children:p.map((r,s)=>e($,{index:s,order:a,area:t,type:o,setHasMore:c},r+s))})]})]})},D=u.exports.memo(b),k=()=>e(C,{children:e(G,{index:!0,element:e(D,{})})}),oe=k;export{oe as default};
