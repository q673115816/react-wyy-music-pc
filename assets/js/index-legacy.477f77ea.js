System.register(["./react-legacy.b3bc90c5.js","./index-legacy.7988ed51.js","./react-slick-legacy.d6ab9305.js","./index-legacy.5f123cdb.js","./@tabler/icons-legacy.e7aeeb72.js","./react-router-dom-legacy.ff1dcab2.js","./qrcode.react-legacy.364768f0.js","./Rank-legacy.b0c6f893.js","./Download-legacy.abbb51be.js","./Album-legacy.ae302c10.js","./Gender-legacy.95a01b94.js","./lodash-legacy.4434829e.js","./react-dom-legacy.c211300b.js","./react-redux-legacy.ec913dab.js","./immer-legacy.c38810dc.js","./axios-legacy.36e845a7.js","./rxjs-legacy.4f91953b.js","./react-use-legacy.79acac46.js","./store-legacy.0145af8a.js","./react-transition-group-legacy.3b11e6a0.js"],(function(e,a){"use strict";var s,t,l,r,c,i,n,d,o,m,p,u,h,x,y,g,b,f,v,N,j,w,k,C,S,$,_,D,I,z,P,L,M,E,G,O,R,T,Y;return{setters:[e=>{s=e.r},e=>{t=e.d,l=e.aG,r=e.t,c=e.M,i=e.H,n=e.S,d=e.A,o=e.a,m=e.aH,p=e.aI,u=e.aJ,h=e.L,x=e.F,y=e.P,g=e.aK,b=e.i,f=e.aL,v=e.ap,N=e.G,j=e.aM},e=>{w=e.c},e=>{k=e.D},e=>{C=e.$,S=e.c,$=e.a0,_=e.Z,D=e.P,I=e.a3},e=>{z=e.L,P=e.b,L=e.R,M=e.c},e=>{E=e.a,G=e.j},e=>{O=e.R},e=>{R=e.D},e=>{T=e.A},e=>{Y=e.G},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const a=s.exports.memo((({tags:e=[]})=>0===e.length?null:E("div",{className:"tags",children:[G("span",{children:"标签："}),e.map(((e,a)=>E("span",{children:[a>0&&" / ",G(z,{to:`/home/playlist/${e}`,className:"tag ui_link",children:e})]},e)))]}))),A=s.exports.memo((({description:e=""})=>{if(!e)return null;const[a,t]=s.exports.useState(!1),l=e.match(/^.*$/gm);return G("div",{className:"relative pr-5",children:E("div",{className:"whitespace-pre-line leading-6",children:["简介：",G("span",{className:w("text-gray-500 select-text",!a&&"truncate inline-block max-w-xs align-bottom"),children:a?e:l?.[0]}),G("button",{type:"button",onClick:()=>t(!a),className:"absolute top-0 right-0 text-gray-500",children:G(a?C:S,{size:16,className:"fill-current"})})]})})})),U=s.exports.memo((({data:e={},handleSub:s,songs:c})=>E("div",{className:"p-8 flex items-start",children:[G("div",{className:"border rounded overflow-hidden flex-none w-92 h-92",children:G("img",{loading:"lazy",className:"w-full h-full",src:`${e.playlist.coverImgUrl}?param=200y200`,alt:""})}),E("div",{className:"info flex-auto w-0 ml-5",children:[E("div",{className:"name leading-tight",children:[G("span",{className:"whitespace-nowrap text-red-500 border border-current p-0.5 rounded mr-2 align-bottom inline-block",children:"歌单"}),G("span",{className:"h1 select-text",children:e.playlist.name||"我喜欢的音乐"})]}),E("div",{className:"creator flex items-center mt-2",children:[G(z,{to:`/user/${e.playlist.creator?.userId}`,className:"w-6 h-6 rounded-full overflow-hidden mr-2",children:G("img",{className:"",src:`${e.playlist.creator?.avatarUrl}?param=50y50`,alt:""})}),G(z,{to:`/user/${e.playlist.creator?.userId}`,className:"nickname ui_link mr-2",children:e.playlist.creator?.nickname}),E("span",{className:"text-gray-500",children:[t(e.playlist.createTime||Date.now()).format("YYYY-MM-DD"),"创建"]})]}),E("div",{className:"actions flex space-x-2 mt-2",children:[G(k,{playlist:c}),E("button",{onClick:()=>s(e.playlist.subscribed),type:"button",className:"flex-center text-sm border px-3 h-8 rounded-full hover:bg-gray-50",children:[e.playlist.subscribed?G($,{size:20,stroke:1}):G(_,{size:20,stroke:1})," ",e.playlist.subscribed?"已收藏":"收藏",`(${l(e.playlist.subscribedCount)})`]}),E("button",{type:"button",className:"flex-center text-sm border px-3 h-8 rounded-full hover:bg-gray-50",children:[G(D,{size:20,stroke:1}),"  分享",`(${l(e.playlist.shareCount)})`]}),E("button",{type:"button",className:"flex-center text-sm border px-3 h-8 rounded-full hover:bg-gray-50",children:[G(I,{size:20,stroke:1}),"  下载全部"]})]}),E("div",{className:"flex flex-col gap-y-1 mt-3",children:[G(a,{tags:e.playlist.tags}),E("div",{children:[E("span",{className:"mr-3",children:["歌曲：",G("span",{className:"text-gray-500",children:e.playlist.trackCount})]}),E("span",{children:["播放：",G("span",{className:"text-gray-500",children:r(e.playlist.playCount)})]})]}),G(A,{description:e.playlist.description})]})]})]}))),H=s.exports.memo((({songs:e=[]})=>e.length?E("div",{style:{"--ui_grid_template":"36px / 30px 30px 30px 36% 4fr 6fr 2fr"},className:"mt-4",children:[E("div",{className:"grid ui_grid_template pl-8",children:[G("div",{}),G("div",{}),G("div",{}),G("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"音乐标题"}),G("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"歌手"}),G("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"专辑"}),G("div",{className:"px-1 flex items-center hover:bg-gray-200 text-gray-500",children:"时长"})]}),e.map(((e,a)=>G(c,{schema:[["评论","播放","下一首播放"],["收藏到歌单","分享","复制链接","不感兴趣","下载"]],type:"song",item:e,children:E("div",{tabIndex:2,className:w("grid items-center focus:outline-none focus:bg-gray-200 hover:bg-gray-100 ui_grid_template pl-8",a%2==0&&"bg-gray-50"),children:[G("div",{className:"px-1",children:G(O,{index:a,id:e.id})}),G("div",{className:"px-1",children:G(i,{id:e.id})}),G("div",{className:"px-1",children:G(R,{})}),G(n,{className:"px-1",item:e}),G(d,{className:"px-1",artists:e.ar}),G(T,{className:"px-1",name:e.al.name,id:e.al.id}),G("div",{className:"text-gray-500 px-1",children:t(e.dt).format("mm:ss")})]})},e.id)))]}):G("div",{className:"pt-16 text-center text-sm text-gray-400",children:"暂无音乐"}))),q=s.exports.memo((()=>{const e=o(),a=s.exports.useRef(null),{id:t=0}=P(),{data:l,isLoading:r}=m({id:t}),[c,{isLoading:i}]=p(),n=s.exports.useCallback((()=>{}),[]),d=s.exports.useCallback((async()=>{if(a.current){a.current.value||e("写些东西吧，内容不能为空哦!");try{await c({id:t,t:1,type:2,content:a.current.value})}catch(s){console.log(s)}}}),[]);return E("div",{className:"px-8",children:[E("div",{className:"pt-10 pb-10",children:[G(u,{ref:a,max:140,placeholder:"",onChange:n}),G("div",{className:"flex justify-end mt-2",children:G("button",{onClick:d,type:"button",className:"flex-center text-sm border px-4 h-8 rounded-full hover:bg-gray-50",children:"评论"})})]}),r?G(h,{}):G(x,{comments:l,type:0,more:t})]})})),F=s.exports.memo((function(){const{id:e}=P(),[a,t]=s.exports.useState(1),[l,r]=s.exports.useState({}),[c,i]=s.exports.useState(!0);return s.exports.useEffect((()=>{(async()=>{const{subscribers:s,total:t}=await g({id:e,limit:60,offset:60*(a-1)});r({subscribers:s,total:t}),i(!1)})()}),[]),c?G("div",{className:"flex-center pt-32",children:G(h,{})}):E("div",{className:"px-8",children:[G("div",{className:"domPlaylistDetail_subscribers flex justify-between flex-wrap",children:l?.subscribers.map((e=>E("div",{className:"item flex mt-6 w-80 ",children:[G(z,{to:`/user/${e.userId}`,className:"avatar w-24 h-24 border rounded-full overflow-hidden",children:G("img",{loading:"lazy",src:`${e.avatarUrl}?param=100y100`,alt:""})}),E("div",{className:"ml-2 flex-auto w-0 flex flex-col justify-center",children:[E("div",{className:"text-sm flex items-center",children:[G(z,{to:`/user/${e.userId}`,children:e.nickname})," ",G(Y,{gender:e.gender,size:16})]}),G("div",{className:"mt-2 truncate",children:e.signature})]})]},e.userId)))}),G(y,{total:Math.ceil(l?.total/60),page:a,func:t})]})})),J=[["歌曲列表","Playlist"],["评论","Comments"],["收藏者","Subscribers"]],K={Playlist:H,Comments:q,Subscribers:F},Z=s.exports.memo((()=>{const{id:e}=P(),a=o(),[t,l]=s.exports.useState(!0),[r,c]=s.exports.useState([]),[i,n]=b({}),[d,m]=s.exports.useState(J[0][1]),p=s.exports.useCallback((async s=>{try{const{code:t}=await f({t:s?2:1,id:e});200===t&&(a(s?"取消收藏成功！":"收藏成功！"),n((e=>{e.playlist.subscribed=!s})))}catch(t){console.log(t)}}),[e]);return s.exports.useEffect((()=>{(async()=>{try{const a=await v({id:e});if(n(a),a.playlist.trackCount>0){const{songs:e}=await N({ids:a.playlist.trackIds.map((({id:e})=>e)).join(",")});c(e)}l(!1)}catch(a){console.log(a)}})()}),[e]),t?G("div",{className:"w-full h-full flex-center",children:G(h,{})}):E("div",{className:"overflow-auto h-full",children:[G(U,{data:i,handleSub:p,songs:r}),E("div",{className:"mt-4",children:[G("div",{className:"space-x-4 flex items-baseline px-8",children:J.map((([e,a])=>E("button",{type:"button",className:w("text-sm",d===a&&"font-bold text-lg ui_underline"),onClick:()=>m(a),children:[e,"评论"===e&&`(${i.playlist.commentCount})`]},e)))}),G("div",{children:s.exports.createElement(K[d],{songs:r})})]})]})})),B=s.exports.memo((({id:e})=>(s.exports.useEffect((()=>{(async()=>{try{const{}=await j({rid:e})}catch(a){console.log(a)}})()}),[]),E("div",{className:"domPlaylistDetail",children:[G("div",{className:"domPlaylistDetail_header"}),G("div",{className:"domPlaylistDetail_main",children:"TODO"})]})))),Q=()=>(s.exports.useState(0),G("div",{children:"TOTO"}));e("default",s.exports.memo((()=>E(L,{children:[G(M,{path:"music/:id",element:G(Z,{})}),G(M,{path:"dj/:id",element:G(B,{})}),G(M,{path:"album/:id",element:G(Q,{})})]}))))}}}));
