import{c as W}from"./react-redux.49573eed.js";var R="persist:",k="persist/FLUSH",D="persist/REHYDRATE",F="persist/PAUSE",K="persist/PERSIST",H="persist/PURGE",$="persist/REGISTER",G=-1;function _(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_=function(t){return typeof t}:_=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(e)}function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function N(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?T(t,!0).forEach(function(n){Y(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Y(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function C(e,r,t,n){n.debug;var s=N({},t);return e&&_(e)==="object"&&Object.keys(e).forEach(function(a){a!=="_persist"&&r[a]===t[a]&&(s[a]=e[a])}),s}function J(e){var r=e.blacklist||null,t=e.whitelist||null,n=e.transforms||[],s=e.throttle||0,a="".concat(e.keyPrefix!==void 0?e.keyPrefix:R).concat(e.key),d=e.storage,c;e.serialize===!1?c=function(O){return O}:typeof e.serialize=="function"?c=e.serialize:c=M;var f=e.writeFailHandler||null,u={},p={},i=[],y=null,v=null,j=function(O){Object.keys(O).forEach(function(l){!b(l)||u[l]!==O[l]&&i.indexOf(l)===-1&&i.push(l)}),Object.keys(u).forEach(function(l){O[l]===void 0&&b(l)&&i.indexOf(l)===-1&&u[l]!==void 0&&i.push(l)}),y===null&&(y=setInterval(h,s)),u=O};function h(){if(i.length===0){y&&clearInterval(y),y=null;return}var o=i.shift(),O=n.reduce(function(l,g){return g.in(l,o,u)},u[o]);if(O!==void 0)try{p[o]=c(O)}catch(l){console.error("redux-persist/createPersistoid: error serializing state",l)}else delete p[o];i.length===0&&S()}function S(){Object.keys(p).forEach(function(o){u[o]===void 0&&delete p[o]}),v=d.setItem(a,c(p)).catch(w)}function b(o){return!(t&&t.indexOf(o)===-1&&o!=="_persist"||r&&r.indexOf(o)!==-1)}function w(o){f&&f(o)}var E=function(){for(;i.length!==0;)h();return v||Promise.resolve()};return{update:j,flush:E}}function M(e){return JSON.stringify(e)}function B(e){var r=e.transforms||[],t="".concat(e.keyPrefix!==void 0?e.keyPrefix:R).concat(e.key),n=e.storage;e.debug;var s;return e.deserialize===!1?s=function(d){return d}:typeof e.deserialize=="function"?s=e.deserialize:s=V,n.getItem(t).then(function(a){if(a)try{var d={},c=s(a);return Object.keys(c).forEach(function(f){d[f]=r.reduceRight(function(u,p){return p.out(u,f,c)},s(c[f]))}),d}catch(f){throw f}else return})}function V(e){return JSON.parse(e)}function X(e){var r=e.storage,t="".concat(e.keyPrefix!==void 0?e.keyPrefix:R).concat(e.key);return r.removeItem(t,q)}function q(e){}function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?A(t,!0).forEach(function(n){Q(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Q(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Z(e,r){if(e==null)return{};var t=ee(e,r),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(t[n]=e[n]))}return t}function ee(e,r){if(e==null)return{};var t={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(r.indexOf(s)>=0)&&(t[s]=e[s]);return t}var re=5e3;function fe(e,r){var t=e.version!==void 0?e.version:G;e.debug;var n=e.stateReconciler===void 0?C:e.stateReconciler,s=e.getStoredState||B,a=e.timeout!==void 0?e.timeout:re,d=null,c=!1,f=!0,u=function(i){return i._persist.rehydrated&&d&&!f&&d.update(i),i};return function(p,i){var y=p||{},v=y._persist,j=Z(y,["_persist"]),h=j;if(i.type===K){var S=!1,b=function(x,P){S||(i.rehydrate(e.key,x,P),S=!0)};if(a&&setTimeout(function(){!S&&b(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},a),f=!1,d||(d=J(e)),v)return m({},r(h,i),{_persist:v});if(typeof i.rehydrate!="function"||typeof i.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return i.register(e.key),s(e).then(function(g){var x=e.migrate||function(P,ue){return Promise.resolve(P)};x(g,t).then(function(P){b(P)},function(P){b(void 0,P)})},function(g){b(void 0,g)}),m({},r(h,i),{_persist:{version:t,rehydrated:!1}})}else{if(i.type===H)return c=!0,i.result(X(e)),m({},r(h,i),{_persist:v});if(i.type===k)return i.result(d&&d.flush()),m({},r(h,i),{_persist:v});if(i.type===F)f=!0;else if(i.type===D){if(c)return m({},h,{_persist:m({},v,{rehydrated:!0})});if(i.key===e.key){var w=r(h,i),E=i.payload,o=n!==!1&&E!==void 0?n(E,p,w,e):w,O=m({},o,{_persist:m({},v,{rehydrated:!0})});return u(O)}}}if(!v)return r(p,i);var l=r(h,i);return l===h?p:u(m({},l,{_persist:v}))}}function z(e){return ie(e)||ne(e)||te()}function te(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ne(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function ie(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}function U(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function I(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?U(t,!0).forEach(function(n){se(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function se(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var L={registry:[],bootstrapped:!1},ae=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return I({},r,{registry:[].concat(z(r.registry),[t.key])});case D:var n=r.registry.indexOf(t.key),s=z(r.registry);return s.splice(n,1),I({},r,{registry:s,bootstrapped:s.length===0});default:return r}};function le(e,r,t){var n=t||!1,s=W(ae,L,r&&r.enhancer?r.enhancer:void 0),a=function(u){s.dispatch({type:$,key:u})},d=function(u,p,i){var y={type:D,payload:p,err:i,key:u};e.dispatch(y),s.dispatch(y),n&&c.getState().bootstrapped&&(n(),n=!1)},c=I({},s,{purge:function(){var u=[];return e.dispatch({type:H,result:function(i){u.push(i)}}),Promise.all(u)},flush:function(){var u=[];return e.dispatch({type:k,result:function(i){u.push(i)}}),Promise.all(u)},pause:function(){e.dispatch({type:F})},persist:function(){e.dispatch({type:K,register:a,rehydrate:d})}});return r&&r.manualPersist||c.persist(),c}export{k as F,F as P,D as R,le as a,K as b,H as c,$ as d,fe as p};
