!function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(l){c=!0,a=l}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./react-legacy.672c49ac.js","./index-legacy.e9046e92.js","./qrcode.react-legacy.bb7ea4de.js","./react-router-dom-legacy.c19309a0.js","./react-use-legacy.e1955c63.js","./@tabler/icons-legacy.ef4b3ed4.js","./lodash-legacy.4434829e.js","./react-dom-legacy.038bc2ab.js","./react-redux-legacy.7992e80d.js","./immer-legacy.c38810dc.js","./axios-legacy.36e845a7.js","./react-slick-legacy.ee08380d.js","./rxjs-legacy.3af55866.js","./store-legacy.0145af8a.js","./react-transition-group-legacy.215f9ff9.js"],(function(n,r){"use strict";var a,i,o,c,l,s,u,d,f,m,h,y,p,v,g,x,b,N,j,S,w,A,I,_,C,M,E,z;return{setters:[function(e){a=e.r},function(e){i=e.r,o=e.L,c=e.C,l=e.v,s=e.w,u=e.x,d=e.y,f=e.E,m=e.z,h=e.B,y=e.D,p=e.F,v=e.P,g=e.G,x=e.I,b=e.J,N=e.K,j=e.N,S=e.O},function(e){w=e.j,A=e.a},function(e){I=e.b,_=e.L,C=e.R,M=e.c},function(e){E=e.q},function(e){z=e.K},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var r=a.exports.memo((function(e){var n=e.index,r=e.setHasMore,l=I().id,s=a.exports.useRef(null),u=E(s,{root:null,rootMargin:"0px",threshold:1}),d=t(i(),2),f=d[0],m=d[1],h=m.data,y=m.isSuccess,p=(m.isFetching,m.isUninitialized);return a.exports.useEffect((function(){p&&u&&u.intersectionRatio>0&&f({id:l,type:0,limit:20,offset:20*n})}),[u]),a.exports.useEffect((function(){null!=h&&h.hasMore&&r()}),[h]),w("div",{ref:s,children:y?h.hotComments.map((function(e){return w(c,{item:e},e.commentId)})):w("div",{className:"flex-center py-4",children:w(o,{})})})})),D=a.exports.memo((function(){var n=t(a.exports.useState([!1]),2),i=n[0],o=n[1],c=a.exports.useCallback((function(){o((function(t){return[].concat(e(t),[!1])}))}),[]);return A("div",{className:"px-8 py-5 overflow-auto max-h-full flex-auto",children:[w("div",{className:"h1",children:"精彩评论"}),w("div",{className:"",children:i.map((function(e,t){return w(r,{index:t,setHasMore:c},t)}))})]})})),F={song:l,video:s,mv:u},L=a.exports.memo((function(){var e,t=I(),n=t.id,r=t.type,a=F[r]({ids:n}),i=a.data,c=a.isFetching,l=a.isSuccess;if(c)return w(o,{});var s=i.songs[0];return l?A("div",{className:"flex",children:[A("div",{className:"cover h-20 rounded overflow-hidden relative",children:[w("img",{loading:"lazy",className:"h-full",src:s.al.picUrl,alt:""}),w("div",{className:"ico absolute inset-0 m-auto flex-center w-8 h-8 ui_themeColor rounded-full bg-white bg-opacity-90",children:w(z,{size:16,className:"fill-current"})})]}),A("div",{className:"content px-6 py-2",children:[A("div",{className:"title text-lg",children:[s.name,w("span",{className:"text-gray-500",children:s.alia.length>0&&"(".concat(s.alia,")")})]}),A("div",{className:"info text-gray-500 mt-2 space-x-5",children:[A("span",{children:["专辑：",w(_,{className:"ui_text_gray_hover",to:"/playlist/album/".concat(s.al.id),children:null===(e=s.al)||void 0===e?void 0:e.name})]}),A("span",{children:["歌手：",s.ar.map((function(e,t){return A("span",{children:[t>0&&" / ",w(_,{className:"ui_text_gray_hover",to:"/artist/".concat(e.id),children:e.name})]},e.id)}))]})]})]})]}):void 0})),O={song:{apiDetail:function(e){var t=e.id;return g({ids:t})},comment:x},mv:{apiDetail:b,comment:N,header:function(){return w("div",{})}},video:{apiDetail:j,comment:S}},R=a.exports.memo((function(){console.log("comment");var e=I(),n=e.id,r=e.type;a.exports.useState("");var i=t(a.exports.useState(1),2),c=i[0],l=i[1],s=O[r].comment({id:n,offset:20*(c-1),limit:d}),u=s.data;return s.isLoading?w("div",{className:"w-full h-full flex-center",children:w(o,{})}):A("div",{className:"domComment overflow-auto px-8 py-5 h-full",children:[w(L,{}),A("div",{className:"mt-4",children:[w(f,{}),A("div",{className:"flex mt-2",children:[A("div",{className:"flex space-x-2",children:[w(m,{}),w(h,{}),w(y,{})]}),w("button",{type:"button",className:"flex-center border px-4 h-8 text-sm hover:bg-gray-100 rounded-full ml-auto",children:"评论"})]})]}),A("div",{className:"mt-8",children:[w(p,{comments:u,more:n,type:r}),w(v,{total:Math.ceil(u.total/d),page:c,func:l})]})]})}));n("default",(function(){return w(C,{children:A(M,{path:":type/:id",children:[w(M,{index:!0,element:w(R,{})}),w(M,{path:"hot",element:w(D,{})})]})})}))}}}))}();
