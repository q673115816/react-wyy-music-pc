(function(){"use strict";class o{constructor(){this.targetOrigin="player"}init(s){this.send=new XMLHttpRequest,this.send.open("GET",s),this.send.responseType="blob",this.send.addEventListener("progress",({loaded:e,total:a})=>{const n=e/a;console.log("progress",`${n*100}%`),self.postMessage({callback:"progress",progress:n})}),this.send.addEventListener("readystatechange",()=>{this.send.readyState===4&&this.send.status===200&&(self.postMessage({callback:"state",state:"\u5DF2\u7F13\u5B58",response:this.send.response}),self.close())}),this.send.send()}abort(){console.log("\u7EC8\u6B62\u4E0B\u8F7D\uFF01"),this.send.abort(),self.close()}}const r=new o;self.addEventListener("message",t=>{const{method:s,url:e}=t.data;r[s](e)})})();
