{"version":3,"sources":["webpack://wyy/./src/pages/Exclusive/Exclusive.tsx","webpack://wyy/./src/reducers/exclusive/actions.ts"],"names":["action","useHistory","dispatch","useDispatch","useSelector","exclusive","result","scrollTop","offset","useRef","handleInit","apiPersonalizedPrivatecontentList","limit","current","payload","type","SET_EXCLUSIVE_RESULT_ADD","console","log","DomScroll","DomObserver","useInfinite","useEffect","SET_EXCLUSIVE_RESULT_EMPTY","useLayoutEffect","SET_EXCLUSIVE_SCROLLTOP","className","ref","small","big","map","item","key","picUrl","Link","to","videoId","id","overflow","src","alt","IconPlayerPlay","size","name"],"mappings":"6QAkBA,mBACE,IAAQA,GAAWC,kBAAXD,OACFE,GAAWC,mBACjB,GAA8BC,kBAAY,qBAAGC,aAArCC,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,UAEVC,GAASC,YAAO,GAChBC,EAAU,mCAAG,gHAEUC,QAAkC,CACzDC,MALQ,GAMRJ,OAAQA,EAAOK,UAJF,gBAEPP,EAFO,EAEPA,OAIRE,EAAOK,SARG,GASVX,GC7BgCY,ED6BD,CAC7BR,UC9B2C,CACjDS,KAAMC,KACNF,aDoBmB,gDAWfG,QAAQC,IAAR,MAXe,kCCtBgB,IAACJ,IDsBjB,oBAAH,qDAcVK,GAAuCV,cACvCW,GAAyCX,cAc/C,OAbAY,OAAYX,EAAYS,EAAWC,IACnCE,gBAAU,WACO,SAAXtB,EACFE,ECpCwC,CAC5Ca,KAAMQ,ODqCFJ,EAAUN,QAAQN,UAAYA,IAE/B,KACHiB,sBAAgB,kBAAM,WCrCa,IAACV,EDsClCZ,GCtCkCY,EDsCH,CAC7BP,UAAWY,EAAUN,QAAQN,WCvCgB,CACjDQ,KAAMU,KACNX,gBDuCG,IAED,yBAAKY,UAAU,2BAA2BC,IAAKR,GAC7C,yBAAKO,UAAU,YACb,yBAAKA,UAAU,WAAf,QACA,kBAAC,IAAD,CAAWA,UAAU,aAAaE,MAAM,cAAcC,IAAI,eAEpDvB,EAAOwB,KAAI,SAACC,GAAD,OACT,yBAAKC,IAAKD,EAAKE,QACb,kBAAC,EAAAC,KAAD,CACEC,GAAIJ,EAAKK,QAAL,wBAAgCL,EAAKK,SAArC,qBAA+DL,EAAKM,IACxEX,UAAU,qEAEV,kBAAC,KAAD,CAAUY,UAAQ,GAChB,yBAAKC,IAAKR,EAAKE,OAAQP,UAAU,6BAA6Bc,IAAI,MAEpE,0BAAMd,UAAU,uHACd,kBAAC,EAAAe,eAAD,CAAgBC,KAAM,GAAIhB,UAAU,mBAGxC,yBAAKA,UAAU,QACb,kBAAC,EAAAQ,KAAD,CAAMC,GAAE,qBAAgBJ,EAAKM,IAAMX,UAAU,+BAC1CK,EAAKY,YAOpB,yBAAKhB,IAAKP","file":"Exclusive.3da26d78.js","sourcesContent":["import React, {\n  RefObject,\n  useEffect, useLayoutEffect, useRef, useState,\n} from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport LazyLoad from 'react-lazyload';\nimport { IconPlayerPlay } from '@tabler/icons';\nimport { apiPersonalizedPrivatecontentList } from '@/api';\nimport {\n  setExclusiveResultAdd,\n  setExclusiveResultEmpty,\n  setExclusiveScrollTop,\n} from '@/reducers/exclusive/actions';\nimport useInfinite from '@/hooks/useInfinite';\nimport { useDispatch, useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport DomReisze from '@/components/ResizeObserver';\n\nexport default () => {\n  const { action } = useHistory();\n  const dispatch = useDispatch();\n  const { result, scrollTop } = useSelector(({ exclusive }) => exclusive);\n  const limit = 60;\n  const offset = useRef(0);\n  const handleInit = async () => {\n    try {\n      const { result } = await apiPersonalizedPrivatecontentList({\n        limit,\n        offset: offset.current,\n      });\n      offset.current += limit;\n      dispatch(setExclusiveResultAdd({\n        result,\n      }));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const DomScroll: RefObject<HTMLDivElement> = useRef();\n  const DomObserver: RefObject<HTMLDivElement> = useRef();\n  useInfinite(handleInit, DomScroll, DomObserver);\n  useEffect(() => {\n    if (action === 'PUSH') {\n      dispatch(setExclusiveResultEmpty());\n    } else {\n      DomScroll.current.scrollTop = scrollTop;\n    }\n  }, []);\n  useLayoutEffect(() => () => {\n    dispatch(setExclusiveScrollTop({\n      scrollTop: DomScroll.current.scrollTop,\n    }));\n  }, []);\n  return (\n    <div className=\"overflow-auto p-8 h-full\" ref={DomScroll}>\n      <div className=\"ui_w1100\">\n        <div className=\"h1 pb-4\">独家放送</div>\n        <DomReisze className=\"grid gap-5\" small=\"grid-cols-2\" big=\"grid-cols-3\">\n          {\n              result.map((item) => (\n                <div key={item.picUrl}>\n                  <Link\n                    to={item.videoId ? `/player/video/${item.videoId}` : `/player/mv/${item.id}`}\n                    className=\"flex relative rounded border overflow-hidden ui_aspect-ratio-24/9\"\n                  >\n                    <LazyLoad overflow>\n                      <img src={item.picUrl} className=\"w-full h-full object-cover\" alt=\"\" />\n                    </LazyLoad>\n                    <span className=\"ico absolute top-2 left-2 rounded-full text-white w-6 h-6 bg-black bg-opacity-40 flex-center border border-gray-200\">\n                      <IconPlayerPlay size={14} className=\"fill-current\" />\n                    </span>\n                  </Link>\n                  <div className=\"mt-2\">\n                    <Link to={`/player/mv/${item.id}`} className=\"text-sm ui_text_black_hover\">\n                      {item.name}\n                    </Link>\n                  </div>\n                </div>\n              ))\n            }\n        </DomReisze>\n        <div ref={DomObserver} />\n      </div>\n    </div>\n  );\n};\n","import { SET_EXCLUSIVE_RESULT_ADD, SET_EXCLUSIVE_RESULT_EMPTY, SET_EXCLUSIVE_SCROLLTOP } from './actionTypes';\n\nexport const setExclusiveResultAdd = (payload) => ({\n  type: SET_EXCLUSIVE_RESULT_ADD,\n  payload,\n});\n\nexport const setExclusiveResultEmpty = () => ({\n  type: SET_EXCLUSIVE_RESULT_EMPTY,\n});\n\nexport const setExclusiveScrollTop = (payload) => ({\n  type: SET_EXCLUSIVE_SCROLLTOP,\n  payload,\n});\n"],"sourceRoot":""}