{"version":3,"file":"download.worker.a54eaec8.worker.js","mappings":"qBAMAA,EAAOC,QANP,SAAyBC,EAAUC,GACjC,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,sCAKxBJ,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQI,YAAa,G,QCPxE,SAASC,EAAkBC,EAAQC,GACjC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CACrC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAUlDX,EAAOC,QANP,SAAsBE,EAAae,EAAYC,GAG7C,OAFID,GAAYZ,EAAkBH,EAAYiB,UAAWF,GACrDC,GAAab,EAAkBH,EAAagB,GACzChB,GAITH,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQI,YAAa,G,QCFxEL,EAAOC,QAfP,SAAyBoB,EAAKJ,EAAKK,GAYjC,OAXIL,KAAOI,EACTN,OAAOC,eAAeK,EAAKJ,EAAK,CAC9BK,MAAOA,EACPV,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZO,EAAIJ,GAAOK,EAGND,GAITrB,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQI,YAAa,ICfpEkB,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAazB,QAGrB,IAAID,EAASuB,EAAyBE,GAAY,CAGjDxB,QAAS,IAOV,OAHA2B,EAAoBH,GAAUzB,EAAQA,EAAOC,QAASuB,GAG/CxB,EAAOC,Q,mBCrBA,SAAS4B,EAAuBR,GAC7C,OAAOA,GAAOA,EAAIhB,WAAagB,EAAM,CACnC,QAAWA,G,wCC6CTS,GA/CcC,KA+CJ,IA9CVC,WAGJ,cAAc,uDADS,U,yCAMvB,SAAKC,GAAa,WAEhBC,KAAKC,KAAO,IAAIC,eAChBF,KAAKC,KAAKE,KAAK,MAAOJ,GAGtBC,KAAKC,KAAKG,aAAe,OACzBJ,KAAKC,KAAKI,iBAAiB,YAAY,YAAuB,IACtDC,EADsD,EAApBC,OAAoB,EAAZC,MAEhDC,QAAQC,IAAI,WAAZ,UAAsC,IAAXJ,EAA3B,MACAT,KAAKc,YAAY,CAAEC,SAAU,WAAYN,SAAAA,OAG3CN,KAAKC,KAAKI,iBAAiB,oBAAoB,WAEd,IAAzB,EAAKJ,KAAKY,YAAyC,MAArB,EAAKZ,KAAKa,SAG9CjB,KAAKc,YAAY,CACfC,SAAU,QACVG,MAAO,MACPC,SAAU,EAAKf,KAAKe,WAKtBnB,KAAKoB,YAEPjB,KAAKC,KAAKA,S,mBAGZ,WACEQ,QAAQC,IAAI,SACZV,KAAKC,KAAKiB,QACVrB,KAAKoB,Y,EA1CHnB,KAgDND,KAAKQ,iBAAiB,WAAW,SAACc,GAChC,MAAwBA,EAAIC,KAApBC,EAAR,EAAQA,OAAQtB,EAAhB,EAAgBA,IAChBH,EAAQyB,GAAQtB,O","sources":["webpack://wyy/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://wyy/./node_modules/@babel/runtime/helpers/createClass.js","webpack://wyy/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://wyy/webpack/bootstrap","webpack://wyy/./node_modules/@babel/runtime/helpers/esm/interopRequireDefault.js","webpack://wyy/./src/pages/Player/Download/download.worker.ts"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","export default function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}","const ctx: Worker = self as any\nclass Module {\n  send: any\n  targetOrigin: string = 'player'\n  constructor() {\n    // this.url = null;\n    // this.send = null;\n  }\n\n  init(url: string) {\n    // this.url = url;\n    this.send = new XMLHttpRequest();\n    this.send.open('GET', url);\n\n    // this.send.setRequestHeader('Content-Type', 'blob');\n    this.send.responseType = 'blob';\n    this.send.addEventListener('progress', ({ loaded, total }) => {\n      const progress = loaded / total;\n      console.log('progress', `${progress * 100}%`);\n      self.postMessage({ callback: 'progress', progress });\n      // setDownloadProcess(progress);\n    });\n    this.send.addEventListener('readystatechange', () => {\n      // console.log(this.send);\n      if (!(this.send.readyState === 4 && this.send.status === 200)) return;\n      // console.log('finish', this.send.response);\n      // setDownloadState('已缓存');\n      self.postMessage({\n        callback: 'state',\n        state: '已缓存',\n        response: this.send.response,\n      });\n      // RefAjax.current = null;\n      // handleCreateFile();\n      // this.create();\n      self.close();\n    });\n    this.send.send();\n  }\n\n  abort() {\n    console.log('终止下载！');\n    this.send.abort();\n    self.close();\n  }\n}\n\nconst methods = new Module();\n\nself.addEventListener('message', (req) => {\n  const { method, url } = req.data;\n  methods[method](url);\n});\n"],"names":["module","exports","instance","Constructor","TypeError","__esModule","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","obj","value","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","_interopRequireDefault","methods","self","Module","url","this","send","XMLHttpRequest","open","responseType","addEventListener","progress","loaded","total","console","log","postMessage","callback","readyState","status","state","response","close","abort","req","data","method"],"sourceRoot":""}